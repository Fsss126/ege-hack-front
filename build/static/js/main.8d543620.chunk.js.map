{"version":3,"sources":["img/logo.svg","definitions/polyfills.js","definitions/api.js","definitions/auth.js","components/common/CoverImage.jsx","components/Header.jsx","components/common/Contacts.jsx","components/SideBar.jsx","definitions/constants.js","data/test_data.js","store/index.js","components/Page.jsx","hooks/common.js","components/pages/login/LoginPage.jsx","components/common/UserProfile.jsx","components/pages/account/AccountPage.jsx","components/common/ListItem.jsx","components/common/List.jsx","components/ui/ScrollBars.jsx","components/ui/Select.jsx","components/ui/Input.jsx","components/common/Catalog.jsx","components/common/Teacher.jsx","components/pages/teachers/catalog-page/TeachersCatalog.jsx","components/pages/teachers/catalog-page/TeachersCatalogPage.jsx","components/ui/Button.jsx","components/ErrorPage.jsx","components/common/CourseCatalog.jsx","definitions/helpers.js","components/common/Course.jsx","components/pages/teachers/teacher-page/TeacherPage.jsx","components/pages/teachers/index.jsx","components/pages/shop/catalog-page/SelectedCoursesTab.jsx","components/pages/shop/catalog-page/ShopCatalogPage.jsx","components/common/CourseOverview.jsx","components/pages/shop/course-page/CoursePriceTab.jsx","components/common/VideoCover.jsx","components/common/Lesson.jsx","components/pages/shop/course-page/CoursePage.jsx","components/pages/shop/index.jsx","components/pages/courses/catalog-page/CatalogPage.jsx","components/pages/courses/course-page/CoursePage.jsx","components/ui/Tooltip.jsx","components/ui/LoadingIndicator.jsx","components/ui/File.jsx","components/common/VideoPlayer.jsx","components/common/StableCSSTransition.jsx","components/ui/FileInput.jsx","components/common/NavigationBlocker.jsx","components/pages/courses/lesson-page/HomeworkLoader.jsx","components/pages/courses/lesson-page/LessonView.jsx","components/pages/courses/lesson-page/LessonPage.jsx","components/pages/courses/index.jsx","components/App.jsx","serviceWorker.js","index.js","img/dummy_poster.jpg"],"names":["module","exports","__webpack_require__","p","elementClosest","window","API_ROOT","APIRequest","axios","create","baseURL","interceptors","request","use","config","Auth","user","_objectSpread","auth","username","uid","password","hash","Cancel","response","data","LOCAL_STORAGE_KEY","AuthEventTypes","login","logout","initVK","_this","this","Object","classCallCheck","eventHandlers","_ref","asyncToGenerator","regenerator_default","a","mark","_callee","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","wrap","_context","prev","next","VK","abrupt","init","apiId","process","console","info","localStorage","setItem","JSON","stringify","undefined","Symbol","iterator","done","handler","value","t0","return","finish","stop","_x","apply","arguments","removeItem","userInfo","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","err","storedString","getItem","storedData","parse","first_name","last_name","photo","photo_rec","Error","concat","e","error","eventType","push","filter","func","get","_context2","elementId","Widgets","onAuth","CoverImage","src","className","children","_ref$square","square","_ref$round","round","react_default","createElement","style","backgroundImage","Header","props","onMenuButtonClick","sidebar","onClick","logo","alt","Fragment","common_CoverImage","react_router_dom","to","tabIndex","Contacts","_ref$contacts","contacts","vk","fb","ok","ig","href","Link","assign","activeClassName","SideBar","event","target","currentTarget","classList","contains","onMenuClose","React","Component","LEARNING_STATUS","learning","finished","lorem","LoremIpsum","getDate","daysForward","date","Date","setDate","SUBJECTS","id","name","TEACHERS","vk_info","photo_max_orig","subjects","description","image_link","poster","slice","bio","generateSentences","COURSES","map","subject","i","subject_id","online","date_start","date_end","generateParagraphs","lessons","_","times","j","num","video_link","locked","hometask","files","url","deadline","teacher_ids","SHOP_CATALOG","catalog","course","test_data_objectSpread","price","discount","MY_COURSES","lesson","watchProgress","homework","submit","submittedFiles","original_file_name","id_file_name","file_link","status","StoreContext","createContext","useShopCatalogStore","useState","useSubjectsStore","useTeachersStore","useLessonsStore","requests","useSubjects","_React$useContext","useContext","setSubjects","setters","_React$useState5","_React$useState6","slicedToArray","setError","fetchSubjects","useCallback","_callee2","_subjects","sent","useEffect","retry","useTeachers","_useSubjects","errorLoadingSubjects","reloadSubjects","_React$useContext2","teachers","setTeachers","_React$useState7","_React$useState8","fetchTeachers","_callee3","_teachers","_context3","_ref4","store_objectSpread","account_id","objectWithoutProperties","log","t1","useShopCatalog","_useSubjects2","_React$useContext3","setCatalog","_React$useState9","_React$useState10","fetchCatalog","_callee4","_catalog","_context4","shopCatalog","params","group","_ref6","teacher_id","rest","GlobalStore","_ref8","_useUserAuth","_React$useState","getUser","_React$useState2","setUser","_React$useState3","_React$useState4","setUserInfo","getUserInfo","fetchUserInfo","loginCallback","logoutCallback","useLayoutEffect","subscribe","unsubscribe","useUserAuth","_useUserAuth2","_useShopCatalogStore","_useShopCatalogStore2","_useSubjectsStore","_useSubjectsStore2","_useTeachersStore","_useTeachersStore2","_useLessonsStore","_useLessonsStore2","setLessons","useStoreData","Provider","useUser","_React$useContext5","PageLoadingPlaceholder","PageLink","_ref$arrow","arrow","_ref$forward","forward","PageContent","_ref2","parentSection","Page_PageLink","BottomTab","_ref3","stickyProps","lib_default","mode","Page","title","_ref4$checkLogin","checkLogin","location","_useUser","react_router","pathname","state","referrer","Helmet","useTruncate","text","descriptionRef","useRef","document","readyState","isFontLoaded","setFontLoaded","addEventListener","handleResize","removeEventListener","handleLoading","current","onResize","useRefValue","initialValue","ref","useUpdateEffect","effect","dependencies","length","isInitialMount","LoginPage","loginWidget","components_Page","UserProfile","about","role","fullName","AccountPage","Page_PageContent","common_UserProfile","ListItem","preview","subtitle","item","selectable","action","link","clickCallback","actionCallback","onActionClick","callbackProps","_useTruncate","_useTruncate2","clicked","closest","preventDefault","content","Truncate","lines","List","renderItem","renderProps","flex","index","defaultProps","key","renderTrackVertical","renderThumbVertical","renderTrackHorizontal","renderThumbHorizontal","ScrollBars","forwardRef","react_custom_scrollbars_lib","DropdownIndicator","react_select_esm","SelectContainer","selectProps","hasValue","setValue","Select_objectSpread","isClearable","Option","label","MenuList","innerRef","scrollBar","view","ui_ScrollBars","autoHeight","hideTracksWhenNotNeeded","autoHeightMax","maxHeight","Select","onChange","option","_this2","callback","_this$props","options","components","_this$props$isClearab","_this$props$isSearcha","isSearchable","placeholder","maxMenuHeight","find","classNamePrefix","menuPlacement","noOptionsMessage","styles","PureComponent","useChangeHandler","inputProp","Input","CheckBox","type","checked","CatalogContext","common_Catalog","Filter","_ref$filterBy","filterBy","_ref$filterBy$subject","filterBySubject","_ref$filterBy$online","filterByOnline","ui_Input","Catalog","renderFunc","listProps","baseUrl","items","Catalog_objectSpread","Body","filterItems","_props$renderProps","history","useHistory","useLocation","URLSearchParams","search","parseInt","onFilterChange","set","delete","matchingItems","Teacher","_props$teacher","teacher","_props$teacher$vk_inf","teacherSubjects","_props$bio","toLowerCase","join","catalog_page_TeachersCatalog","renderTeacher","otherProps","useMemo","zipObject","subjectsTeachers","reduce","result","forEach","values","getMatchingCourses","some","TeachersCatalogPage","_useTeachers","Page_PageLoadingPlaceholder","Button","_ref$active","active","_ref$neutral","neutral","icon","iconAction","_ref$tag","tag","Tag","ErrorPage","errorCode","message","_ref$link","code","toString","split","number","ui_Button","replace","common_CourseCatalog","renderCourse","courses","daysBetween","date1","date2","date1_ms","getYear","getMonth","getTime","difference_ms","Math","floor","renderDate","locale","toLocaleString","day","month","shortDate","hour","minute","downloadFile","blob","navigator","msSaveBlob","fetch","then","r","download","MouseEvent","dispatchEvent","_x2","Course","_ref$online","_ref$isSelected","isSelected","startsIn","TeacherPage","param_id","match","root","path","_useShopCatalog","minWidth","_teacher$vk_info","teachersCourses","indexOf","profile","components_ErrorPage","Teachers","render","teacher_page_TeacherPage","exact","catalog_page_TeachersCatalogPage","SelectedCourse","onCourseDeselect","onTruncate","onDeselectClick","renderView","SelectedCoursesTab_objectSpread","height","minHeight","SelectedCoursesTab","sumBy","Page_BottomTab","TransitionGroup","CSSTransition","classNames","timeout","SelectedCoursesTab_SelectedCourse","Event","ShopCatalogPage","selectedCourses","onCourseSelect","onCourseClick","has","catalog_page_SelectedCoursesTab","toConsumableArray","CourseOverviewContext","common_CourseOverview","total_hours","renderLesson","_React$useContext4","CoursePriceTab","_React$useContext$cou","VideoCover","cover","_ref$locked","width","Lesson","common_VideoCover","CoursePage","courseId","_useLessons","_React$useState11","_React$useState12","fetchLessons","_ref7","_callee5","_lessons","_context5","loadedLessons","defineProperty","useLessons","course_page_CoursePriceTab","Shop","Set","add","setState","catalog_page_ShopCatalogPage","component","course_page_CoursePage","CatalogPage","Tooltip","child","Children","only","position","cloneElement","react","LOADING_STATE","PENDING","LOADING","LOADED","SUCCESS","DONE","REJECTED","ERROR","useLoadingState","loading","rejected","setTimeout","clearTimeout","LoadingIndicator","errorMessage","SwitchTransition","appear","ui_Tooltip","File","_ref$file","file","downloadName","_ref$error","_ref$rejected","_ref$loading","_ref$done","_ref$deletable","deletable","onDelete","onIndicatorClick","downloadCallback","isUpload","LoadingIndicator_LoadingIndicator","VideoPlayer","frameBorder","allow","allowFullScreen","StableCSSTransition","phase","node","getPrototypeOf","prototype","call","appliedClasses","ReactDOM","findDOMNode","FILE_STATUS","FileInputContext","allFilesReady","every","f","meta","isFileReady","getUploadParams","headers","Authorization","btoa","getFileProp","filename","getFilesFromEvent","accept","multiple","disabled","onFiles","maxFiles","extra","chosenFiles","isActive","Preview","_props$fileWithMeta","fileWithMeta","cancel","remove","restart","xhr","_props$meta","_props$meta$name","_props$meta$percent","percent","canRemove","_useRefValue","_useRefValue2","getResponse","setResponse","responseText","_JSON$parse","deleteCallback","hasError","startsWith","isRejected","isDone","ui_File","SubmitButton","submitting","hasChanged","onSubmit","isDisabled","submitCallback","common_StableCSSTransition","in","mountOnEnter","unmountOnExit","Layout","input","_ref4$previews","previews","submitButton","dropzoneProps","_ref5","_ref5$preloadedFiles","preloadedFiles","deletePreloadedFile","getCallbackFiles","FileInput","_props$initialFiles","initialFiles","_props$inputContent","inputContent","_props$maxFiles","_props$maxSizeBytes","maxSizeBytes","_props$isDisabled","setPreloadedFiles","setChanged","setSubmitting","_useRefValue3","_useRefValue4","getInputFiles","setInputFiles","newPreloadedFiles","handleChangeStatus","cloneDeep","handleSubmit","filesToSubmit","returnValue","Promise","react_dropzone_uploader_default","submitButtonContent","onChangeStatus","canCancel","SubmitButtonComponent","LayoutComponent","InputComponent","PreviewComponent","NavigationBlocker","unloadCallback","HomeworkLoader","lessonId","isHomeworkSubmissionClosed","hasChanges","setChanges","method","common_NavigationBlocker","ui_FileInput","LessonView","_ref$lesson","video","common_VideoPlayer","assignment","lesson_page_HomeworkLoader","LessonPage","_props$match$params","param_course","param_lesson","selectedLesson","nextVideo","otherLessons","sortBy","lesson_page_LessonView","MyCourses","lesson_page_LessonPage","courses_course_page_CoursePage","catalog_page_CatalogPage","useLocationChangeEffect","listen","onLocationChange","args","App","useForceTrailingSlash","getPrevPath","setPrevPath","scrollTo","useScrollToTop","_useSideBarState","isSideBarOpened","setSideBar","opened","useSideBarState","_useSideBarState2","toggleSideBar","showSidebar","components_Header","layoutAnimationClassNames","SideBar_SideBar","Login","Account","enter","enterActive","enterDone","exit","exitActive","Boolean","hostname","basename","store","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.8d543620.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.54b51040.svg\";","import 'react-app-polyfill/ie11';\r\nimport 'react-app-polyfill/stable';\r\nimport elementClosest  from 'element-closest';\r\n\r\nelementClosest(window);\r\n","import Auth from 'definitions/auth';\r\nimport axios from 'axios';\r\n\r\nexport const API_ROOT = 'https://egehackbottest.tk:8080';\r\n\r\nconst APIRequest = axios.create({\r\n    baseURL: API_ROOT\r\n});\r\n\r\nAPIRequest.interceptors.request.use(function (config) {\r\n    if (Auth.user) {\r\n        return {\r\n            auth: {\r\n                username: Auth.user.uid,\r\n                password: Auth.user.hash\r\n            },\r\n            ...config\r\n        }\r\n    }\r\n    else\r\n        throw new axios.Cancel('User not logged in.');\r\n});\r\n\r\nAPIRequest.interceptors.response.use(function (response) {\r\n    return response.data;\r\n});\r\n\r\nwindow.APIRequest = APIRequest;\r\n\r\nexport default APIRequest;\r\n","/*global VK*/\r\nimport APIRequest from \"definitions/api\";\r\n\r\nconst LOCAL_STORAGE_KEY = 'ege-hack-user-data';\r\n\r\nexport const AuthEventTypes = {\r\n    login: 'auth.login',\r\n    logout: 'auth.logout'\r\n};\r\n\r\nconst initVK = false;\r\n\r\nclass Auth {\r\n    user = null;\r\n\r\n    constructor() {\r\n        try {\r\n            const storedString = localStorage.getItem(LOCAL_STORAGE_KEY);\r\n            if (!storedString) {\r\n                this.user = null;\r\n                return;\r\n            }\r\n            const storedData = JSON.parse(storedString);\r\n            const {uid, first_name, last_name, photo, photo_rec, hash} = storedData;\r\n            if (!(uid && hash))\r\n                throw new Error(`Incomplete data parsed from local storage: ${storedString}`);\r\n            this.user = {uid, first_name, last_name, photo, photo_rec, hash};\r\n        }\r\n        catch (e) {\r\n            console.error('User data can not be recovered', e);\r\n            localStorage.removeItem(LOCAL_STORAGE_KEY);\r\n            this.user = null;\r\n        }\r\n    }\r\n\r\n    eventHandlers = {};\r\n\r\n    login = async (user) => {\r\n        if (!VK)\r\n            return;\r\n        if (!initVK)\r\n            VK.init({apiId: process.env.REACT_APP_VK_APP_ID});\r\n        // user = {\r\n        //     ...user,\r\n        //     uid: 1,\r\n        //     hash: '68ab57e7e70fae3f8f96afc0d85465a9'\r\n        // };\r\n        console.info('Login', user);\r\n        localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(user));\r\n        this.user = user;\r\n        // await this.getUserInfo();\r\n        // if (!this.userInfo)\r\n        //     return;\r\n        for(let handler of (this.eventHandlers[AuthEventTypes.login] || []))\r\n            handler(this.user);\r\n    };\r\n\r\n    logout = () => {\r\n        // VK.Auth.logout((data) => {\r\n            console.info('Logout');\r\n            localStorage.removeItem(LOCAL_STORAGE_KEY);\r\n            this.user = null;\r\n            this.userInfo = null;\r\n            for(let handler of (this.eventHandlers[AuthEventTypes.logout] || []))\r\n                handler();\r\n        // });\r\n    };\r\n\r\n    subscribe(eventType, handler) {\r\n        (this.eventHandlers[eventType] || (this.eventHandlers[eventType] = [])).push(handler);\r\n    }\r\n\r\n    unsubscribe(eventType, handler) {\r\n        this.eventHandlers[eventType] = this.eventHandlers[eventType].filter(func => func !== handler);\r\n    }\r\n\r\n    // subscribe(eventType, handler) {\r\n    //     VK.Observer.subscribe(eventType, handler);\r\n    // }\r\n    //\r\n    // unsubscribe(eventType, handler) {\r\n    //     VK.Observer.unsubscribe(eventType, handler);\r\n    // }\r\n\r\n    getUser() {\r\n        return this.user;\r\n    }\r\n\r\n    async getUserInfo() {\r\n        if (this.userInfo)\r\n            return this.userInfo;\r\n        try {\r\n            this.userInfo = await APIRequest.get('/accounts/info');\r\n        }\r\n        catch (e) {\r\n            console.error(e);\r\n            this.userInfo = null;\r\n        }\r\n        return this.userInfo;\r\n    }\r\n\r\n    loginWidget(elementId) {\r\n        if (!VK)\r\n            return;\r\n        if (!initVK)\r\n            VK.init({apiId: process.env.REACT_APP_VK_APP_ID});\r\n        VK.Widgets.Auth(elementId, {onAuth: this.login});\r\n    }\r\n}\r\n\r\nexport default new Auth();\r\n","import React from 'react';\r\n\r\nconst CoverImage = ({src, className, children, square=false, round=false}) => {\r\n    return (\r\n        <div className={`${className} cover ${square ? 'square-cover' : ''} ${round ? 'round-cover' : ''}`}>\r\n            <div className=\"cover-img\" style={{backgroundImage: `url(${src})`}}/>\r\n            {children}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CoverImage;\r\n","import React from 'react';\r\nimport logo from 'img/logo.svg';\r\nimport Auth from 'definitions/auth';\r\nimport {Link} from 'react-router-dom';\r\nimport CoverImage from \"./common/CoverImage\";\r\n\r\nconst Header = (props) => {\r\n    const {onMenuButtonClick, user, sidebar} = props;\r\n    return (\r\n        <header>\r\n            <div className=\"container-fluid header__container\">\r\n                <div className=\"row\">\r\n                    {sidebar && (\r\n                        <div className=\"col-auto d-lg-none\">\r\n                            <div className=\"nav-btn\" onClick={onMenuButtonClick}>\r\n                                <i className=\"icon-bars\"/>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                    <div className=\"col d-flex justify-content-center justify-content-lg-start p-0\">\r\n                        <div className=\"logo-container container d-flex align-items-center justify-content-center m-0\">\r\n                            <img src={logo} className=\"logo\" alt=\"Logo\"/>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"col-auto\">\r\n                        <div className=\"user-nav\">\r\n                            {user ? (\r\n                                <React.Fragment>\r\n                                    <div className=\"user-nav__user-name\">{user.first_name} {user.last_name}</div>\r\n                                    {user.photo_rec ? (\r\n                                        <div className=\"nav-btn\">\r\n                                            <CoverImage src={user.photo_rec} round square/>\r\n                                        </div>\r\n                                    ) : (\r\n                                        <div className=\"nav-btn\">\r\n                                            <i className=\"icon-profile\"/>\r\n                                        </div>\r\n                                    )}\r\n                                    <div className=\"user-nav__menu-container\">\r\n                                        <div className=\"user-nav__menu\">\r\n                                            <div className=\"user-nav__menu-options\">\r\n                                                <Link to=\"/account/\" className=\"menu-option\">\r\n                                                    <i className=\"icon-profile\"/>Аккаунт\r\n                                                </Link>\r\n                                                <Link to=\"/account/settings/\" className=\"menu-option\">\r\n                                                    <i className=\"icon-settings\"/>Настройки\r\n                                                </Link>\r\n                                                <div\r\n                                                    className=\"menu-option\"\r\n                                                    tabIndex={2}\r\n                                                    onClick={Auth.logout}>\r\n                                                    <i className=\"icon-logout\"/>Выход\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </React.Fragment>\r\n                            ) : (\r\n                                <React.Fragment>\r\n                                    <div className=\"nav-btn\">\r\n                                        <i className=\"icon-profile\"/>\r\n                                    </div>\r\n                                    <div className=\"user-nav__menu-container\">\r\n                                        <div className=\"user-nav__menu\">\r\n                                            <div className=\"user-nav__menu-options\">\r\n                                                <Link to=\"/login/\" className=\"menu-option\">\r\n                                                    <i className=\"icon-login\"/>Войти\r\n                                                </Link>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </React.Fragment>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </header>\r\n    );\r\n};\r\n\r\nexport default Header;\r\n","import React from 'react';\r\n\r\nexport default function Contacts({contacts: {vk, fb, ok, ig}}) {\r\n    return (\r\n        <div className=\"social-media font-light-grey\">\r\n            {vk && <a href={vk} className=\"social-media__link\"><i className=\"fab fa-vk vk\"/></a>}\r\n            {fb && <a href={fb} className=\"social-media__link\"><i className=\"fab fa-facebook-f fb\"/></a>}\r\n            {ok && <a href={ok} className=\"social-media__link\"><i className=\"fab fa-odnoklassniki ok\"/></a>}\r\n            {ig && <a href={ig} className=\"social-media__link\"><i className=\"fab fa-instagram ig\"/></a>}\r\n        </div>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport { NavLink } from \"react-router-dom\";\r\nimport Contacts from \"./common/Contacts\";\r\n\r\nfunction Link(props) {\r\n    return <NavLink className=\"layout__sidebar-menu-link\" activeClassName=\"active\" {...props}/>;\r\n}\r\n\r\nexport default class SideBar extends React.Component{\r\n    onClick = (event) => {\r\n        if (event.target === event.currentTarget || event.target.classList.contains('layout__sidebar-menu-link'))\r\n            this.props.onMenuClose();\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"layout__sidebar\" onClick={this.onClick}>\r\n                <div className=\"layout__sidebar-bar\">\r\n                    <div className=\"layout__sidebar-content\">\r\n                        <div className=\"layout__sidebar-menu\">\r\n                            <div className=\"layout__sidebar-menu-section\">\r\n                                <Link to=\"/courses/\">Мои курсы</Link>\r\n                                {/*<Link to=\"/homework/\">Домашняя работа</Link>*/}\r\n                            </div>\r\n                            <div className=\"layout__sidebar-menu-section\">\r\n                                <Link to=\"/shop/\">Магазин курсов</Link>\r\n                                <Link to=\"/teachers/\">Преподаватели</Link>\r\n                                {/*<Link to=\"/about/\">О нас</Link>*/}\r\n                            </div>\r\n                        </div>\r\n                        <Contacts contacts={{vk: '/', fb: '/', ig: '/'}}/>\r\n                        <div className=\"layout__sidebar-copyright font-size-sm font-light-grey\">\r\n                            Все права защищены<br/>\r\n                            \"ЕГЭHACK\"\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","export const LEARNING_STATUS = {\r\n  learning: 'learning',\r\n  finished: 'finished'\r\n};\r\n\r\nexport const DEFAULT_LOGIN_REDIRECT = '/shop/';\r\n","import {LoremIpsum} from \"lorem-ipsum\";\r\nimport poster from \"../img/dummy_poster.jpg\";\r\nimport _ from \"lodash\";\r\nimport {LEARNING_STATUS} from \"../definitions/constants\";\r\n\r\nconst lorem = new LoremIpsum();\r\n\r\nfunction getDate(daysForward) {\r\n    const date = new Date();\r\n    date.setDate(date.getDate() + daysForward);\r\n    return date;\r\n}\r\n\r\nexport const SUBJECTS = [\r\n    // { id: 'russian', name: 'Русский язык' },\r\n    // { id: 'literature', name: 'Литература' },\r\n    // { id: 'math', name: 'Математика' },\r\n    // { id: 'informatics', name: 'Информатика' },\r\n    // { id: 'physics', name: 'Физика' },\r\n    // { id: 'chemistry', name: 'Химия' },\r\n    // { id: 'biology', name: 'Биология' },\r\n    // { id: 'sociology', name: 'Обществознание' },\r\n    // { id: 'history', name: 'История' },\r\n    // { id: 'geography', name: 'География' },\r\n    // { id: 'english', name: 'Английский язык' },\r\n    // { id: 'german', name: 'Немецкий язык' },\r\n    // { id: 'french', name: 'Французский язык' },\r\n    // { id: 'chinese', name: 'Китайский язык' },\r\n    // { id: 'spanish', name: 'Испанский язык' }\r\n    { id: 1, name: 'Русский язык' },\r\n    { id: 2, name: 'Литература' },\r\n    { id: 3, name: 'Математика' },\r\n    { id: 4, name: 'Информатика' },\r\n    { id: 5, name: 'Физика' },\r\n    { id: 6, name: 'Химия' },\r\n    { id: 7, name: 'Биология' },\r\n    { id: 8, name: 'Обществознание' },\r\n    { id: 9, name: 'История' },\r\n    { id: 10, name: 'География' },\r\n    { id: 11, name: 'Английский язык' },\r\n    { id: 12, name: 'Немецкий язык' },\r\n    { id: 13, name: 'Французский язык' },\r\n    { id: 14, name: 'Китайский язык' },\r\n    { id: 15, name: 'Испанский язык' }\r\n];\r\n\r\nexport const TEACHERS = [\r\n    {\r\n        id: 154792439,\r\n        vk_info: {\r\n            id: 154792439,\r\n            first_name: \"Alexandra\",\r\n            last_name: \"Petrova\",\r\n            photo_max_orig: \"https://sun9-44.userapi.com/2Gx1eh3eOObO2tKqf0h3fuCDU0GEOjenhYUrjg/Q8hXPVStYbc.jpg?ava=1\"\r\n        },\r\n        subjects: [\r\n            {\r\n                id: 1,\r\n                name: \"Математика\",\r\n                description: \"Лучший предмет\",\r\n                image_link: \"/files/asdsadasda.jpg\"\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        id: 1,\r\n        vk_info: {\r\n            id: 1,\r\n            first_name: 'Елена',\r\n            last_name: 'Черткова',\r\n            photo_max_orig: poster,\r\n        },\r\n        subjects: SUBJECTS.slice(0,2),\r\n        contacts: {vk: '/', fb: '/', ok: '/', ig: '/'},\r\n        bio: lorem.generateSentences(1)\r\n    },\r\n    {\r\n        id: 2,\r\n        vk_info: {\r\n            id: 2,\r\n            first_name: 'Сергей',\r\n            last_name: 'Авдошин',\r\n            photo_max_orig: poster,\r\n        },\r\n        subjects: [SUBJECTS[3]],\r\n        contacts: {vk: '/', fb: '/', ok: '/', ig: '/'},\r\n        bio: lorem.generateSentences(1)\r\n    }\r\n];\r\n\r\nexport const COURSES = SUBJECTS.slice(0, 5).map((subject, i) => ({\r\n    name: `${subject.name}. Мастер группа. Апрель.`,\r\n    id: i,\r\n    subject_id: subject.id,\r\n    online: i <= 2,\r\n    image_link: poster,\r\n    date_start: getDate(7 + i),\r\n    date_end: getDate(7 + i),\r\n    // totalHours: 80,\r\n    description: lorem.generateParagraphs(1),\r\n    lessons: _.times(4, (j) => ({\r\n        num: j + 1,\r\n        id: j,\r\n        // date: getDate(-4 + i + j),\r\n        name: `Занятие ${j + 1}`,\r\n        description: lorem.generateParagraphs(1),\r\n        image_link: poster,\r\n        video_link: '375255364',\r\n        locked: -4 + i + j > 0,\r\n        hometask: {\r\n            description: lorem.generateParagraphs(1),\r\n            files: [\r\n                {name: \"Задание\", url: \"/robots.txt\"},\r\n                {name: \"Дополнительное задание\", url: \"/robots.txt\"}\r\n            ],\r\n            deadline: new Date(0)\r\n        }\r\n    })),\r\n    teacher_ids: i <= 2 ? [TEACHERS[0].id] : TEACHERS.map(({id}) => id)\r\n}));\r\n\r\nexport const SHOP_CATALOG = {\r\n    catalog: COURSES.map((course, i) => ({...course, price: 2500, discount: i === 0 ? 1000 : undefined})),\r\n    // promotions: [{\r\n    //\r\n    // }]\r\n};\r\n\r\nexport const MY_COURSES = COURSES.map((course, i) => ({\r\n    ...course,\r\n    lessons: course.lessons.map((lesson, j) => ({\r\n        ...lesson,\r\n        watchProgress: lesson.locked ? undefined : (100 - j * 15),\r\n        homework: {\r\n            files: [\r\n                {name: \"Задание\", url: \"/robots.txt\"},\r\n                {name: \"Дополнительное задание\", url: \"/robots.txt\"}\r\n            ],\r\n            description: lorem.generateParagraphs(1),\r\n            deadline: getDate(7),\r\n            submit: true,\r\n            submittedFiles: [\r\n                {\r\n                    \"original_file_name\": \"5_64x64.png\",\r\n                    \"id_file_name\": \"501371cc-f349-11e9-aa47-7990bff4dcd7.png\",\r\n                    \"file_link\": \"/files/601371cc-f349-11e9-aa47-7990bff4dcd7.png\"\r\n                }\r\n            ]\r\n        }\r\n    })),\r\n    status: i <= 2 ? LEARNING_STATUS.finished : LEARNING_STATUS.learning\r\n}));\r\n\r\nexport const TEST_ID = 1;\r\nexport const TEST_HASH = '2d01669a3c8cda169545b4f7b607efb3';\r\n","import React from \"react\";\r\nimport Auth, {AuthEventTypes} from \"../definitions/auth\";\r\nimport {useHistory} from \"react-router-dom\";\r\nimport APIRequest, {API_ROOT} from \"../definitions/api\";\r\nimport {SHOP_CATALOG, SUBJECTS, TEACHERS} from \"../data/test_data\";\r\n\r\nconst StoreContext = React.createContext(null);\r\n\r\nfunction useUserAuth() {\r\n    const [user, setUser] = React.useState(Auth.getUser());\r\n    const [userInfo, setUserInfo] = React.useState(null);\r\n\r\n    React.useEffect(() => {\r\n        const fetchUserInfo = async () => {\r\n            const userInfo = await Auth.getUserInfo();\r\n            // const userInfo = {};\r\n            setUserInfo(userInfo);\r\n        };\r\n        if (user)\r\n            fetchUserInfo();\r\n    }, [user]);\r\n\r\n    // const history = useHistory();\r\n    const loginCallback = React.useCallback((user, userInfo) => {\r\n        setUser(user);\r\n        // setUserInfo(userInfo);\r\n        // history.push('/shop/');\r\n    }, []);\r\n\r\n    const logoutCallback = React.useCallback(() => {\r\n        setUser(null);\r\n        setUserInfo(null);\r\n        // history.push('/login/');\r\n    }, []);\r\n\r\n    React.useLayoutEffect(() => {\r\n        Auth.subscribe(AuthEventTypes.login, loginCallback);\r\n        Auth.subscribe(AuthEventTypes.logout, logoutCallback);\r\n        return () => {\r\n            Auth.unsubscribe(AuthEventTypes.login, loginCallback);\r\n            Auth.unsubscribe(AuthEventTypes.logout, logoutCallback);\r\n        }\r\n    }, [loginCallback, logoutCallback]);\r\n    return [user, userInfo];\r\n}\r\n\r\nconst useShopCatalogStore = () => React.useState(null);\r\nconst useSubjectsStore = () => React.useState(null);\r\nconst useTeachersStore = () => React.useState(null);\r\nconst useLessonsStore = () => React.useState({});\r\n\r\nfunction useStoreData() {\r\n    const [catalog, setCatalog] = useShopCatalogStore();\r\n    const [subjects, setSubjects] = useSubjectsStore();\r\n    const [teachers, setTeachers] = useTeachersStore();\r\n    const [lessons, setLessons] = useLessonsStore();\r\n    return {\r\n        data: {\r\n            catalog,\r\n            subjects,\r\n            teachers,\r\n            lessons\r\n        },\r\n        setters: {\r\n            setCatalog,\r\n            setSubjects,\r\n            setTeachers,\r\n            setLessons\r\n        }\r\n    }\r\n}\r\n\r\nconst requests = {};\r\n\r\nexport function useSubjects() {\r\n    const {data: {subjects}, setters: {setSubjects}} = React.useContext(StoreContext);\r\n    const [error, setError] = React.useState(null);\r\n    const fetchSubjects = React.useCallback(async () => {\r\n        if (requests.subjects)\r\n            return requests.subjects;\r\n        const request = APIRequest.get('/subjects');\r\n        requests.subjects = request;\r\n        try {\r\n            if (error)\r\n                setError(null);\r\n            const subjects = await request;\r\n            // const subjects = SUBJECTS;\r\n            setSubjects(subjects);\r\n        } catch (e) {\r\n            console.error(e);\r\n            setError(e);\r\n        }\r\n        finally {\r\n            delete requests.subjects;\r\n        }\r\n        return request;\r\n    }, [error]);\r\n\r\n    React.useEffect(() => {\r\n        if (!(subjects || requests.subjects || error)) {\r\n            fetchSubjects();\r\n        }\r\n    }, [subjects, error]);\r\n    if (error) {\r\n        return {subjects, error, retry: fetchSubjects};\r\n    }\r\n    else {\r\n        return {subjects};\r\n    }\r\n}\r\n\r\nexport function useTeachers() {\r\n    const {subjects, errorLoadingSubjects, reloadSubjects} = useSubjects();\r\n    const {data: {teachers}, setters: {setTeachers}} = React.useContext(StoreContext);\r\n    const [error, setError] = React.useState(null);\r\n    const fetchTeachers = React.useCallback(async () => {\r\n        if (requests.teachers)\r\n            return requests.teachers;\r\n        const request = APIRequest.get('/accounts/teachers');\r\n        requests.teachers = request;\r\n        try {\r\n            if (error)\r\n                setError(null);\r\n            const teachers = (await request).map(({account_id: id, ...teacher}) => ({id, ...teacher}));\r\n            // const teachers = TEACHERS;\r\n            console.log('set teachers', teachers);\r\n            setTeachers(teachers);\r\n        } catch (e) {\r\n            console.error(e);\r\n            setError(e);\r\n        }\r\n        finally {\r\n            delete requests.teachers;\r\n        }\r\n        return request;\r\n    }, [error]);\r\n\r\n    React.useEffect(() => {\r\n        if (!(teachers || requests.teachers || error)) {\r\n            fetchTeachers();\r\n        }\r\n    }, [teachers, error]);\r\n\r\n    if (error || errorLoadingSubjects) {\r\n        return {\r\n            teachers,\r\n            subjects,\r\n            error: error || errorLoadingSubjects ,\r\n            retry: () => {\r\n                if (error)\r\n                    fetchTeachers();\r\n                if (errorLoadingSubjects)\r\n                    reloadSubjects();\r\n            }\r\n        };\r\n    }\r\n    else {\r\n        return {teachers, subjects};\r\n    }\r\n}\r\n\r\nexport function useShopCatalog() {\r\n    const {subjects, errorLoadingSubjects, reloadSubjects} = useSubjects();\r\n    const {data: {catalog}, setters: {setCatalog}} = React.useContext(StoreContext);\r\n    const [error, setError] = React.useState(null);\r\n    const fetchCatalog = React.useCallback(async () => {\r\n        if (requests.shopCatalog)\r\n            return requests.shopCatalog;\r\n        const request = APIRequest.get('/courses', {params: {\r\n            group: 'MARKET'\r\n            }});\r\n        requests.shopCatalog = request;\r\n        try {\r\n            if (error)\r\n                setError(null);\r\n            const catalog = (await request).map(({date_start, date_end, image_link, teacher_id, ...rest}) => ({\r\n                date_start: new Date(date_start),\r\n                date_end: new Date(date_end),\r\n                image_link: `${API_ROOT}${image_link}`,\r\n                teacher_ids: [teacher_id],\r\n                ...rest\r\n            }));\r\n            // const catalog = SHOP_CATALOG.catalog;\r\n            setCatalog(catalog);\r\n        } catch (e) {\r\n            console.error(e);\r\n            setError(e);\r\n        }\r\n        finally {\r\n            delete requests.shopCatalog;\r\n        }\r\n        return request;\r\n    }, [error]);\r\n\r\n    React.useEffect(() => {\r\n        if (!(catalog || requests.shopCatalog || error)) {\r\n            fetchCatalog();\r\n        }\r\n    }, [catalog, error]);\r\n\r\n    if (error || errorLoadingSubjects) {\r\n        return {\r\n            catalog,\r\n            subjects,\r\n            error: error || errorLoadingSubjects ,\r\n            retry: () => {\r\n                if (error)\r\n                    fetchCatalog();\r\n                if (errorLoadingSubjects)\r\n                    reloadSubjects();\r\n            }\r\n        };\r\n    }\r\n    else {\r\n        return {catalog, subjects};\r\n    }\r\n}\r\n\r\nexport function useLessons(courseId) {\r\n    const {data: {lessons}, setters: {setLessons}} = React.useContext(StoreContext);\r\n    const [error, setError] = React.useState(null);\r\n    const fetchLessons = React.useCallback(async (courseId) => {\r\n        if (requests.lessons && requests.lessons[courseId])\r\n            return requests.lessons[courseId];\r\n        const request = APIRequest.get(`/lessons`, {params: {\r\n                courseId\r\n            }});\r\n        (requests.lessons || (requests.lessons = {}))[courseId] = request;\r\n        try {\r\n            if (error)\r\n                setError(null);\r\n            const lessons = (await request).map(lesson => ({...lesson, image_link: `${API_ROOT}${lesson.image_link}`}));\r\n            console.log(lessons);\r\n            setLessons(loadedLessons => ({...loadedLessons, [courseId]: lessons}));\r\n        } catch (e) {\r\n            console.error(e);\r\n            setError(e);\r\n        }\r\n        finally {\r\n            delete requests.lessons[courseId];\r\n        }\r\n        return request;\r\n    }, [error]);\r\n\r\n    React.useEffect(() => {\r\n        if (!(lessons[courseId] || (requests.lessons && requests.lessons[courseId]) || error)) {\r\n            fetchLessons(courseId);\r\n        }\r\n    }, [lessons, courseId, error]);\r\n\r\n    if (error) {\r\n        return {\r\n            lessons: lessons[courseId],\r\n            error: error,\r\n            retry: () => {\r\n                if (error)\r\n                    fetchLessons();\r\n            }\r\n        };\r\n    }\r\n    else {\r\n        return {lessons: lessons[courseId]};\r\n    }\r\n}\r\n\r\nconst GlobalStore = ({children}) => {\r\n    const [user, userInfo] = useUserAuth();\r\n    const data = useStoreData();\r\n    return (\r\n        <StoreContext.Provider value={{user, userInfo, ...data}}>\r\n            {children}\r\n        </StoreContext.Provider>\r\n    )\r\n};\r\n\r\nexport default GlobalStore;\r\n\r\nexport function useUser() {\r\n   const {user, userInfo} = React.useContext(StoreContext);\r\n   return {user, userInfo};\r\n}\r\n","import React from 'react';\r\nimport {Helmet} from \"react-helmet\";\r\nimport Sticky from 'react-sticky-el';\r\nimport {Link, Redirect} from \"react-router-dom\";\r\nimport {useUser} from \"../store\";\r\n\r\nexport const PageLoadingPlaceholder = () => (\r\n    <div className=\"layout__content\">\r\n        <div className=\"layout__loading-spinner\">\r\n            <i className=\"spinner-border\"/>\r\n        </div>\r\n    </div>\r\n);\r\n\r\nexport const PageLink = ({to, arrow=true, forward=true, className, children, ...props}) => (\r\n    <Link\r\n        className={`${arrow ? 'arrow-link' : ''} ${forward ? 'arrow-link-forward' : 'arrow-link-backward'} ${className || ''}`}\r\n        to={to}\r\n        {...props}>\r\n        {children}\r\n    </Link>\r\n);\r\n\r\nexport const PageContent = ({children, className, parentSection}) => (\r\n    <div className={`layout__content-container container ${className || ''}`}>\r\n        {parentSection && (\r\n            <PageLink\r\n                to={parentSection.url || '..'}\r\n                forward={false}\r\n                className=\"layout__content-parent-section-link\">\r\n                {parentSection.name}\r\n            </PageLink>\r\n        )}\r\n        {children}\r\n    </div>\r\n);\r\n\r\nexport const BottomTab = ({children, className, ...stickyProps}) => (\r\n    <Sticky mode=\"bottom\" {...stickyProps}>\r\n        <div className={`layout__bottom-tab ${className || ''}`}>\r\n            {children}\r\n        </div>\r\n    </Sticky>\r\n);\r\n\r\nclass PageErrorBoundary extends React.Component {\r\n    state = {\r\n        error: null\r\n    }\r\n}\r\n\r\nconst Page = ({title, className, children, checkLogin=true, location}) => {\r\n    //TODO: check permissions\r\n    const {user, userInfo} = useUser();\r\n    if (checkLogin) {\r\n        if (!user) {\r\n            return (\r\n                <Redirect to={{\r\n                    pathname: '/login/',\r\n                    state: location ? { referrer: location.pathname } : undefined\r\n                }}/>);\r\n        }\r\n    }\r\n    return (\r\n        <div className={`layout__content ${className || ''}`}>\r\n            {title && <Helmet><title>{title} – ЕГЭ HACK</title></Helmet>}\r\n            {children}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Page;\r\n","import React from 'react';\r\nimport {useUser} from \"../store\";\r\n\r\nexport function useTruncate(text) {\r\n    const descriptionRef = React.useRef(null);\r\n    const [isFontLoaded, setFontLoaded] = React.useState(document.readyState === \"complete\");\r\n    React.useEffect(() => {\r\n        if (!text)\r\n            return;\r\n        function handleResize() {\r\n            if (descriptionRef.current) {\r\n                descriptionRef.current.onResize();\r\n            }\r\n        }\r\n        window.addEventListener('resize', handleResize);\r\n        if (isFontLoaded)\r\n            return () => {\r\n                window.removeEventListener('resize', handleResize);\r\n            };\r\n        if (document.readyState === \"complete\") {\r\n            setFontLoaded(true);\r\n            return () => {\r\n                window.removeEventListener('resize', handleResize);\r\n            };\r\n        }\r\n        else {\r\n            function handleLoading() {\r\n                setFontLoaded(true);\r\n            }\r\n            window.addEventListener('load', handleLoading);\r\n            return () => {\r\n                window.removeEventListener('load', handleLoading);\r\n            };\r\n        }\r\n    }, [isFontLoaded, text]);\r\n    return [descriptionRef, isFontLoaded];\r\n}\r\n\r\nexport function useRefValue(initialValue) {\r\n    const ref = React.useRef(initialValue);\r\n    const getValue = React.useCallback(() => ref.current, []);\r\n    const setValue = React.useCallback((value) => {\r\n        ref.current = value;\r\n    }, []);\r\n    return [getValue, setValue];\r\n}\r\n\r\nexport function useIsMounted() {\r\n    const [getIsMounted, setIsMounted] = useRefValue(false);\r\n\r\n    React.useLayoutEffect(() => {\r\n        console.log('mounting');\r\n        setIsMounted(true);\r\n        return () => {\r\n            console.log('unmounting');\r\n            setIsMounted(false);\r\n        };\r\n    }, []);\r\n\r\n    return getIsMounted;\r\n}\r\n\r\nexport function useUpdateEffect(effect, dependencies = []) {\r\n    const isInitialMount = React.useRef(true);\r\n\r\n    React.useEffect(() => {\r\n        if (!isInitialMount.current) {\r\n            effect();\r\n        }\r\n    }, dependencies); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n    React.useEffect(() => {\r\n        isInitialMount.current = false;\r\n    }, []);\r\n}\r\n\r\nexport function useForceUpdate() {\r\n    const [, update] = React.useReducer(state => !state, true);\r\n    return update;\r\n}\r\n\r\n// export function useCheckPageAccess(checkLogin) {\r\n//\r\n// }\r\n","import React from \"react\";\r\nimport Page from \"components/Page\";\r\nimport Auth from \"definitions/auth\";\r\nimport {useUser} from \"../../../store\";\r\nimport {Redirect, useLocation} from \"react-router-dom\";\r\nimport {DEFAULT_LOGIN_REDIRECT} from \"definitions/constants\";\r\n\r\nconst LoginPage = (props) => {\r\n    const {location} = props;\r\n    const {user, userInfo} = useUser();\r\n\r\n    React.useLayoutEffect(() => {\r\n        Auth.loginWidget('vk-auth');\r\n    }, []);\r\n\r\n    if (user) {\r\n        if (location.state && location.state.referrer)\r\n            return (<Redirect to={location.state.referrer}/>);\r\n        return (<Redirect to={DEFAULT_LOGIN_REDIRECT}/>);\r\n    }\r\n    return (\r\n        <Page\r\n            title=\"Вход\"\r\n            className=\"login-page align-items-center justify-content-center\"\r\n            checkLogin={false}\r\n            location={location}>\r\n            <div id=\"vk-auth\"/>\r\n        </Page>\r\n    );\r\n};\r\n\r\nexport default LoginPage;\r\n","import React from \"react\";\r\nimport CoverImage from \"./CoverImage\";\r\nimport Contacts from \"./Contacts\";\r\n\r\nconst UserProfile = ({first_name, last_name, photo, contacts, about, role}) => {\r\n    const fullName = `${first_name} ${last_name}`;\r\n    return (\r\n        <React.Fragment>\r\n            <div className=\"user-profile__avatar-container\">\r\n                <div className=\"user-profile__avatar-wrap\">\r\n                    <CoverImage src={photo} className=\"user-profile__avatar\" round square/>\r\n                </div>\r\n            </div>\r\n            <div className=\"user-profile__info layout__content-block\">\r\n                <div className=\"d-flex flex-column align-items-center\">\r\n                    <h2>{fullName}</h2>\r\n                    {role && <div className=\"font-size-sm\">{role}</div>}\r\n                    {contacts && <Contacts contacts={contacts}/>}\r\n                    <div className=\"description-text font-size-sm\">{about}</div>\r\n                </div>\r\n            </div>\r\n        </React.Fragment>\r\n    )\r\n};\r\n\r\nexport default UserProfile;\r\n","import React from \"react\";\r\nimport Page, {PageContent} from \"components/Page\";\r\nimport UserProfile from \"components/common/UserProfile\";\r\nimport {useUser} from \"store\";\r\n\r\nconst AccountPage = () => {\r\n    const {user, userInfo} = useUser();\r\n    return (\r\n        <Page title=\"Аккаунт\" className=\"account-page\">\r\n            <PageContent>\r\n                <UserProfile {...user}/>\r\n            </PageContent>\r\n        </Page>\r\n    );\r\n};\r\n\r\nexport default AccountPage;\r\n","import React from 'react';\r\nimport Truncate from 'react-truncate';\r\nimport {useTruncate} from \"../../hooks/common\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\nexport default function ListItem(props) {\r\n    const {\r\n        preview, title, subtitle, description, item, selectable,\r\n        className,\r\n        children: action,\r\n        link,\r\n        onClick: clickCallback,\r\n        onActionClick: actionCallback,\r\n        callbackProps} = props;\r\n    const [descriptionRef, isFontLoaded] = useTruncate(description);\r\n    const onClick = React.useCallback((event) => {\r\n        const clicked = selectable && !(actionCallback && event.target.closest('.list__item-action'));\r\n        if (clicked && clickCallback)\r\n            clickCallback(item, callbackProps);\r\n        else if (!clicked && link)\r\n            event.preventDefault();\r\n    }, [item, clickCallback, selectable, callbackProps, link, actionCallback]);\r\n    const onActionClick = React.useCallback((event) => {\r\n        if (selectable && actionCallback)\r\n            actionCallback(item, callbackProps);\r\n    }, [item, actionCallback, selectable, callbackProps]);\r\n    const content = (\r\n        <div className=\"row align-items-center\">\r\n            <div className=\"list__item-preview col-12 col-md-auto\">\r\n                {preview}\r\n            </div>\r\n            <div className=\"list__item-description col align-self-stretch\">\r\n                <div className=\"list__item-description-inner\">\r\n                    <div className=\"title font-size-lg\">{title}</div>\r\n                    {subtitle && <div className=\"subtitle\">{subtitle}</div>}\r\n                    {description && (\r\n                        <div className=\"description-container font-size-xs\">\r\n                            <div className=\"description-text\">\r\n                                {isFontLoaded ? (\r\n                                    <Truncate lines={2} ref={descriptionRef}>\r\n                                        {description}\r\n                                    </Truncate>\r\n                                ) : null}\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n            {action && (\r\n                <div\r\n                    className=\"list__item-action col-auto d-flex align-items-center flex-column\"\r\n                    onClick={onActionClick}>\r\n                    {action}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n    if (link) {\r\n        return (\r\n            <Link\r\n                className={`list__item container ${selectable ? 'list__item-selectable' : ''} ${className || ''}`}\r\n                to={link}\r\n                onClick={onClick}>\r\n                {content}\r\n            </Link>\r\n        );\r\n    }\r\n    else {\r\n        return (\r\n            <div className={`list__item container ${selectable ? 'list__item-selectable' : ''} ${className || ''}`} onClick={onClick}>\r\n                {content}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React from 'react';\r\nimport ListItem from \"./ListItem\";\r\n\r\nexport default function List(props) {\r\n    const {children, renderItem, renderProps, flex, className} = props;\r\n    return flex\r\n        ? (\r\n            <div className={`${className || ''} list`}>\r\n                <div className=\"container p-0 overflow-hidden\">\r\n                    <div className=\"row\">\r\n                        {children.map((item, index) => renderItem(item, renderProps, index))}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n        : (\r\n        <div className={`${className || ''} list`}>\r\n            {children.map((item, index) => renderItem(item, renderProps, index))}\r\n        </div>\r\n    );\r\n}\r\n\r\nList.defaultProps = {\r\n    renderItem: (item, props, index) => <ListItem {...item} {...props} key={index}/>\r\n};\r\n","import React from 'react';\r\nimport {Scrollbars as ScrollComponent} from 'react-custom-scrollbars';\r\n\r\nconst renderTrackVertical = props => (<div {...props} className=\"track track-vertical\"/>);\r\nconst renderThumbVertical = props => (<div {...props} className=\"thumb thumb-vertical\"/>);\r\nconst renderTrackHorizontal = props => (<div {...props} className=\"track track-horizontal\"/>);\r\nconst renderThumbHorizontal = props => (<div {...props} className=\"thumb thumb-horizontal\"/>);\r\n\r\nconst ScrollBars = React.forwardRef(({children, ...props}, ref) => {\r\n    return (\r\n        <ScrollComponent\r\n            renderTrackVertical={renderTrackVertical}\r\n            renderThumbVertical={renderThumbVertical}\r\n            renderTrackHorizontal={renderTrackHorizontal}\r\n            renderThumbHorizontal={renderThumbHorizontal}\r\n            ref={ref}\r\n            {...props}>\r\n            {children}\r\n        </ScrollComponent>\r\n    );\r\n});\r\n\r\nexport default ScrollBars;\r\n","import React, {Component} from 'react';\r\nimport SelectInput, { components } from 'react-select';\r\nimport _ from 'lodash';\r\nimport PropTypes from 'prop-types';\r\nimport ScrollBars from \"./ScrollBars\";\r\n\r\nconst DropdownIndicator = (props) => (\r\n    <components.DropdownIndicator {...props}>\r\n        <i className=\"icon-angle\"/>\r\n    </components.DropdownIndicator>\r\n);\r\n\r\nconst SelectContainer = ({ children, selectProps, hasValue, setValue, ...props }) => (\r\n    <div className=\"select\">\r\n        <components.SelectContainer\r\n            selectProps={{...selectProps, isClearable: false}}\r\n            hasValue={hasValue}\r\n            setValue={setValue}\r\n            {...props}>\r\n            {children}\r\n        </components.SelectContainer>\r\n        {selectProps.isClearable && (\r\n            <div className={hasValue ? 'select__clear-btn' : 'select__clear-btn select__clear-btn-hidden'} onClick={() => {setValue(null);}}>\r\n                <i className=\"icon-close\"/>\r\n            </div>\r\n        )}\r\n    </div>\r\n);\r\n\r\n\r\nexport const Option = ({content, ...props}) => (\r\n    <components.Option {...props}>\r\n        {content ? content : props.label}\r\n    </components.Option>\r\n);\r\n\r\nOption.propTypes = {\r\n    content: PropTypes.node,\r\n    label: PropTypes.node\r\n};\r\n\r\nclass MenuList extends Component {\r\n    componentDidMount() {\r\n        //needed to the select to scroll the list to the selected option\r\n        this.props.innerRef(this.scrollBar.view);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <ScrollBars\r\n                autoHeight\r\n                hideTracksWhenNotNeeded\r\n                ref={ref => { this.scrollBar = ref; }}\r\n                autoHeightMax={this.props.maxHeight}>\r\n                <components.MenuList {...this.props}>\r\n                    {this.props.children}\r\n                </components.MenuList>\r\n            </ScrollBars>\r\n        );\r\n    }\r\n\r\n    static propTypes = {\r\n        maxHeight: PropTypes.number.isRequired,\r\n        children: PropTypes.node.isRequired,\r\n        innerRef: PropTypes.func.isRequired\r\n    }\r\n}\r\n\r\n//TODO: try react virtualized select\r\nexport default class Select extends React.PureComponent {\r\n    onChange = (option) => {\r\n        this.props.callback(option ? option.value : null, this.props.name);\r\n    };\r\n\r\n    render() {\r\n        const {name, options, value, components, selectProps, isClearable=true, isSearchable=true, placeholder} = this.props;\r\n        return (\r\n            <SelectInput\r\n                name={name}\r\n                options={options}\r\n                maxMenuHeight={200}\r\n                value={_.find(options, {value: value}) || null}\r\n                className='select__container' classNamePrefix='select'\r\n                onChange={this.onChange}\r\n                menuPlacement=\"auto\"\r\n                noOptionsMessage={() => 'Нет опций'}\r\n                components={\r\n                    components ? ({\r\n                        Option,\r\n                        MenuList,\r\n                        DropdownIndicator,\r\n                        SelectContainer,\r\n                        ...components\r\n                    }) : ({\r\n                        Option,\r\n                        MenuList,\r\n                        DropdownIndicator,\r\n                        SelectContainer,\r\n                    })\r\n                }\r\n                styles={{\r\n                    //removes default styles from option elements\r\n                    option: () => ({})\r\n                }}\r\n                isClearable={isClearable}\r\n                isSearchable={isSearchable}\r\n                placeholder={placeholder}\r\n                {...selectProps}\r\n            />\r\n        );\r\n    }\r\n\r\n    static propTypes = {\r\n        name: PropTypes.string.isRequired,\r\n        options: PropTypes.arrayOf(PropTypes.shape({\r\n            value: PropTypes.any,\r\n            label: PropTypes.any\r\n        })).isRequired,\r\n        callback: PropTypes.func.isRequired,\r\n        value: PropTypes.any,\r\n        selectProps: PropTypes.object,\r\n        components: PropTypes.object\r\n    }\r\n}\r\n","import React from 'react';\r\nimport Select from \"./Select\";\r\n\r\nfunction useChangeHandler(callback, inputProp = 'value') {\r\n    return React.useCallback((event) => {\r\n        callback(event.currentTarget[inputProp], event.currentTarget.name, event);\r\n    }, [callback, inputProp])\r\n}\r\n\r\nconst CheckBox = ({value, onChange: callback, name, label, ...props}) => {\r\n    const onChange = useChangeHandler(callback, 'checked');\r\n    return (\r\n        <label className={`input input-checkbox`}>\r\n            <input type=\"checkbox\" name={name} checked={value} onChange={onChange} {...props}/>\r\n            <span className=\"input__box\"/>\r\n            <span className=\"input__label\">{label}</span>\r\n        </label>\r\n    );\r\n};\r\n\r\nconst Input = ({className, onChange: callback, ...props}) => {\r\n    const onChange = useChangeHandler(callback);\r\n    return (\r\n        <input className={`input ${className || ''}`} onChange={onChange} {...props}/>\r\n    );\r\n};\r\n\r\nObject.assign(Input, {\r\n    CheckBox,\r\n    Select\r\n});\r\n\r\nexport default Input;\r\n\r\n","import React from 'react';\r\nimport {useHistory, useLocation} from 'react-router-dom';\r\nimport List from \"./List\";\r\nimport Input from \"../ui/Input\";\r\nimport Page from \"../Page\";\r\n\r\nexport const CatalogContext = React.createContext({});\r\n\r\nconst Filter = ({filterBy: {subject:filterBySubject = true, online:filterByOnline = true}={}}) => {\r\n    const {options, subject, online, onChange} = React.useContext(CatalogContext);\r\n    return (\r\n        <div className=\"layout__content-block catalog__filters\">\r\n            <div className=\"container p-0\">\r\n                <div className=\"row\">\r\n                    {filterBySubject && (\r\n                        <div className=\"col-auto d-flex align-items-center\">\r\n                            <Input.Select\r\n                                name=\"subject\"\r\n                                options={options}\r\n                                value={subject}\r\n                                placeholder='Предмет'\r\n                                callback={onChange}/>\r\n                        </div>\r\n                    )}\r\n                    {filterByOnline && (\r\n                        <div className=\"col-auto d-flex align-items-center\">\r\n                            <Input.CheckBox\r\n                                name=\"online\"\r\n                                value={online}\r\n                                label=\"Онлайн\"\r\n                                onChange={onChange}/>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst Catalog = ({renderFunc, placeholder, baseUrl, ...listProps}) => {\r\n    const {items, renderProps} = React.useContext(CatalogContext);\r\n    const renderItem = React.useCallback((item) => {\r\n        return renderFunc(item, {link: `${item.id}/`, ...renderProps});\r\n    }, [renderFunc, renderProps]);\r\n    return (\r\n        <div className=\"layout__content-block catalog__catalog\">\r\n            {items.length > 0 ? (\r\n                <List {...listProps}\r\n                    renderItem={renderItem}>\r\n                    {items}\r\n                </List>\r\n            ) : (\r\n                <div className=\"catalog__empty-catalog-fallback-message text-center font-size-sm\">\r\n                    {placeholder}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst Body = (props) => {\r\n    const {options, filterItems, children, renderProps={}} = props;\r\n    const history = useHistory();\r\n    const location = useLocation();\r\n    const params = new URLSearchParams(location.search);\r\n    const subject = parseInt(params.get('subject')) || null;\r\n    const online = params.get('online') === 'true';\r\n    const onFilterChange = React.useCallback((value, name) => {\r\n        const params = new URLSearchParams(location.search);\r\n        if (value)\r\n            params.set(name, value);\r\n        else\r\n            params.delete(name);\r\n        // setSubject(option);\r\n        history.push({\r\n            pathname: location.pathname,\r\n            search: `?${params}`\r\n        });\r\n    }, [location, history]);\r\n    const matchingItems = filterItems(subject, online);\r\n\r\n    return (\r\n        <CatalogContext.Provider\r\n            value={{\r\n                options, subject, online, onChange: onFilterChange, items: matchingItems, renderProps\r\n            }}>\r\n            <div className=\"catalog\">\r\n                {children}\r\n            </div>\r\n        </CatalogContext.Provider>\r\n    );\r\n};\r\n//\r\n// const CatalogPage = ({title, className, BodyComponent = Body, ...props}) => {\r\n//     return (\r\n//         <Page title={title} className={className}>\r\n//             <BodyComponent {...props}/>\r\n//         </Page>\r\n//     )\r\n// };\r\n\r\nexport default {\r\n    Filter,\r\n    Catalog,\r\n    Body,\r\n    // Page: CatalogPage\r\n};\r\n","import React from 'react';\r\nimport _ from 'lodash';\r\nimport {Link} from \"react-router-dom\";\r\nimport CoverImage from \"./CoverImage\";\r\nimport Contacts from \"./Contacts\";\r\n\r\nexport default function Teacher(props) {\r\n    const {\r\n        teacher: {\r\n        vk_info: {first_name, last_name, photo_max_orig: photo}, contacts, subjects: teacherSubjects, bio: about\r\n        },\r\n        subjects,\r\n        link,\r\n        bio=false,\r\n        className} = props;\r\n    const onClick = React.useCallback((event) => {\r\n        const clicked = !event.target.closest('.social-media');\r\n        // event.preventDefault();\r\n    }, []);\r\n    // const teacherSubjects = subject_ids.map(id => _.find(subjects, {id}));\r\n    return (\r\n        <Link to={link} className={`${className} teacher-profile`} onClick={onClick}>\r\n            <div className=\"container p-0\">\r\n                <div className=\"row flex-nowrap\">\r\n                    <div className=\"col-auto d-flex align-items-center\">\r\n                        <CoverImage src={photo} className=\"teacher-profile__photo\" round square/>\r\n                    </div>\r\n                    <div className=\"col d-flex flex-column justify-content-center\">\r\n                        <h3 className=\"teacher-profile__name\">{first_name} {last_name}</h3>\r\n                        {bio && (\r\n                            <div className=\"teacher-profile__subjects font-size-sm\">\r\n                                {teacherSubjects.map(({name}, i) => i === 0 ? name : name.toLowerCase()).join(', ')}\r\n                            </div>)}\r\n                        {contacts && (<Contacts contacts={contacts}/>)}\r\n                    </div>\r\n                </div>\r\n                {bio && (\r\n                    <div className=\"row\">\r\n                        <div className=\"col-12 description-text\">\r\n                            {about}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </Link>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport _  from 'lodash';\r\nimport Catalog from \"components/common/Catalog\";\r\nimport Teacher from \"../../../common/Teacher\";\r\n\r\nconst Filter = (props) => (<Catalog.Filter filterBy={{online: false}} {...props}/>);\r\n\r\nconst TeachersCatalog = (props) => {\r\n    const renderTeacher = React.useCallback((teacher, {link, subjects}) => (\r\n        <div className=\"list__item col-12 col-md-6 d-flex\" key={teacher.id}>\r\n            <Teacher\r\n                teacher={teacher}\r\n                subjects={subjects}\r\n                bio\r\n                link={link}/>\r\n        </div>\r\n    ), []);\r\n    return (\r\n        <Catalog.Catalog\r\n            placeholder=\"Нет преподавателей, соответствующих условиям поиска\"\r\n            flex\r\n            renderFunc={renderTeacher}\r\n            {...props}/>\r\n    );\r\n};\r\n\r\nconst Body = (props) => {\r\n    const {teachers, subjects, ...otherProps} = props;\r\n\r\n    const options = React.useMemo(() => {\r\n        const subjectsMap = _.zipObject(subjects.map(({id}) => id), subjects);\r\n        const subjectsTeachers = _.reduce(teachers, (result, teacher) => {\r\n            teacher.subjects.forEach(subject => {result[subject.id] = subject});\r\n            return result;\r\n        }, {});\r\n        return _.values(subjectsTeachers).map(({id, name}) => ({value: id, label: name}));\r\n    }, [teachers, subjects]);\r\n\r\n    const getMatchingCourses = React.useCallback((subject) => teachers.filter((teacher) =>\r\n        (subject ? teacher.subjects.some(({id}) => subject === id)  : true)), [teachers]);\r\n\r\n    return (\r\n        <Catalog.Body\r\n            options={options}\r\n            renderProps={{subjects}}\r\n            filterItems={getMatchingCourses}\r\n            {...otherProps}/>\r\n    )\r\n};\r\n\r\n// const Page = (props) => (<Catalog.Page BodyComponent={Body} {...props}/>);\r\n\r\nexport default {\r\n    ...Catalog,\r\n    Filter,\r\n    Catalog: TeachersCatalog,\r\n    Body,\r\n    // Page\r\n}\r\n","import React from \"react\";\r\nimport Page, {PageContent, PageLoadingPlaceholder} from \"components/Page\";\r\nimport TeachersCatalog from \"./TeachersCatalog\";\r\nimport {useTeachers} from \"store\";\r\n\r\nconst TeachersCatalogPage = ({location}) => {\r\n    const {teachers, subjects, error, retry} = useTeachers();\r\n    return (\r\n        <Page\r\n            title=\"Мои курсы\"\r\n            className=\"catalog teachers-catalog\"\r\n            location={location}>\r\n            {!(teachers && subjects) ? (\r\n                    <PageLoadingPlaceholder/>\r\n                ) : (\r\n                <TeachersCatalog.Body\r\n                    subjects={subjects}\r\n                    teachers={teachers}>\r\n                    <PageContent>\r\n                        <TeachersCatalog.Filter/>\r\n                        <TeachersCatalog.Catalog/>\r\n                    </PageContent>\r\n                </TeachersCatalog.Body>\r\n            )\r\n            }\r\n        </Page>\r\n    );\r\n};\r\n\r\nexport default TeachersCatalogPage;\r\n","import React from \"react\";\r\n\r\nconst Button = ({className, children, active = true, neutral=false, icon, iconAction, tag:Tag='div', onClick, ...props}) => {\r\n    // const clickCallback = React.useCallback((e) => {\r\n    //     console.log(e.target, e.currentTarget, e.target === e.currentTarget);\r\n    //     if (e.target === e.currentTarget)\r\n    //         onClick(e);\r\n    // }, [onClick]);\r\n    return (\r\n        <Tag\r\n            className={`btn ${active ? '' : 'btn-inactive'} ${neutral ? 'btn-neutral' : ''} ${className ? className : ''}`}\r\n            {...props}>\r\n        <span className=\"btn__content\">\r\n            {icon && <div className=\"btn__after\" onClick={iconAction ? iconAction : onClick}>{icon}</div>}\r\n            <span\r\n                className=\"btn__name\"\r\n                onClick={onClick}>\r\n                {children}\r\n            </span>\r\n        </span>\r\n        </Tag>\r\n    );\r\n};\r\n\r\nexport default Button;\r\n","import React from \"react\";\r\nimport Page from \"./Page\";\r\nimport {Link} from \"react-router-dom\";\r\nimport Button from \"./ui/Button\";\r\n\r\nconst ErrorPage = ({errorCode, message, link: {text, url} = {}}) => {\r\n    const code = errorCode && errorCode.toString();\r\n    return (\r\n        <Page title={code} className=\"error-page\">\r\n            <div className=\"error-page__error-code\">\r\n                {code && code.split('').map((number, i) => <span key={i}>{number}</span>)}\r\n            </div>\r\n            <div className=\"error-page__error-message\">{message || 'Похоже, вы потерялись'}</div>\r\n            <Button tag={Link} to={`${url || ''}/`} replace className=\"btn\">{text || 'На главную'}</Button>\r\n        </Page>\r\n    );\r\n};\r\n\r\nexport default ErrorPage;\r\n","import React from 'react';\r\nimport Catalog from \"./Catalog\";\r\nimport _ from \"lodash\";\r\n\r\nconst CourseCatalog = ({renderCourse, ...otherProps}) => (\r\n    <Catalog.Catalog\r\n        placeholder=\"Нет курсов, соответствующих условиям поиска\"\r\n        renderFunc={renderCourse}\r\n        {...otherProps}/>\r\n);\r\n\r\nconst Body = (props) => {\r\n    const {courses, subjects, ...otherProps} = props;\r\n\r\n    const options = React.useMemo(() =>\r\n            subjects.map(({id, name}) => ({value: id, label: name})),\r\n        [subjects]);\r\n\r\n    const getMatchingCourses = React.useCallback((subject, online) => courses.filter((course) =>\r\n        (subject ? course.subject_id === subject : true) && (online ? course.online === online : true)), [courses]);\r\n\r\n    return (\r\n        <Catalog.Body\r\n            options={options}\r\n            filterItems={getMatchingCourses}\r\n            {...otherProps}/>\r\n    )\r\n};\r\n\r\n// const CourseCatalogPage = (props) => (<Catalog.Page BodyComponent={Body} {...props}/>);\r\n\r\nexport default {\r\n    ...Catalog,\r\n    Catalog: CourseCatalog,\r\n    Body,\r\n    // Page: CourseCatalogPage\r\n}\r\n","export const daysBetween = (date1, date2) => {\r\n    const one_day = 1000 * 60 * 60 * 24;\r\n    const date1_ms = new Date(date1.getYear(), date1.getMonth(), date1.getDate()).getTime();\r\n    const date2_ms = new Date(date2.getYear(), date2.getMonth(), date2.getDate()).getTime();\r\n    const difference_ms = date2_ms - date1_ms;\r\n    return Math.floor(difference_ms / one_day);\r\n};\r\n\r\nexport const renderDate = (date, options, locale='ru') => date.toLocaleString(locale, options);\r\nObject.assign(renderDate, {\r\n    date: {\r\n        day: 'numeric',\r\n        month: 'long'\r\n    },\r\n    shortDate: {\r\n        day: 'numeric',\r\n        month: 'numeric'\r\n    },\r\n    hour: {\r\n        hour: 'numeric',\r\n        minute: 'numeric'\r\n    }\r\n});\r\n\r\nexport const getAuthHeader = (username, password) => ({'Authorization': `Basic ${btoa(username + \":\" + password)}`});\r\n\r\nexport const downloadFile = async (url, name) => {\r\n    // IE10+ : (has Blob, but not a[download] or URL)\r\n    if (navigator.msSaveBlob) {\r\n        let blob = await fetch(url).then(r => r.blob());\r\n        return navigator.msSaveBlob(blob, name);\r\n    }\r\n    else {\r\n        let link = document.createElement('a');\r\n        link.download = name;\r\n        link.href = url;\r\n        let event = new MouseEvent('click');\r\n        link.dispatchEvent(event);\r\n    }\r\n};\r\n","import React from 'react';\r\nimport {daysBetween} from \"../../definitions/helpers\";\r\nimport ListItem from \"./ListItem\";\r\nimport CoverImage from \"./CoverImage\";\r\n\r\nexport default function Course({course, online=true, isSelected=false, ...props}) {\r\n    const {name, image_link, date_start, description} = course;\r\n    const startsIn = daysBetween(new Date(), date_start);\r\n    return (\r\n        <ListItem\r\n            item={course}\r\n            className={isSelected ? 'course course-selected' : 'course'}\r\n            title={name}\r\n            subtitle={`До начала курса ${startsIn} ${startsIn === 1 ? 'день' : 'дней'}`}\r\n            description={description}\r\n            preview={(\r\n                <div className=\"course__cover-container\">\r\n                    {course.online && (\r\n                        <div className={`course__online-badge ${online ? 'course__online-text' : ''} font-size-xs`}>\r\n                            <span>Онлайн</span>\r\n                        </div>\r\n                    )}\r\n                    <CoverImage src={image_link} className=\"poster-cover course__cover\"/>\r\n                </div>\r\n            )}\r\n            {...props}/>\r\n    );\r\n}\r\n","import React from \"react\";\r\nimport _ from \"lodash\";\r\nimport Page, {PageContent, PageLoadingPlaceholder} from \"components/Page\";\r\nimport ErrorPage from \"components/ErrorPage\";\r\nimport CourseCatalog from \"components/common/CourseCatalog\";\r\nimport Course from \"components/common/Course\";\r\nimport Button from \"components/ui/Button\";\r\nimport UserProfile from \"components/common/UserProfile\";\r\nimport {useShopCatalog, useTeachers} from \"store\";\r\n\r\nconst TeacherPage = (props) => {\r\n    const {match: {params: {id: param_id}}, path: root, className, location} = props;\r\n    const {teachers, subjects, error, retry} = useTeachers();\r\n    const {catalog, error: errorLoadingCatalog, retry: reloadCatalog} = useShopCatalog();\r\n    const id = parseInt(param_id);\r\n\r\n    const renderCourse = React.useCallback((course, {link}) => {\r\n        const {price, discount} = course;\r\n        return (\r\n            <Course\r\n                course={course}\r\n                selectable\r\n                key={course.id}\r\n                link={`/shop/${link}`}>\r\n                <div className=\"list__item-action-info\">\r\n                    <span className=\"price\">{price}₽</span> {discount && <span className=\"discount font-size-xs\">{discount + price}₽</span>}\r\n                </div>\r\n                <Button style={{minWidth: '110px'}}>Открыть</Button>\r\n            </Course>\r\n        )\r\n    }, []);\r\n\r\n    if (teachers && catalog && subjects) {\r\n        const teacher = _.find(teachers, {id});\r\n\r\n        if (teacher) {\r\n            const {vk_info: {first_name, last_name, photo_max_orig: photo}, contacts, subjects: teacherSubjects, bio} = teacher;\r\n            // const teacherSubjects = subject_ids.map(id => _.find(subjects, {id}));\r\n            const teachersCourses = catalog.filter(course => _.indexOf(course.teacher_ids, id) >= 0);\r\n            const profile = {\r\n                first_name,\r\n                last_name,\r\n                photo,\r\n                contacts,\r\n                about: bio,\r\n                role: teacherSubjects.map(({name}, i) => i === 0 ? name : name.toLowerCase()).join(', ')\r\n            };\r\n            console.log(catalog, teachersCourses);\r\n            const fullName = `${first_name} ${last_name}`;\r\n            return (\r\n                <Page\r\n                    title={`${fullName}`}\r\n                    className={`teacher-page ${className || ''}`}\r\n                    location={location}>\r\n                    <PageContent parentSection={{name: \"Преподаватели\"}}>\r\n                        <UserProfile {...profile}/>\r\n                        <div className=\"layout__content-block\">\r\n                            <h3>Курсы преподавателя</h3>\r\n                        </div>\r\n                        <CourseCatalog.Body\r\n                            className=\"course-shop\"\r\n                            subjects={subjects}\r\n                            courses={teachersCourses}>\r\n                            <CourseCatalog.Filter/>\r\n                            <CourseCatalog.Catalog\r\n                                renderCourse={renderCourse}/>\r\n                        </CourseCatalog.Body>\r\n                    </PageContent>\r\n                </Page>\r\n            )\r\n        } else\r\n            return <ErrorPage errorCode={404} message=\"Преподаватель не найден\" link={{url: root}}/>;\r\n    }\r\n    else {\r\n        return (\r\n            <Page\r\n                location={location}>\r\n                <PageLoadingPlaceholder/>\r\n            </Page>\r\n        );\r\n    }\r\n};\r\n\r\nexport default TeacherPage;\r\n","import React from \"react\";\r\nimport { Switch, Route } from \"react-router-dom\";\r\nimport {TEACHERS} from \"data/test_data\";\r\nimport {SHOP_CATALOG} from \"data/test_data\";\r\nimport CatalogPage from \"./catalog-page\";\r\nimport TeacherPage from \"./teacher-page\";\r\n\r\nconst Teachers = (props) => {\r\n    const {match} = props;\r\n    return (\r\n        <Switch>\r\n            <Route path={`${match.path}/:id`} render={(props) => (\r\n                <TeacherPage\r\n                    teachers={TEACHERS}\r\n                    courses={SHOP_CATALOG.catalog}\r\n                    path={match.path}\r\n                    {...props}/>\r\n            )}/>\r\n            <Route exact path={`${match.path}`} render={(props) => (\r\n                <CatalogPage {...props}/>\r\n            )}/>\r\n        </Switch>\r\n    );\r\n};\r\n\r\nexport default Teachers;\r\n","import React from 'react';\r\nimport {useTruncate} from \"../../../../hooks/common\";\r\nimport CoverImage from \"../../../common/CoverImage\";\r\nimport Truncate from \"react-truncate\";\r\nimport _ from \"lodash\";\r\nimport {BottomTab} from \"../../../Page\";\r\nimport ScrollBars from \"../../../ui/ScrollBars\";\r\nimport {CSSTransition, TransitionGroup} from \"react-transition-group\";\r\nimport Button from \"../../../ui/Button\";\r\n\r\nconst SelectedCourse = ({course, onCourseDeselect, onTruncate}) => {\r\n    const {name} = course;\r\n    const [descriptionRef] = useTruncate(name);\r\n    const onDeselectClick = React.useCallback(() => {\r\n        onCourseDeselect(course);\r\n    }, [onCourseDeselect, course]);\r\n    return (\r\n        <div className=\"selected-course d-flex align-items-center flex-shrink-0\">\r\n            <div className=\"selected-course__cover-container\">\r\n                <CoverImage src={course.image_link} className=\"selected-course__cover poster-cover\"/>\r\n                <i className=\"icon-close selected-course__deselect-btn animated__action-button\" onClick={onDeselectClick}/>\r\n            </div>\r\n            <div className=\"selected-course__description-container font-size-xs\">\r\n                <div className=\"selected-course__description\">\r\n                    <Truncate lines={2} ref={descriptionRef} onTruncate={onTruncate}>\r\n                        {name}\r\n                    </Truncate>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst renderView = ({style, ...props}) => (<div style={{...style, height: `calc(100% + ${style.minHeight}px)`}} {...props}/>);\r\n\r\nconst SelectedCoursesTab = ({courses, onCourseDeselect}) => {\r\n    const price = _.sumBy(courses, 'price');\r\n    const discount = _.sumBy(courses, 'discount');\r\n    // const stickyRef =\r\n    React.useEffect(() => {\r\n        // window.dispatchEvent(new Event('scroll'));\r\n    });\r\n    return (\r\n        <BottomTab\r\n            className={`selected-courses ${courses.length === 0 ? 'hidden' : ''}`}>\r\n            <div className=\"container-fluid\">\r\n                <div className=\"row\">\r\n                    <div className=\"col-12 col-md p-0 selected-courses__courses\">\r\n                        <ScrollBars\r\n                            autoHeight\r\n                            autoHeightMax=\"unset\"\r\n                            hideTracksWhenNotNeeded\r\n                            renderView={renderView}\r\n                            style={{height: '100%'}}\r\n                            className=\"scrollbars\">\r\n                            <TransitionGroup\r\n                                className=\"layout__bottom-tab-container container-fluid d-flex flex-nowrap\"\r\n                                style={{height: '100%'}}>\r\n                                {courses.map(course => (\r\n                                    <CSSTransition\r\n                                        classNames=\"animation-fade\"\r\n                                        key={course.id}\r\n                                        timeout={300}>\r\n                                        <SelectedCourse\r\n                                            course={course}\r\n                                            onCourseDeselect={onCourseDeselect}\r\n                                            onTruncate={() => {\r\n                                                window.dispatchEvent(new Event('scroll'));\r\n                                            }}/>\r\n                                    </CSSTransition>\r\n                                ))}\r\n                            </TransitionGroup>\r\n                        </ScrollBars>\r\n                    </div>\r\n                    <div className=\"col-12 col-md-auto p-0\">\r\n                        <div className=\"selected-courses__price layout__bottom-tab-container container d-flex align-items-center justify-content-end\">\r\n                            <Button className=\"order-1 order-md-0 flex-shrink-0\">Оплатить</Button>\r\n                            <div className=\"price selected-courses__price-container container\">\r\n                                {discount && <div className=\"discount font-size-sm d-inline-block d-md-block\">{price + discount}₽</div>}\r\n                                <div className=\"price font-size-lg d-inline-block d-md-block\">{price}₽</div>\r\n                                {discount && <div className=\"promotion font-size-xs\">Цена со скидкой за 2 курса</div>}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </BottomTab>\r\n    );\r\n};\r\n\r\nexport default SelectedCoursesTab;\r\n","import React from \"react\";\r\nimport Page, {PageContent, PageLoadingPlaceholder} from \"components/Page\";\r\nimport CourseCatalog from \"components/common/CourseCatalog\";\r\nimport SelectedCoursesTab from \"./SelectedCoursesTab\";\r\nimport Course from \"components/common/Course\";\r\nimport Button from \"components/ui/Button\";\r\nimport {useShopCatalog} from \"store\";\r\n\r\nconst ShopCatalogPage = ({selectedCourses, onCourseClick, onCourseSelect, onCourseDeselect, location}) => {\r\n    const {catalog, subjects, error, retry} = useShopCatalog();\r\n    const renderCourse = React.useCallback((course, props) => {\r\n        const isSelected = selectedCourses.has(course);\r\n        const {price, discount} = course;\r\n        return (\r\n            <Course\r\n                course={course}\r\n                selectable\r\n                isSelected={isSelected}\r\n                onActionClick={onCourseSelect}\r\n                key={course.id}\r\n                {...props}>\r\n                <div className=\"list__item-action-info\">\r\n                    <span className=\"price\">{price}₽</span> {discount && <span className=\"discount font-size-xs\">{discount + price}₽</span>}\r\n                </div>\r\n                <Button style={{minWidth: '110px'}}>{isSelected ? 'Выбрано' : 'Выбрать'}</Button>\r\n            </Course>\r\n        )\r\n    }, [selectedCourses, onCourseSelect]);\r\n    return (\r\n        <Page\r\n            className=\"course-shop\"\r\n            title=\"Магазин курсов\"\r\n            location={location}>\r\n            {!(catalog && subjects) ? (\r\n                <PageLoadingPlaceholder/>\r\n            ) : (\r\n                <CourseCatalog.Body\r\n                    subjects={subjects}\r\n                    courses={catalog}>\r\n                    <PageContent>\r\n                        <CourseCatalog.Filter/>\r\n                        <CourseCatalog.Catalog\r\n                            renderCourse={renderCourse}/>\r\n                    </PageContent>\r\n                </CourseCatalog.Body>\r\n            )}\r\n            <SelectedCoursesTab\r\n                onCourseDeselect={onCourseDeselect}\r\n                courses={[...selectedCourses]}/>\r\n        </Page>\r\n    );\r\n};\r\n\r\nexport default ShopCatalogPage;\r\n","import React from 'react';\r\nimport _ from 'lodash';\r\nimport CoverImage from \"components/common/CoverImage\";\r\nimport {renderDate} from \"../../definitions/helpers\";\r\nimport List from \"./List\";\r\nimport Teacher from \"./Teacher\";\r\nimport Page, {PageLink} from \"../Page\";\r\nimport ErrorPage from \"../ErrorPage\";\r\n\r\nwindow._ = _;\r\n\r\nexport const CourseOverviewContext = React.createContext({});\r\n\r\nconst Description = () => {\r\n    const {course} = React.useContext(CourseOverviewContext);\r\n    return (\r\n        <React.Fragment>\r\n            <CoverImage src={course.image_link} className=\"course-overview__cover\"/>\r\n            <div className=\"course-overview__info layout__content-block\">\r\n                <h2>{course.name}</h2>\r\n                <div className=\"course-overview__summary\">\r\n                    <div className=\"col-auto course-overview__summary-item\">\r\n                        <i className=\"far fa-calendar-alt\"/>\r\n                        Начало: {renderDate(course.date_start, renderDate.date)}\r\n                    </div>\r\n                    <div className=\"col-auto course-overview__summary-item\">\r\n                        <i className=\"far fa-clock\"/>\r\n                        Длительность: {course.total_hours} часов\r\n                    </div>\r\n                </div>\r\n                <div className=\"description-text font-size-sm\">{course.description}</div>\r\n            </div>\r\n        </React.Fragment>\r\n    );\r\n};\r\n\r\nconst Title = () => {\r\n    const {course} = React.useContext(CourseOverviewContext);\r\n    return (\r\n        <div className=\"course-overview__title layout__content-block\">\r\n            <h2>{course.name}</h2>\r\n            <PageLink className=\"course-overview__link\" to={`/shop/${course.id}`}>\r\n                Страница курса\r\n            </PageLink>\r\n        </div>\r\n    );\r\n};\r\n\r\n//TODO: error boundaries\r\nconst Teachers = () => {\r\n    const {course, teachers} = React.useContext(CourseOverviewContext);\r\n    return (\r\n        <div className=\"layout__content-block\">\r\n            <h3>Преподаватели</h3>\r\n            <div className=\"course-overview__teachers container negate-block-padding\">\r\n                <div className=\"row\">\r\n                    {course.teacher_ids.map((id, i) => (\r\n                        <div className=\"col-12 col-md d-flex p-0\" key={i}>\r\n                            <Teacher\r\n                                teacher={_.find(teachers, {id})}\r\n                                link={`/teachers/${id}/`}/>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst Lessons = ({renderLesson: renderFunc}) => {\r\n    const {course, lessons} = React.useContext(CourseOverviewContext);\r\n    const renderCourse = React.useCallback((item) => {\r\n        return renderFunc(item, {link: `${item.id}/`});\r\n    }, [renderFunc]);\r\n    return (\r\n        <div className=\"layout__content-block\">\r\n            <h3>Уроки</h3>\r\n            <List\r\n                renderItem={renderCourse}>\r\n                {lessons}\r\n            </List>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst CourseOverview = (props) => {\r\n    const {match: {params: {id: param_id}}, path: root, courses, teachers, lessons, children, className, location} = props;\r\n    const id = parseInt(param_id);\r\n    const course = _.find(courses, {id});\r\n    if (course) {\r\n        return (\r\n            <Page\r\n                title={`${course.title}`}\r\n                className={`course-overview ${className || ''}`}\r\n                location={location}>\r\n                <CourseOverviewContext.Provider\r\n                    value={{\r\n                        course,\r\n                        teachers,\r\n                        lessons\r\n                    }}>\r\n                    {children}\r\n                </CourseOverviewContext.Provider>\r\n            </Page>\r\n        )\r\n    } else\r\n        return <ErrorPage errorCode={404} message=\"Курс не найден\" link={{url: root}}/>;\r\n};\r\n\r\nexport default {\r\n    Description,\r\n    Teachers,\r\n    Lessons,\r\n    Title,\r\n    Body: CourseOverview\r\n};\r\n","import React from \"react\";\r\nimport {CourseOverviewContext} from \"components/common/CourseOverview\";\r\nimport {BottomTab} from \"components/Page\";\r\nimport Button from \"../../../ui/Button\";\r\n\r\nconst CoursePriceTab = () => {\r\n    const {course: {price, discount}} = React.useContext(CourseOverviewContext);\r\n    return (\r\n        <BottomTab className=\"course-overview__offer\">\r\n            <div className=\"container layout__bottom-tab-container\">\r\n                <div className=\"row justify-content-end align-items-center\">\r\n                    {discount && (\r\n                        <div className=\"col-auto\">\r\n                            <div className=\"discount\">{price + discount}₽</div>\r\n                        </div>\r\n                    )}\r\n                    <div className=\"col-auto\">\r\n                        <h2 className=\"price\">\r\n                            {price}₽\r\n                        </h2>\r\n                    </div>\r\n                    <div className=\"col-auto\">\r\n                        <Button>Купить</Button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </BottomTab>\r\n    );\r\n};\r\n\r\nexport default CoursePriceTab;\r\n","import React from \"react\";\r\nimport CoverImage from \"./CoverImage\";\r\n\r\nconst VideoCover = ({cover, watchProgress, locked=false, className}) => (\r\n    <CoverImage\r\n        src={cover}\r\n        className={`video-cover ${locked ? 'video-locked' : ''} ${className || ''}`}>\r\n        {watchProgress && (\r\n            <div className=\"video-cover__watch-progress-bar\">\r\n                <div\r\n                    className=\"watch-progress-bar__progress-line\"\r\n                    style={{width: `${watchProgress}%`}}/>\r\n            </div>\r\n        )}\r\n    </CoverImage>\r\n);\r\n\r\nexport default VideoCover;\r\n","import React from 'react';\r\nimport ListItem from \"./ListItem\";\r\nimport VideoCover from \"./VideoCover\";\r\n\r\nexport default function Lesson({lesson, locked=false, link, ...props}) {\r\n    const {name, image_link: cover, description, watchProgress} = lesson;\r\n    return (\r\n        <ListItem\r\n            item={lesson}\r\n            className={`video-class ${locked ? 'disabled' : ''}`}\r\n            title={name}\r\n            description={description}\r\n            preview={(\r\n                <VideoCover\r\n                    cover={cover}\r\n                    className=\"video-class__cover\"\r\n                    locked={locked}\r\n                    watchProgress={!locked && watchProgress}/>\r\n            )}\r\n            key={lesson.id}\r\n            link={locked ? undefined : link}\r\n            {...props}/>\r\n    );\r\n}\r\n","import React from \"react\";\r\nimport Page, {PageContent, PageLoadingPlaceholder} from \"components/Page\";\r\nimport CourseOverview from \"components/common/CourseOverview\";\r\nimport CoursePriceTab from \"./CoursePriceTab\";\r\nimport Lesson from \"components/common/Lesson\";\r\nimport {useShopCatalog, useTeachers, useLessons} from \"store\";\r\n\r\nconst CoursePage = ({path, location, match}) => {\r\n    const {params: {id: courseId}} = match;\r\n    const {catalog, subjects, error, retry} = useShopCatalog();\r\n    const {teachers, error: errorLoadingTeachers, retry: reloadTeachers} = useTeachers();\r\n    const {lessons, error: errorLoadingLessons, retry: reloadLessons} = useLessons(courseId);\r\n    console.log(lessons);\r\n    const renderLesson = (lesson, props) => (\r\n        <Lesson\r\n            lesson={lesson}\r\n            selectable={false}\r\n            locked={false}\r\n            key={lesson.id}/>\r\n    );\r\n    if (catalog && teachers && lessons) {\r\n        return (\r\n            <CourseOverview.Body\r\n                match={match}\r\n                path={path}\r\n                courses={catalog}\r\n                teachers={teachers}\r\n                lessons={lessons}\r\n                location={location}>\r\n                <PageContent parentSection={{name: \"Магазин курсов\"}}>\r\n                    <CourseOverview.Description/>\r\n                    <CourseOverview.Teachers/>\r\n                    <CourseOverview.Lessons renderLesson={renderLesson}/>\r\n                </PageContent>\r\n                <CoursePriceTab/>\r\n            </CourseOverview.Body>\r\n        );\r\n    }\r\n    else {\r\n        return (\r\n            <Page\r\n                location={location}>\r\n                <PageLoadingPlaceholder/>\r\n            </Page>\r\n        );\r\n    }\r\n};\r\n\r\nexport default CoursePage;\r\n","import React from 'react';\r\nimport { Switch, Route } from \"react-router-dom\";\r\nimport ShopCatalogPage from \"./catalog-page\";\r\nimport CoursePage from \"./course-page\";\r\n\r\nexport default class Shop extends React.Component {\r\n    state = {\r\n        selectedCourses: new Set()\r\n    };\r\n\r\n    onCourseSelect = (course) => {\r\n        let {selectedCourses} = this.state;\r\n        if (selectedCourses.has(course))\r\n            return;\r\n        selectedCourses = new Set(selectedCourses);\r\n        selectedCourses.add(course);\r\n        this.setState({selectedCourses});\r\n    };\r\n\r\n    onCourseDeselect = (course) => {\r\n        let {selectedCourses} = this.state;\r\n        selectedCourses = new Set(selectedCourses);\r\n        selectedCourses.delete(course);\r\n        this.setState({selectedCourses});\r\n    };\r\n\r\n    // shouldComponentUpdate(nextProps, nextState, nextContext) {\r\n    //     const shouldUpdate =  (_.reduce(this.props, (result, value, key) => {\r\n    //         const changed = this.props[key] !== nextProps[key];\r\n    //         if (changed)\r\n    //             console.log(key);\r\n    //         if (changed && key === 'match')\r\n    //             return result;\r\n    //         return result || changed;\r\n    //     }, false));\r\n    //     console.log(shouldUpdate);\r\n    //     return shouldUpdate;\r\n    // }\r\n\r\n    render() {\r\n        const {match} = this.props;\r\n        const {selectedCourses} = this.state;\r\n        return (\r\n            <Switch>\r\n                <Route exact path={`${match.path}`} render={(props) => (\r\n                    <ShopCatalogPage\r\n                        selectedCourses={selectedCourses}\r\n                        onCourseSelect={this.onCourseSelect}\r\n                        onCourseDeselect={this.onCourseDeselect}\r\n                        {...props}/>\r\n                )}/>\r\n                <Route path={`${match.path}/:id`} component={props => (\r\n                    <CoursePage\r\n                        path={match.path}\r\n                        {...props}/>\r\n                )}/>\r\n            </Switch>\r\n        )\r\n    }\r\n}\r\n","import React from \"react\";\r\nimport CourseCatalog from \"components/common/CourseCatalog\";\r\nimport Course from \"components/common/Course\";\r\nimport Button from \"components/ui/Button\";\r\nimport Page, {PageContent} from \"components/Page\";\r\nimport {LEARNING_STATUS} from \"definitions/constants\";\r\nimport {SUBJECTS} from \"../../../../data/test_data\";\r\n\r\nconst CatalogPage = ({catalog, location}) => {\r\n    const renderCourse = React.useCallback((course, props) => (\r\n        <Course\r\n            course={course}\r\n            selectable\r\n            online={false}\r\n            key={course.id}\r\n            {...props}>\r\n            {course.status === LEARNING_STATUS.learning\r\n                ? <Button className=\"course__select-btn\">Изучать</Button>\r\n                : <Button className=\"course__select-btn\" active={false}>Пройден</Button>}\r\n        </Course>\r\n    ), []);\r\n    return (\r\n        <Page\r\n            className=\"user-courses\"\r\n            location={location}\r\n            title=\"Мои курсы\">\r\n            <CourseCatalog.Body\r\n                courses={catalog}\r\n                subjects={SUBJECTS}>\r\n                <PageContent>\r\n                    <CourseCatalog.Filter/>\r\n                    <CourseCatalog.Catalog\r\n                        renderCourse={renderCourse}/>\r\n                </PageContent>\r\n            </CourseCatalog.Body>\r\n        </Page>\r\n    );\r\n};\r\n\r\nexport default CatalogPage;\r\n","import React from \"react\";\r\nimport {PageContent} from \"components/Page\";\r\nimport CourseOverview from \"components/common/CourseOverview\";\r\nimport Lesson from \"components/common/Lesson\";\r\nimport Button from \"components/ui/Button\";\r\nimport {renderDate} from \"definitions/helpers\";\r\nimport _ from \"lodash\";\r\n\r\nconst CoursePage = ({path, catalog, match, ...props}) => {\r\n    const {params: {id: courseId}} = match;\r\n    const id = parseInt(courseId);\r\n    const course = _.find(catalog, {id});\r\n    console.log(catalog, courseId, course);\r\n    const renderLesson = (lesson, props) => {\r\n        const {date, id, locked} = lesson;\r\n        return (\r\n            <Lesson\r\n                lesson={lesson}\r\n                locked={locked}\r\n                selectable={!locked}\r\n                key={id}\r\n                {...props}>\r\n                {/*<div className=\"list__item-action-info\">{renderDate(date, renderDate.shortDate)}</div>*/}\r\n                {!locked\r\n                    ? <Button>Изучать</Button>\r\n                    : <Button active={false}>Скоро</Button>}\r\n            </Lesson>\r\n        );\r\n    };\r\n    return (\r\n        <CourseOverview.Body\r\n            path={path}\r\n            courses={catalog}\r\n            lessons={course && course.lessons}\r\n            match={match}\r\n            {...props}>\r\n            <PageContent parentSection={{name: \"Мои курсы\"}}>\r\n                <CourseOverview.Title/>\r\n                <CourseOverview.Lessons renderLesson={renderLesson}/>\r\n            </PageContent>\r\n        </CourseOverview.Body>\r\n    );\r\n};\r\n\r\nexport default CoursePage;\r\n","import React, { Component, Fragment } from 'react';\r\n\r\nclass Tooltip extends Component {\r\n    componentDidMount() {\r\n    }\r\n\r\n    render() {\r\n        let child = React.Children.only(this.props.children);\r\n        let position = 'pos-' + this.props.position;\r\n        return React.cloneElement(child, {\r\n            className: (child.props.className ? child.props.className + ' tooltip ' : 'tooltip ') + position,\r\n            children: (\r\n                <Fragment>\r\n                    {child.props.children}\r\n                    <div className=\"tooltip-arrow\"/>\r\n                    <div className=\"tooltip-block\">\r\n                        {\r\n                            this.props.content\r\n                        }\r\n                    </div>\r\n                </Fragment>\r\n            )\r\n        });\r\n    }\r\n}\r\n\r\nexport default Tooltip;\r\n","import React from 'react';\r\nimport {useUpdateEffect} from \"hooks/common\";\r\nimport {CSSTransition, SwitchTransition} from \"react-transition-group\";\r\nimport Tooltip from \"./Tooltip\";\r\n\r\nexport const LOADING_STATE = {\r\n    PENDING: 'pending',\r\n    LOADING: 'loading',\r\n    LOADED: 'loaded',\r\n    SUCCESS: 'success',\r\n    DONE: 'done',\r\n    REJECTED: 'rejected',\r\n    ERROR: 'error'\r\n};\r\n\r\nexport function useLoadingState(loading, done, rejected, error) {\r\n    const [state, setState] = React.useState(loading === null || done\r\n        ? LOADING_STATE.DONE\r\n        : (rejected\r\n            ? LOADING_STATE.REJECTED\r\n            : LOADING_STATE.LOADING));\r\n    useUpdateEffect(() => {\r\n        if (loading === false) {\r\n            setState(LOADING_STATE.LOADED);\r\n        } else if (loading === true) {\r\n            setState(LOADING_STATE.LOADING);\r\n        }\r\n    }, [loading]);\r\n    useUpdateEffect(() => {\r\n        if (state === LOADING_STATE.LOADED && done) {\r\n            setState(LOADING_STATE.SUCCESS);\r\n        }\r\n        else if (state === LOADING_STATE.SUCCESS) {\r\n            const timeout = setTimeout(() => {\r\n                setState(LOADING_STATE.DONE);\r\n            }, 1000);\r\n            return () => {\r\n                clearTimeout(timeout);\r\n            };\r\n        }\r\n    }, [state, done]);\r\n    useUpdateEffect(() => {\r\n        if (error)\r\n            setState(LOADING_STATE.ERROR);\r\n    }, [error]);\r\n    useUpdateEffect(() => {\r\n        if (rejected)\r\n            setState(LOADING_STATE.REJECTED);\r\n    }, [rejected]);\r\n    return state;\r\n}\r\n\r\nexport const LoadingIndicator = ({state, onClick, errorMessage}) => {\r\n    const icon = (state === LOADING_STATE.LOADED && \"spinner-border\")\r\n        || (state === LOADING_STATE.SUCCESS && \"icon-check\")\r\n        || (state === LOADING_STATE.ERROR && \"icon-reload\")\r\n        || (state === LOADING_STATE.REJECTED && \"icon-alert\")\r\n        || \"spinner-border\";\r\n    return (\r\n        <SwitchTransition>\r\n            {state !== LOADING_STATE.DONE ? (\r\n                <CSSTransition\r\n                    key={icon}\r\n                    appear={true}\r\n                    classNames=\"animation-scale\"\r\n                    timeout={300}>\r\n                    <div\r\n                        className=\"file__state-indicator\"\r\n                        onClick={onClick}>\r\n                        <Tooltip content={errorMessage}>\r\n                            <i\r\n                                className={icon}/>\r\n                        </Tooltip>\r\n                    </div>\r\n                </CSSTransition>\r\n            ) : null}\r\n        </SwitchTransition>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport Button from \"./Button\";\r\nimport {downloadFile} from \"../../definitions/helpers\";\r\nimport {LoadingIndicator, useLoadingState} from \"./LoadingIndicator\";\r\n\r\nconst File = ({\r\n                  file: {name, downloadName, url},\r\n                  error=null,\r\n                  rejected=null,\r\n                  loading=null,\r\n                  done=true,\r\n                  deletable=false,\r\n                  onDelete,\r\n                  onIndicatorClick,\r\n                  className,\r\n                  errorMessage,\r\n                  ...props\r\n              }) => {\r\n    const downloadCallback = React.useCallback(() => {\r\n        if (url)\r\n            downloadFile(url, downloadName || name);\r\n    }, [url, name, downloadName]);\r\n    const isUpload = loading !== null;\r\n    const state = useLoadingState(loading !== null ? loading < 100 : null, done, rejected, error);\r\n    return (\r\n        <div className={`file file-${state} ${className || ''}`}>\r\n            <Button\r\n                neutral\r\n                className=\"file__btn\"\r\n                icon={deletable\r\n                    ? <i className=\"icon-close file__action-btn file__delete-btn animated__action-button\"/>\r\n                    : <i className=\"icon-download file__action-btn file__download-btn animated__action-button\"/>}\r\n                iconAction={deletable ? onDelete : undefined}\r\n                onClick={downloadCallback}\r\n                {...props}>\r\n                {loading !== null && <div className=\"file__loading-progress\" style={{width: `${loading}%`}}/>}\r\n                <i className=\"file__icon far fa-file-alt\"/>\r\n                <span\r\n                    className=\"file__name\"\r\n                    title={name}>\r\n                {name}\r\n            </span>\r\n            </Button>\r\n            {isUpload && (\r\n                <LoadingIndicator\r\n                    onClick={onIndicatorClick}\r\n                    state={state}\r\n                    errorMessage={errorMessage}/>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default File;\r\n\r\n","import React from \"react\";\r\n\r\nconst VideoPlayer = ({video_link}) => (\r\n    <div className=\"video-player\">\r\n        <iframe\r\n            className=\"video-player__video\"\r\n            src={`https://player.vimeo.com/video/${video_link}?color=fa9346&title=0&byline=0&portrait=0`}\r\n            frameBorder=\"0\"\r\n            allow=\"autoplay; fullscreen\"\r\n            allowFullScreen/>\r\n    </div>\r\n);\r\n\r\nexport default VideoPlayer;\r\n","import {CSSTransition} from \"react-transition-group\";\r\nimport ReactDOM from 'react-dom';\r\n\r\n//hack to get context because lib doesn't export it properly and import doesn't work\r\n// const TransitionGroupContext = Transition.contextType;\r\n//\r\n// const getClassNames = (classNames, type) => {\r\n//     const isStringClassNames = typeof classNames === 'string';\r\n//     const prefix = isStringClassNames && classNames\r\n//         ? `${classNames}-`\r\n//         : '';\r\n//\r\n//     let baseClassName = isStringClassNames\r\n//         ? `${prefix}${type}`\r\n//         : classNames[type];\r\n//\r\n//     let activeClassName = isStringClassNames\r\n//         ? `${baseClassName}-active`\r\n//         : classNames[`${type}Active`];\r\n//\r\n//     let doneClassName = isStringClassNames\r\n//         ? `${baseClassName}-done`\r\n//         : classNames[`${type}Done`];\r\n//\r\n//     return {\r\n//         baseClassName,\r\n//         activeClassName,\r\n//         doneClassName\r\n//     };\r\n// };\r\n//\r\n// function getClassName(classNames, type, phase) {\r\n//     // console.log(arguments);\r\n//     let className = getClassNames(classNames, type)[`${phase}ClassName`];\r\n//\r\n//     if (type === 'appear' && phase === 'done') {\r\n//         className += ` ${getClassNames(classNames, 'enter').doneClassName}`;\r\n//     }\r\n//\r\n//     return className;\r\n// }\r\n//\r\n// const State = {\r\n//     entering: 'entering',\r\n//     entered:  'entered',\r\n//     exiting:  'exiting',\r\n//     exited: 'exited'\r\n// };\r\n//\r\n// const StableCSSTransition = ({classNames='', appear, children, ...props}) => {\r\n//     const isMounting = !useIsMounted();\r\n//     const context = React.useContext(TransitionGroupContext);\r\n//         const appearingRef = React.useRef(context ? context.isMounting : appear);\r\n//     const prevStateRef = React.useRef(null);\r\n//     const appliedClassNamesRef = React.useRef('');\r\n//     return (\r\n//         <Transition\r\n//             // mountOnEnter\r\n//             // unmountOnExit\r\n//             {...props}\r\n//             appear={appear}>\r\n//             {(state) => {\r\n//                 const appearing = appearingRef.current;\r\n//                 const prevState = prevStateRef.current;\r\n//                 const animateMounting = context != null;\r\n//\r\n//                 console.log(prevState, '->', state);\r\n//                 let className = appliedClassNamesRef.current;\r\n//                 if (state === State.exited) {\r\n//                     if (prevState !== State.exiting) {\r\n//                         if (appearing) {\r\n//                             className = getClassName(classNames, 'appear', 'base');\r\n//                         }\r\n//                         else if (prevState !== null || animateMounting) {\r\n//                             className = getClassName(classNames, 'enter', 'base');\r\n//                         }\r\n//                     }\r\n//                     else {\r\n//                         className = getClassName(classNames, 'exit', 'done');\r\n//                     }\r\n//                 }\r\n//                 else if (state === State.exiting) {\r\n//                     className = getClassName(classNames, 'exit', 'active');\r\n//                 }\r\n//                 else if (state === State.entered) {\r\n//                     if (prevState === State.entered) {\r\n//                         className = getClassName(classNames, 'exit', 'base');\r\n//                     }\r\n//                     else if (prevState !== null || animateMounting) {\r\n//                         className = getClassName(classNames, appearing ? 'appear' : 'enter', 'done');\r\n//                     }\r\n//                     appearingRef.current = false;\r\n//                 }\r\n//                 else if (state === State.entering || animateMounting) {\r\n//                     className = getClassName(classNames, appearing ? 'appear' : 'enter', 'active');\r\n//                 }\r\n//                 prevStateRef.current = state;\r\n//                 appliedClassNamesRef.current = className;\r\n//                 console.log(className);\r\n//                 const child = React.Children.only(children);\r\n//                 return React.cloneElement(child, {\r\n//                     className: child.props.className ? `${child.props.className} ${className}` : className\r\n//                 });\r\n//             }}\r\n//         </Transition>\r\n//     );\r\n// };\r\n\r\nclass StableCSSTransition extends CSSTransition {\r\n    type = null;\r\n    phase = null;\r\n\r\n    addClass(node, type, phase) {\r\n        super.addClass(node, type, phase);\r\n        this.type = type;\r\n        this.phase = phase;\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        if (this.appliedClasses[this.type] && this.appliedClasses[this.type][this.phase])\r\n            super.addClass(ReactDOM.findDOMNode(this), this.type, this.phase);\r\n    }\r\n}\r\n\r\nexport default StableCSSTransition;\r\n","import React from 'react';\r\nimport _ from 'lodash';\r\nimport Dropzone from \"react-dropzone-uploader\";\r\nimport {TransitionGroup} from \"react-transition-group\";\r\nimport {useRefValue} from \"hooks/common\";\r\nimport Auth from 'definitions/auth';\r\nimport {API_ROOT} from \"definitions/api\";\r\nimport {getAuthHeader} from \"definitions/helpers\";\r\nimport StableCSSTransition from \"components/common/StableCSSTransition\";\r\nimport {LOADING_STATE, LoadingIndicator, useLoadingState} from \"./LoadingIndicator\";\r\nimport File from \"./File\";\r\nimport Button from \"./Button\";\r\n\r\nimport 'react-dropzone-uploader/dist/styles.css';\r\n\r\nconst trimExtension = (filename) => filename.replace(/\\.[^/.]+$/, \"\");\r\n\r\nconst FILE_STATUS = {\r\n    rejected_file_type: 'rejected_file_type',\r\n    rejected_max_files: 'rejected_max_files',\r\n    preparing: 'preparing',\r\n    error_file_size: 'error_file_size',\r\n    error_validation: 'error_validation',\r\n    ready: 'ready',\r\n    started: 'started',\r\n    getting_upload_params: 'getting_upload_params',\r\n    error_upload_params: 'error_upload_params',\r\n    uploading: 'uploading',\r\n    exception_upload: 'exception_upload',\r\n    aborted: 'aborted',\r\n    restarted: 'restarted',\r\n    removed: 'removed',\r\n    error_upload: 'error_upload',\r\n    headers_received: 'headers_received',\r\n    done: 'done',\r\n};\r\nconst FileInputContext = React.createContext(null);\r\nconst isFileReady = f => f.meta.status === 'done';\r\nconst allFilesReady = files => files.every(f => isFileReady(f));\r\nconst getUploadParams = () => {\r\n    // return { url: 'https://httpbin.org/post' };\r\n    if (Auth.user) {\r\n        return {\r\n            url: `${API_ROOT}/files/`,\r\n            headers: getAuthHeader(Auth.user.uid, Auth.user.hash)\r\n        };\r\n    }\r\n    else\r\n        throw new Error('User not logged in');\r\n};\r\nconst getFileProp = ({original_file_name, id_file_name}) => ({\r\n    name: original_file_name,\r\n    downloadName: `${trimExtension(original_file_name)}_${id_file_name}`,\r\n    url: `${API_ROOT}/files/attachments/${id_file_name}?disp=attachment`\r\n});\r\n\r\nconst Input = (props) => {\r\n    const {\r\n        className,\r\n        style,\r\n        getFilesFromEvent,\r\n        accept,\r\n        multiple,\r\n        disabled,\r\n        onFiles,\r\n        files,\r\n        content,\r\n        extra: { maxFiles }\r\n    } = props;\r\n    const onChange = React.useCallback(async e => {\r\n        const target = e.target;\r\n        const chosenFiles = await getFilesFromEvent(e);\r\n        onFiles(chosenFiles);\r\n        target.value = null\r\n    }, [getFilesFromEvent, onFiles]);\r\n    const isActive = files.length < maxFiles && !disabled;\r\n    return (\r\n        <Button\r\n            tag=\"label\"\r\n            active={isActive}\r\n            icon={<i className=\"icon-add\"/>}>\r\n            {content}\r\n            <input\r\n                className={className}\r\n                style={style}\r\n                type=\"file\"\r\n                accept={accept}\r\n                multiple={multiple}\r\n                disabled={!isActive}\r\n                onChange={isActive ? onChange : null}\r\n            />\r\n        </Button>\r\n    );\r\n};\r\n\r\nconst Preview = (props) => {\r\n    const {\r\n        fileWithMeta: { cancel, remove, restart, xhr },\r\n        meta: { name = '', percent = 0, status},\r\n        isUpload,\r\n        canRemove,\r\n        className\r\n    } = props;\r\n    const [getResponse, setResponse] = useRefValue(null);\r\n    if (!getResponse() && xhr && xhr.responseText) {\r\n        try {\r\n            const {original_file_name, file_link, id_file_name} = JSON.parse(xhr.responseText);\r\n            if (!(original_file_name && file_link && id_file_name))\r\n                throw new Error('Incorrect response');\r\n            setResponse({\r\n                original_file_name,\r\n                file_link,\r\n                id_file_name\r\n            });\r\n        }\r\n        catch (e) {\r\n            console.log(e);\r\n        }\r\n    }\r\n    const response = getResponse();\r\n    const deleteCallback = React.useCallback(() => {\r\n        if (isUpload && !(status === 'done' || status === 'headers_received')) {\r\n            cancel();\r\n        }\r\n        remove();\r\n    }, [cancel, remove, isUpload, status]);\r\n    const hasError = _.startsWith(status, 'error') || _.startsWith(status, 'exception');\r\n    const isRejected = status === FILE_STATUS.error_file_size ? true : undefined;\r\n    const loading = isUpload ? status === 'done' || status === 'headers_received' ? 100 : percent : null;\r\n    const isDone = status === 'done';\r\n    return (\r\n        <File\r\n            file={response ? getFileProp(response) : ({name})}\r\n            loading={loading}\r\n            className={className}\r\n            done={isDone}\r\n            rejected={hasError && isRejected ? true : undefined}\r\n            error={hasError}\r\n            errorMessage={hasError && isRejected ? 'Файл превышает максимальный допустимый размер' : undefined}\r\n            deletable={canRemove}\r\n            onDelete={deleteCallback}\r\n            onIndicatorClick={hasError && !isRejected ? restart : undefined}/>\r\n    );\r\n};\r\n\r\nconst SubmitButton = (props) => {\r\n    const {submitting, hasChanged} = React.useContext(FileInputContext) || ({});\r\n    const { disabled, onSubmit, files, content } = props;\r\n    const isDisabled = !allFilesReady(files) || disabled;\r\n\r\n    const submitCallback = React.useCallback(() => {\r\n        onSubmit(files);\r\n    }, [onSubmit, files]);\r\n\r\n    const state = useLoadingState(submitting, submitting === false);\r\n    console.log(state);\r\n    return (\r\n        <StableCSSTransition\r\n            in={onSubmit != null && (hasChanged || state !== LOADING_STATE.DONE)}\r\n            appear\r\n            mountOnEnter\r\n            unmountOnExit\r\n            classNames=\"animation-fade\"\r\n            timeout={300}>\r\n            <React.Fragment>\r\n                <Button\r\n                    active={!isDisabled}\r\n                    icon={\r\n                        hasChanged\r\n                            ? (<i className=\"icon-upload\"/>)\r\n                            : (<LoadingIndicator state={state}/>)\r\n                    }\r\n                    onClick={submitCallback}>\r\n                    {hasChanged ? content : 'Сохранено'}\r\n                </Button>\r\n            </React.Fragment>\r\n        </StableCSSTransition>\r\n    );\r\n};\r\n\r\nconst Layout = ({input, previews=[], submitButton, dropzoneProps, files, extra: { maxFiles } }) => {\r\n    const context = React.useContext(FileInputContext);\r\n    const {preloadedFiles=[], deletePreloadedFile, disabled} = context || ({});\r\n    const { ref } = dropzoneProps;\r\n    return (\r\n        <div\r\n            ref={ref}\r\n            className=\"file-input\">\r\n            {/*<StableCSSTransition*/}\r\n            {/*    in={previews.length > 0 || preloadedFiles.length > 0}*/}\r\n            {/*    mountOnEnter*/}\r\n            {/*    unmountOnExit*/}\r\n            {/*    classNames=\"animation-fade\"*/}\r\n            {/*    timeout={300}>*/}\r\n            <h4 className=\"file-input__files-title\">Загруженные файлы</h4>\r\n            {/*</StableCSSTransition>*/}\r\n            <TransitionGroup className=\"file-container\">\r\n                {\r\n                    preloadedFiles && (\r\n                        preloadedFiles.map((file) => {\r\n                            const {id_file_name} = file;\r\n                            const deleteCallback = () => {deletePreloadedFile(file);};\r\n                            return (\r\n                                <StableCSSTransition\r\n                                    classNames=\"animation-fade\"\r\n                                    timeout={300}\r\n                                    key={id_file_name}>\r\n                                    <File\r\n                                        file={getFileProp(file)}\r\n                                        done={true}\r\n                                        deletable={!disabled}\r\n                                        onDelete={deleteCallback}/>\r\n                                </StableCSSTransition>\r\n                            );\r\n                        }\r\n                    ))\r\n                }\r\n                {previews.map((preview, i) => (\r\n                    <StableCSSTransition\r\n                        classNames=\"animation-fade\"\r\n                        timeout={300}\r\n                        key={preview.props.meta.id}>\r\n                        {preview}\r\n                    </StableCSSTransition>\r\n                ))}\r\n            </TransitionGroup>\r\n            <div className=\"file-input__controls\">\r\n                {input}\r\n                {submitButton}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst getCallbackFiles = (files, preloadedFiles) => {\r\n    if (!allFilesReady(files))\r\n        return null;\r\n    else\r\n        return _.concat(preloadedFiles, files.map(({xhr}) => JSON.parse(xhr.responseText)));\r\n};\r\n\r\n//TODO: check disabled on capturing phase of click\r\nconst FileInput = (props) => {\r\n    let {\r\n        initialFiles=[],\r\n        inputContent=\"Загрузить файл\",\r\n        onChange,\r\n        onSubmit,\r\n        maxFiles=5,\r\n        maxSizeBytes=1024 * 1024 * 4,\r\n        accept,\r\n        isDisabled=false,\r\n        ...otherProps\r\n    } = props;\r\n\r\n    const [preloadedFiles, setPreloadedFiles] = React.useState(initialFiles);\r\n    const [hasChanged, setChanged] = React.useState(false);\r\n    const [submitting, setSubmitting] = React.useState(null);\r\n    const [getInputFiles, setInputFiles] = useRefValue([]);\r\n\r\n    const deletePreloadedFile = React.useCallback((file) => {\r\n        const newPreloadedFiles = preloadedFiles.filter(item => item !== file);\r\n        setChanged(true);\r\n        setPreloadedFiles(newPreloadedFiles);\r\n        onChange && onChange(getCallbackFiles(getInputFiles(), newPreloadedFiles));\r\n    }, [preloadedFiles, onChange, getInputFiles]);\r\n\r\n    const handleChangeStatus = React.useCallback(({meta, ...file}, status, files) => {\r\n        console.log(status, meta, _.cloneDeep(files));\r\n        setChanged(true);\r\n        setInputFiles(files);\r\n        onChange && onChange(true, getCallbackFiles(files, preloadedFiles));\r\n    }, [onChange, preloadedFiles, setInputFiles]);\r\n\r\n    const handleSubmit = React.useCallback(async (files) => {\r\n        console.log(files.map(f => f.meta));\r\n        if (onSubmit) {\r\n            const filesToSubmit = getCallbackFiles(files, preloadedFiles);\r\n            const returnValue = onSubmit(filesToSubmit);\r\n            if (returnValue instanceof Promise) {\r\n                setSubmitting(true);\r\n                try {\r\n                    await returnValue;\r\n                    setChanged(false);\r\n                    onChange && onChange(false, filesToSubmit);\r\n                }\r\n                finally {\r\n                    setSubmitting(false);\r\n                }\r\n            }\r\n        }\r\n    }, [onSubmit, preloadedFiles]);\r\n\r\n    maxFiles = preloadedFiles ? maxFiles - preloadedFiles.length : maxFiles;\r\n    const disabled = typeof isDisabled === 'function' ? isDisabled() : isDisabled;\r\n    return (\r\n        <FileInputContext.Provider\r\n            value={{\r\n                preloadedFiles,\r\n                deletePreloadedFile,\r\n                hasChanged,\r\n                disabled,\r\n                submitting\r\n            }}>\r\n            <Dropzone\r\n                inputContent={inputContent}\r\n                submitButtonContent={'Сохранить'}\r\n                {...otherProps}\r\n                getUploadParams={getUploadParams}\r\n                onChangeStatus={handleChangeStatus}\r\n                onSubmit={onSubmit && handleSubmit}\r\n                canCancel={false}\r\n                SubmitButtonComponent={SubmitButton}\r\n                LayoutComponent={Layout}\r\n                InputComponent={Input}\r\n                PreviewComponent={Preview}\r\n                maxFiles={maxFiles}\r\n                maxSizeBytes={maxSizeBytes}\r\n                accept={accept}\r\n                classNames={{preview: ''}}\r\n                disabled={isDisabled}\r\n            />\r\n        </FileInputContext.Provider>\r\n    )\r\n};\r\n\r\nexport default FileInput;\r\n\r\n\r\n","import React from 'react';\r\nimport {Prompt} from \"react-router-dom\";\r\n\r\nconst NavigationBlocker = () => {\r\n    const unloadCallback = React.useCallback((event) => {\r\n        // Cancel the event as stated by the standard.\r\n        event.preventDefault();\r\n        // Chrome requires returnValue to be set.\r\n        event.returnValue = '';\r\n    }, []);\r\n    React.useEffect(() => {\r\n        window.addEventListener('beforeunload', unloadCallback);\r\n        return () => {\r\n            window.removeEventListener('beforeunload', unloadCallback);\r\n        };\r\n    }, [unloadCallback]);\r\n    return (\r\n        <Prompt\r\n            message='У вас есть несохраненные изменения, покинуть страницу?'\r\n        />\r\n    );\r\n};\r\n\r\nexport default NavigationBlocker;\r\n","import React from \"react\";\r\nimport FileInput from \"components/ui/FileInput\";\r\nimport APIRequest from \"definitions/api\";\r\nimport NavigationBlocker from \"components/common/NavigationBlocker\";\r\n\r\nconst HomeworkLoader = ({homework, lessonId}) => {\r\n    const isHomeworkSubmissionClosed = React.useCallback(() => homework.deadline && new Date() >= homework.deadline, [homework]);\r\n    const [hasChanges, setChanges] = React.useState(false);\r\n    const onChange = React.useCallback((files) => {\r\n        console.log('files changed', files);\r\n        setChanges(true);\r\n    }, []);\r\n    const onSubmit = React.useCallback(async (files) => {\r\n        console.log('files submitted', files);\r\n        const file = files[0] ? files[0].id_file_name : null;\r\n        //TODO: add error alert\r\n        return APIRequest({\r\n            url: `/lessons/${lessonId}/homeworks/`,\r\n            method: file ? (homework.submittedFiles ? 'PUT' : 'POST') : 'DELETE',\r\n            data: {\r\n                file\r\n            }\r\n        }).then(() => {\r\n            setChanges(false);\r\n        });\r\n        // return Promise.resolve();\r\n    }, [homework, lessonId, setChanges]);\r\n    return (\r\n        <div className=\"submission\">\r\n            {hasChanges && <NavigationBlocker/>}\r\n            <FileInput\r\n                maxFiles={1}\r\n                accept=\"image/*,audio/*,video/*\"\r\n                initialFiles={homework.submittedFiles}\r\n                onChange={onChange}\r\n                onSubmit={onSubmit}\r\n                isDisabled={isHomeworkSubmissionClosed}/>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default HomeworkLoader;\r\n","import React from \"react\";\r\nimport File from \"components/ui/File\";\r\nimport VideoPlayer from \"components/common/VideoPlayer\";\r\nimport {renderDate} from \"definitions/helpers\";\r\nimport HomeworkLoader from \"./HomeworkLoader\";\r\n\r\nconst LessonView = ({lesson: {id, name, image_link: cover, video_link: video, description, homework}}) => {\r\n    return (\r\n        <div className=\"col-12 col-lg layout__content-block lesson-page__current-lesson\">\r\n            <div className=\"block-container video-container\">\r\n                <VideoPlayer video_link={video}/>\r\n            </div>\r\n            <div className=\"block-container description-container\">\r\n                <h2>{name}</h2>\r\n                <div className=\"description-text\">{description}</div>\r\n            </div>\r\n            {homework && (\r\n                <div className=\"block-container hw-container\">\r\n                    <h3>Домашнее задание</h3>\r\n                    <div className=\"assignment\">\r\n                        {homework.files && (\r\n                            <div className=\"assignment__files file-container\">\r\n                                {homework.files.map((assignment, i) => (\r\n                                    <File file={assignment} key={i}/>\r\n                                ))}\r\n                            </div>\r\n                        )}\r\n                        {homework.description && <div className=\"description-text\">{homework.description}</div>}\r\n                        {homework.deadline &&\r\n                        <div className=\"assignment__deadline\">Дедлайн: {renderDate(homework.deadline, renderDate.date)}</div>}\r\n                    </div>\r\n                    {homework.submit && (\r\n                        <HomeworkLoader homework={homework} lessonId={id}/>\r\n                    )}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default LessonView;\r\n","import React from \"react\";\r\nimport _ from \"lodash\";\r\nimport Page, {PageContent} from \"components/Page\";\r\nimport ErrorPage from \"components/ErrorPage\";\r\nimport Lesson from \"components/common/Lesson\";\r\nimport List from \"components/common/List\";\r\nimport LessonView from \"./LessonView\";\r\n\r\nconst LessonPage = (props) => {\r\n    const {match: {params: {courseId: param_course, lessonId: param_lesson}}, catalog, location} = props;\r\n    const courseId = parseInt(param_course);\r\n    const lessonId = parseInt(param_lesson);\r\n    const course = _.find(catalog, {id: courseId});\r\n    const selectedLesson = (course &&_.find(course.lessons, {id: lessonId})) || null;\r\n    const renderLesson = (lesson) => {\r\n        const {id, locked} = lesson;\r\n        return (\r\n            <Lesson\r\n                lesson={lesson}\r\n                locked={locked}\r\n                selectable={!locked}\r\n                key={id}\r\n                link={`../${lesson.id}/`}>\r\n            </Lesson>\r\n        );\r\n    };\r\n    if (selectedLesson && !selectedLesson.locked) {\r\n        let nextVideo = course.lessons[selectedLesson.num];\r\n        if (nextVideo.locked)\r\n            nextVideo = null;\r\n        const otherLessons = _.sortBy(course.lessons.filter(lesson => (\r\n            lesson.id !== selectedLesson.id && (nextVideo ? lesson.id !== nextVideo.id : true\r\n            ))), 'num');\r\n        return (\r\n            <Page title={`${selectedLesson.title}`} className=\"lesson-page\" location={location}>\r\n                <PageContent parentSection={{name: course.name}}>\r\n                    <div className=\"layout__content-block\">\r\n                        <div className=\"container p-lg-0\">\r\n                            <div className=\"row\">\r\n                                <LessonView lesson={selectedLesson}/>\r\n                                <div className=\"col-12 col-lg-auto layout__content-block lesson-page__other-lessons\">\r\n                                    {nextVideo && <h3>Следующее занятие</h3>}\r\n                                    {nextVideo && (\r\n                                        <List renderItem={renderLesson}>{[nextVideo]}</List>\r\n                                    )}\r\n                                    <h3>Другие занятия</h3>\r\n                                    <List\r\n                                        renderItem={renderLesson}>\r\n                                        {otherLessons}\r\n                                    </List>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </PageContent>\r\n            </Page>\r\n        );\r\n    } else\r\n        return <ErrorPage errorCode={404} message=\"Урок не найден\" />;\r\n};\r\n\r\nexport default LessonPage;\r\n","import React from 'react';\r\nimport _ from 'lodash';\r\nimport { Switch, Route } from \"react-router-dom\";\r\nimport {MY_COURSES} from \"data/test_data\";\r\nimport {LEARNING_STATUS} from \"definitions/constants\";\r\nimport CatalogPage from \"./catalog-page\";\r\nimport CoursePage from \"./course-page\";\r\nimport LessonPage from \"./lesson-page\";\r\n\r\nexport default class MyCourses extends React.Component {\r\n    state = {\r\n        courses: _.sortBy(MY_COURSES, (course) => course.status === LEARNING_STATUS.finished ? 1 : 0)\r\n    };\r\n\r\n    render() {\r\n        const {match} = this.props;\r\n        const {courses} = this.state;\r\n        return (\r\n            <Switch>\r\n                <Route path={`${match.path}/:courseId/:lessonId`} render={(props) => (\r\n                    <LessonPage catalog={courses}\r\n                                {...props}/>\r\n                )}/>\r\n                <Route path={`${match.path}/:id`} render={(props) => (\r\n                    <CoursePage\r\n                        catalog={courses}\r\n                        path={match.path}\r\n                        {...props}/>\r\n                )}/>\r\n                <Route exact path={`${match.path}`} render={(props) => (\r\n                    <CatalogPage catalog={courses} {...props}/>\r\n                )}/>\r\n            </Switch>\r\n        )\r\n    }\r\n}\r\n","import React from 'react';\r\nimport {CSSTransition} from \"react-transition-group\";\r\nimport {HashRouter as Router, Redirect, Route, Switch, useHistory, useLocation} from \"react-router-dom\";\r\nimport Header from \"./Header\";\r\nimport SideBar from \"./SideBar\";\r\nimport Page from \"./Page\";\r\nimport {useRefValue} from \"hooks/common\";\r\nimport GlobalStore, {useUser} from \"store\";\r\n\r\nimport Login from \"./pages/login\";\r\nimport Account from \"./pages/account\";\r\nimport Teachers from \"./pages/teachers\";\r\nimport Shop from \"./pages/shop\";\r\nimport MyCourses from \"./pages/courses\";\r\n\r\nimport 'sass/index.scss';\r\n\r\nfunction useLocationChangeEffect(effect) {\r\n    const history = useHistory();\r\n    React.useEffect(() => {\r\n        return history.listen(effect);\r\n    }, [history, effect]);\r\n}\r\n\r\nfunction useScrollToTop() {\r\n    const [getPrevPath, setPrevPath] = useRefValue(useLocation().pathname);\r\n    const onLocationChange = React.useCallback((location, action) => {\r\n        console.log('update');\r\n        if (getPrevPath() !== location.pathname && action !== 'POP') {\r\n            window.scrollTo(0, 0);\r\n        }\r\n        setPrevPath(location.pathname);\r\n    }, [getPrevPath, setPrevPath]);\r\n    useLocationChangeEffect(onLocationChange);\r\n}\r\n\r\nfunction useForceTrailingSlash() {\r\n    const location = useLocation();\r\n    const history = useHistory();\r\n    const path = location.pathname;\r\n    if (path.slice(-1) !== '/') {\r\n        history.replace(path + '/');\r\n    }\r\n}\r\n\r\nfunction useSideBarState() {\r\n    const [isSideBarOpened, setSideBar] = React.useState(false);\r\n    const toggleSideBar = React.useCallback(() => {\r\n        setSideBar(opened => !opened);\r\n    }, []);\r\n    return [isSideBarOpened, toggleSideBar];\r\n}\r\n\r\nconst onLocationChange = (location, args) => {\r\n    console.log(`- - - location: '${location.pathname}'`, args);\r\n};\r\n\r\nfunction App() {\r\n    // routing effects\r\n    useForceTrailingSlash();\r\n    useScrollToTop();\r\n    useLocationChangeEffect(onLocationChange);\r\n\r\n    const [isSideBarOpened, toggleSideBar] = useSideBarState();\r\n    const {user, userInfo} = useUser();\r\n    const showSidebar = userInfo !== null;\r\n    return (\r\n        <div className=\"app\">\r\n            <Header\r\n                onMenuButtonClick={toggleSideBar}\r\n                user={user}\r\n                sidebar={showSidebar}/>\r\n            <CSSTransition\r\n                in={isSideBarOpened}\r\n                timeout={200}\r\n                classNames={App.layoutAnimationClassNames}>\r\n                <div className=\"layout\">\r\n                    <React.Fragment>\r\n                        {showSidebar && (<SideBar onMenuClose={toggleSideBar}/>)}\r\n                        <Switch>\r\n                            <Route exact path=\"/\" render={() => <Redirect to=\"/courses\"/>}/>\r\n                            <Route path=\"/login\" component={Login}/>\r\n                            <Route path=\"/courses\" component={MyCourses}/>\r\n                            <Route path=\"/shop\" component={Shop}/>\r\n                            <Route path=\"/teachers\" component={Teachers}/>\r\n                            <Route path=\"/account\" component={Account}/>\r\n                            <Route path=\"/:section\" component={Page}/>\r\n                        </Switch>\r\n                    </React.Fragment>\r\n                </div>\r\n            </CSSTransition>\r\n        </div>\r\n    );\r\n}\r\n\r\nApp.layoutAnimationClassNames = {\r\n    enter: 'sidebar-opened',\r\n    enterActive: 'sidebar-opened',\r\n    enterDone: 'sidebar-opened',\r\n    exit: 'sidebar-hiding',\r\n    exitActive: 'sidebar-hiding'\r\n};\r\n\r\nexport default () => (\r\n    <Router basename={process.env.REACT_APP_BASE_NAME}>\r\n        <GlobalStore>\r\n            <App/>\r\n        </GlobalStore>\r\n    </Router>\r\n);\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import 'definitions/polyfills';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from 'components/App';\nimport APIRequest from \"definitions/api\";\nimport * as serviceWorker from './serviceWorker';\n\nwindow.APIRequest = APIRequest;\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/dummy_poster.f51c6af6.jpg\";"],"sourceRoot":""}