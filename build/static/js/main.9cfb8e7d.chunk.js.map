{"version":3,"sources":["img/logo.svg","definitions/polyfills.js","definitions/api.js","definitions/auth.js","components/common/CoverImage.jsx","components/Header.jsx","components/common/Contacts.jsx","components/SideBar.jsx","definitions/constants.js","data/test_data.js","store/index.js","components/Page.jsx","hooks/common.js","components/pages/login/LoginPage.jsx","components/common/UserProfile.jsx","components/pages/account/AccountPage.jsx","components/common/ListItem.jsx","components/common/List.jsx","components/ui/ScrollBars.jsx","components/ui/Select.jsx","components/ui/Input.jsx","components/common/Catalog.jsx","components/common/Teacher.jsx","components/pages/teachers/catalog-page/TeachersCatalog.jsx","components/pages/teachers/catalog-page/TeachersCatalogPage.jsx","components/ui/Button.jsx","components/ErrorPage.jsx","components/common/CourseCatalog.jsx","definitions/helpers.js","components/common/Course.jsx","components/pages/teachers/teacher-page/TeacherPage.jsx","components/pages/teachers/index.jsx","components/pages/shop/catalog-page/SelectedCoursesTab.jsx","components/pages/shop/catalog-page/ShopCatalogPage.jsx","components/common/CourseOverview.jsx","components/pages/shop/course-page/CoursePriceTab.jsx","components/common/VideoCover.jsx","components/common/Lesson.jsx","components/pages/shop/course-page/CoursePage.jsx","components/pages/shop/index.jsx","components/pages/courses/catalog-page/CatalogPage.jsx","components/pages/courses/course-page/CoursePage.jsx","components/ui/Tooltip.jsx","components/ui/LoadingIndicator.jsx","components/ui/File.jsx","components/common/StableCSSTransition.jsx","components/ui/FileInput.jsx","components/common/NavigationBlocker.jsx","components/pages/courses/lesson-page/HomeworkLoader.jsx","components/pages/courses/lesson-page/LessonView.jsx","components/pages/courses/lesson-page/LessonPage.jsx","components/pages/courses/index.jsx","components/App.jsx","serviceWorker.js","index.js","img/dummy_poster.jpg"],"names":["module","exports","__webpack_require__","p","elementClosest","window","API_ROOT","APIRequest","axios","create","baseURL","interceptors","request","use","config","Auth","user","_objectSpread","auth","username","uid","password","hash","Cancel","response","data","LOCAL_STORAGE_KEY","AuthEventTypes","login","logout","initVK","_this","this","Object","classCallCheck","eventHandlers","_ref","asyncToGenerator","regenerator_default","a","mark","_callee","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","wrap","_context","prev","next","VK","abrupt","init","apiId","process","auth_objectSpread","console","info","localStorage","setItem","JSON","stringify","undefined","Symbol","iterator","done","handler","value","t0","return","finish","stop","_x","apply","arguments","removeItem","userInfo","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","err","storedString","getItem","storedData","parse","first_name","last_name","photo","photo_rec","Error","concat","e","error","eventType","push","filter","func","get","_context2","elementId","Widgets","onAuth","CoverImage","src","className","children","_ref$square","square","_ref$round","round","react_default","createElement","style","backgroundImage","Header","props","onMenuButtonClick","sidebar","onClick","logo","alt","Fragment","common_CoverImage","react_router_dom","to","tabIndex","Contacts","_ref$contacts","contacts","vk","fb","ok","ig","href","Link","assign","activeClassName","SideBar","event","target","currentTarget","classList","contains","onMenuClose","React","Component","LEARNING_STATUS","learning","finished","lorem","LoremIpsum","getDate","daysForward","date","Date","setDate","SUBJECTS","id","name","TEACHERS","subject_ids","slice","map","poster","bio","generateSentences","COURSES","subject","i","subject_id","online","image_link","date_start","date_end","description","generateParagraphs","lessons","_","times","j","number","title","cover","teacher_ids","_ref2","SHOP_CATALOG","catalog","course","test_data_objectSpread","price","discount","MY_COURSES","lesson","watchProgress","homework","files","url","deadline","submit","submittedFiles","original_file_name","id_file_name","file_link","status","StoreContext","createContext","useShopCatalogStore","useState","useSubjectsStore","useTeachersStore","requests","useSubjects","_React$useContext","useContext","subjects","setSubjects","setters","_React$useState5","_React$useState6","slicedToArray","setError","fetchSubjects","useCallback","_callee2","useEffect","retry","useTeachers","_useSubjects","errorLoadingSubjects","reloadSubjects","_React$useContext2","teachers","setTeachers","_React$useState7","_React$useState8","fetchTeachers","_callee3","_teachers","_context3","log","useShopCatalog","_useSubjects2","_React$useContext3","setCatalog","_React$useState9","_React$useState10","fetchCatalog","_callee4","_catalog","_context4","shopCatalog","GlobalStore","_ref5","_useUserAuth","_React$useState","getUser","_React$useState2","setUser","_React$useState3","_React$useState4","setUserInfo","fetchUserInfo","loginCallback","logoutCallback","useLayoutEffect","subscribe","unsubscribe","useUserAuth","_useUserAuth2","_useShopCatalogStore","_useShopCatalogStore2","_useSubjectsStore","_useSubjectsStore2","_useTeachersStore","_useTeachersStore2","useStoreData","Provider","store_objectSpread","useUser","_React$useContext4","PageLoadingPlaceholder","PageLink","_ref$arrow","arrow","_ref$forward","forward","objectWithoutProperties","PageContent","parentSection","Page_PageLink","BottomTab","_ref3","stickyProps","lib_default","mode","Page","_ref4","_ref4$checkLogin","checkLogin","location","_useUser","react_router","pathname","state","referrer","Helmet","useTruncate","text","descriptionRef","useRef","document","readyState","isFontLoaded","setFontLoaded","addEventListener","handleResize","removeEventListener","handleLoading","current","onResize","useRefValue","initialValue","ref","useUpdateEffect","effect","dependencies","length","isInitialMount","LoginPage","loginWidget","components_Page","UserProfile","about","role","fullName","AccountPage","Page_PageContent","common_UserProfile","ListItem","preview","subtitle","item","selectable","action","link","clickCallback","actionCallback","onActionClick","callbackProps","_useTruncate","_useTruncate2","clicked","closest","preventDefault","content","Truncate","lines","List","renderItem","renderProps","flex","index","defaultProps","key","renderTrackVertical","renderThumbVertical","renderTrackHorizontal","renderThumbHorizontal","ScrollBars","forwardRef","react_custom_scrollbars_lib","DropdownIndicator","react_select_esm","SelectContainer","selectProps","hasValue","setValue","Select_objectSpread","isClearable","Option","label","MenuList","innerRef","scrollBar","view","ui_ScrollBars","autoHeight","hideTracksWhenNotNeeded","autoHeightMax","maxHeight","Select","onChange","option","_this2","callback","_this$props","options","components","_this$props$isClearab","_this$props$isSearcha","isSearchable","placeholder","maxMenuHeight","find","classNamePrefix","menuPlacement","noOptionsMessage","styles","PureComponent","useChangeHandler","inputProp","Input","CheckBox","type","checked","CatalogContext","common_Catalog","Filter","_ref$filterBy","filterBy","_ref$filterBy$subject","filterBySubject","_ref$filterBy$online","filterByOnline","ui_Input","Catalog","renderFunc","listProps","baseUrl","items","Catalog_objectSpread","Body","filterItems","_props$renderProps","history","useHistory","useLocation","params","URLSearchParams","search","parseInt","onFilterChange","set","delete","matchingItems","Teacher","_props$teacher","teacher","_props$bio","teacherSubjects","toLowerCase","join","catalog_page_TeachersCatalog","renderTeacher","otherProps","useMemo","subjectsMap","zipObject","subjectsTeachers","reduce","result","forEach","values","getMatchingCourses","some","TeachersCatalogPage","_useTeachers","Page_PageLoadingPlaceholder","Button","_ref$active","active","_ref$neutral","neutral","icon","iconAction","_ref$tag","tag","Tag","ErrorPage","errorCode","message","_ref$link","code","toString","split","ui_Button","replace","common_CourseCatalog","renderCourse","courses","daysBetween","date1","date2","date1_ms","getYear","getMonth","getTime","difference_ms","Math","floor","renderDate","locale","toLocaleString","day","month","shortDate","hour","minute","downloadFile","blob","navigator","msSaveBlob","fetch","then","r","sent","download","MouseEvent","dispatchEvent","_x2","Course","_ref$online","_ref$isSelected","isSelected","startsIn","TeacherPage","param_id","match","root","path","_useShopCatalog","minWidth","teachersCourses","indexOf","profile","components_ErrorPage","Teachers","render","teacher_page_TeacherPage","exact","catalog_page_TeachersCatalogPage","SelectedCourse","onCourseDeselect","onTruncate","onDeselectClick","renderView","SelectedCoursesTab_objectSpread","height","minHeight","SelectedCoursesTab","sumBy","Page_BottomTab","TransitionGroup","CSSTransition","classNames","timeout","SelectedCoursesTab_SelectedCourse","Event","ShopCatalogPage","selectedCourses","onCourseSelect","onCourseClick","has","catalog_page_SelectedCoursesTab","toConsumableArray","CourseOverviewContext","common_CourseOverview","total_hours","renderLesson","CoursePriceTab","_React$useContext$cou","VideoCover","_ref$locked","locked","width","Lesson","common_VideoCover","CoursePage","course_page_CoursePriceTab","Shop","Set","add","setState","catalog_page_ShopCatalogPage","component","course_page_CoursePage","CatalogPage","Tooltip","child","Children","only","position","cloneElement","react","LOADING_STATE","PENDING","LOADING","LOADED","SUCCESS","DONE","REJECTED","ERROR","useLoadingState","loading","rejected","setTimeout","clearTimeout","LoadingIndicator","errorMessage","SwitchTransition","appear","ui_Tooltip","File","_ref$file","file","downloadName","_ref$error","_ref$rejected","_ref$loading","_ref$done","_ref$deletable","deletable","onDelete","onIndicatorClick","downloadCallback","isUpload","LoadingIndicator_LoadingIndicator","StableCSSTransition","phase","node","getPrototypeOf","prototype","call","appliedClasses","ReactDOM","findDOMNode","FILE_STATUS","FileInputContext","allFilesReady","every","f","meta","isFileReady","getUploadParams","headers","Authorization","btoa","getFileProp","filename","getFilesFromEvent","accept","multiple","disabled","onFiles","maxFiles","extra","chosenFiles","isActive","Preview","_props$fileWithMeta","fileWithMeta","cancel","remove","restart","xhr","_props$meta","_props$meta$name","_props$meta$percent","percent","canRemove","_useRefValue","_useRefValue2","getResponse","setResponse","responseText","_JSON$parse","deleteCallback","hasError","startsWith","isRejected","isDone","ui_File","SubmitButton","submitting","hasChanged","onSubmit","isDisabled","submitCallback","common_StableCSSTransition","in","mountOnEnter","unmountOnExit","Layout","input","_ref4$previews","previews","submitButton","dropzoneProps","_ref5$preloadedFiles","preloadedFiles","deletePreloadedFile","getCallbackFiles","_ref6","FileInput","_props$initialFiles","initialFiles","_props$inputContent","inputContent","_props$maxFiles","_props$maxSizeBytes","maxSizeBytes","_props$isDisabled","setPreloadedFiles","setChanged","setSubmitting","_useRefValue3","_useRefValue4","getInputFiles","setInputFiles","newPreloadedFiles","handleChangeStatus","_ref7","cloneDeep","handleSubmit","_ref8","returnValue","Promise","react_dropzone_uploader_default","submitButtonContent","onChangeStatus","canCancel","SubmitButtonComponent","LayoutComponent","InputComponent","PreviewComponent","NavigationBlocker","unloadCallback","HomeworkLoader","lessonId","isHomeworkSubmissionClosed","hasChanges","setChanges","method","common_NavigationBlocker","ui_FileInput","LessonView","_ref$lesson","assignment","lesson_page_HomeworkLoader","LessonPage","_props$match$params","param_course","courseId","param_lesson","selectedLesson","now","otherLessons","lesson_page_LessonView","MyCourses","sortBy","lesson_page_LessonPage","courses_course_page_CoursePage","catalog_page_CatalogPage","useLocationChangeEffect","listen","onLocationChange","args","App","useForceTrailingSlash","getPrevPath","setPrevPath","scrollTo","useScrollToTop","_useSideBarState","isSideBarOpened","setSideBar","opened","useSideBarState","_useSideBarState2","toggleSideBar","showSidebar","components_Header","layoutAnimationClassNames","SideBar_SideBar","Login","Account","enter","enterActive","enterDone","exit","exitActive","Boolean","hostname","basename","store","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.9cfb8e7d.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.54b51040.svg\";","import 'react-app-polyfill/ie11';\r\nimport 'react-app-polyfill/stable';\r\nimport elementClosest  from 'element-closest';\r\n\r\nelementClosest(window);\r\n","import Auth from 'definitions/auth';\r\nimport axios from 'axios';\r\n\r\nexport const API_ROOT = 'https://egehackbottest.tk:8080';\r\n\r\nconst APIRequest = axios.create({\r\n    baseURL: API_ROOT\r\n});\r\n\r\nAPIRequest.interceptors.request.use(function (config) {\r\n    if (Auth.user) {\r\n        return {\r\n            auth: {\r\n                username: Auth.user.uid,\r\n                password: Auth.user.hash\r\n            },\r\n            ...config\r\n        }\r\n    }\r\n    else\r\n        throw new axios.Cancel('User not logged in.');\r\n});\r\n\r\nAPIRequest.interceptors.response.use(function (response) {\r\n    return response.data;\r\n});\r\n\r\nwindow.APIRequest = APIRequest;\r\n\r\nexport default APIRequest;\r\n","/*global VK*/\r\nimport APIRequest from \"definitions/api\";\r\n\r\nconst LOCAL_STORAGE_KEY = 'ege-hack-user-data';\r\n\r\nexport const AuthEventTypes = {\r\n    login: 'auth.login',\r\n    logout: 'auth.logout'\r\n};\r\n\r\nconst initVK = false;\r\n\r\nclass Auth {\r\n    user = null;\r\n\r\n    constructor() {\r\n        try {\r\n            const storedString = localStorage.getItem(LOCAL_STORAGE_KEY);\r\n            if (!storedString) {\r\n                this.user = null;\r\n                return;\r\n            }\r\n            const storedData = JSON.parse(storedString);\r\n            const {uid, first_name, last_name, photo, photo_rec, hash} = storedData;\r\n            if (!(uid && hash))\r\n                throw new Error(`Incomplete data parsed from local storage: ${storedString}`);\r\n            this.user = {uid, first_name, last_name, photo, photo_rec, hash};\r\n        }\r\n        catch (e) {\r\n            console.error('User data can not be recovered', e);\r\n            localStorage.removeItem(LOCAL_STORAGE_KEY);\r\n            this.user = null;\r\n        }\r\n    }\r\n\r\n    eventHandlers = {};\r\n\r\n    login = async (user) => {\r\n        if (!VK)\r\n            return;\r\n        if (!initVK)\r\n            VK.init({apiId: process.env.REACT_APP_VK_APP_ID});\r\n        user = {\r\n            ...user,\r\n            uid: 1,\r\n            hash: '68ab57e7e70fae3f8f96afc0d85465a9'\r\n        };\r\n        console.info('Login', user);\r\n        localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(user));\r\n        this.user = user;\r\n        // await this.getUserInfo();\r\n        // if (!this.userInfo)\r\n        //     return;\r\n        for(let handler of (this.eventHandlers[AuthEventTypes.login] || []))\r\n            handler(this.user);\r\n    };\r\n\r\n    logout = () => {\r\n        // VK.Auth.logout((data) => {\r\n            console.info('Logout');\r\n            localStorage.removeItem(LOCAL_STORAGE_KEY);\r\n            this.user = null;\r\n            this.userInfo = null;\r\n            for(let handler of (this.eventHandlers[AuthEventTypes.logout] || []))\r\n                handler();\r\n        // });\r\n    };\r\n\r\n    subscribe(eventType, handler) {\r\n        (this.eventHandlers[eventType] || (this.eventHandlers[eventType] = [])).push(handler);\r\n    }\r\n\r\n    unsubscribe(eventType, handler) {\r\n        this.eventHandlers[eventType] = this.eventHandlers[eventType].filter(func => func !== handler);\r\n    }\r\n\r\n    // subscribe(eventType, handler) {\r\n    //     VK.Observer.subscribe(eventType, handler);\r\n    // }\r\n    //\r\n    // unsubscribe(eventType, handler) {\r\n    //     VK.Observer.unsubscribe(eventType, handler);\r\n    // }\r\n\r\n    getUser() {\r\n        return this.user;\r\n    }\r\n\r\n    async getUserInfo() {\r\n        if (this.userInfo)\r\n            return this.userInfo;\r\n        try {\r\n            this.userInfo = await APIRequest.get('/accounts/info');\r\n        }\r\n        catch (e) {\r\n            console.error(e);\r\n            this.userInfo = null;\r\n        }\r\n        return this.userInfo;\r\n    }\r\n\r\n    loginWidget(elementId) {\r\n        if (!VK)\r\n            return;\r\n        if (!initVK)\r\n            VK.init({apiId: process.env.REACT_APP_VK_APP_ID});\r\n        VK.Widgets.Auth(elementId, {onAuth: this.login});\r\n    }\r\n}\r\n\r\nexport default new Auth();\r\n","import React from 'react';\r\n\r\nconst CoverImage = ({src, className, children, square=false, round=false}) => {\r\n    return (\r\n        <div className={`${className} cover ${square ? 'square-cover' : ''} ${round ? 'round-cover' : ''}`}>\r\n            <div className=\"cover-img\" style={{backgroundImage: `url(${src})`}}/>\r\n            {children}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CoverImage;\r\n","import React from 'react';\r\nimport logo from 'img/logo.svg';\r\nimport Auth from 'definitions/auth';\r\nimport {Link} from 'react-router-dom';\r\nimport CoverImage from \"./common/CoverImage\";\r\n\r\nconst Header = (props) => {\r\n    const {onMenuButtonClick, user, sidebar} = props;\r\n    return (\r\n        <header>\r\n            <div className=\"container-fluid header__container\">\r\n                <div className=\"row\">\r\n                    {sidebar && (\r\n                        <div className=\"col-auto d-lg-none\">\r\n                            <div className=\"nav-btn\" onClick={onMenuButtonClick}>\r\n                                <i className=\"icon-bars\"/>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                    <div className=\"col d-flex justify-content-center justify-content-lg-start p-0\">\r\n                        <div className=\"logo-container container d-flex align-items-center justify-content-center m-0\">\r\n                            <img src={logo} className=\"logo\" alt=\"Logo\"/>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"col-auto\">\r\n                        <div className=\"user-nav\">\r\n                            {user ? (\r\n                                <React.Fragment>\r\n                                    <div className=\"user-nav__user-name\">{user.first_name} {user.last_name}</div>\r\n                                    {user.photo_rec ? (\r\n                                        <div className=\"nav-btn\">\r\n                                            <CoverImage src={user.photo_rec} round square/>\r\n                                        </div>\r\n                                    ) : (\r\n                                        <div className=\"nav-btn\">\r\n                                            <i className=\"icon-profile\"/>\r\n                                        </div>\r\n                                    )}\r\n                                    <div className=\"user-nav__menu-container\">\r\n                                        <div className=\"user-nav__menu\">\r\n                                            <div className=\"user-nav__menu-options\">\r\n                                                <Link to=\"/account/\" className=\"menu-option\">\r\n                                                    <i className=\"icon-profile\"/>Аккаунт\r\n                                                </Link>\r\n                                                <Link to=\"/account/settings/\" className=\"menu-option\">\r\n                                                    <i className=\"icon-settings\"/>Настройки\r\n                                                </Link>\r\n                                                <div\r\n                                                    className=\"menu-option\"\r\n                                                    tabIndex={2}\r\n                                                    onClick={Auth.logout}>\r\n                                                    <i className=\"icon-logout\"/>Выход\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </React.Fragment>\r\n                            ) : (\r\n                                <React.Fragment>\r\n                                    <div className=\"nav-btn\">\r\n                                        <i className=\"icon-profile\"/>\r\n                                    </div>\r\n                                    <div className=\"user-nav__menu-container\">\r\n                                        <div className=\"user-nav__menu\">\r\n                                            <div className=\"user-nav__menu-options\">\r\n                                                <Link to=\"/login/\" className=\"menu-option\">\r\n                                                    <i className=\"icon-login\"/>Войти\r\n                                                </Link>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </React.Fragment>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </header>\r\n    );\r\n};\r\n\r\nexport default Header;\r\n","import React from 'react';\r\n\r\nexport default function Contacts({contacts: {vk, fb, ok, ig}}) {\r\n    return (\r\n        <div className=\"social-media font-light-grey\">\r\n            {vk && <a href={vk} className=\"social-media__link\"><i className=\"fab fa-vk vk\"/></a>}\r\n            {fb && <a href={fb} className=\"social-media__link\"><i className=\"fab fa-facebook-f fb\"/></a>}\r\n            {ok && <a href={ok} className=\"social-media__link\"><i className=\"fab fa-odnoklassniki ok\"/></a>}\r\n            {ig && <a href={ig} className=\"social-media__link\"><i className=\"fab fa-instagram ig\"/></a>}\r\n        </div>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport { NavLink } from \"react-router-dom\";\r\nimport Contacts from \"./common/Contacts\";\r\n\r\nfunction Link(props) {\r\n    return <NavLink className=\"layout__sidebar-menu-link\" activeClassName=\"active\" {...props}/>;\r\n}\r\n\r\nexport default class SideBar extends React.Component{\r\n    onClick = (event) => {\r\n        if (event.target === event.currentTarget || event.target.classList.contains('layout__sidebar-menu-link'))\r\n            this.props.onMenuClose();\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"layout__sidebar\" onClick={this.onClick}>\r\n                <div className=\"layout__sidebar-bar\">\r\n                    <div className=\"layout__sidebar-content\">\r\n                        <div className=\"layout__sidebar-menu\">\r\n                            <div className=\"layout__sidebar-menu-section\">\r\n                                <Link to=\"/courses/\">Мои курсы</Link>\r\n                                {/*<Link to=\"/homework/\">Домашняя работа</Link>*/}\r\n                            </div>\r\n                            <div className=\"layout__sidebar-menu-section\">\r\n                                <Link to=\"/shop/\">Магазин курсов</Link>\r\n                                <Link to=\"/teachers/\">Преподаватели</Link>\r\n                                {/*<Link to=\"/about/\">О нас</Link>*/}\r\n                            </div>\r\n                        </div>\r\n                        <Contacts contacts={{vk: '/', fb: '/', ig: '/'}}/>\r\n                        <div className=\"layout__sidebar-copyright font-size-sm font-light-grey\">\r\n                            Все права защищены<br/>\r\n                            \"ЕГЭHACK\"\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","export const LEARNING_STATUS = {\r\n  learning: 'learning',\r\n  finished: 'finished'\r\n};\r\n\r\nexport const DEFAULT_LOGIN_REDIRECT = '/shop/';\r\n","import {LoremIpsum} from \"lorem-ipsum\";\r\nimport poster from \"../img/dummy_poster.jpg\";\r\nimport _ from \"lodash\";\r\nimport {LEARNING_STATUS} from \"../definitions/constants\";\r\n\r\nconst lorem = new LoremIpsum();\r\n\r\nfunction getDate(daysForward) {\r\n    const date = new Date();\r\n    date.setDate(date.getDate() + daysForward);\r\n    return date;\r\n}\r\n\r\nexport const SUBJECTS = [\r\n    // { id: 'russian', name: 'Русский язык' },\r\n    // { id: 'literature', name: 'Литература' },\r\n    // { id: 'math', name: 'Математика' },\r\n    // { id: 'informatics', name: 'Информатика' },\r\n    // { id: 'physics', name: 'Физика' },\r\n    // { id: 'chemistry', name: 'Химия' },\r\n    // { id: 'biology', name: 'Биология' },\r\n    // { id: 'sociology', name: 'Обществознание' },\r\n    // { id: 'history', name: 'История' },\r\n    // { id: 'geography', name: 'География' },\r\n    // { id: 'english', name: 'Английский язык' },\r\n    // { id: 'german', name: 'Немецкий язык' },\r\n    // { id: 'french', name: 'Французский язык' },\r\n    // { id: 'chinese', name: 'Китайский язык' },\r\n    // { id: 'spanish', name: 'Испанский язык' }\r\n    { id: 1, name: 'Русский язык' },\r\n    { id: 2, name: 'Литература' },\r\n    { id: 3, name: 'Математика' },\r\n    { id: 4, name: 'Информатика' },\r\n    { id: 5, name: 'Физика' },\r\n    { id: 6, name: 'Химия' },\r\n    { id: 7, name: 'Биология' },\r\n    { id: 8, name: 'Обществознание' },\r\n    { id: 9, name: 'История' },\r\n    { id: 10, name: 'География' },\r\n    { id: 11, name: 'Английский язык' },\r\n    { id: 12, name: 'Немецкий язык' },\r\n    { id: 13, name: 'Французский язык' },\r\n    { id: 14, name: 'Китайский язык' },\r\n    { id: 15, name: 'Испанский язык' }\r\n];\r\n\r\nexport const TEACHERS = [\r\n    {\r\n        id: 1,\r\n        first_name: 'Елена',\r\n        last_name: 'Черткова',\r\n        subject_ids: SUBJECTS.slice(0,2).map(({id}) => id),\r\n        photo: poster,\r\n        contacts: {vk: '/', fb: '/', ok: '/', ig: '/'},\r\n        bio: lorem.generateSentences(1)\r\n    },\r\n    {\r\n        id: 2,\r\n        first_name: 'Сергей',\r\n        last_name: 'Авдошин',\r\n        subject_ids: [SUBJECTS[3].id],\r\n        photo: poster,\r\n        contacts: {vk: '/', fb: '/', ok: '/', ig: '/'},\r\n        bio: lorem.generateSentences(1)\r\n    }\r\n];\r\n\r\nexport const COURSES = SUBJECTS.slice(0, 5).map((subject, i) => ({\r\n    name: `${subject.name}. Мастер группа. Апрель.`,\r\n    id: i,\r\n    subject_id: subject.id,\r\n    online: i <= 2,\r\n    image_link: poster,\r\n    date_start: getDate(7 + i),\r\n    date_end: getDate(7 + i),\r\n    // totalHours: 80,\r\n    description: lorem.generateParagraphs(1),\r\n    lessons: _.times(4, (j) => ({\r\n        number: j + 1,\r\n        id: j,\r\n        date: getDate(-4 + i + j),\r\n        title: `Занятие ${j + 1}`,\r\n        description: lorem.generateParagraphs(1),\r\n        cover: poster\r\n    })),\r\n    teacher_ids: i <= 2 ? [TEACHERS[0].id] : TEACHERS.map(({id}) => id)\r\n}));\r\n\r\nexport const SHOP_CATALOG = {\r\n    catalog: COURSES.map((course, i) => ({...course, price: 2500, discount: i === 0 ? 1000 : undefined})),\r\n    // promotions: [{\r\n    //\r\n    // }]\r\n};\r\n\r\nexport const MY_COURSES = COURSES.map((course, i) => ({\r\n    ...course,\r\n    lessons: course.lessons.map((lesson, j) => ({\r\n        ...lesson,\r\n        watchProgress: lesson.date < new Date() ? (100 - j * 15) : undefined,\r\n        homework: {\r\n            files: [\r\n                {name: \"Задание\", url: \"/robots.txt\"},\r\n                {name: \"Дополнительное задание\", url: \"/robots.txt\"}\r\n            ],\r\n            description: lorem.generateParagraphs(1),\r\n            deadline: getDate(7),\r\n            submit: true,\r\n            submittedFiles: [\r\n                {\r\n                    \"original_file_name\": \"5_64x64.png\",\r\n                    \"id_file_name\": \"501371cc-f349-11e9-aa47-7990bff4dcd7.png\",\r\n                    \"file_link\": \"/files/601371cc-f349-11e9-aa47-7990bff4dcd7.png\"\r\n                }\r\n            ]\r\n        }\r\n    })),\r\n    status: i <= 2 ? LEARNING_STATUS.finished : LEARNING_STATUS.learning\r\n}));\r\n\r\nexport const TEST_ID = 1;\r\nexport const TEST_HASH = '68ab57e7e70fae3f8f96afc0d85465a9';\r\n","import React from \"react\";\r\nimport Auth, {AuthEventTypes} from \"../definitions/auth\";\r\nimport {useHistory} from \"react-router-dom\";\r\nimport APIRequest, {API_ROOT} from \"../definitions/api\";\r\nimport {SHOP_CATALOG, SUBJECTS, TEACHERS} from \"../data/test_data\";\r\n\r\nconst StoreContext = React.createContext(null);\r\n\r\nfunction useUserAuth() {\r\n    const [user, setUser] = React.useState(Auth.getUser());\r\n    const [userInfo, setUserInfo] = React.useState(null);\r\n\r\n    React.useEffect(() => {\r\n        const fetchUserInfo = async () => {\r\n            // const userInfo = await Auth.getUserInfo();\r\n            const userInfo = {};\r\n            setUserInfo(userInfo);\r\n        };\r\n        if (user)\r\n            fetchUserInfo();\r\n    }, [user]);\r\n\r\n    // const history = useHistory();\r\n    const loginCallback = React.useCallback((user, userInfo) => {\r\n        setUser(user);\r\n        // setUserInfo(userInfo);\r\n        // history.push('/shop/');\r\n    }, []);\r\n\r\n    const logoutCallback = React.useCallback(() => {\r\n        setUser(null);\r\n        setUserInfo(null);\r\n        // history.push('/login/');\r\n    }, []);\r\n\r\n    React.useLayoutEffect(() => {\r\n        Auth.subscribe(AuthEventTypes.login, loginCallback);\r\n        Auth.subscribe(AuthEventTypes.logout, logoutCallback);\r\n        return () => {\r\n            Auth.unsubscribe(AuthEventTypes.login, loginCallback);\r\n            Auth.unsubscribe(AuthEventTypes.logout, logoutCallback);\r\n        }\r\n    }, [loginCallback, logoutCallback]);\r\n    return [user, userInfo];\r\n}\r\n\r\nconst useShopCatalogStore = () => React.useState(null);\r\nconst useSubjectsStore = () => React.useState(null);\r\nconst useTeachersStore = () => React.useState(null);\r\n\r\nfunction useStoreData() {\r\n    const [catalog, setCatalog] = useShopCatalogStore();\r\n    const [subjects, setSubjects] = useSubjectsStore();\r\n    const [teachers, setTeachers] = useTeachersStore();\r\n    return {\r\n        data: {\r\n            catalog,\r\n            subjects,\r\n            teachers\r\n        },\r\n        setters: {\r\n            setCatalog,\r\n            setSubjects,\r\n            setTeachers\r\n        }\r\n    }\r\n}\r\n\r\nconst requests = {};\r\n\r\nexport function useSubjects() {\r\n    const {data: {subjects}, setters: {setSubjects}} = React.useContext(StoreContext);\r\n    const [error, setError] = React.useState(null);\r\n    const fetchSubjects = React.useCallback(async () => {\r\n        if (requests.subjects)\r\n            return requests.subjects;\r\n        // const request = APIRequest.get('/subjects');\r\n        const request = null;\r\n        requests.subjects = request;\r\n        try {\r\n            if (error)\r\n                setError(null);\r\n            // const subjects = await request;\r\n            const subjects = SUBJECTS;\r\n            setSubjects(subjects);\r\n        } catch (e) {\r\n            console.error(e);\r\n            setError(e);\r\n        }\r\n        finally {\r\n            delete requests.subjects;\r\n        }\r\n        return request;\r\n    }, [error]);\r\n\r\n    React.useEffect(() => {\r\n        if (!(subjects || requests.subjects || error)) {\r\n            fetchSubjects();\r\n        }\r\n    }, [subjects, error]);\r\n    if (error) {\r\n        return {subjects, error, retry: fetchSubjects};\r\n    }\r\n    else {\r\n        return {subjects};\r\n    }\r\n}\r\n\r\nexport function useTeachers() {\r\n    const {subjects, errorLoadingSubjects, reloadSubjects} = useSubjects();\r\n    const {data: {teachers}, setters: {setTeachers}} = React.useContext(StoreContext);\r\n    const [error, setError] = React.useState(null);\r\n    const fetchTeachers = React.useCallback(async () => {\r\n        if (requests.teachers)\r\n            return requests.teachers;\r\n        const request = APIRequest.get('/accounts/teachers');\r\n        requests.teachers = request;\r\n        try {\r\n            if (error)\r\n                setError(null);\r\n            // const teachers = await request;\r\n            const teachers = TEACHERS;\r\n            console.log('set teachers', teachers);\r\n            setTeachers(teachers);\r\n        } catch (e) {\r\n            console.error(e);\r\n            setError(e);\r\n        }\r\n        finally {\r\n            delete requests.teachers;\r\n        }\r\n        return request;\r\n    }, [error]);\r\n\r\n    React.useEffect(() => {\r\n        if (!(teachers || requests.teachers || error)) {\r\n            fetchTeachers();\r\n        }\r\n    }, [teachers, error]);\r\n\r\n    if (error || errorLoadingSubjects) {\r\n        return {\r\n            teachers,\r\n            subjects,\r\n            error: error || errorLoadingSubjects ,\r\n            retry: () => {\r\n                if (error)\r\n                    fetchTeachers();\r\n                if (errorLoadingSubjects)\r\n                    reloadSubjects();\r\n            }\r\n        };\r\n    }\r\n    else {\r\n        return {teachers, subjects};\r\n    }\r\n}\r\n\r\nexport function useShopCatalog() {\r\n    const {subjects, errorLoadingSubjects, reloadSubjects} = useSubjects();\r\n    const {data: {catalog}, setters: {setCatalog}} = React.useContext(StoreContext);\r\n    const [error, setError] = React.useState(null);\r\n    const fetchCatalog = React.useCallback(async () => {\r\n        if (requests.shopCatalog)\r\n            return requests.shopCatalog;\r\n        const request = APIRequest.get('/courses');\r\n        requests.shopCatalog = request;\r\n        try {\r\n            if (error)\r\n                setError(null);\r\n            // const catalog = (await request).map(({date_start, date_end, image_link, teacher_id, ...rest}) => ({\r\n            //     date_start: new Date(date_start),\r\n            //     date_end: new Date(date_end),\r\n            //     image_link: `${API_ROOT}${image_link}`,\r\n            //     teacher_ids: [teacher_id],\r\n            //     ...rest\r\n            // }));\r\n            const catalog = SHOP_CATALOG.catalog;\r\n            setCatalog(catalog);\r\n        } catch (e) {\r\n            console.error(e);\r\n            setError(e);\r\n        }\r\n        finally {\r\n            delete requests.shopCatalog;\r\n        }\r\n        return request;\r\n    }, [error]);\r\n\r\n    React.useEffect(() => {\r\n        if (!(catalog || requests.shopCatalog || error)) {\r\n            fetchCatalog();\r\n        }\r\n    }, [catalog, error]);\r\n\r\n    if (error || errorLoadingSubjects) {\r\n        return {\r\n            catalog,\r\n            subjects,\r\n            error: error || errorLoadingSubjects ,\r\n            retry: () => {\r\n                if (error)\r\n                    fetchCatalog();\r\n                if (errorLoadingSubjects)\r\n                    reloadSubjects();\r\n            }\r\n        };\r\n    }\r\n    else {\r\n        return {catalog, subjects};\r\n    }\r\n}\r\n\r\nconst GlobalStore = ({children}) => {\r\n    const [user, userInfo] = useUserAuth();\r\n    const data = useStoreData();\r\n    return (\r\n        <StoreContext.Provider value={{user, userInfo, ...data}}>\r\n            {children}\r\n        </StoreContext.Provider>\r\n    )\r\n};\r\n\r\nexport default GlobalStore;\r\n\r\nexport function useUser() {\r\n   const {user, userInfo} = React.useContext(StoreContext);\r\n   return {user, userInfo};\r\n}\r\n","import React from 'react';\r\nimport {Helmet} from \"react-helmet\";\r\nimport Sticky from 'react-sticky-el';\r\nimport {Link, Redirect} from \"react-router-dom\";\r\nimport {useUser} from \"../store\";\r\n\r\nexport const PageLoadingPlaceholder = () => (\r\n    <div className=\"layout__content\">\r\n        <div className=\"layout__loading-spinner\">\r\n            <i className=\"spinner-border\"/>\r\n        </div>\r\n    </div>\r\n);\r\n\r\nexport const PageLink = ({to, arrow=true, forward=true, className, children, ...props}) => (\r\n    <Link\r\n        className={`${arrow ? 'arrow-link' : ''} ${forward ? 'arrow-link-forward' : 'arrow-link-backward'} ${className || ''}`}\r\n        to={to}\r\n        {...props}>\r\n        {children}\r\n    </Link>\r\n);\r\n\r\nexport const PageContent = ({children, className, parentSection}) => (\r\n    <div className={`layout__content-container container ${className || ''}`}>\r\n        {parentSection && (\r\n            <PageLink\r\n                to={parentSection.url || '..'}\r\n                forward={false}\r\n                className=\"layout__content-parent-section-link\">\r\n                {parentSection.name}\r\n            </PageLink>\r\n        )}\r\n        {children}\r\n    </div>\r\n);\r\n\r\nexport const BottomTab = ({children, className, ...stickyProps}) => (\r\n    <Sticky mode=\"bottom\" {...stickyProps}>\r\n        <div className={`layout__bottom-tab ${className || ''}`}>\r\n            {children}\r\n        </div>\r\n    </Sticky>\r\n);\r\n\r\nclass PageErrorBoundary extends React.Component {\r\n    state = {\r\n        error: null\r\n    }\r\n}\r\n\r\nconst Page = ({title, className, children, checkLogin=true, location}) => {\r\n    //TODO: check permissions\r\n    const {user, userInfo} = useUser();\r\n    if (checkLogin) {\r\n        if (!user) {\r\n            return (\r\n                <Redirect to={{\r\n                    pathname: '/login/',\r\n                    state: location ? { referrer: location.pathname } : undefined\r\n                }}/>);\r\n        }\r\n    }\r\n    return (\r\n        <div className={`layout__content ${className || ''}`}>\r\n            {title && <Helmet><title>{title} – ЕГЭ HACK</title></Helmet>}\r\n            {children}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Page;\r\n","import React from 'react';\r\nimport {useUser} from \"../store\";\r\n\r\nexport function useTruncate(text) {\r\n    const descriptionRef = React.useRef(null);\r\n    const [isFontLoaded, setFontLoaded] = React.useState(document.readyState === \"complete\");\r\n    React.useEffect(() => {\r\n        if (!text)\r\n            return;\r\n        function handleResize() {\r\n            if (descriptionRef.current) {\r\n                descriptionRef.current.onResize();\r\n            }\r\n        }\r\n        window.addEventListener('resize', handleResize);\r\n        if (isFontLoaded)\r\n            return () => {\r\n                window.removeEventListener('resize', handleResize);\r\n            };\r\n        if (document.readyState === \"complete\") {\r\n            setFontLoaded(true);\r\n            return () => {\r\n                window.removeEventListener('resize', handleResize);\r\n            };\r\n        }\r\n        else {\r\n            function handleLoading() {\r\n                setFontLoaded(true);\r\n            }\r\n            window.addEventListener('load', handleLoading);\r\n            return () => {\r\n                window.removeEventListener('load', handleLoading);\r\n            };\r\n        }\r\n    }, [isFontLoaded, text]);\r\n    return [descriptionRef, isFontLoaded];\r\n}\r\n\r\nexport function useRefValue(initialValue) {\r\n    const ref = React.useRef(initialValue);\r\n    const getValue = React.useCallback(() => ref.current, []);\r\n    const setValue = React.useCallback((value) => {\r\n        ref.current = value;\r\n    }, []);\r\n    return [getValue, setValue];\r\n}\r\n\r\nexport function useIsMounted() {\r\n    const [getIsMounted, setIsMounted] = useRefValue(false);\r\n\r\n    React.useLayoutEffect(() => {\r\n        console.log('mounting');\r\n        setIsMounted(true);\r\n        return () => {\r\n            console.log('unmounting');\r\n            setIsMounted(false);\r\n        };\r\n    }, []);\r\n\r\n    return getIsMounted;\r\n}\r\n\r\nexport function useUpdateEffect(effect, dependencies = []) {\r\n    const isInitialMount = React.useRef(true);\r\n\r\n    React.useEffect(() => {\r\n        if (!isInitialMount.current) {\r\n            effect();\r\n        }\r\n    }, dependencies); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n    React.useEffect(() => {\r\n        isInitialMount.current = false;\r\n    }, []);\r\n}\r\n\r\nexport function useForceUpdate() {\r\n    const [, update] = React.useReducer(state => !state, true);\r\n    return update;\r\n}\r\n\r\n// export function useCheckPageAccess(checkLogin) {\r\n//\r\n// }\r\n","import React from \"react\";\r\nimport Page from \"components/Page\";\r\nimport Auth from \"definitions/auth\";\r\nimport {useUser} from \"../../../store\";\r\nimport {Redirect, useLocation} from \"react-router-dom\";\r\nimport {DEFAULT_LOGIN_REDIRECT} from \"definitions/constants\";\r\n\r\nconst LoginPage = (props) => {\r\n    const {location} = props;\r\n    const {user, userInfo} = useUser();\r\n\r\n    React.useLayoutEffect(() => {\r\n        Auth.loginWidget('vk-auth');\r\n    }, []);\r\n\r\n    if (user) {\r\n        if (location.state && location.state.referrer)\r\n            return (<Redirect to={location.state.referrer}/>);\r\n        return (<Redirect to={DEFAULT_LOGIN_REDIRECT}/>);\r\n    }\r\n    return (\r\n        <Page\r\n            title=\"Вход\"\r\n            className=\"login-page align-items-center justify-content-center\"\r\n            checkLogin={false}\r\n            location={location}>\r\n            <div id=\"vk-auth\"/>\r\n        </Page>\r\n    );\r\n};\r\n\r\nexport default LoginPage;\r\n","import React from \"react\";\r\nimport CoverImage from \"./CoverImage\";\r\nimport Contacts from \"./Contacts\";\r\n\r\nconst UserProfile = ({first_name, last_name, photo, contacts, about, role}) => {\r\n    const fullName = `${first_name} ${last_name}`;\r\n    return (\r\n        <React.Fragment>\r\n            <div className=\"user-profile__avatar-container\">\r\n                <div className=\"user-profile__avatar-wrap\">\r\n                    <CoverImage src={photo} className=\"user-profile__avatar\" round square/>\r\n                </div>\r\n            </div>\r\n            <div className=\"user-profile__info layout__content-block\">\r\n                <div className=\"d-flex flex-column align-items-center\">\r\n                    <h2>{fullName}</h2>\r\n                    {role && <div className=\"font-size-sm\">{role}</div>}\r\n                    {contacts && <Contacts contacts={contacts}/>}\r\n                    <div className=\"description-text font-size-sm\">{about}</div>\r\n                </div>\r\n            </div>\r\n        </React.Fragment>\r\n    )\r\n};\r\n\r\nexport default UserProfile;\r\n","import React from \"react\";\r\nimport Page, {PageContent} from \"components/Page\";\r\nimport UserProfile from \"components/common/UserProfile\";\r\nimport {useUser} from \"store\";\r\n\r\nconst AccountPage = () => {\r\n    const {user, userInfo} = useUser();\r\n    return (\r\n        <Page title=\"Аккаунт\" className=\"account-page\">\r\n            <PageContent>\r\n                <UserProfile {...user}/>\r\n            </PageContent>\r\n        </Page>\r\n    );\r\n};\r\n\r\nexport default AccountPage;\r\n","import React from 'react';\r\nimport Truncate from 'react-truncate';\r\nimport {useTruncate} from \"../../hooks/common\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\nexport default function ListItem(props) {\r\n    const {\r\n        preview, title, subtitle, description, item, selectable,\r\n        className,\r\n        children: action,\r\n        link,\r\n        onClick: clickCallback,\r\n        onActionClick: actionCallback,\r\n        callbackProps} = props;\r\n    const [descriptionRef, isFontLoaded] = useTruncate(description);\r\n    const onClick = React.useCallback((event) => {\r\n        const clicked = selectable && !(actionCallback && event.target.closest('.list__item-action'));\r\n        if (clicked && clickCallback)\r\n            clickCallback(item, callbackProps);\r\n        else if (!clicked && link)\r\n            event.preventDefault();\r\n    }, [item, clickCallback, selectable, callbackProps, link, actionCallback]);\r\n    const onActionClick = React.useCallback((event) => {\r\n        if (selectable && actionCallback)\r\n            actionCallback(item, callbackProps);\r\n    }, [item, actionCallback, selectable, callbackProps]);\r\n    const content = (\r\n        <div className=\"row align-items-center\">\r\n            <div className=\"list__item-preview col-12 col-md-auto\">\r\n                {preview}\r\n            </div>\r\n            <div className=\"list__item-description col align-self-stretch\">\r\n                <div className=\"list__item-description-inner\">\r\n                    <div className=\"title font-size-lg\">{title}</div>\r\n                    {subtitle && <div className=\"subtitle\">{subtitle}</div>}\r\n                    {description && (\r\n                        <div className=\"description-container font-size-xs\">\r\n                            <div className=\"description-text\">\r\n                                {isFontLoaded ? (\r\n                                    <Truncate lines={2} ref={descriptionRef}>\r\n                                        {description}\r\n                                    </Truncate>\r\n                                ) : null}\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n            {action && (\r\n                <div\r\n                    className=\"list__item-action col-auto d-flex align-items-center flex-column\"\r\n                    onClick={onActionClick}>\r\n                    {action}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n    if (link) {\r\n        return (\r\n            <Link\r\n                className={`list__item container ${selectable ? 'list__item-selectable' : ''} ${className || ''}`}\r\n                to={link}\r\n                onClick={onClick}>\r\n                {content}\r\n            </Link>\r\n        );\r\n    }\r\n    else {\r\n        return (\r\n            <div className={`list__item container ${selectable ? 'list__item-selectable' : ''} ${className || ''}`} onClick={onClick}>\r\n                {content}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React from 'react';\r\nimport ListItem from \"./ListItem\";\r\n\r\nexport default function List(props) {\r\n    const {children, renderItem, renderProps, flex, className} = props;\r\n    return flex\r\n        ? (\r\n            <div className={`${className || ''} list`}>\r\n                <div className=\"container p-0 overflow-hidden\">\r\n                    <div className=\"row\">\r\n                        {children.map((item, index) => renderItem(item, renderProps, index))}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n        : (\r\n        <div className={`${className || ''} list`}>\r\n            {children.map((item, index) => renderItem(item, renderProps, index))}\r\n        </div>\r\n    );\r\n}\r\n\r\nList.defaultProps = {\r\n    renderItem: (item, props, index) => <ListItem {...item} {...props} key={index}/>\r\n};\r\n","import React from 'react';\r\nimport {Scrollbars as ScrollComponent} from 'react-custom-scrollbars';\r\n\r\nconst renderTrackVertical = props => (<div {...props} className=\"track track-vertical\"/>);\r\nconst renderThumbVertical = props => (<div {...props} className=\"thumb thumb-vertical\"/>);\r\nconst renderTrackHorizontal = props => (<div {...props} className=\"track track-horizontal\"/>);\r\nconst renderThumbHorizontal = props => (<div {...props} className=\"thumb thumb-horizontal\"/>);\r\n\r\nconst ScrollBars = React.forwardRef(({children, ...props}, ref) => {\r\n    return (\r\n        <ScrollComponent\r\n            renderTrackVertical={renderTrackVertical}\r\n            renderThumbVertical={renderThumbVertical}\r\n            renderTrackHorizontal={renderTrackHorizontal}\r\n            renderThumbHorizontal={renderThumbHorizontal}\r\n            ref={ref}\r\n            {...props}>\r\n            {children}\r\n        </ScrollComponent>\r\n    );\r\n});\r\n\r\nexport default ScrollBars;\r\n","import React, {Component} from 'react';\r\nimport SelectInput, { components } from 'react-select';\r\nimport _ from 'lodash';\r\nimport PropTypes from 'prop-types';\r\nimport ScrollBars from \"./ScrollBars\";\r\n\r\nconst DropdownIndicator = (props) => (\r\n    <components.DropdownIndicator {...props}>\r\n        <i className=\"icon-angle\"/>\r\n    </components.DropdownIndicator>\r\n);\r\n\r\nconst SelectContainer = ({ children, selectProps, hasValue, setValue, ...props }) => (\r\n    <div className=\"select\">\r\n        <components.SelectContainer\r\n            selectProps={{...selectProps, isClearable: false}}\r\n            hasValue={hasValue}\r\n            setValue={setValue}\r\n            {...props}>\r\n            {children}\r\n        </components.SelectContainer>\r\n        {selectProps.isClearable && (\r\n            <div className={hasValue ? 'select__clear-btn' : 'select__clear-btn select__clear-btn-hidden'} onClick={() => {setValue(null);}}>\r\n                <i className=\"icon-close\"/>\r\n            </div>\r\n        )}\r\n    </div>\r\n);\r\n\r\n\r\nexport const Option = ({content, ...props}) => (\r\n    <components.Option {...props}>\r\n        {content ? content : props.label}\r\n    </components.Option>\r\n);\r\n\r\nOption.propTypes = {\r\n    content: PropTypes.node,\r\n    label: PropTypes.node\r\n};\r\n\r\nclass MenuList extends Component {\r\n    componentDidMount() {\r\n        //needed to the select to scroll the list to the selected option\r\n        this.props.innerRef(this.scrollBar.view);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <ScrollBars\r\n                autoHeight\r\n                hideTracksWhenNotNeeded\r\n                ref={ref => { this.scrollBar = ref; }}\r\n                autoHeightMax={this.props.maxHeight}>\r\n                <components.MenuList {...this.props}>\r\n                    {this.props.children}\r\n                </components.MenuList>\r\n            </ScrollBars>\r\n        );\r\n    }\r\n\r\n    static propTypes = {\r\n        maxHeight: PropTypes.number.isRequired,\r\n        children: PropTypes.node.isRequired,\r\n        innerRef: PropTypes.func.isRequired\r\n    }\r\n}\r\n\r\n//TODO: try react virtualized select\r\nexport default class Select extends React.PureComponent {\r\n    onChange = (option) => {\r\n        this.props.callback(option ? option.value : null, this.props.name);\r\n    };\r\n\r\n    render() {\r\n        const {name, options, value, components, selectProps, isClearable=true, isSearchable=true, placeholder} = this.props;\r\n        return (\r\n            <SelectInput\r\n                name={name}\r\n                options={options}\r\n                maxMenuHeight={200}\r\n                value={_.find(options, {value: value}) || null}\r\n                className='select__container' classNamePrefix='select'\r\n                onChange={this.onChange}\r\n                menuPlacement=\"auto\"\r\n                noOptionsMessage={() => 'Нет опций'}\r\n                components={\r\n                    components ? ({\r\n                        Option,\r\n                        MenuList,\r\n                        DropdownIndicator,\r\n                        SelectContainer,\r\n                        ...components\r\n                    }) : ({\r\n                        Option,\r\n                        MenuList,\r\n                        DropdownIndicator,\r\n                        SelectContainer,\r\n                    })\r\n                }\r\n                styles={{\r\n                    //removes default styles from option elements\r\n                    option: () => ({})\r\n                }}\r\n                isClearable={isClearable}\r\n                isSearchable={isSearchable}\r\n                placeholder={placeholder}\r\n                {...selectProps}\r\n            />\r\n        );\r\n    }\r\n\r\n    static propTypes = {\r\n        name: PropTypes.string.isRequired,\r\n        options: PropTypes.arrayOf(PropTypes.shape({\r\n            value: PropTypes.any,\r\n            label: PropTypes.any\r\n        })).isRequired,\r\n        callback: PropTypes.func.isRequired,\r\n        value: PropTypes.any,\r\n        selectProps: PropTypes.object,\r\n        components: PropTypes.object\r\n    }\r\n}\r\n","import React from 'react';\r\nimport Select from \"./Select\";\r\n\r\nfunction useChangeHandler(callback, inputProp = 'value') {\r\n    return React.useCallback((event) => {\r\n        callback(event.currentTarget[inputProp], event.currentTarget.name, event);\r\n    }, [callback, inputProp])\r\n}\r\n\r\nconst CheckBox = ({value, onChange: callback, name, label, ...props}) => {\r\n    const onChange = useChangeHandler(callback, 'checked');\r\n    return (\r\n        <label className={`input input-checkbox`}>\r\n            <input type=\"checkbox\" name={name} checked={value} onChange={onChange} {...props}/>\r\n            <span className=\"input__box\"/>\r\n            <span className=\"input__label\">{label}</span>\r\n        </label>\r\n    );\r\n};\r\n\r\nconst Input = ({className, onChange: callback, ...props}) => {\r\n    const onChange = useChangeHandler(callback);\r\n    return (\r\n        <input className={`input ${className || ''}`} onChange={onChange} {...props}/>\r\n    );\r\n};\r\n\r\nObject.assign(Input, {\r\n    CheckBox,\r\n    Select\r\n});\r\n\r\nexport default Input;\r\n\r\n","import React from 'react';\r\nimport {useHistory, useLocation} from 'react-router-dom';\r\nimport List from \"./List\";\r\nimport Input from \"../ui/Input\";\r\nimport Page from \"../Page\";\r\n\r\nexport const CatalogContext = React.createContext({});\r\n\r\nconst Filter = ({filterBy: {subject:filterBySubject = true, online:filterByOnline = true}={}}) => {\r\n    const {options, subject, online, onChange} = React.useContext(CatalogContext);\r\n    return (\r\n        <div className=\"layout__content-block catalog__filters\">\r\n            <div className=\"container p-0\">\r\n                <div className=\"row\">\r\n                    {filterBySubject && (\r\n                        <div className=\"col-auto d-flex align-items-center\">\r\n                            <Input.Select\r\n                                name=\"subject\"\r\n                                options={options}\r\n                                value={subject}\r\n                                placeholder='Предмет'\r\n                                callback={onChange}/>\r\n                        </div>\r\n                    )}\r\n                    {filterByOnline && (\r\n                        <div className=\"col-auto d-flex align-items-center\">\r\n                            <Input.CheckBox\r\n                                name=\"online\"\r\n                                value={online}\r\n                                label=\"Онлайн\"\r\n                                onChange={onChange}/>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst Catalog = ({renderFunc, placeholder, baseUrl, ...listProps}) => {\r\n    const {items, renderProps} = React.useContext(CatalogContext);\r\n    const renderItem = React.useCallback((item) => {\r\n        return renderFunc(item, {link: `${item.id}/`, ...renderProps});\r\n    }, [renderFunc, renderProps]);\r\n    return (\r\n        <div className=\"layout__content-block catalog__catalog\">\r\n            {items.length > 0 ? (\r\n                <List {...listProps}\r\n                    renderItem={renderItem}>\r\n                    {items}\r\n                </List>\r\n            ) : (\r\n                <div className=\"catalog__empty-catalog-fallback-message text-center font-size-sm\">\r\n                    {placeholder}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst Body = (props) => {\r\n    const {options, filterItems, children, renderProps={}} = props;\r\n    const history = useHistory();\r\n    const location = useLocation();\r\n    const params = new URLSearchParams(location.search);\r\n    const subject = parseInt(params.get('subject')) || null;\r\n    const online = params.get('online') === 'true';\r\n    const onFilterChange = React.useCallback((value, name) => {\r\n        const params = new URLSearchParams(location.search);\r\n        if (value)\r\n            params.set(name, value);\r\n        else\r\n            params.delete(name);\r\n        // setSubject(option);\r\n        history.push({\r\n            pathname: location.pathname,\r\n            search: `?${params}`\r\n        });\r\n    }, [location, history]);\r\n    const matchingItems = filterItems(subject, online);\r\n\r\n    return (\r\n        <CatalogContext.Provider\r\n            value={{\r\n                options, subject, online, onChange: onFilterChange, items: matchingItems, renderProps\r\n            }}>\r\n            <div className=\"catalog\">\r\n                {children}\r\n            </div>\r\n        </CatalogContext.Provider>\r\n    );\r\n};\r\n//\r\n// const CatalogPage = ({title, className, BodyComponent = Body, ...props}) => {\r\n//     return (\r\n//         <Page title={title} className={className}>\r\n//             <BodyComponent {...props}/>\r\n//         </Page>\r\n//     )\r\n// };\r\n\r\nexport default {\r\n    Filter,\r\n    Catalog,\r\n    Body,\r\n    // Page: CatalogPage\r\n};\r\n","import React from 'react';\r\nimport _ from 'lodash';\r\nimport {Link} from \"react-router-dom\";\r\nimport CoverImage from \"./CoverImage\";\r\nimport Contacts from \"./Contacts\";\r\n\r\nexport default function Teacher(props) {\r\n    const {teacher: {first_name, last_name, photo, contacts, subject_ids, bio: about}, subjects, link, bio=false, className} = props;\r\n    const onClick = React.useCallback((event) => {\r\n        const clicked = !event.target.closest('.social-media');\r\n        // event.preventDefault();\r\n    }, []);\r\n    const teacherSubjects = subject_ids.map(id => _.find(subjects, {id}));\r\n    return (\r\n        <Link to={link} className={`${className} teacher-profile`} onClick={onClick}>\r\n            <div className=\"container p-0\">\r\n                <div className=\"row flex-nowrap\">\r\n                    <div className=\"col-auto d-flex align-items-center\">\r\n                        <CoverImage src={photo} className=\"teacher-profile__photo\" round square/>\r\n                    </div>\r\n                    <div className=\"col d-flex flex-column justify-content-center\">\r\n                        <h3 className=\"teacher-profile__name\">{first_name} {last_name}</h3>\r\n                        {bio && (\r\n                            <div className=\"teacher-profile__subjects font-size-sm\">\r\n                                {teacherSubjects.map(({name}, i) => i === 0 ? name : name.toLowerCase()).join(', ')}\r\n                            </div>)}\r\n                        {bio && (<Contacts contacts={contacts}/>)}\r\n                    </div>\r\n                </div>\r\n                {bio && (\r\n                    <div className=\"row\">\r\n                        <div className=\"col-12 description-text\">\r\n                            {about}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </Link>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport _  from 'lodash';\r\nimport Catalog from \"components/common/Catalog\";\r\nimport Teacher from \"../../../common/Teacher\";\r\n\r\nconst Filter = (props) => (<Catalog.Filter filterBy={{online: false}} {...props}/>);\r\n\r\nconst TeachersCatalog = (props) => {\r\n    const renderTeacher = React.useCallback((teacher, {link, subjects}) => (\r\n        <div className=\"list__item col-12 col-md-6 d-flex\" key={teacher.id}>\r\n            <Teacher\r\n                teacher={teacher}\r\n                subjects={subjects}\r\n                bio\r\n                link={link}/>\r\n        </div>\r\n    ), []);\r\n    return (\r\n        <Catalog.Catalog\r\n            placeholder=\"Нет преподавателей, соответствующих условиям поиска\"\r\n            flex\r\n            renderFunc={renderTeacher}\r\n            {...props}/>\r\n    );\r\n};\r\n\r\nconst Body = (props) => {\r\n    const {teachers, subjects, ...otherProps} = props;\r\n\r\n    const options = React.useMemo(() => {\r\n        const subjectsMap = _.zipObject(subjects.map(({id}) => id), subjects);\r\n        const subjectsTeachers = _.reduce(teachers, (result, teacher) => {\r\n            teacher.subject_ids.forEach(subject_id => {result[subject_id] = subjectsMap[subject_id]});\r\n            return result;\r\n        }, {});\r\n        return _.values(subjectsTeachers).map(({id, name}) => ({value: id, label: name}));\r\n    }, [teachers, subjects]);\r\n\r\n    const getMatchingCourses = React.useCallback((subject) => teachers.filter((teacher) =>\r\n        (subject ? teacher.subject_ids.some(id => subject === id)  : true)), [teachers]);\r\n\r\n    return (\r\n        <Catalog.Body\r\n            options={options}\r\n            renderProps={{subjects}}\r\n            filterItems={getMatchingCourses}\r\n            {...otherProps}/>\r\n    )\r\n};\r\n\r\n// const Page = (props) => (<Catalog.Page BodyComponent={Body} {...props}/>);\r\n\r\nexport default {\r\n    ...Catalog,\r\n    Filter,\r\n    Catalog: TeachersCatalog,\r\n    Body,\r\n    // Page\r\n}\r\n","import React from \"react\";\r\nimport Page, {PageContent, PageLoadingPlaceholder} from \"components/Page\";\r\nimport TeachersCatalog from \"./TeachersCatalog\";\r\nimport {useTeachers} from \"store\";\r\n\r\nconst TeachersCatalogPage = ({location}) => {\r\n    const {teachers, subjects, error, retry} = useTeachers();\r\n    return (\r\n        <Page\r\n            title=\"Мои курсы\"\r\n            className=\"catalog teachers-catalog\"\r\n            location={location}>\r\n            {!(teachers && subjects) ? (\r\n                    <PageLoadingPlaceholder/>\r\n                ) : (\r\n                <TeachersCatalog.Body\r\n                    subjects={subjects}\r\n                    teachers={teachers}>\r\n                    <PageContent>\r\n                        <TeachersCatalog.Filter/>\r\n                        <TeachersCatalog.Catalog/>\r\n                    </PageContent>\r\n                </TeachersCatalog.Body>\r\n            )\r\n            }\r\n        </Page>\r\n    );\r\n};\r\n\r\nexport default TeachersCatalogPage;\r\n","import React from \"react\";\r\n\r\nconst Button = ({className, children, active = true, neutral=false, icon, iconAction, tag:Tag='div', onClick, ...props}) => {\r\n    // const clickCallback = React.useCallback((e) => {\r\n    //     console.log(e.target, e.currentTarget, e.target === e.currentTarget);\r\n    //     if (e.target === e.currentTarget)\r\n    //         onClick(e);\r\n    // }, [onClick]);\r\n    return (\r\n        <Tag\r\n            className={`btn ${active ? '' : 'btn-inactive'} ${neutral ? 'btn-neutral' : ''} ${className ? className : ''}`}\r\n            {...props}>\r\n        <span className=\"btn__content\">\r\n            {icon && <div className=\"btn__after\" onClick={iconAction ? iconAction : onClick}>{icon}</div>}\r\n            <span\r\n                className=\"btn__name\"\r\n                onClick={onClick}>\r\n                {children}\r\n            </span>\r\n        </span>\r\n        </Tag>\r\n    );\r\n};\r\n\r\nexport default Button;\r\n","import React from \"react\";\r\nimport Page from \"./Page\";\r\nimport {Link} from \"react-router-dom\";\r\nimport Button from \"./ui/Button\";\r\n\r\nconst ErrorPage = ({errorCode, message, link: {text, url} = {}}) => {\r\n    const code = errorCode && errorCode.toString();\r\n    return (\r\n        <Page title={code} className=\"error-page\">\r\n            <div className=\"error-page__error-code\">\r\n                {code && code.split('').map((number, i) => <span key={i}>{number}</span>)}\r\n            </div>\r\n            <div className=\"error-page__error-message\">{message || 'Похоже, вы потерялись'}</div>\r\n            <Button tag={Link} to={`${url || ''}/`} replace className=\"btn\">{text || 'На главную'}</Button>\r\n        </Page>\r\n    );\r\n};\r\n\r\nexport default ErrorPage;\r\n","import React from 'react';\r\nimport Catalog from \"./Catalog\";\r\nimport _ from \"lodash\";\r\n\r\nconst CourseCatalog = ({renderCourse, ...otherProps}) => (\r\n    <Catalog.Catalog\r\n        placeholder=\"Нет курсов, соответствующих условиям поиска\"\r\n        renderFunc={renderCourse}\r\n        {...otherProps}/>\r\n);\r\n\r\nconst Body = (props) => {\r\n    const {courses, subjects, ...otherProps} = props;\r\n\r\n    const options = React.useMemo(() =>\r\n            subjects.map(({id, name}) => ({value: id, label: name})),\r\n        [subjects]);\r\n\r\n    const getMatchingCourses = React.useCallback((subject, online) => courses.filter((course) =>\r\n        (subject ? course.subject_id === subject : true) && (online ? course.online === online : true)), [courses]);\r\n\r\n    return (\r\n        <Catalog.Body\r\n            options={options}\r\n            filterItems={getMatchingCourses}\r\n            {...otherProps}/>\r\n    )\r\n};\r\n\r\n// const CourseCatalogPage = (props) => (<Catalog.Page BodyComponent={Body} {...props}/>);\r\n\r\nexport default {\r\n    ...Catalog,\r\n    Catalog: CourseCatalog,\r\n    Body,\r\n    // Page: CourseCatalogPage\r\n}\r\n","export const daysBetween = (date1, date2) => {\r\n    const one_day = 1000 * 60 * 60 * 24;\r\n    const date1_ms = new Date(date1.getYear(), date1.getMonth(), date1.getDate()).getTime();\r\n    const date2_ms = new Date(date2.getYear(), date2.getMonth(), date2.getDate()).getTime();\r\n    const difference_ms = date2_ms - date1_ms;\r\n    return Math.floor(difference_ms / one_day);\r\n};\r\n\r\nexport const renderDate = (date, options, locale='ru') => date.toLocaleString(locale, options);\r\nObject.assign(renderDate, {\r\n    date: {\r\n        day: 'numeric',\r\n        month: 'long'\r\n    },\r\n    shortDate: {\r\n        day: 'numeric',\r\n        month: 'numeric'\r\n    },\r\n    hour: {\r\n        hour: 'numeric',\r\n        minute: 'numeric'\r\n    }\r\n});\r\n\r\nexport const getAuthHeader = (username, password) => ({'Authorization': `Basic ${btoa(username + \":\" + password)}`});\r\n\r\nexport const downloadFile = async (url, name) => {\r\n    // IE10+ : (has Blob, but not a[download] or URL)\r\n    if (navigator.msSaveBlob) {\r\n        let blob = await fetch(url).then(r => r.blob());\r\n        return navigator.msSaveBlob(blob, name);\r\n    }\r\n    else {\r\n        let link = document.createElement('a');\r\n        link.download = name;\r\n        link.href = url;\r\n        let event = new MouseEvent('click');\r\n        link.dispatchEvent(event);\r\n    }\r\n};\r\n","import React from 'react';\r\nimport {daysBetween} from \"../../definitions/helpers\";\r\nimport ListItem from \"./ListItem\";\r\nimport CoverImage from \"./CoverImage\";\r\n\r\nexport default function Course({course, online=true, isSelected=false, ...props}) {\r\n    const {name, image_link, date_start, description} = course;\r\n    const startsIn = daysBetween(new Date(), date_start);\r\n    return (\r\n        <ListItem\r\n            item={course}\r\n            className={isSelected ? 'course course-selected' : 'course'}\r\n            title={name}\r\n            subtitle={`До начала курса ${startsIn} ${startsIn === 1 ? 'день' : 'дней'}`}\r\n            description={description}\r\n            preview={(\r\n                <div className=\"course__cover-container\">\r\n                    {course.online && (\r\n                        <div className={`course__online-badge ${online ? 'course__online-text' : ''} font-size-xs`}>\r\n                            <span>Онлайн</span>\r\n                        </div>\r\n                    )}\r\n                    <CoverImage src={image_link} className=\"poster-cover course__cover\"/>\r\n                </div>\r\n            )}\r\n            {...props}/>\r\n    );\r\n}\r\n","import React from \"react\";\r\nimport _ from \"lodash\";\r\nimport Page, {PageContent, PageLoadingPlaceholder} from \"components/Page\";\r\nimport ErrorPage from \"components/ErrorPage\";\r\nimport CourseCatalog from \"components/common/CourseCatalog\";\r\nimport Course from \"components/common/Course\";\r\nimport Button from \"components/ui/Button\";\r\nimport UserProfile from \"components/common/UserProfile\";\r\nimport {useShopCatalog, useTeachers} from \"store\";\r\n\r\nconst TeacherPage = (props) => {\r\n    const {match: {params: {id: param_id}}, path: root, className, location} = props;\r\n    const {teachers, subjects, error, retry} = useTeachers();\r\n    const {catalog, error: errorLoadingCatalog, retry: reloadCatalog} = useShopCatalog();\r\n    const id = parseInt(param_id);\r\n\r\n    const renderCourse = React.useCallback((course, {link}) => {\r\n        const {price, discount} = course;\r\n        return (\r\n            <Course\r\n                course={course}\r\n                selectable\r\n                key={course.id}\r\n                link={`/shop/${link}`}>\r\n                <div className=\"list__item-action-info\">\r\n                    <span className=\"price\">{price}₽</span> {discount && <span className=\"discount font-size-xs\">{discount + price}₽</span>}\r\n                </div>\r\n                <Button style={{minWidth: '110px'}}>Открыть</Button>\r\n            </Course>\r\n        )\r\n    }, []);\r\n\r\n    if (teachers && catalog && subjects) {\r\n        const teacher = _.find(teachers, {id});\r\n\r\n        if (teacher) {\r\n            const {first_name, last_name, photo, contacts, subject_ids, bio} = teacher;\r\n            const teacherSubjects = subject_ids.map(id => _.find(subjects, {id}));\r\n            const teachersCourses = catalog.filter(course => _.indexOf(course.teacher_ids, id) >= 0);\r\n            const profile = {\r\n                first_name,\r\n                last_name,\r\n                photo,\r\n                contacts,\r\n                about: bio,\r\n                role: teacherSubjects.map(({name}, i) => i === 0 ? name : name.toLowerCase()).join(', ')\r\n            };\r\n            console.log(catalog, teachersCourses);\r\n            const fullName = `${first_name} ${last_name}`;\r\n            return (\r\n                <Page\r\n                    title={`${fullName}`}\r\n                    className={`teacher-page ${className || ''}`}\r\n                    location={location}>\r\n                    <PageContent parentSection={{name: \"Преподаватели\"}}>\r\n                        <UserProfile {...profile}/>\r\n                        <div className=\"layout__content-block\">\r\n                            <h3>Курсы преподавателя</h3>\r\n                        </div>\r\n                        <CourseCatalog.Body\r\n                            className=\"course-shop\"\r\n                            subjects={subjects}\r\n                            courses={teachersCourses}>\r\n                            <CourseCatalog.Filter/>\r\n                            <CourseCatalog.Catalog\r\n                                renderCourse={renderCourse}/>\r\n                        </CourseCatalog.Body>\r\n                    </PageContent>\r\n                </Page>\r\n            )\r\n        } else\r\n            return <ErrorPage errorCode={404} message=\"Преподаватель не найден\" link={{url: root}}/>;\r\n    }\r\n    else {\r\n        return (\r\n            <Page\r\n                location={location}>\r\n                <PageLoadingPlaceholder/>\r\n            </Page>\r\n        );\r\n    }\r\n};\r\n\r\nexport default TeacherPage;\r\n","import React from \"react\";\r\nimport { Switch, Route } from \"react-router-dom\";\r\nimport {TEACHERS} from \"data/test_data\";\r\nimport {SHOP_CATALOG} from \"data/test_data\";\r\nimport CatalogPage from \"./catalog-page\";\r\nimport TeacherPage from \"./teacher-page\";\r\n\r\nconst Teachers = (props) => {\r\n    const {match} = props;\r\n    return (\r\n        <Switch>\r\n            <Route path={`${match.path}/:id`} render={(props) => (\r\n                <TeacherPage\r\n                    teachers={TEACHERS}\r\n                    courses={SHOP_CATALOG.catalog}\r\n                    path={match.path}\r\n                    {...props}/>\r\n            )}/>\r\n            <Route exact path={`${match.path}`} render={(props) => (\r\n                <CatalogPage {...props}/>\r\n            )}/>\r\n        </Switch>\r\n    );\r\n};\r\n\r\nexport default Teachers;\r\n","import React from 'react';\r\nimport {useTruncate} from \"../../../../hooks/common\";\r\nimport CoverImage from \"../../../common/CoverImage\";\r\nimport Truncate from \"react-truncate\";\r\nimport _ from \"lodash\";\r\nimport {BottomTab} from \"../../../Page\";\r\nimport ScrollBars from \"../../../ui/ScrollBars\";\r\nimport {CSSTransition, TransitionGroup} from \"react-transition-group\";\r\nimport Button from \"../../../ui/Button\";\r\n\r\nconst SelectedCourse = ({course, onCourseDeselect, onTruncate}) => {\r\n    const {name} = course;\r\n    const [descriptionRef] = useTruncate(name);\r\n    const onDeselectClick = React.useCallback(() => {\r\n        onCourseDeselect(course);\r\n    }, [onCourseDeselect, course]);\r\n    return (\r\n        <div className=\"selected-course d-flex align-items-center flex-shrink-0\">\r\n            <div className=\"selected-course__cover-container\">\r\n                <CoverImage src={course.image_link} className=\"selected-course__cover poster-cover\"/>\r\n                <i className=\"icon-close selected-course__deselect-btn animated__action-button\" onClick={onDeselectClick}/>\r\n            </div>\r\n            <div className=\"selected-course__description-container font-size-xs\">\r\n                <div className=\"selected-course__description\">\r\n                    <Truncate lines={2} ref={descriptionRef} onTruncate={onTruncate}>\r\n                        {name}\r\n                    </Truncate>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst renderView = ({style, ...props}) => (<div style={{...style, height: `calc(100% + ${style.minHeight}px)`}} {...props}/>);\r\n\r\nconst SelectedCoursesTab = ({courses, onCourseDeselect}) => {\r\n    const price = _.sumBy(courses, 'price');\r\n    const discount = _.sumBy(courses, 'discount');\r\n    // const stickyRef =\r\n    React.useEffect(() => {\r\n        // window.dispatchEvent(new Event('scroll'));\r\n    });\r\n    return (\r\n        <BottomTab\r\n            className={`selected-courses ${courses.length === 0 ? 'hidden' : ''}`}>\r\n            <div className=\"container-fluid\">\r\n                <div className=\"row\">\r\n                    <div className=\"col-12 col-md p-0 selected-courses__courses\">\r\n                        <ScrollBars\r\n                            autoHeight\r\n                            autoHeightMax=\"unset\"\r\n                            hideTracksWhenNotNeeded\r\n                            renderView={renderView}\r\n                            style={{height: '100%'}}\r\n                            className=\"scrollbars\">\r\n                            <TransitionGroup\r\n                                className=\"layout__bottom-tab-container container-fluid d-flex flex-nowrap\"\r\n                                style={{height: '100%'}}>\r\n                                {courses.map(course => (\r\n                                    <CSSTransition\r\n                                        classNames=\"animation-fade\"\r\n                                        key={course.id}\r\n                                        timeout={300}>\r\n                                        <SelectedCourse\r\n                                            course={course}\r\n                                            onCourseDeselect={onCourseDeselect}\r\n                                            onTruncate={() => {\r\n                                                window.dispatchEvent(new Event('scroll'));\r\n                                            }}/>\r\n                                    </CSSTransition>\r\n                                ))}\r\n                            </TransitionGroup>\r\n                        </ScrollBars>\r\n                    </div>\r\n                    <div className=\"col-12 col-md-auto p-0\">\r\n                        <div className=\"selected-courses__price layout__bottom-tab-container container d-flex align-items-center justify-content-end\">\r\n                            <Button className=\"order-1 order-md-0 flex-shrink-0\">Оплатить</Button>\r\n                            <div className=\"price selected-courses__price-container container\">\r\n                                {discount && <div className=\"discount font-size-sm d-inline-block d-md-block\">{price + discount}₽</div>}\r\n                                <div className=\"price font-size-lg d-inline-block d-md-block\">{price}₽</div>\r\n                                {discount && <div className=\"promotion font-size-xs\">Цена со скидкой за 2 курса</div>}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </BottomTab>\r\n    );\r\n};\r\n\r\nexport default SelectedCoursesTab;\r\n","import React from \"react\";\r\nimport Page, {PageContent, PageLoadingPlaceholder} from \"components/Page\";\r\nimport CourseCatalog from \"components/common/CourseCatalog\";\r\nimport SelectedCoursesTab from \"./SelectedCoursesTab\";\r\nimport Course from \"components/common/Course\";\r\nimport Button from \"components/ui/Button\";\r\nimport {useShopCatalog} from \"store\";\r\n\r\nconst ShopCatalogPage = ({selectedCourses, onCourseClick, onCourseSelect, onCourseDeselect, location}) => {\r\n    const {catalog, subjects, error, retry} = useShopCatalog();\r\n    const renderCourse = React.useCallback((course, props) => {\r\n        const isSelected = selectedCourses.has(course);\r\n        const {price, discount} = course;\r\n        return (\r\n            <Course\r\n                course={course}\r\n                selectable\r\n                isSelected={isSelected}\r\n                onActionClick={onCourseSelect}\r\n                key={course.id}\r\n                {...props}>\r\n                <div className=\"list__item-action-info\">\r\n                    <span className=\"price\">{price}₽</span> {discount && <span className=\"discount font-size-xs\">{discount + price}₽</span>}\r\n                </div>\r\n                <Button style={{minWidth: '110px'}}>{isSelected ? 'Выбрано' : 'Выбрать'}</Button>\r\n            </Course>\r\n        )\r\n    }, [selectedCourses, onCourseSelect]);\r\n    return (\r\n        <Page\r\n            className=\"course-shop\"\r\n            title=\"Магазин курсов\"\r\n            location={location}>\r\n            {!(catalog && subjects) ? (\r\n                <PageLoadingPlaceholder/>\r\n            ) : (\r\n                <CourseCatalog.Body\r\n                    subjects={subjects}\r\n                    courses={catalog}>\r\n                    <PageContent>\r\n                        <CourseCatalog.Filter/>\r\n                        <CourseCatalog.Catalog\r\n                            renderCourse={renderCourse}/>\r\n                    </PageContent>\r\n                    <SelectedCoursesTab\r\n                        onCourseDeselect={onCourseDeselect}\r\n                        courses={[...selectedCourses]}/>\r\n                </CourseCatalog.Body>\r\n            )}\r\n        </Page>\r\n    );\r\n};\r\n\r\nexport default ShopCatalogPage;\r\n","import React from 'react';\r\nimport _ from 'lodash';\r\nimport CoverImage from \"components/common/CoverImage\";\r\nimport {renderDate} from \"../../definitions/helpers\";\r\nimport List from \"./List\";\r\nimport Teacher from \"./Teacher\";\r\nimport Page, {PageLink} from \"../Page\";\r\nimport ErrorPage from \"../ErrorPage\";\r\n\r\nwindow._ = _;\r\n\r\nexport const CourseOverviewContext = React.createContext({});\r\n\r\nconst Description = () => {\r\n    const {course} = React.useContext(CourseOverviewContext);\r\n    return (\r\n        <React.Fragment>\r\n            <CoverImage src={course.image_link} className=\"course-overview__cover\"/>\r\n            <div className=\"course-overview__info layout__content-block\">\r\n                <h2>{course.name}</h2>\r\n                <div className=\"course-overview__summary\">\r\n                    <div className=\"col-auto course-overview__summary-item\">\r\n                        <i className=\"far fa-calendar-alt\"/>\r\n                        Начало: {renderDate(course.date_start, renderDate.date)}\r\n                    </div>\r\n                    <div className=\"col-auto course-overview__summary-item\">\r\n                        <i className=\"far fa-clock\"/>\r\n                        Длительность: {course.total_hours} часов\r\n                    </div>\r\n                </div>\r\n                <div className=\"description-text font-size-sm\">{course.description}</div>\r\n            </div>\r\n        </React.Fragment>\r\n    );\r\n};\r\n\r\nconst Title = () => {\r\n    const {course} = React.useContext(CourseOverviewContext);\r\n    return (\r\n        <div className=\"course-overview__title layout__content-block\">\r\n            <h2>{course.name}</h2>\r\n            <PageLink className=\"course-overview__link\" to={`/shop/${course.id}`}>\r\n                Страница курса\r\n            </PageLink>\r\n        </div>\r\n    );\r\n};\r\n\r\n//TODO: error boundaries\r\nconst Teachers = () => {\r\n    const {course, teachers} = React.useContext(CourseOverviewContext);\r\n    return (\r\n        <div className=\"layout__content-block\">\r\n            <h3>Преподаватели</h3>\r\n            <div className=\"course-overview__teachers container negate-block-padding\">\r\n                <div className=\"row\">\r\n                    {course.teacher_ids.map((id, i) => (\r\n                        <div className=\"col-12 col-md d-flex p-0\" key={i}>\r\n                            <Teacher\r\n                                teacher={_.find(teachers, {id})}\r\n                                link={`/teachers/${id}/`}/>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst Lessons = ({renderLesson: renderFunc}) => {\r\n    const {course} = React.useContext(CourseOverviewContext);\r\n    const renderCourse = React.useCallback((item) => {\r\n        return renderFunc(item, {link: `${item.id}/`});\r\n    }, [renderFunc]);\r\n    return (\r\n        <div className=\"layout__content-block\">\r\n            <h3>Уроки</h3>\r\n            <List\r\n                renderItem={renderCourse}>\r\n                {course.lessons}\r\n            </List>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst CourseOverview = (props) => {\r\n    const {match: {params: {id:param_id}}, path: root, courses, teachers, children, className, location} = props;\r\n    const id = parseInt(param_id);\r\n    const course = _.find(courses, {id});\r\n    if (course) {\r\n        return (\r\n            <Page\r\n                title={`${course.title}`}\r\n                className={`course-overview ${className || ''}`}\r\n                location={location}>\r\n                <CourseOverviewContext.Provider\r\n                    value={{\r\n                        course,\r\n                        teachers\r\n                    }}>\r\n                    {children}\r\n                </CourseOverviewContext.Provider>\r\n            </Page>\r\n        )\r\n    } else\r\n        return <ErrorPage errorCode={404} message=\"Курс не найден\" link={{url: root}}/>;\r\n};\r\n\r\nexport default {\r\n    Description,\r\n    Teachers,\r\n    Lessons,\r\n    Title,\r\n    Body: CourseOverview\r\n};\r\n","import React from \"react\";\r\nimport {CourseOverviewContext} from \"components/common/CourseOverview\";\r\nimport {BottomTab} from \"components/Page\";\r\nimport Button from \"../../../ui/Button\";\r\n\r\nconst CoursePriceTab = () => {\r\n    const {course: {price, discount}} = React.useContext(CourseOverviewContext);\r\n    return (\r\n        <BottomTab className=\"course-overview__offer\">\r\n            <div className=\"container layout__bottom-tab-container\">\r\n                <div className=\"row justify-content-end align-items-center\">\r\n                    {discount && (\r\n                        <div className=\"col-auto\">\r\n                            <div className=\"discount\">{price + discount}₽</div>\r\n                        </div>\r\n                    )}\r\n                    <div className=\"col-auto\">\r\n                        <h2 className=\"price\">\r\n                            {price}₽\r\n                        </h2>\r\n                    </div>\r\n                    <div className=\"col-auto\">\r\n                        <Button>Купить</Button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </BottomTab>\r\n    );\r\n};\r\n\r\nexport default CoursePriceTab;\r\n","import React from \"react\";\r\nimport CoverImage from \"./CoverImage\";\r\n\r\nconst VideoCover = ({cover, watchProgress, locked=false, className}) => (\r\n    <CoverImage\r\n        src={cover}\r\n        className={`video-cover ${locked ? 'video-locked' : ''} ${className || ''}`}>\r\n        {watchProgress && (\r\n            <div className=\"video-cover__watch-progress-bar\">\r\n                <div\r\n                    className=\"watch-progress-bar__progress-line\"\r\n                    style={{width: `${watchProgress}%`}}/>\r\n            </div>\r\n        )}\r\n    </CoverImage>\r\n);\r\n\r\nexport default VideoCover;\r\n","import React from 'react';\r\nimport ListItem from \"./ListItem\";\r\nimport VideoCover from \"./VideoCover\";\r\n\r\nexport default function Lesson({lesson, locked=false, link, ...props}) {\r\n    const {title, cover, description, watchProgress} = lesson;\r\n    return (\r\n        <ListItem\r\n            item={lesson}\r\n            className={`video-class ${locked ? 'disabled' : ''}`}\r\n            title={title}\r\n            description={description}\r\n            preview={(\r\n                <VideoCover\r\n                    cover={cover}\r\n                    className=\"video-class__cover\"\r\n                    locked={locked}\r\n                    watchProgress={!locked && watchProgress}/>\r\n            )}\r\n            key={lesson.id}\r\n            link={locked ? undefined : link}\r\n            {...props}/>\r\n    );\r\n}\r\n","import React from \"react\";\r\nimport Page, {PageContent, PageLoadingPlaceholder} from \"components/Page\";\r\nimport CourseOverview from \"components/common/CourseOverview\";\r\nimport CoursePriceTab from \"./CoursePriceTab\";\r\nimport Lesson from \"components/common/Lesson\";\r\nimport {useShopCatalog, useTeachers} from \"store\";\r\n\r\nconst CoursePage = ({path, location, match}) => {\r\n    const {catalog, subjects, error, retry} = useShopCatalog();\r\n    const {teachers, error: errorLoadingTeachers, retry: reloadTeachers} = useTeachers();\r\n    const renderLesson = (lesson, props) => (\r\n        <Lesson\r\n            lesson={lesson}\r\n            selectable={false}\r\n            locked={false}\r\n            key={lesson.id}/>\r\n    );\r\n    if (catalog && teachers) {\r\n        return (\r\n            <CourseOverview.Body\r\n                match={match}\r\n                path={path}\r\n                courses={catalog}\r\n                teachers={teachers}\r\n                location={location}>\r\n                <PageContent parentSection={{name: \"Магазин курсов\"}}>\r\n                    <CourseOverview.Description/>\r\n                    <CourseOverview.Teachers/>\r\n                    <CourseOverview.Lessons renderLesson={renderLesson}/>\r\n                </PageContent>\r\n                <CoursePriceTab/>\r\n            </CourseOverview.Body>\r\n        );\r\n    }\r\n    else {\r\n        return (\r\n            <Page\r\n                location={location}>\r\n                <PageLoadingPlaceholder/>\r\n            </Page>\r\n        );\r\n    }\r\n};\r\n\r\nexport default CoursePage;\r\n","import React from 'react';\r\nimport { Switch, Route } from \"react-router-dom\";\r\nimport ShopCatalogPage from \"./catalog-page\";\r\nimport CoursePage from \"./course-page\";\r\n\r\nexport default class Shop extends React.Component {\r\n    state = {\r\n        selectedCourses: new Set()\r\n    };\r\n\r\n    onCourseSelect = (course) => {\r\n        let {selectedCourses} = this.state;\r\n        if (selectedCourses.has(course))\r\n            return;\r\n        selectedCourses = new Set(selectedCourses);\r\n        selectedCourses.add(course);\r\n        this.setState({selectedCourses});\r\n    };\r\n\r\n    onCourseDeselect = (course) => {\r\n        let {selectedCourses} = this.state;\r\n        selectedCourses = new Set(selectedCourses);\r\n        selectedCourses.delete(course);\r\n        this.setState({selectedCourses});\r\n    };\r\n\r\n    // shouldComponentUpdate(nextProps, nextState, nextContext) {\r\n    //     const shouldUpdate =  (_.reduce(this.props, (result, value, key) => {\r\n    //         const changed = this.props[key] !== nextProps[key];\r\n    //         if (changed)\r\n    //             console.log(key);\r\n    //         if (changed && key === 'match')\r\n    //             return result;\r\n    //         return result || changed;\r\n    //     }, false));\r\n    //     console.log(shouldUpdate);\r\n    //     return shouldUpdate;\r\n    // }\r\n\r\n    render() {\r\n        const {match} = this.props;\r\n        const {selectedCourses} = this.state;\r\n        return (\r\n            <Switch>\r\n                <Route exact path={`${match.path}`} render={(props) => (\r\n                    <ShopCatalogPage\r\n                        selectedCourses={selectedCourses}\r\n                        onCourseSelect={this.onCourseSelect}\r\n                        onCourseDeselect={this.onCourseDeselect}\r\n                        {...props}/>\r\n                )}/>\r\n                <Route path={`${match.path}/:id`} component={props => (\r\n                    <CoursePage\r\n                        path={match.path}\r\n                        {...props}/>\r\n                )}/>\r\n            </Switch>\r\n        )\r\n    }\r\n}\r\n","import React from \"react\";\r\nimport CourseCatalog from \"components/common/CourseCatalog\";\r\nimport Course from \"components/common/Course\";\r\nimport Button from \"components/ui/Button\";\r\nimport Page, {PageContent} from \"components/Page\";\r\nimport {LEARNING_STATUS} from \"definitions/constants\";\r\nimport {SUBJECTS} from \"../../../../data/test_data\";\r\n\r\nconst CatalogPage = ({catalog, location}) => {\r\n    const renderCourse = React.useCallback((course, props) => (\r\n        <Course\r\n            course={course}\r\n            selectable\r\n            online={false}\r\n            key={course.id}\r\n            {...props}>\r\n            {course.status === LEARNING_STATUS.learning\r\n                ? <Button className=\"course__select-btn\">Изучать</Button>\r\n                : <Button className=\"course__select-btn\" active={false}>Пройден</Button>}\r\n        </Course>\r\n    ), []);\r\n    return (\r\n        <Page\r\n            className=\"user-courses\"\r\n            location={location}\r\n            title=\"Мои курсы\">\r\n            <CourseCatalog.Body\r\n                courses={catalog}\r\n                subjects={SUBJECTS}>\r\n                <PageContent>\r\n                    <CourseCatalog.Filter/>\r\n                    <CourseCatalog.Catalog\r\n                        renderCourse={renderCourse}/>\r\n                </PageContent>\r\n            </CourseCatalog.Body>\r\n        </Page>\r\n    );\r\n};\r\n\r\nexport default CatalogPage;\r\n","import React from \"react\";\r\nimport {PageContent} from \"components/Page\";\r\nimport CourseOverview from \"components/common/CourseOverview\";\r\nimport Lesson from \"components/common/Lesson\";\r\nimport Button from \"components/ui/Button\";\r\nimport {renderDate} from \"definitions/helpers\";\r\n\r\nconst CoursePage = ({path, catalog, ...props}) => {\r\n    const renderLesson = (lesson, props) => {\r\n        const {date, id} = lesson;\r\n        const selectable = date < new Date();\r\n        return (\r\n            <Lesson\r\n                lesson={lesson}\r\n                locked={!selectable}\r\n                selectable={selectable}\r\n                key={id}\r\n                {...props}>\r\n                <div className=\"list__item-action-info\">{renderDate(date, renderDate.shortDate)}</div>\r\n                {selectable\r\n                    ? <Button>Изучать</Button>\r\n                    : <Button active={false}>Скоро</Button>}\r\n            </Lesson>\r\n        );\r\n    };\r\n    return (\r\n        <CourseOverview.Body\r\n            path={path}\r\n            courses={catalog}\r\n            {...props}>\r\n            <PageContent parentSection={{name: \"Мои курсы\"}}>\r\n                <CourseOverview.Title/>\r\n                <CourseOverview.Lessons renderLesson={renderLesson}/>\r\n            </PageContent>\r\n        </CourseOverview.Body>\r\n    );\r\n};\r\n\r\nexport default CoursePage;\r\n","import React, { Component, Fragment } from 'react';\r\n\r\nclass Tooltip extends Component {\r\n    componentDidMount() {\r\n    }\r\n\r\n    render() {\r\n        let child = React.Children.only(this.props.children);\r\n        let position = 'pos-' + this.props.position;\r\n        return React.cloneElement(child, {\r\n            className: (child.props.className ? child.props.className + ' tooltip ' : 'tooltip ') + position,\r\n            children: (\r\n                <Fragment>\r\n                    {child.props.children}\r\n                    <div className=\"tooltip-arrow\"/>\r\n                    <div className=\"tooltip-block\">\r\n                        {\r\n                            this.props.content\r\n                        }\r\n                    </div>\r\n                </Fragment>\r\n            )\r\n        });\r\n    }\r\n}\r\n\r\nexport default Tooltip;\r\n","import React from 'react';\r\nimport {useUpdateEffect} from \"hooks/common\";\r\nimport {CSSTransition, SwitchTransition} from \"react-transition-group\";\r\nimport Tooltip from \"./Tooltip\";\r\n\r\nexport const LOADING_STATE = {\r\n    PENDING: 'pending',\r\n    LOADING: 'loading',\r\n    LOADED: 'loaded',\r\n    SUCCESS: 'success',\r\n    DONE: 'done',\r\n    REJECTED: 'rejected',\r\n    ERROR: 'error'\r\n};\r\n\r\nexport function useLoadingState(loading, done, rejected, error) {\r\n    const [state, setState] = React.useState(loading === null || done\r\n        ? LOADING_STATE.DONE\r\n        : (rejected\r\n            ? LOADING_STATE.REJECTED\r\n            : LOADING_STATE.LOADING));\r\n    useUpdateEffect(() => {\r\n        if (loading === false) {\r\n            setState(LOADING_STATE.LOADED);\r\n        } else if (loading === true) {\r\n            setState(LOADING_STATE.LOADING);\r\n        }\r\n    }, [loading]);\r\n    useUpdateEffect(() => {\r\n        if (state === LOADING_STATE.LOADED && done) {\r\n            setState(LOADING_STATE.SUCCESS);\r\n        }\r\n        else if (state === LOADING_STATE.SUCCESS) {\r\n            const timeout = setTimeout(() => {\r\n                setState(LOADING_STATE.DONE);\r\n            }, 1000);\r\n            return () => {\r\n                clearTimeout(timeout);\r\n            };\r\n        }\r\n    }, [state, done]);\r\n    useUpdateEffect(() => {\r\n        if (error)\r\n            setState(LOADING_STATE.ERROR);\r\n    }, [error]);\r\n    useUpdateEffect(() => {\r\n        if (rejected)\r\n            setState(LOADING_STATE.REJECTED);\r\n    }, [rejected]);\r\n    return state;\r\n}\r\n\r\nexport const LoadingIndicator = ({state, onClick, errorMessage}) => {\r\n    const icon = (state === LOADING_STATE.LOADED && \"spinner-border\")\r\n        || (state === LOADING_STATE.SUCCESS && \"icon-check\")\r\n        || (state === LOADING_STATE.ERROR && \"icon-reload\")\r\n        || (state === LOADING_STATE.REJECTED && \"icon-alert\")\r\n        || \"spinner-border\";\r\n    return (\r\n        <SwitchTransition>\r\n            {state !== LOADING_STATE.DONE ? (\r\n                <CSSTransition\r\n                    key={icon}\r\n                    appear={true}\r\n                    classNames=\"animation-scale\"\r\n                    timeout={300}>\r\n                    <div\r\n                        className=\"file__state-indicator\"\r\n                        onClick={onClick}>\r\n                        <Tooltip content={errorMessage}>\r\n                            <i\r\n                                className={icon}/>\r\n                        </Tooltip>\r\n                    </div>\r\n                </CSSTransition>\r\n            ) : null}\r\n        </SwitchTransition>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport Button from \"./Button\";\r\nimport {downloadFile} from \"../../definitions/helpers\";\r\nimport {LoadingIndicator, useLoadingState} from \"./LoadingIndicator\";\r\n\r\nconst File = ({\r\n                  file: {name, downloadName, url},\r\n                  error=null,\r\n                  rejected=null,\r\n                  loading=null,\r\n                  done=true,\r\n                  deletable=false,\r\n                  onDelete,\r\n                  onIndicatorClick,\r\n                  className,\r\n                  errorMessage,\r\n                  ...props\r\n              }) => {\r\n    const downloadCallback = React.useCallback(() => {\r\n        if (url)\r\n            downloadFile(url, downloadName || name);\r\n    }, [url, name, downloadName]);\r\n    const isUpload = loading !== null;\r\n    const state = useLoadingState(loading !== null ? loading < 100 : null, done, rejected, error);\r\n    return (\r\n        <div className={`file file-${state} ${className || ''}`}>\r\n            <Button\r\n                neutral\r\n                className=\"file__btn\"\r\n                icon={deletable\r\n                    ? <i className=\"icon-close file__action-btn file__delete-btn animated__action-button\"/>\r\n                    : <i className=\"icon-download file__action-btn file__download-btn animated__action-button\"/>}\r\n                iconAction={deletable ? onDelete : undefined}\r\n                onClick={downloadCallback}\r\n                {...props}>\r\n                {loading !== null && <div className=\"file__loading-progress\" style={{width: `${loading}%`}}/>}\r\n                <i className=\"file__icon far fa-file-alt\"/>\r\n                <span\r\n                    className=\"file__name\"\r\n                    title={name}>\r\n                {name}\r\n            </span>\r\n            </Button>\r\n            {isUpload && (\r\n                <LoadingIndicator\r\n                    onClick={onIndicatorClick}\r\n                    state={state}\r\n                    errorMessage={errorMessage}/>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default File;\r\n\r\n","import {CSSTransition} from \"react-transition-group\";\r\nimport ReactDOM from 'react-dom';\r\n\r\n//hack to get context because lib doesn't export it properly and import doesn't work\r\n// const TransitionGroupContext = Transition.contextType;\r\n//\r\n// const getClassNames = (classNames, type) => {\r\n//     const isStringClassNames = typeof classNames === 'string';\r\n//     const prefix = isStringClassNames && classNames\r\n//         ? `${classNames}-`\r\n//         : '';\r\n//\r\n//     let baseClassName = isStringClassNames\r\n//         ? `${prefix}${type}`\r\n//         : classNames[type];\r\n//\r\n//     let activeClassName = isStringClassNames\r\n//         ? `${baseClassName}-active`\r\n//         : classNames[`${type}Active`];\r\n//\r\n//     let doneClassName = isStringClassNames\r\n//         ? `${baseClassName}-done`\r\n//         : classNames[`${type}Done`];\r\n//\r\n//     return {\r\n//         baseClassName,\r\n//         activeClassName,\r\n//         doneClassName\r\n//     };\r\n// };\r\n//\r\n// function getClassName(classNames, type, phase) {\r\n//     // console.log(arguments);\r\n//     let className = getClassNames(classNames, type)[`${phase}ClassName`];\r\n//\r\n//     if (type === 'appear' && phase === 'done') {\r\n//         className += ` ${getClassNames(classNames, 'enter').doneClassName}`;\r\n//     }\r\n//\r\n//     return className;\r\n// }\r\n//\r\n// const State = {\r\n//     entering: 'entering',\r\n//     entered:  'entered',\r\n//     exiting:  'exiting',\r\n//     exited: 'exited'\r\n// };\r\n//\r\n// const StableCSSTransition = ({classNames='', appear, children, ...props}) => {\r\n//     const isMounting = !useIsMounted();\r\n//     const context = React.useContext(TransitionGroupContext);\r\n//         const appearingRef = React.useRef(context ? context.isMounting : appear);\r\n//     const prevStateRef = React.useRef(null);\r\n//     const appliedClassNamesRef = React.useRef('');\r\n//     return (\r\n//         <Transition\r\n//             // mountOnEnter\r\n//             // unmountOnExit\r\n//             {...props}\r\n//             appear={appear}>\r\n//             {(state) => {\r\n//                 const appearing = appearingRef.current;\r\n//                 const prevState = prevStateRef.current;\r\n//                 const animateMounting = context != null;\r\n//\r\n//                 console.log(prevState, '->', state);\r\n//                 let className = appliedClassNamesRef.current;\r\n//                 if (state === State.exited) {\r\n//                     if (prevState !== State.exiting) {\r\n//                         if (appearing) {\r\n//                             className = getClassName(classNames, 'appear', 'base');\r\n//                         }\r\n//                         else if (prevState !== null || animateMounting) {\r\n//                             className = getClassName(classNames, 'enter', 'base');\r\n//                         }\r\n//                     }\r\n//                     else {\r\n//                         className = getClassName(classNames, 'exit', 'done');\r\n//                     }\r\n//                 }\r\n//                 else if (state === State.exiting) {\r\n//                     className = getClassName(classNames, 'exit', 'active');\r\n//                 }\r\n//                 else if (state === State.entered) {\r\n//                     if (prevState === State.entered) {\r\n//                         className = getClassName(classNames, 'exit', 'base');\r\n//                     }\r\n//                     else if (prevState !== null || animateMounting) {\r\n//                         className = getClassName(classNames, appearing ? 'appear' : 'enter', 'done');\r\n//                     }\r\n//                     appearingRef.current = false;\r\n//                 }\r\n//                 else if (state === State.entering || animateMounting) {\r\n//                     className = getClassName(classNames, appearing ? 'appear' : 'enter', 'active');\r\n//                 }\r\n//                 prevStateRef.current = state;\r\n//                 appliedClassNamesRef.current = className;\r\n//                 console.log(className);\r\n//                 const child = React.Children.only(children);\r\n//                 return React.cloneElement(child, {\r\n//                     className: child.props.className ? `${child.props.className} ${className}` : className\r\n//                 });\r\n//             }}\r\n//         </Transition>\r\n//     );\r\n// };\r\n\r\nclass StableCSSTransition extends CSSTransition {\r\n    type = null;\r\n    phase = null;\r\n\r\n    addClass(node, type, phase) {\r\n        super.addClass(node, type, phase);\r\n        this.type = type;\r\n        this.phase = phase;\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        if (this.appliedClasses[this.type] && this.appliedClasses[this.type][this.phase])\r\n            super.addClass(ReactDOM.findDOMNode(this), this.type, this.phase);\r\n    }\r\n}\r\n\r\nexport default StableCSSTransition;\r\n","import React from 'react';\r\nimport _ from 'lodash';\r\nimport Dropzone from \"react-dropzone-uploader\";\r\nimport {TransitionGroup} from \"react-transition-group\";\r\nimport {useRefValue} from \"hooks/common\";\r\nimport Auth from 'definitions/auth';\r\nimport {API_ROOT} from \"definitions/api\";\r\nimport {getAuthHeader} from \"definitions/helpers\";\r\nimport StableCSSTransition from \"components/common/StableCSSTransition\";\r\nimport {LOADING_STATE, LoadingIndicator, useLoadingState} from \"./LoadingIndicator\";\r\nimport File from \"./File\";\r\nimport Button from \"./Button\";\r\n\r\nimport 'react-dropzone-uploader/dist/styles.css';\r\n\r\nconst trimExtension = (filename) => filename.replace(/\\.[^/.]+$/, \"\");\r\n\r\nconst FILE_STATUS = {\r\n    rejected_file_type: 'rejected_file_type',\r\n    rejected_max_files: 'rejected_max_files',\r\n    preparing: 'preparing',\r\n    error_file_size: 'error_file_size',\r\n    error_validation: 'error_validation',\r\n    ready: 'ready',\r\n    started: 'started',\r\n    getting_upload_params: 'getting_upload_params',\r\n    error_upload_params: 'error_upload_params',\r\n    uploading: 'uploading',\r\n    exception_upload: 'exception_upload',\r\n    aborted: 'aborted',\r\n    restarted: 'restarted',\r\n    removed: 'removed',\r\n    error_upload: 'error_upload',\r\n    headers_received: 'headers_received',\r\n    done: 'done',\r\n};\r\nconst FileInputContext = React.createContext(null);\r\nconst isFileReady = f => f.meta.status === 'done';\r\nconst allFilesReady = files => files.every(f => isFileReady(f));\r\nconst getUploadParams = () => {\r\n    // return { url: 'https://httpbin.org/post' };\r\n    if (Auth.user) {\r\n        return {\r\n            url: `${API_ROOT}/files/`,\r\n            headers: getAuthHeader(Auth.user.uid, Auth.user.hash)\r\n        };\r\n    }\r\n    else\r\n        throw new Error('User not logged in');\r\n};\r\nconst getFileProp = ({original_file_name, id_file_name}) => ({\r\n    name: original_file_name,\r\n    downloadName: `${trimExtension(original_file_name)}_${id_file_name}`,\r\n    url: `${API_ROOT}/files/attachments/${id_file_name}`\r\n});\r\n\r\nconst Input = (props) => {\r\n    const {\r\n        className,\r\n        style,\r\n        getFilesFromEvent,\r\n        accept,\r\n        multiple,\r\n        disabled,\r\n        onFiles,\r\n        files,\r\n        content,\r\n        extra: { maxFiles }\r\n    } = props;\r\n    const onChange = React.useCallback(async e => {\r\n        const target = e.target;\r\n        const chosenFiles = await getFilesFromEvent(e);\r\n        onFiles(chosenFiles);\r\n        target.value = null\r\n    }, [getFilesFromEvent, onFiles]);\r\n    const isActive = files.length < maxFiles && !disabled;\r\n    return (\r\n        <Button\r\n            tag=\"label\"\r\n            active={isActive}\r\n            icon={<i className=\"icon-add\"/>}>\r\n            {content}\r\n            <input\r\n                className={className}\r\n                style={style}\r\n                type=\"file\"\r\n                accept={accept}\r\n                multiple={multiple}\r\n                disabled={!isActive}\r\n                onChange={isActive ? onChange : null}\r\n            />\r\n        </Button>\r\n    );\r\n};\r\n\r\nconst Preview = (props) => {\r\n    const {\r\n        fileWithMeta: { cancel, remove, restart, xhr },\r\n        meta: { name = '', percent = 0, status},\r\n        isUpload,\r\n        canRemove,\r\n        className\r\n    } = props;\r\n    const [getResponse, setResponse] = useRefValue(null);\r\n    if (!getResponse() && xhr && xhr.responseText) {\r\n        try {\r\n            const {original_file_name, file_link, id_file_name} = JSON.parse(xhr.responseText);\r\n            if (!(original_file_name && file_link && id_file_name))\r\n                throw new Error('Incorrect response');\r\n            setResponse({\r\n                original_file_name,\r\n                file_link,\r\n                id_file_name\r\n            });\r\n        }\r\n        catch (e) {\r\n            console.log(e);\r\n        }\r\n    }\r\n    const response = getResponse();\r\n    const deleteCallback = React.useCallback(() => {\r\n        if (isUpload && !(status === 'done' || status === 'headers_received')) {\r\n            cancel();\r\n        }\r\n        remove();\r\n    }, [cancel, remove, isUpload, status]);\r\n    const hasError = _.startsWith(status, 'error') || _.startsWith(status, 'exception');\r\n    const isRejected = status === FILE_STATUS.error_file_size ? true : undefined;\r\n    const loading = isUpload ? status === 'done' || status === 'headers_received' ? 100 : percent : null;\r\n    const isDone = status === 'done';\r\n    return (\r\n        <File\r\n            file={response ? getFileProp(response) : ({name})}\r\n            loading={loading}\r\n            className={className}\r\n            done={isDone}\r\n            rejected={hasError && isRejected ? true : undefined}\r\n            error={hasError}\r\n            errorMessage={hasError && isRejected ? 'Файл превышает максимальный допустимый размер' : undefined}\r\n            deletable={canRemove}\r\n            onDelete={deleteCallback}\r\n            onIndicatorClick={hasError && !isRejected ? restart : undefined}/>\r\n    );\r\n};\r\n\r\nconst SubmitButton = (props) => {\r\n    const {submitting, hasChanged} = React.useContext(FileInputContext) || ({});\r\n    const { disabled, onSubmit, files, content } = props;\r\n    const isDisabled = !allFilesReady(files) || disabled;\r\n\r\n    const submitCallback = React.useCallback(() => {\r\n        onSubmit(files);\r\n    }, [onSubmit, files]);\r\n\r\n    const state = useLoadingState(submitting, submitting === false);\r\n    console.log(state);\r\n    return (\r\n        <StableCSSTransition\r\n            in={onSubmit != null && (hasChanged || state !== LOADING_STATE.DONE)}\r\n            appear\r\n            mountOnEnter\r\n            unmountOnExit\r\n            classNames=\"animation-fade\"\r\n            timeout={300}>\r\n            <React.Fragment>\r\n                <Button\r\n                    active={!isDisabled}\r\n                    icon={\r\n                        hasChanged\r\n                            ? (<i className=\"icon-upload\"/>)\r\n                            : (<LoadingIndicator state={state}/>)\r\n                    }\r\n                    onClick={submitCallback}>\r\n                    {hasChanged ? content : 'Сохранено'}\r\n                </Button>\r\n            </React.Fragment>\r\n        </StableCSSTransition>\r\n    );\r\n};\r\n\r\nconst Layout = ({input, previews=[], submitButton, dropzoneProps, files, extra: { maxFiles } }) => {\r\n    const context = React.useContext(FileInputContext);\r\n    const {preloadedFiles=[], deletePreloadedFile, disabled} = context || ({});\r\n    const { ref } = dropzoneProps;\r\n    return (\r\n        <div\r\n            ref={ref}\r\n            className=\"file-input\">\r\n            {/*<StableCSSTransition*/}\r\n            {/*    in={previews.length > 0 || preloadedFiles.length > 0}*/}\r\n            {/*    mountOnEnter*/}\r\n            {/*    unmountOnExit*/}\r\n            {/*    classNames=\"animation-fade\"*/}\r\n            {/*    timeout={300}>*/}\r\n            <h4 className=\"file-input__files-title\">Загруженные файлы</h4>\r\n            {/*</StableCSSTransition>*/}\r\n            <TransitionGroup className=\"file-container\">\r\n                {\r\n                    preloadedFiles && (\r\n                        preloadedFiles.map((file) => {\r\n                            const {id_file_name} = file;\r\n                            const deleteCallback = () => {deletePreloadedFile(file);};\r\n                            return (\r\n                                <StableCSSTransition\r\n                                    classNames=\"animation-fade\"\r\n                                    timeout={300}\r\n                                    key={id_file_name}>\r\n                                    <File\r\n                                        file={getFileProp(file)}\r\n                                        done={true}\r\n                                        deletable={!disabled}\r\n                                        onDelete={deleteCallback}/>\r\n                                </StableCSSTransition>\r\n                            );\r\n                        }\r\n                    ))\r\n                }\r\n                {previews.map((preview, i) => (\r\n                    <StableCSSTransition\r\n                        classNames=\"animation-fade\"\r\n                        timeout={300}\r\n                        key={preview.props.meta.id}>\r\n                        {preview}\r\n                    </StableCSSTransition>\r\n                ))}\r\n            </TransitionGroup>\r\n            <div className=\"file-input__controls\">\r\n                {input}\r\n                {submitButton}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst getCallbackFiles = (files, preloadedFiles) => {\r\n    if (!allFilesReady(files))\r\n        return null;\r\n    else\r\n        return _.concat(preloadedFiles, files.map(({xhr}) => JSON.parse(xhr.responseText)));\r\n};\r\n\r\n//TODO: check disabled on capturing phase of click\r\nconst FileInput = (props) => {\r\n    let {\r\n        initialFiles=[],\r\n        inputContent=\"Загрузить файл\",\r\n        onChange,\r\n        onSubmit,\r\n        maxFiles=5,\r\n        maxSizeBytes=1024 * 1024 * 4,\r\n        accept,\r\n        isDisabled=false,\r\n        ...otherProps\r\n    } = props;\r\n\r\n    const [preloadedFiles, setPreloadedFiles] = React.useState(initialFiles);\r\n    const [hasChanged, setChanged] = React.useState(false);\r\n    const [submitting, setSubmitting] = React.useState(null);\r\n    const [getInputFiles, setInputFiles] = useRefValue([]);\r\n\r\n    const deletePreloadedFile = React.useCallback((file) => {\r\n        const newPreloadedFiles = preloadedFiles.filter(item => item !== file);\r\n        setChanged(true);\r\n        setPreloadedFiles(newPreloadedFiles);\r\n        onChange && onChange(getCallbackFiles(getInputFiles(), newPreloadedFiles));\r\n    }, [preloadedFiles, onChange, getInputFiles]);\r\n\r\n    const handleChangeStatus = React.useCallback(({meta, ...file}, status, files) => {\r\n        console.log(status, meta, _.cloneDeep(files));\r\n        setChanged(true);\r\n        setInputFiles(files);\r\n        onChange && onChange(getCallbackFiles(files, preloadedFiles));\r\n    }, [onChange, preloadedFiles, setInputFiles]);\r\n\r\n    const handleSubmit = React.useCallback(async (files) => {\r\n        console.log(files.map(f => f.meta));\r\n        if (onSubmit) {\r\n            const returnValue = onSubmit(getCallbackFiles(files, preloadedFiles));\r\n            if (returnValue instanceof Promise) {\r\n                setSubmitting(true);\r\n                try {\r\n                    await returnValue;\r\n                    setChanged(false);\r\n                }\r\n                finally {\r\n                    setSubmitting(false);\r\n                }\r\n            }\r\n        }\r\n    }, [onSubmit, preloadedFiles]);\r\n\r\n    maxFiles = preloadedFiles ? maxFiles - preloadedFiles.length : maxFiles;\r\n    const disabled = typeof isDisabled === 'function' ? isDisabled() : isDisabled;\r\n    return (\r\n        <FileInputContext.Provider\r\n            value={{\r\n                preloadedFiles,\r\n                deletePreloadedFile,\r\n                hasChanged,\r\n                disabled,\r\n                submitting\r\n            }}>\r\n            <Dropzone\r\n                inputContent={inputContent}\r\n                submitButtonContent={'Сохранить'}\r\n                {...otherProps}\r\n                getUploadParams={getUploadParams}\r\n                onChangeStatus={handleChangeStatus}\r\n                onSubmit={onSubmit && handleSubmit}\r\n                canCancel={false}\r\n                SubmitButtonComponent={SubmitButton}\r\n                LayoutComponent={Layout}\r\n                InputComponent={Input}\r\n                PreviewComponent={Preview}\r\n                maxFiles={maxFiles}\r\n                maxSizeBytes={maxSizeBytes}\r\n                accept={accept}\r\n                classNames={{preview: ''}}\r\n                disabled={isDisabled}\r\n            />\r\n        </FileInputContext.Provider>\r\n    )\r\n};\r\n\r\nexport default FileInput;\r\n\r\n\r\n","import React from 'react';\r\nimport {Prompt} from \"react-router-dom\";\r\n\r\nconst NavigationBlocker = () => {\r\n    const unloadCallback = React.useCallback((event) => {\r\n        // Cancel the event as stated by the standard.\r\n        event.preventDefault();\r\n        // Chrome requires returnValue to be set.\r\n        event.returnValue = '';\r\n    }, []);\r\n    React.useEffect(() => {\r\n        window.addEventListener('beforeunload', unloadCallback);\r\n        return () => {\r\n            window.removeEventListener('beforeunload', unloadCallback);\r\n        };\r\n    }, [unloadCallback]);\r\n    return (\r\n        <Prompt\r\n            message='У вас есть несохраненные изменения, покинуть страницу?'\r\n        />\r\n    );\r\n};\r\n\r\nexport default NavigationBlocker;\r\n","import React from \"react\";\r\nimport FileInput from \"components/ui/FileInput\";\r\nimport APIRequest from \"definitions/api\";\r\nimport NavigationBlocker from \"components/common/NavigationBlocker\";\r\n\r\nconst HomeworkLoader = ({homework, lessonId}) => {\r\n    const isHomeworkSubmissionClosed = React.useCallback(() => homework.deadline && new Date() >= homework.deadline, [homework]);\r\n    const [hasChanges, setChanges] = React.useState(false);\r\n    const onChange = React.useCallback((files) => {\r\n        console.log('files changed', files);\r\n        setChanges(true);\r\n    }, []);\r\n    const onSubmit = React.useCallback(async (files) => {\r\n        console.log('files submitted', files);\r\n        const file = files[0] ? files[0].id_file_name : null;\r\n        //TODO: add error alert\r\n        return APIRequest({\r\n            url: `/lessons/${lessonId}/homeworks/`,\r\n            method: file ? (homework.submittedFiles ? 'PUT' : 'POST') : 'DELETE',\r\n            data: {\r\n                file\r\n            }\r\n        });\r\n    }, [homework, lessonId]);\r\n    return (\r\n        <div className=\"submission\">\r\n            {hasChanges && <NavigationBlocker/>}\r\n            <FileInput\r\n                maxFiles={1}\r\n                accept=\"image/*,audio/*,video/*\"\r\n                initialFiles={homework.submittedFiles}\r\n                onChange={onChange}\r\n                onSubmit={onSubmit}\r\n                isDisabled={isHomeworkSubmissionClosed}/>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default HomeworkLoader;\r\n","import React from \"react\";\r\nimport VideoCover from \"../../../common/VideoCover\";\r\nimport File from \"../../../ui/File\";\r\nimport {renderDate} from \"../../../../definitions/helpers\";\r\nimport HomeworkLoader from \"./HomeworkLoader\";\r\n\r\nconst LessonView = ({lesson: {id, title, cover, description, homework}}) => {\r\n    return (\r\n        <div className=\"col-12 col-lg layout__content-block lesson-page__current-lesson\">\r\n            <div className=\"block-container video-container\">\r\n                <VideoCover\r\n                    className=\"video-class__cover\"\r\n                    cover={cover}/>\r\n            </div>\r\n            <div className=\"block-container description-container\">\r\n                <h2>{title}</h2>\r\n                <div className=\"description-text\">{description}</div>\r\n            </div>\r\n            {homework && (\r\n                <div className=\"block-container hw-container\">\r\n                    <h3>Домашнее задание</h3>\r\n                    <div className=\"assignment\">\r\n                        {homework.files && (\r\n                            <div className=\"assignment__files file-container\">\r\n                                {homework.files.map((assignment, i) => (\r\n                                    <File file={assignment} key={i}/>\r\n                                ))}\r\n                            </div>\r\n                        )}\r\n                        {homework.description && <div className=\"description-text\">{homework.description}</div>}\r\n                        {homework.deadline &&\r\n                        <div className=\"assignment__deadline\">Дедлайн: {renderDate(homework.deadline, renderDate.date)}</div>}\r\n                    </div>\r\n                    {homework.submit && (\r\n                        <HomeworkLoader homework={homework} lessonId={id}/>\r\n                    )}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default LessonView;\r\n","import React from \"react\";\r\nimport _ from \"lodash\";\r\nimport Page, {PageContent} from \"components/Page\";\r\nimport ErrorPage from \"components/ErrorPage\";\r\nimport Lesson from \"components/common/Lesson\";\r\nimport List from \"components/common/List\";\r\nimport LessonView from \"./LessonView\";\r\n\r\nconst LessonPage = (props) => {\r\n    const {match: {params: {courseId: param_course, lessonId: param_lesson}}, catalog, location} = props;\r\n    const courseId = parseInt(param_course);\r\n    const lessonId = parseInt(param_lesson);\r\n    const course = _.find(catalog, {id: courseId});\r\n    const selectedLesson = (course &&_.find(course.lessons, {id: lessonId})) || null;\r\n    const renderLesson = (lesson) => {\r\n        return (\r\n            <Lesson\r\n                lesson={lesson}\r\n                locked={false}\r\n                selectable={true}\r\n                key={lesson.id}\r\n                link={`../${lesson.id}/`}>\r\n            </Lesson>\r\n        );\r\n    };\r\n    if (selectedLesson) {\r\n        const now = new Date();\r\n        const otherLessons = course.lessons.filter(lesson => lesson.date < now && lesson.id !== selectedLesson.id);\r\n        return (\r\n            <Page title={`${selectedLesson.title}`} className=\"lesson-page\" location={location}>\r\n                <PageContent parentSection={{name: course.name}}>\r\n                    <div className=\"layout__content-block\">\r\n                        <div className=\"container p-lg-0\">\r\n                            <div className=\"row\">\r\n                                <LessonView lesson={selectedLesson}/>\r\n                                <div className=\"col-12 col-lg-auto layout__content-block lesson-page__other-lessons\">\r\n                                    <h3>Другие занятия</h3>\r\n                                    <List\r\n                                        renderItem={renderLesson}>\r\n                                        {otherLessons}\r\n                                    </List>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </PageContent>\r\n            </Page>\r\n        );\r\n    } else\r\n        return <ErrorPage errorCode={404} message=\"Урок не найден\" />;\r\n};\r\n\r\nexport default LessonPage;\r\n","import React from 'react';\r\nimport _ from 'lodash';\r\nimport { Switch, Route } from \"react-router-dom\";\r\nimport {MY_COURSES} from \"data/test_data\";\r\nimport {LEARNING_STATUS} from \"definitions/constants\";\r\nimport CatalogPage from \"./catalog-page\";\r\nimport CoursePage from \"./course-page\";\r\nimport LessonPage from \"./lesson-page\";\r\n\r\nexport default class MyCourses extends React.Component {\r\n    state = {\r\n        courses: _.sortBy(MY_COURSES, (course) => course.status === LEARNING_STATUS.finished ? 1 : 0)\r\n    };\r\n\r\n    render() {\r\n        const {match} = this.props;\r\n        const {courses} = this.state;\r\n        return (\r\n            <Switch>\r\n                <Route path={`${match.path}/:courseId/:lessonId`} render={(props) => (\r\n                    <LessonPage catalog={courses}\r\n                                {...props}/>\r\n                )}/>\r\n                <Route path={`${match.path}/:id`} render={(props) => (\r\n                    <CoursePage\r\n                        catalog={courses}\r\n                        path={match.path}\r\n                        {...props}/>\r\n                )}/>\r\n                <Route exact path={`${match.path}`} render={(props) => (\r\n                    <CatalogPage catalog={courses} {...props}/>\r\n                )}/>\r\n            </Switch>\r\n        )\r\n    }\r\n}\r\n","import React from 'react';\r\nimport {CSSTransition} from \"react-transition-group\";\r\nimport {HashRouter as Router, Redirect, Route, Switch, useHistory, useLocation} from \"react-router-dom\";\r\nimport Header from \"./Header\";\r\nimport SideBar from \"./SideBar\";\r\nimport Page from \"./Page\";\r\nimport {useRefValue} from \"../hooks/common\";\r\nimport GlobalStore, {useUser} from \"store\";\r\n\r\nimport Login from \"./pages/login\";\r\nimport Account from \"./pages/account\";\r\nimport Teachers from \"./pages/teachers\";\r\nimport Shop from \"./pages/shop\";\r\nimport MyCourses from \"./pages/courses\";\r\n\r\nimport 'sass/index.scss';\r\n\r\nfunction useLocationChangeEffect(effect) {\r\n    const history = useHistory();\r\n    React.useEffect(() => {\r\n        return history.listen(effect);\r\n    }, [history, effect]);\r\n}\r\n\r\nfunction useScrollToTop() {\r\n    const [getPrevPath, setPrevPath] = useRefValue(useLocation().pathname);\r\n    const onLocationChange = React.useCallback((location, action) => {\r\n        console.log('update');\r\n        if (getPrevPath() !== location.pathname && action !== 'POP') {\r\n            window.scrollTo(0, 0);\r\n        }\r\n        setPrevPath(location.pathname);\r\n    }, [getPrevPath, setPrevPath]);\r\n    useLocationChangeEffect(onLocationChange);\r\n}\r\n\r\nfunction useForceTrailingSlash() {\r\n    const location = useLocation();\r\n    const history = useHistory();\r\n    const path = location.pathname;\r\n    if (path.slice(-1) !== '/') {\r\n        history.replace(path + '/');\r\n    }\r\n}\r\n\r\nfunction useSideBarState() {\r\n    const [isSideBarOpened, setSideBar] = React.useState(false);\r\n    const toggleSideBar = React.useCallback(() => {\r\n        setSideBar(opened => !opened);\r\n    }, []);\r\n    return [isSideBarOpened, toggleSideBar];\r\n}\r\n\r\nconst onLocationChange = (location, args) => {\r\n    console.log(`- - - location: '${location.pathname}'`, args);\r\n};\r\n\r\nfunction App() {\r\n    // routing effects\r\n    useForceTrailingSlash();\r\n    useScrollToTop();\r\n    useLocationChangeEffect(onLocationChange);\r\n\r\n    const [isSideBarOpened, toggleSideBar] = useSideBarState();\r\n    const {user, userInfo} = useUser();\r\n    const showSidebar = userInfo !== null;\r\n    return (\r\n        <div className=\"app\">\r\n            <Header\r\n                onMenuButtonClick={toggleSideBar}\r\n                user={user}\r\n                sidebar={showSidebar}/>\r\n            <CSSTransition\r\n                in={isSideBarOpened}\r\n                timeout={200}\r\n                classNames={App.layoutAnimationClassNames}>\r\n                <div className=\"layout\">\r\n                    <React.Fragment>\r\n                        {showSidebar && (<SideBar onMenuClose={toggleSideBar}/>)}\r\n                        <Switch>\r\n                            <Route exact path=\"/\" render={() => <Redirect to=\"/courses\"/>}/>\r\n                            <Route path=\"/login\" component={Login}/>\r\n                            <Route path=\"/courses\" component={MyCourses}/>\r\n                            <Route path=\"/shop\" component={Shop}/>\r\n                            <Route path=\"/teachers\" component={Teachers}/>\r\n                            <Route path=\"/account\" component={Account}/>\r\n                            <Route path=\"/:section\" component={Page}/>\r\n                        </Switch>\r\n                    </React.Fragment>\r\n                </div>\r\n            </CSSTransition>\r\n        </div>\r\n    );\r\n}\r\n\r\nApp.layoutAnimationClassNames = {\r\n    enter: 'sidebar-opened',\r\n    enterActive: 'sidebar-opened',\r\n    enterDone: 'sidebar-opened',\r\n    exit: 'sidebar-hiding',\r\n    exitActive: 'sidebar-hiding'\r\n};\r\n\r\nexport default () => (\r\n    <Router basename={process.env.REACT_APP_BASE_NAME}>\r\n        <GlobalStore>\r\n            <App/>\r\n        </GlobalStore>\r\n    </Router>\r\n);\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import 'definitions/polyfills';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from 'components/App';\nimport APIRequest from \"definitions/api\";\nimport * as serviceWorker from './serviceWorker';\n\nwindow.APIRequest = APIRequest;\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/dummy_poster.f51c6af6.jpg\";"],"sourceRoot":""}