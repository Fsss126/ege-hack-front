{"version":3,"sources":["img/logo.svg","definitions/polyfills.js","definitions/constants.js","definitions/helpers.js","api/index.js","definitions/auth.js","components/common/CoverImage.jsx","components/Header.jsx","components/common/Contacts.jsx","components/SideBar.jsx","data/test_data.js","hooks/common.js","store/index.js","components/Page.jsx","components/pages/login/LoginPage.jsx","components/common/UserProfile.jsx","components/pages/account/AccountPage.jsx","components/common/ListItem.jsx","components/common/List.jsx","components/ui/ScrollBars.jsx","components/ui/Select.jsx","components/ui/Input.jsx","components/common/Catalog.jsx","components/common/Teacher.jsx","components/pages/teachers/catalog-page/TeachersCatalog.jsx","components/pages/teachers/catalog-page/TeachersCatalogPage.jsx","components/ui/Button.jsx","components/ErrorPage.jsx","components/common/CourseCatalog.jsx","components/common/Course.jsx","components/pages/teachers/teacher-page/TeacherPage.jsx","components/pages/teachers/index.jsx","components/pages/shop/catalog-page/SelectedCoursesTab.jsx","components/pages/shop/catalog-page/ShopCatalogPage.jsx","components/common/CourseOverview.jsx","components/pages/shop/course-page/CoursePriceTab.jsx","components/common/VideoCover.jsx","components/common/Lesson.jsx","components/pages/shop/course-page/CoursePage.jsx","components/pages/shop/index.jsx","components/pages/courses/catalog-page/CatalogPage.jsx","components/pages/courses/course-page/CoursePage.jsx","components/ui/Tooltip.jsx","components/ui/LoadingIndicator.jsx","components/ui/File.jsx","components/common/VideoPlayer.jsx","components/common/StableCSSTransition.jsx","components/ui/FileInput.jsx","components/common/NavigationBlocker.jsx","components/pages/courses/lesson-page/HomeworkLoader.jsx","components/pages/courses/lesson-page/LessonView.jsx","components/pages/courses/lesson-page/LessonPage.jsx","components/pages/courses/index.jsx","components/App.jsx","serviceWorker.js","index.js","img/dummy_poster.jpg"],"names":["module","exports","__webpack_require__","p","elementClosest","window","ACCOUNT_ROLES","LEARNING_STATUS","learning","finished","daysBetween","date1","date2","date1_ms","Date","getYear","getMonth","getDate","getTime","difference_ms","Math","floor","renderDate","date","options","locale","arguments","length","undefined","toLocaleString","Object","assign","day","month","shortDate","hour","minute","getFileExtension","filename","split","pop","downloadFile","_ref","asyncToGenerator","regenerator_default","a","mark","_callee","url","name","blob","link","event","wrap","_context","prev","next","console","log","navigator","msSaveBlob","fetch","then","r","sent","abrupt","document","createElement","download","href","MouseEvent","dispatchEvent","stop","_x","_x2","apply","this","API_ROOT","CancelToken","axios","getCancelToken","source","token","cancel","APIRequest","create","baseURL","paramsSerializer","params","searchParams","URLSearchParams","_","forEach","value","key","Array","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","done","element","append","err","return","toString","interceptors","request","use","config","Auth","user","_objectSpread","auth","username","uid","password","hash","Cancel","response","data","URL","pathname","map","id","account_id","objectWithoutProperties","_ref2","date_start","date_end","image_link","teacher_id","rest","concat","teacher_ids","status","group","sortBy","_ref3","hometask","lesson","assignment","deadline","description","files","file_link","downloadName","test","_response$data","file","original_file_name","id_file_name","error","toJSON","LOCAL_STORAGE_KEY","AuthEventTypes","login","logout","initVK","VK","init","apiId","process","_this","classCallCheck","eventHandlers","info","localStorage","setItem","JSON","stringify","handler","t0","finish","removeItem","userInfo","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","storedString","getItem","storedData","parse","first_name","last_name","photo","photo_rec","Error","e","eventType","push","filter","func","get","_context2","elementId","Widgets","onAuth","CoverImage","src","className","children","_ref$square","square","_ref$round","round","react_default","style","backgroundImage","Header","props","onMenuButtonClick","sidebar","onClick","logo","alt","Fragment","common_CoverImage","react_router_dom","to","tabIndex","Contacts","_ref$contacts","contacts","vk","fb","ok","ig","Link","activeClassName","SideBar","target","currentTarget","classList","contains","onMenuClose","isAdmin","isModerator","isPupil","accountRoles","includes","React","Component","lorem","LoremIpsum","daysForward","setDate","poster","SUBJECTS","TEACHERS","vk_info","photo_max_orig","subjects","slice","bio","generateSentences","COURSES","subject","i","subject_id","online","generateParagraphs","SHOP_CATALOG","times","j","locked","num","video_link","watchProgress","course","test_data_objectSpread","price","discount","MY_COURSES","useTruncate","text","descriptionRef","useRef","_React$useState","useState","readyState","_React$useState2","slicedToArray","isFontLoaded","setFontLoaded","useEffect","addEventListener","handleResize","removeEventListener","handleLoading","current","onResize","useRefValue","initialValue","ref","useCallback","useUpdateEffect","effect","dependencies","isInitialMount","StoreContext","createContext","useShopCatalogStore","useUserCoursesStore","useSubjectsStore","useTeachersStore","useLessonsStore","requests","useSubjects","_React$useContext","useContext","setSubjects","setters","_React$useState5","_React$useState6","setError","fetchSubjects","_callee2","_subjects","retry","useDiscount","selectedCourses","_React$useState7","_React$useState8","setDiscount","_React$useState9","_React$useState10","_useRefValue","_useRefValue2","getCancel","setCancel","fetchDiscount","_callee3","courses","cancelPrev","_getCancelToken","cancelToken","_discount","_context3","Set","toConsumableArray","_ref4","coursesIds","useTeachers","_useSubjects","errorLoadingSubjects","reloadSubjects","_React$useContext2","teachers","setTeachers","_React$useState11","_React$useState12","fetchTeachers","_callee4","_teachers","_context4","useShopCatalog","_useSubjects2","_React$useContext3","catalog","setCatalog","_React$useState13","_React$useState14","fetchCatalog","_callee5","_catalog","_context5","shopCatalog","useUserCourses","_useSubjects3","_React$useContext4","userCourses","setUserCourses","_React$useState15","_React$useState16","fetchUserCourses","_callee6","_context6","useLessons","courseId","_React$useContext5","lessons","setLessons","_React$useState17","_React$useState18","fetchLessons","_ref8","_callee7","_lessons","_context7","loadedLessons","store_objectSpread","defineProperty","GlobalStore","_ref10","_useUserAuth","getUser","setUser","_React$useState3","_React$useState4","setUserInfo","getUserInfo","fetchUserInfo","loginCallback","logoutCallback","useLayoutEffect","subscribe","unsubscribe","useUserAuth","_useUserAuth2","_useShopCatalogStore","_useShopCatalogStore2","_useUserCoursesStore","_useUserCoursesStore2","_useSubjectsStore","_useSubjectsStore2","_useTeachersStore","_useTeachersStore2","_useLessonsStore","_useLessonsStore2","useStoreData","Provider","useUser","_React$useContext6","PageLoadingPlaceholder","PageLink","_ref$arrow","arrow","_ref$forward","forward","PageContent","parentSection","Page_PageLink","BottomTab","stickyProps","lib_default","mode","Page","title","_ref4$checkLogin","checkLogin","location","_useUser","react_router","state","referrer","Helmet","LoginPage","loginWidget","components_Page","UserProfile","about","role","fullName","AccountPage","Page_PageContent","common_UserProfile","ListItem","preview","subtitle","item","selectable","action","clickCallback","actionCallback","onActionClick","callbackProps","_useTruncate","_useTruncate2","clicked","closest","preventDefault","content","Truncate","lines","List","renderItem","renderProps","flex","index","defaultProps","renderTrackVertical","renderThumbVertical","renderTrackHorizontal","renderThumbHorizontal","ScrollBars","forwardRef","react_custom_scrollbars_lib","DropdownIndicator","react_select_esm","SelectContainer","selectProps","hasValue","setValue","Select_objectSpread","isClearable","Option","label","MenuList","innerRef","scrollBar","view","ui_ScrollBars","autoHeight","hideTracksWhenNotNeeded","autoHeightMax","maxHeight","Select","onChange","option","_this2","callback","_this$props","components","_this$props$isClearab","_this$props$isSearcha","isSearchable","placeholder","maxMenuHeight","find","classNamePrefix","menuPlacement","noOptionsMessage","styles","PureComponent","useChangeHandler","inputProp","Input","CheckBox","type","checked","CatalogContext","common_Catalog","Filter","_ref$filterBy","filterBy","_ref$filterBy$subject","filterBySubject","_ref$filterBy$online","filterByOnline","ui_Input","Catalog","renderFunc","listProps","baseUrl","items","Catalog_objectSpread","Body","filterItems","_props$renderProps","history","useHistory","useLocation","search","parseInt","onFilterChange","set","delete","matchingItems","Teacher","_props$teacher","teacher","_props$teacher$vk_inf","teacherSubjects","_props$bio","toLowerCase","join","catalog_page_TeachersCatalog","renderTeacher","otherProps","useMemo","zipObject","subjectsTeachers","reduce","result","values","getMatchingCourses","some","TeachersCatalogPage","_useTeachers","Page_PageLoadingPlaceholder","Button","_ref$active","active","_ref$neutral","neutral","icon","iconAction","_ref$tag","tag","Tag","ErrorPage","errorCode","message","_ref$link","code","number","ui_Button","replace","common_CourseCatalog","renderCourse","Course","_ref$online","_ref$isSelected","isSelected","startsIn","TeacherPage","param_id","match","root","path","_useShopCatalog","minWidth","_teacher$vk_info","teachersCourses","indexOf","profile","components_ErrorPage","Teachers","render","teacher_page_TeacherPage","exact","catalog_page_TeachersCatalogPage","SelectedCourse","onCourseDeselect","onTruncate","onDeselectClick","renderView","SelectedCoursesTab_objectSpread","height","minHeight","SelectedCoursesTab","discountInfo","fullPrice","sumBy","discounted_price","Event","Page_BottomTab","TransitionGroup","CSSTransition","classNames","timeout","SelectedCoursesTab_SelectedCourse","ShopCatalogPage","onCourseSelect","onCourseClick","_useDiscount","has","purchased","catalog_page_SelectedCoursesTab","CourseOverviewContext","common_CourseOverview","total_hours","renderLesson","CoursePriceTab","_React$useContext$cou","VideoCover","cover","_ref$locked","width","Lesson","common_VideoCover","CoursePage","_useLessons","reloadDiscount","course_page_CoursePriceTab","Shop","setSelectedCourses","add","course_page_CoursePage","catalog_page_ShopCatalogPage","CatalogPage","_useUserCourses","Tooltip","child","Children","only","position","cloneElement","react","LOADING_STATE","PENDING","LOADING","LOADED","SUCCESS","DONE","REJECTED","ERROR","useLoadingState","loading","rejected","setState","setTimeout","clearTimeout","LoadingIndicator","errorMessage","SwitchTransition","appear","ui_Tooltip","File","_ref$file","_ref$error","_ref$rejected","_ref$loading","_ref$done","_ref$deletable","deletable","onDelete","onIndicatorClick","downloadCallback","isUpload","LoadingIndicator_LoadingIndicator","VideoPlayer","frameBorder","allow","allowFullScreen","StableCSSTransition","phase","node","getPrototypeOf","prototype","call","appliedClasses","ReactDOM","findDOMNode","FILE_STATUS","FileInputContext","allFilesReady","every","f","meta","isFileReady","getUploadParams","headers","Authorization","btoa","getFileProp","getFilesFromEvent","accept","multiple","disabled","onFiles","maxFiles","extra","chosenFiles","isActive","Preview","_props$fileWithMeta","fileWithMeta","remove","restart","xhr","_props$meta","_props$meta$name","_props$meta$percent","percent","canRemove","getResponse","setResponse","responseText","_JSON$parse","deleteCallback","hasError","startsWith","isRejected","isDone","ui_File","SubmitButton","submitting","hasChanged","onSubmit","isDisabled","submitCallback","common_StableCSSTransition","in","mountOnEnter","unmountOnExit","Layout","input","_ref4$previews","previews","submitButton","dropzoneProps","_ref5","_ref5$preloadedFiles","preloadedFiles","deletePreloadedFile","getCallbackFiles","_ref6","FileInput","_props$initialFiles","initialFiles","_props$inputContent","inputContent","_props$maxFiles","_props$maxSizeBytes","maxSizeBytes","_props$isDisabled","setPreloadedFiles","setChanged","setSubmitting","_useRefValue3","_useRefValue4","getInputFiles","setInputFiles","newPreloadedFiles","handleChangeStatus","_ref7","cloneDeep","handleSubmit","filesToSubmit","returnValue","Promise","react_dropzone_uploader_default","submitButtonContent","onChangeStatus","canCancel","SubmitButtonComponent","LayoutComponent","InputComponent","PreviewComponent","NavigationBlocker","unloadCallback","HomeworkLoader","homework","lessonId","isHomeworkSubmissionClosed","hasChanges","setChanges","method","common_NavigationBlocker","ui_FileInput","LessonView","_ref$lesson","video","common_VideoPlayer","lesson_page_HomeworkLoader","LessonPage","_props$match$params","param_course","param_lesson","_useHomework","_React$useState19","_React$useState20","setHomework","_React$useState21","_React$useState22","fetchHomework","_ref9","_callee8","_homework","_context8","useHomework","selectedLesson","nextVideo","otherLessons","lesson_page_LessonView","MyCourses","lesson_page_LessonPage","courses_course_page_CoursePage","catalog_page_CatalogPage","useLocationChangeEffect","listen","onLocationChange","args","App","useForceTrailingSlash","getPrevPath","setPrevPath","scrollTo","useScrollToTop","_useSideBarState","isSideBarOpened","setSideBar","opened","useSideBarState","_useSideBarState2","toggleSideBar","showSidebar","components_Header","layoutAnimationClassNames","SideBar_SideBar","roles","component","Login","Account","enter","enterActive","enterDone","exit","exitActive","Boolean","hostname","basename","store","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.f44c947d.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.54b51040.svg\";","import 'react-app-polyfill/ie11';\r\nimport 'react-app-polyfill/stable';\r\nimport elementClosest  from 'element-closest';\r\n\r\nelementClosest(window);\r\n","export const ACCOUNT_ROLES = {\r\n  ADMIN: 'ADMIN',\r\n  MODERATOR: 'MODERATOR',\r\n  TEACHER: 'TEACHER',\r\n  HELPER: 'HELPER',\r\n  PUPIL: 'PUPIL'\r\n};\r\n\r\nexport const LEARNING_STATUS = {\r\n  learning: 'learning',\r\n  finished: 'finished'\r\n};\r\n\r\nexport const DEFAULT_LOGIN_REDIRECT = '/shop/';\r\n","export const daysBetween = (date1, date2) => {\r\n    const one_day = 1000 * 60 * 60 * 24;\r\n    const date1_ms = new Date(date1.getYear(), date1.getMonth(), date1.getDate()).getTime();\r\n    const date2_ms = new Date(date2.getYear(), date2.getMonth(), date2.getDate()).getTime();\r\n    const difference_ms = date2_ms - date1_ms;\r\n    return Math.floor(difference_ms / one_day);\r\n};\r\n\r\nexport const renderDate = (date, options, locale='ru') => date.toLocaleString(locale, options);\r\nObject.assign(renderDate, {\r\n    date: {\r\n        day: 'numeric',\r\n        month: 'long'\r\n    },\r\n    shortDate: {\r\n        day: 'numeric',\r\n        month: 'numeric'\r\n    },\r\n    hour: {\r\n        hour: 'numeric',\r\n        minute: 'numeric'\r\n    }\r\n});\r\n\r\nexport const getAuthHeader = (username, password) => ({'Authorization': `Basic ${btoa(username + \":\" + password)}`});\r\n\r\nexport const trimFileExtension = (filename) => filename.replace(/\\.[^/.]+$/, \"\");\r\n\r\nexport const getFileExtension = (filename) => filename.split('.').pop() || '';\r\n\r\nexport const downloadFile = async (url, name) => {\r\n    console.log(url, name);\r\n    // IE10+ : (has Blob, but not a[download] or URL)\r\n    if (navigator.msSaveBlob) {\r\n        let blob = await fetch(url).then(r => r.blob());\r\n        return navigator.msSaveBlob(blob, name);\r\n    }\r\n    else {\r\n        let link = document.createElement('a');\r\n        link.download = name;\r\n        link.href = url;\r\n        // link.target = '_blank';\r\n        let event = new MouseEvent('click');\r\n        link.dispatchEvent(event);\r\n    }\r\n};\r\n","import Auth from 'definitions/auth';\r\nimport _ from 'lodash';\r\nimport axios from 'axios';\r\n// import {handleRequstsWithTestData} from \"./test\";\r\nimport {LEARNING_STATUS} from \"definitions/constants\";\r\nimport {getFileExtension} from \"definitions/helpers\";\r\n\r\nexport const API_ROOT = 'https://egehackbottest.tk';\r\n\r\nconst CancelToken = axios.CancelToken;\r\n\r\nexport const getCancelToken = () => {\r\n    const source = CancelToken.source();\r\n    return {\r\n        token: source.token,\r\n        cancel: source.cancel\r\n    }\r\n};\r\n\r\nconst APIRequest = axios.create({\r\n    baseURL: API_ROOT,\r\n    paramsSerializer: (params) => {\r\n        const searchParams = new URLSearchParams();\r\n        _.forEach(params, (value, key) => {\r\n            if (value instanceof Array) {\r\n                for(let element of value)\r\n                    searchParams.append(key, element);\r\n            } else {\r\n                searchParams.append(key, value);\r\n            }\r\n        });\r\n        return searchParams.toString();\r\n    }\r\n});\r\n\r\nAPIRequest.interceptors.request.use(function (config) {\r\n    if (Auth.user) {\r\n        return {\r\n            auth: {\r\n                username: Auth.user.uid,\r\n                password: Auth.user.hash\r\n            },\r\n            ...config\r\n        }\r\n    }\r\n    else\r\n        throw new axios.Cancel('User not logged in.');\r\n});\r\n\r\n//Interceptors\r\nconst transformData = (response) => {\r\n    const {config, data} = response;\r\n    const url = new URL(config.url);\r\n    switch (true) {\r\n        case url.pathname === '/accounts/teachers':\r\n            return data.map(({account_id: id, ...teacher}) => ({id, ...teacher}));\r\n        case url.pathname === '/courses':\r\n            return data.map(({date_start, date_end, image_link, teacher_id, ...rest}) => ({\r\n                date_start: new Date(date_start),\r\n                date_end: new Date(date_end),\r\n                image_link: `${API_ROOT}${image_link}`,\r\n                teacher_ids: [teacher_id],\r\n                status: config.params.group === 'PERSON' ? LEARNING_STATUS.learning : undefined,\r\n                ...rest\r\n            }));\r\n        case url.pathname === '/lessons':\r\n            return _.sortBy(data, 'num').map(({hometask, ...lesson}) => ({\r\n                ...lesson,\r\n                image_link: `${API_ROOT}${lesson.image_link}`,\r\n                assignment: hometask ? ({\r\n                    deadline: hometask.deadline ? new Date(hometask.deadline) : hometask.deadline,\r\n                    description: hometask.description,\r\n                    files: hometask.file_link ? [\r\n                        {\r\n                            name: \"\",\r\n                            downloadName: `.${getFileExtension(hometask.file_link)}`,\r\n                            url: `${API_ROOT}${hometask.file_link}?disp=attachment`},\r\n                    ] : hometask.file_link,\r\n                }) : hometask\r\n            }));\r\n        case /\\/lessons\\/(.*)\\/homeworks\\/pupil$/.test(url.pathname):\r\n            const {file, date:dateTime, ...rest} = response.data;\r\n            const date = new Date();\r\n            // const dateString = date.toISOString().split('.')[0].replace(/[-T]/g, '.');\r\n            return {\r\n                ...rest,\r\n                date,\r\n                files: [\r\n                    {\r\n                        original_file_name: `_.${getFileExtension(file)}`,\r\n                        id_file_name: file,\r\n                        file_link: `${API_ROOT}/files/${file}?disp=attachment`\r\n                    }\r\n                ]\r\n            };\r\n        default:\r\n            return response.data;\r\n    }\r\n};\r\nconst transformError = (error) => {\r\n    if (!error.toJSON)\r\n        throw error;\r\n    const {config} = error.toJSON();\r\n    const url = new URL(config.url);\r\n    if (error.response && error.response.status === 404) {\r\n        switch (true) {\r\n            case /\\/lessons\\/(.*)\\/homeworks\\/pupil$/.test(url.pathname):\r\n                return ({data: {}});\r\n            default:\r\n                throw error;\r\n        }\r\n    }\r\n    else\r\n        throw error;\r\n};\r\nAPIRequest.interceptors.response.use(transformData, transformError);\r\n\r\n//returns test data for all failed requests\r\n// handleRequstsWithTestData(APIRequest);\r\n\r\nwindow.APIRequest = APIRequest;\r\n\r\nexport default APIRequest;\r\n","/*global VK*/\r\nimport APIRequest from \"api\";\r\n\r\nconst LOCAL_STORAGE_KEY = 'ege-hack-user-data';\r\n\r\nexport const AuthEventTypes = {\r\n    login: 'auth.login',\r\n    logout: 'auth.logout'\r\n};\r\n\r\nconst initVK = true;\r\n\r\nVK.init({apiId: process.env.REACT_APP_VK_APP_ID}, true);\r\n\r\nclass Auth {\r\n    user = null;\r\n\r\n    constructor() {\r\n        try {\r\n            const storedString = localStorage.getItem(LOCAL_STORAGE_KEY);\r\n            if (!storedString) {\r\n                this.user = null;\r\n                return;\r\n            }\r\n            const storedData = JSON.parse(storedString);\r\n            const {uid, first_name, last_name, photo, photo_rec, hash} = storedData;\r\n            if (!(uid && hash))\r\n                throw new Error(`Incomplete data parsed from local storage: ${storedString}`);\r\n            this.user = {uid, first_name, last_name, photo, photo_rec, hash};\r\n        }\r\n        catch (e) {\r\n            console.error('User data can not be recovered', e);\r\n            localStorage.removeItem(LOCAL_STORAGE_KEY);\r\n            this.user = null;\r\n        }\r\n    }\r\n\r\n    eventHandlers = {};\r\n\r\n    login = async (user) => {\r\n        if (!VK)\r\n            return;\r\n        if (!initVK)\r\n            VK.init({apiId: process.env.REACT_APP_VK_APP_ID}, true);\r\n        // user = {\r\n        //     ...user,\r\n        //     uid: 1,\r\n        //     hash: '68ab57e7e70fae3f8f96afc0d85465a9'\r\n        // };\r\n        console.info('Login', user);\r\n        localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(user));\r\n        this.user = user;\r\n        // await this.getUserInfo();\r\n        // if (!this.userInfo)\r\n        //     return;\r\n        for(let handler of (this.eventHandlers[AuthEventTypes.login] || []))\r\n            handler(this.user);\r\n    };\r\n\r\n    logout = () => {\r\n        // VK.Auth.logout((data) => {\r\n            console.info('Logout');\r\n            localStorage.removeItem(LOCAL_STORAGE_KEY);\r\n            this.user = null;\r\n            this.userInfo = null;\r\n            for(let handler of (this.eventHandlers[AuthEventTypes.logout] || []))\r\n                handler();\r\n        // });\r\n    };\r\n\r\n    subscribe(eventType, handler) {\r\n        (this.eventHandlers[eventType] || (this.eventHandlers[eventType] = [])).push(handler);\r\n    }\r\n\r\n    unsubscribe(eventType, handler) {\r\n        this.eventHandlers[eventType] = this.eventHandlers[eventType].filter(func => func !== handler);\r\n    }\r\n\r\n    // subscribe(eventType, handler) {\r\n    //     VK.Observer.subscribe(eventType, handler);\r\n    // }\r\n    //\r\n    // unsubscribe(eventType, handler) {\r\n    //     VK.Observer.unsubscribe(eventType, handler);\r\n    // }\r\n\r\n    getUser() {\r\n        return this.user;\r\n    }\r\n\r\n    async getUserInfo() {\r\n        if (this.userInfo)\r\n            return this.userInfo;\r\n        try {\r\n            this.userInfo = await APIRequest.get('/accounts/info');\r\n        }\r\n        catch (e) {\r\n            console.error(e);\r\n            this.userInfo = null;\r\n        }\r\n        return this.userInfo;\r\n    }\r\n\r\n    loginWidget(elementId) {\r\n        if (!VK)\r\n            return;\r\n        if (!initVK)\r\n            VK.init({apiId: process.env.REACT_APP_VK_APP_ID});\r\n        VK.Widgets.Auth(elementId, {onAuth: this.login});\r\n    }\r\n}\r\n\r\nexport default new Auth();\r\n","import React from 'react';\r\n\r\nconst CoverImage = ({src, className, children, square=false, round=false}) => {\r\n    return (\r\n        <div className={`${className} cover ${square ? 'square-cover' : ''} ${round ? 'round-cover' : ''}`}>\r\n            <div className=\"cover-img\" style={{backgroundImage: `url(${src})`}}/>\r\n            {children}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CoverImage;\r\n","import React from 'react';\r\nimport logo from 'img/logo.svg';\r\nimport Auth from 'definitions/auth';\r\nimport {Link} from 'react-router-dom';\r\nimport CoverImage from \"./common/CoverImage\";\r\n\r\nconst Header = (props) => {\r\n    const {onMenuButtonClick, user, sidebar} = props;\r\n    return (\r\n        <header>\r\n            <div className=\"container-fluid header__container\">\r\n                <div className=\"row\">\r\n                    {sidebar && (\r\n                        <div className=\"col-auto d-lg-none\">\r\n                            <div className=\"nav-btn\" onClick={onMenuButtonClick}>\r\n                                <i className=\"icon-bars\"/>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                    <div className=\"col d-flex justify-content-center justify-content-lg-start p-0\">\r\n                        <div className=\"logo-container container d-flex align-items-center justify-content-center m-0\">\r\n                            <img src={logo} className=\"logo\" alt=\"Logo\"/>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"col-auto d-flex\">\r\n                        <div className=\"user-nav\">\r\n                            {user ? (\r\n                                <React.Fragment>\r\n                                    <div className=\"user-nav__user-name\">{user.first_name} {user.last_name}</div>\r\n                                    {user.photo_rec ? (\r\n                                        <div className=\"nav-btn\">\r\n                                            <CoverImage src={user.photo_rec} round square/>\r\n                                        </div>\r\n                                    ) : (\r\n                                        <div className=\"nav-btn\">\r\n                                            <i className=\"icon-profile\"/>\r\n                                        </div>\r\n                                    )}\r\n                                    <div className=\"user-nav__menu-container\">\r\n                                        <div className=\"user-nav__menu\">\r\n                                            <div className=\"user-nav__menu-options\">\r\n                                                <Link to=\"/account/\" className=\"menu-option\">\r\n                                                    <i className=\"icon-profile\"/>\r\n                                                </Link>\r\n                                                <Link to=\"/account/settings/\" className=\"menu-option\">\r\n                                                    <i className=\"icon-settings\"/>\r\n                                                </Link>\r\n                                                <div\r\n                                                    className=\"menu-option\"\r\n                                                    tabIndex={2}\r\n                                                    onClick={Auth.logout}>\r\n                                                    <i className=\"icon-logout\"/>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </React.Fragment>\r\n                            ) : (\r\n                                <React.Fragment>\r\n                                    <div className=\"nav-btn\">\r\n                                        <i className=\"icon-profile\"/>\r\n                                    </div>\r\n                                    <div className=\"user-nav__menu-container\">\r\n                                        <div className=\"user-nav__menu\">\r\n                                            <div className=\"user-nav__menu-options\">\r\n                                                <Link to=\"/login/\" className=\"menu-option\">\r\n                                                    <i className=\"icon-login\"/>\r\n                                                </Link>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </React.Fragment>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </header>\r\n    );\r\n};\r\n\r\nexport default Header;\r\n","import React from 'react';\r\n\r\nexport default function Contacts({contacts: {vk, fb, ok, ig}}) {\r\n    return (\r\n        <div className=\"social-media font-light-grey\">\r\n            {vk && <a href={vk} className=\"social-media__link\"><i className=\"fab fa-vk vk\"/></a>}\r\n            {fb && <a href={fb} className=\"social-media__link\"><i className=\"fab fa-facebook-f fb\"/></a>}\r\n            {ok && <a href={ok} className=\"social-media__link\"><i className=\"fab fa-odnoklassniki ok\"/></a>}\r\n            {ig && <a href={ig} className=\"social-media__link\"><i className=\"fab fa-instagram ig\"/></a>}\r\n        </div>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport _ from 'lodash';\r\nimport { NavLink } from \"react-router-dom\";\r\nimport Contacts from \"./common/Contacts\";\r\nimport {ACCOUNT_ROLES} from \"definitions/constants\";\r\n\r\nfunction Link(props) {\r\n    return <NavLink className=\"layout__sidebar-menu-link\" activeClassName=\"active\" {...props}/>;\r\n}\r\n\r\nexport default class SideBar extends React.Component{\r\n    onClick = (event) => {\r\n        if (event.target === event.currentTarget || event.target.classList.contains('layout__sidebar-menu-link'))\r\n            this.props.onMenuClose();\r\n    };\r\n\r\n    render() {\r\n        const {accountRoles} = this.props;\r\n        let isAdmin, isModerator, isTeacher, isPupil;\r\n        if (accountRoles === undefined) {\r\n            isAdmin = undefined; isModerator = undefined; isTeacher = undefined; isPupil = undefined;\r\n        }\r\n        else if (accountRoles === null) {\r\n            isAdmin = null; isModerator = null; isTeacher = null; isPupil = null;\r\n        }\r\n        if (accountRoles) {\r\n            isAdmin = _.includes(accountRoles, ACCOUNT_ROLES.ADMIN);\r\n            isModerator = _.includes(accountRoles, ACCOUNT_ROLES.MODERATOR);\r\n            isTeacher = _.includes(accountRoles, ACCOUNT_ROLES.TEACHER);\r\n            isPupil = _.includes(accountRoles, ACCOUNT_ROLES.PUPIL);\r\n        }\r\n        if (accountRoles === null)\r\n            return null;\r\n        return (\r\n            <div className=\"layout__sidebar\" onClick={this.onClick}>\r\n                <div className=\"layout__sidebar-bar\">\r\n                    {accountRoles === undefined ? (\r\n                        <div className=\"layout__sidebar-content\">\r\n                            <div className=\"layout__sidebar-menu ph-item\">\r\n                                <div className=\"layout__sidebar-menu-section\">\r\n                                    <div className=\"layout__sidebar-menu-link\"><div className=\"ph-text\"/></div>\r\n                                    <div className=\"layout__sidebar-menu-link\"><div className=\"ph-text\"/></div>\r\n                                    <div className=\"layout__sidebar-menu-link\"><div className=\"ph-text\"/></div>\r\n                                    <div className=\"layout__sidebar-menu-link\"><div className=\"ph-text\"/></div>\r\n                                    <div className=\"layout__sidebar-menu-link\"><div className=\"ph-text\"/></div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"layout__sidebar-content\">\r\n                            <div className=\"layout__sidebar-menu\">\r\n                                {isPupil && (\r\n                                    <div className=\"layout__sidebar-menu-section\">\r\n                                        <Link to=\"/courses/\"> </Link>\r\n                                        {/*<Link to=\"/homework/\"> </Link>*/}\r\n                                    </div>\r\n                                )}\r\n                                <div className=\"layout__sidebar-menu-section\">\r\n                                    <Link to=\"/shop/\"> </Link>\r\n                                    <Link to=\"/teachers/\"></Link>\r\n                                    <Link to=\"/about/\"> </Link>\r\n                                </div>\r\n                                {(isAdmin || isModerator) && (\r\n                                    <React.Fragment>\r\n                                        <div className=\"layout__sidebar-menu-section\">\r\n                                            <Link to=\"/courses/\"> </Link>\r\n                                            <Link to=\"/homework/\"> </Link>\r\n                                        </div>\r\n                                        <div className=\"layout__sidebar-menu-section\">\r\n                                            <Link to=\"/shop/\"> </Link>\r\n                                            <Link to=\"/teachers/\"></Link>\r\n                                            <Link to=\"/about/\"> </Link>\r\n                                        </div>\r\n                                    </React.Fragment>\r\n                                )}\r\n                            </div>\r\n                            <Contacts contacts={{vk: '/', fb: '/', ig: '/'}}/>\r\n                            <div className=\"layout__sidebar-copyright font-size-sm font-light-grey\">\r\n                                  <br/>\r\n                                \"HACK\"\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import {LoremIpsum} from \"lorem-ipsum\";\r\nimport poster from \"../img/dummy_poster.jpg\";\r\nimport _ from \"lodash\";\r\nimport {LEARNING_STATUS} from \"../definitions/constants\";\r\nimport {API_ROOT} from \"../api\";\r\n\r\nconst lorem = new LoremIpsum();\r\n\r\nfunction getDate(daysForward) {\r\n    const date = new Date();\r\n    date.setDate(date.getDate() + daysForward);\r\n    return date;\r\n}\r\n\r\nexport const ACCOUNT_INFO = {\r\n    \"id\": 154792439,\r\n    \"roles\": [\r\n        \"PUPIL\",\r\n        \"TEACHER\"\r\n    ],\r\n    \"permissions\": [],\r\n    \"vk_info\": {\r\n        \"id\": 154792439,\r\n        \"first_name\": \"Alexandra\",\r\n        \"last_name\": \"Petrova\",\r\n        \"photo_max_orig\": poster,\r\n    },\r\n    \"pupil\": {\r\n        \"account_id\": 154792439\r\n    },\r\n    \"teacher\": {\r\n        \"account_id\": 154792439,\r\n        \"subjects\": [\r\n            {\r\n                \"id\": 1,\r\n                \"name\": \"\",\r\n                \"description\": \" \",\r\n                \"image_link\": \"/files/asdsadasda.jpg\"\r\n            }\r\n        ]\r\n    }\r\n};\r\n\r\nexport const SUBJECTS = [\r\n    // { id: 'russian', name: ' ' },\r\n    // { id: 'literature', name: '' },\r\n    // { id: 'math', name: '' },\r\n    // { id: 'informatics', name: '' },\r\n    // { id: 'physics', name: '' },\r\n    // { id: 'chemistry', name: '' },\r\n    // { id: 'biology', name: '' },\r\n    // { id: 'sociology', name: '' },\r\n    // { id: 'history', name: '' },\r\n    // { id: 'geography', name: '' },\r\n    // { id: 'english', name: ' ' },\r\n    // { id: 'german', name: ' ' },\r\n    // { id: 'french', name: ' ' },\r\n    // { id: 'chinese', name: ' ' },\r\n    // { id: 'spanish', name: ' ' }\r\n    { id: 1, name: ' ' },\r\n    { id: 2, name: '' },\r\n    { id: 3, name: '' },\r\n    { id: 4, name: '' },\r\n    { id: 5, name: '' },\r\n    { id: 6, name: '' },\r\n    { id: 7, name: '' },\r\n    { id: 8, name: '' },\r\n    { id: 9, name: '' },\r\n    { id: 10, name: '' },\r\n    { id: 11, name: ' ' },\r\n    { id: 12, name: ' ' },\r\n    { id: 13, name: ' ' },\r\n    { id: 14, name: ' ' },\r\n    { id: 15, name: ' ' }\r\n];\r\n\r\nexport const TEACHERS = [\r\n    {\r\n        id: 154792439,\r\n        vk_info: {\r\n            id: 154792439,\r\n            first_name: \"Alexandra\",\r\n            last_name: \"Petrova\",\r\n            photo_max_orig: poster,\r\n        },\r\n        subjects: [\r\n            {\r\n                id: 1,\r\n                name: \"\",\r\n                description: \" \",\r\n                image_link: \"/files/asdsadasda.jpg\"\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        id: 1,\r\n        vk_info: {\r\n            id: 1,\r\n            first_name: '',\r\n            last_name: '',\r\n            photo_max_orig: poster,\r\n        },\r\n        subjects: SUBJECTS.slice(0,2),\r\n        contacts: {vk: '/', fb: '/', ok: '/', ig: '/'},\r\n        bio: lorem.generateSentences(1)\r\n    },\r\n    {\r\n        id: 2,\r\n        vk_info: {\r\n            id: 2,\r\n            first_name: '',\r\n            last_name: '',\r\n            photo_max_orig: poster,\r\n        },\r\n        subjects: [SUBJECTS[3]],\r\n        contacts: {vk: '/', fb: '/', ok: '/', ig: '/'},\r\n        bio: lorem.generateSentences(1)\r\n    }\r\n];\r\n\r\nexport const COURSES = SUBJECTS.slice(0, 5).map((subject, i) => ({\r\n    name: `${subject.name}.  . .`,\r\n    id: i,\r\n    subject_id: subject.id,\r\n    online: i <= 2,\r\n    image_link: poster,\r\n    date_start: getDate(7 + i),\r\n    date_end: getDate(7 + i),\r\n    // totalHours: 80,\r\n    description: lorem.generateParagraphs(1),\r\n    teacher_ids: i <= 2 ? [TEACHERS[0].id] : TEACHERS.map(({id}) => id)\r\n}));\r\n\r\nexport const LESSONS = _.times(4, (j) => {\r\n    const locked = -2 + j > 0;\r\n    return ({\r\n        num: j + 1,\r\n        id: j,\r\n        // date: getDate(-4 + i + j),\r\n        name: ` ${j + 1}`,\r\n        description: lorem.generateParagraphs(1),\r\n        image_link: poster,\r\n        video_link: '375255364',\r\n        locked,\r\n        assignment: {\r\n            description: lorem.generateParagraphs(1),\r\n            files: [\r\n                {name: \"\", url: \"/robots.txt\"},\r\n                {name: \" \", url: \"/robots.txt\"}\r\n            ],\r\n            deadline:  getDate(7)\r\n        },\r\n        watchProgress: locked ? undefined : (100 - j * 15),\r\n    });\r\n});\r\n\r\nexport const HOMEWORK = {\r\n    comment: \" \",\r\n    date: new Date(),\r\n    files: [\r\n        {\r\n            original_file_name: '.jpg',\r\n            id_file_name: '51657ffc-fc8f-11e9-a562-0338e4bfa1ca.jpg',\r\n            file_link: `${API_ROOT}/files/51657ffc-fc8f-11e9-a562-0338e4bfa1ca.jpg?disp=attachment`\r\n        }\r\n    ],\r\n    \"lesson_id\": 0,\r\n    \"mark\": 4,\r\n    \"pupil_id\": 0\r\n};\r\n\r\nexport const SHOP_CATALOG = COURSES.map((course, i) => ({...course, price: 2500, discount: i === 0 ? 1000 : undefined}));\r\n\r\nexport const MY_COURSES = COURSES.slice(0, 3).map((course, i) => ({\r\n    ...course,\r\n    status: i <= 1 ? LEARNING_STATUS.finished : LEARNING_STATUS.learning\r\n}));\r\n// export const MY_COURSES = COURSES.map((course, i) => ({\r\n//     ...course,\r\n//     lessons: LESSONS.map((lesson, j) => ({\r\n//         ...lesson,\r\n//         watchProgress: lesson.locked ? undefined : (100 - j * 15),\r\n//         homework: {\r\n//             files: [\r\n//                 {name: \"\", url: \"/robots.txt\"},\r\n//                 {name: \" \", url: \"/robots.txt\"}\r\n//             ],\r\n//             description: lorem.generateParagraphs(1),\r\n//             deadline: getDate(7),\r\n//             submit: true,\r\n//             submittedFiles: [\r\n//                 {\r\n//                     \"original_file_name\": \"5_64x64.png\",\r\n//                     \"id_file_name\": \"501371cc-f349-11e9-aa47-7990bff4dcd7.png\",\r\n//                     \"file_link\": \"/files/601371cc-f349-11e9-aa47-7990bff4dcd7.png\"\r\n//                 }\r\n//             ]\r\n//         }\r\n//     })),\r\n//     status: i <= 2 ? LEARNING_STATUS.finished : LEARNING_STATUS.learning\r\n// }));\r\n\r\nexport const TEST_ID = 1;\r\nexport const TEST_HASH = '2d01669a3c8cda169545b4f7b607efb3';\r\n","import React from 'react';\r\n\r\nexport function useTruncate(text) {\r\n    const descriptionRef = React.useRef(null);\r\n    const [isFontLoaded, setFontLoaded] = React.useState(document.readyState === \"complete\");\r\n    React.useEffect(() => {\r\n        if (!text)\r\n            return;\r\n        function handleResize() {\r\n            if (descriptionRef.current) {\r\n                descriptionRef.current.onResize();\r\n            }\r\n        }\r\n        window.addEventListener('resize', handleResize);\r\n        if (isFontLoaded)\r\n            return () => {\r\n                window.removeEventListener('resize', handleResize);\r\n            };\r\n        if (document.readyState === \"complete\") {\r\n            setFontLoaded(true);\r\n            return () => {\r\n                window.removeEventListener('resize', handleResize);\r\n            };\r\n        }\r\n        else {\r\n            function handleLoading() {\r\n                setFontLoaded(true);\r\n            }\r\n            window.addEventListener('load', handleLoading);\r\n            return () => {\r\n                window.removeEventListener('load', handleLoading);\r\n            };\r\n        }\r\n    }, [isFontLoaded, text]);\r\n    return [descriptionRef, isFontLoaded];\r\n}\r\n\r\nexport function useRefValue(initialValue) {\r\n    const ref = React.useRef(initialValue);\r\n    const getValue = React.useCallback(() => ref.current, []);\r\n    const setValue = React.useCallback((value) => {\r\n        ref.current = value;\r\n    }, []);\r\n    return [getValue, setValue];\r\n}\r\n\r\nexport function useIsMounted() {\r\n    const [getIsMounted, setIsMounted] = useRefValue(false);\r\n\r\n    React.useLayoutEffect(() => {\r\n        console.log('mounting');\r\n        setIsMounted(true);\r\n        return () => {\r\n            console.log('unmounting');\r\n            setIsMounted(false);\r\n        };\r\n    }, []);\r\n\r\n    return getIsMounted;\r\n}\r\n\r\nexport function useUpdateEffect(effect, dependencies = []) {\r\n    const isInitialMount = React.useRef(true);\r\n\r\n    React.useEffect(() => {\r\n        if (!isInitialMount.current) {\r\n            effect();\r\n        }\r\n    }, dependencies); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n    React.useEffect(() => {\r\n        isInitialMount.current = false;\r\n    }, []);\r\n}\r\n\r\nexport function useForceUpdate() {\r\n    const [, update] = React.useReducer(state => !state, true);\r\n    return update;\r\n}\r\n","import React from \"react\";\r\nimport Auth, {AuthEventTypes} from \"definitions/auth\";\r\nimport APIRequest, {getCancelToken} from \"api\";\r\nimport {SHOP_CATALOG, SUBJECTS, TEACHERS} from \"../data/test_data\";\r\nimport {useRefValue} from \"../hooks/common\";\r\n\r\nconst StoreContext = React.createContext(null);\r\n\r\nfunction useUserAuth() {\r\n    const [user, setUser] = React.useState(Auth.getUser());\r\n    const [userInfo, setUserInfo] = React.useState(null);\r\n\r\n    React.useEffect(() => {\r\n        const fetchUserInfo = async () => {\r\n            const userInfo = await Auth.getUserInfo();\r\n            setUserInfo(userInfo);\r\n        };\r\n        if (user)\r\n            fetchUserInfo();\r\n    }, [user]);\r\n\r\n    const loginCallback = React.useCallback((user, userInfo) => {\r\n        setUser(user);\r\n    }, []);\r\n\r\n    const logoutCallback = React.useCallback(() => {\r\n        setUser(null);\r\n        setUserInfo(null);\r\n    }, []);\r\n\r\n    React.useLayoutEffect(() => {\r\n        Auth.subscribe(AuthEventTypes.login, loginCallback);\r\n        Auth.subscribe(AuthEventTypes.logout, logoutCallback);\r\n        return () => {\r\n            Auth.unsubscribe(AuthEventTypes.login, loginCallback);\r\n            Auth.unsubscribe(AuthEventTypes.logout, logoutCallback);\r\n        }\r\n    }, [loginCallback, logoutCallback]);\r\n    return [user, userInfo];\r\n}\r\n\r\nconst useShopCatalogStore = () => React.useState(null);\r\nconst useUserCoursesStore = () => React.useState(null);\r\nconst useSubjectsStore = () => React.useState(null);\r\nconst useTeachersStore = () => React.useState(null);\r\nconst useLessonsStore = () => React.useState({});\r\n\r\nfunction useStoreData() {\r\n    const [catalog, setCatalog] = useShopCatalogStore();\r\n    const [userCourses, setUserCourses] = useUserCoursesStore();\r\n    const [subjects, setSubjects] = useSubjectsStore();\r\n    const [teachers, setTeachers] = useTeachersStore();\r\n    const [lessons, setLessons] = useLessonsStore();\r\n    return {\r\n        data: {\r\n            catalog,\r\n            subjects,\r\n            teachers,\r\n            lessons,\r\n            userCourses\r\n        },\r\n        setters: {\r\n            setCatalog,\r\n            setSubjects,\r\n            setTeachers,\r\n            setLessons,\r\n            setUserCourses\r\n        }\r\n    }\r\n}\r\n\r\nconst requests = {};\r\n\r\nexport function useSubjects() {\r\n    const {data: {subjects}, setters: {setSubjects}} = React.useContext(StoreContext);\r\n    const [error, setError] = React.useState(null);\r\n    const fetchSubjects = React.useCallback(async () => {\r\n        if (requests.subjects)\r\n            return requests.subjects;\r\n        const request = APIRequest.get('/subjects');\r\n        requests.subjects = request;\r\n        try {\r\n            if (error)\r\n                setError(null);\r\n            const subjects = await request;\r\n            setSubjects(subjects);\r\n        } catch (e) {\r\n            console.error(e);\r\n            setError(e);\r\n        }\r\n        finally {\r\n            delete requests.subjects;\r\n        }\r\n        return request;\r\n    }, [error]);\r\n\r\n    React.useEffect(() => {\r\n        if (!(subjects || requests.subjects || error)) {\r\n            fetchSubjects();\r\n        }\r\n    }, [subjects, error]);\r\n    if (error) {\r\n        return {subjects, error, retry: fetchSubjects};\r\n    }\r\n    else {\r\n        return {subjects};\r\n    }\r\n}\r\n\r\nexport function useDiscount(selectedCourses) {\r\n    const [discount, setDiscount] = React.useState(null);\r\n    const [error, setError] = React.useState(null);\r\n    const [getCancel, setCancel] = useRefValue(null);\r\n    const fetchDiscount = React.useCallback(async () => {\r\n        const courses = selectedCourses instanceof Set ? [...selectedCourses].map(({id}) => id) : [selectedCourses];\r\n        if (courses.length === 0)\r\n            return ;\r\n        const cancelPrev = getCancel();\r\n        if (cancelPrev)\r\n            cancelPrev();\r\n        const {token: cancelToken, cancel} = getCancelToken();\r\n        setCancel(cancel);\r\n        try {\r\n            if (error)\r\n                setError(null);\r\n            setDiscount(null);\r\n            const discount = await APIRequest.get('/payments/discounts', {\r\n                params: {\r\n                    coursesIds: courses\r\n                },\r\n                cancelToken\r\n            });\r\n            setDiscount(discount);\r\n        } catch (e) {\r\n            console.log('error loading discount', e);\r\n            setError(e);\r\n        }\r\n    }, [selectedCourses, error]);\r\n\r\n    React.useEffect(() => {\r\n        if (!(error))\r\n            fetchDiscount();\r\n    }, [selectedCourses, error]);\r\n    if (error) {\r\n        return {discount, error, retry: fetchDiscount};\r\n    }\r\n    else {\r\n        return {discount};\r\n    }\r\n}\r\n\r\nexport function useTeachers() {\r\n    const {subjects, errorLoadingSubjects, reloadSubjects} = useSubjects();\r\n    const {data: {teachers}, setters: {setTeachers}} = React.useContext(StoreContext);\r\n    const [error, setError] = React.useState(null);\r\n    const fetchTeachers = React.useCallback(async () => {\r\n        if (requests.teachers)\r\n            return requests.teachers;\r\n        const request = APIRequest.get('/accounts/teachers');\r\n        requests.teachers = request;\r\n        try {\r\n            if (error)\r\n                setError(null);\r\n            const teachers = await request;\r\n            console.log('set teachers', teachers);\r\n            setTeachers(teachers);\r\n        } catch (e) {\r\n            console.error(e);\r\n            setError(e);\r\n        }\r\n        finally {\r\n            delete requests.teachers;\r\n        }\r\n        return request;\r\n    }, [error]);\r\n\r\n    React.useEffect(() => {\r\n        if (!(teachers || requests.teachers || error)) {\r\n            fetchTeachers();\r\n        }\r\n    }, [teachers, error]);\r\n\r\n    if (error || errorLoadingSubjects) {\r\n        return {\r\n            teachers,\r\n            subjects,\r\n            error: error || errorLoadingSubjects ,\r\n            retry: () => {\r\n                if (error)\r\n                    fetchTeachers();\r\n                if (errorLoadingSubjects)\r\n                    reloadSubjects();\r\n            }\r\n        };\r\n    }\r\n    else {\r\n        return {teachers, subjects};\r\n    }\r\n}\r\n\r\nexport function useShopCatalog() {\r\n    const {subjects, errorLoadingSubjects, reloadSubjects} = useSubjects();\r\n    const {data: {catalog}, setters: {setCatalog}} = React.useContext(StoreContext);\r\n    const [error, setError] = React.useState(null);\r\n    const fetchCatalog = React.useCallback(async () => {\r\n        if (requests.shopCatalog)\r\n            return requests.shopCatalog;\r\n        const request = APIRequest.get('/courses', {\r\n            params: {\r\n                group: 'MARKET'\r\n            }\r\n        });\r\n        requests.shopCatalog = request;\r\n        try {\r\n            if (error)\r\n                setError(null);\r\n            const catalog = await request;\r\n            setCatalog(catalog);\r\n        } catch (e) {\r\n            console.error(e);\r\n            setError(e);\r\n        }\r\n        finally {\r\n            delete requests.shopCatalog;\r\n        }\r\n        return request;\r\n    }, [error]);\r\n\r\n    React.useEffect(() => {\r\n        if (!(catalog || requests.shopCatalog || error)) {\r\n            fetchCatalog();\r\n        }\r\n    }, [catalog, error]);\r\n\r\n    if (error || errorLoadingSubjects) {\r\n        return {\r\n            catalog,\r\n            subjects,\r\n            error: error || errorLoadingSubjects ,\r\n            retry: () => {\r\n                if (error)\r\n                    fetchCatalog();\r\n                if (errorLoadingSubjects)\r\n                    reloadSubjects();\r\n            }\r\n        };\r\n    }\r\n    else {\r\n        return {catalog, subjects};\r\n    }\r\n}\r\n\r\nexport function useUserCourses() {\r\n    const {subjects, errorLoadingSubjects, reloadSubjects} = useSubjects();\r\n    const {data: {userCourses}, setters: {setUserCourses}} = React.useContext(StoreContext);\r\n    const [error, setError] = React.useState(null);\r\n    const fetchUserCourses = React.useCallback(async () => {\r\n        if (requests.userCourses)\r\n            return requests.userCourses;\r\n        const request = APIRequest.get('/courses', {\r\n            params: {\r\n                group: 'PERSON'\r\n            }\r\n        });\r\n        requests.userCourses = request;\r\n        try {\r\n            if (error)\r\n                setError(null);\r\n            const courses = await request;\r\n            setUserCourses(courses);\r\n        } catch (e) {\r\n            console.error(e);\r\n            setError(e);\r\n        }\r\n        finally {\r\n            delete requests.userCourses;\r\n        }\r\n        return request;\r\n    }, [error]);\r\n\r\n    React.useEffect(() => {\r\n        if (!(userCourses || requests.userCourses || error)) {\r\n            fetchUserCourses();\r\n        }\r\n    }, [userCourses, error]);\r\n\r\n    if (error || errorLoadingSubjects) {\r\n        return {\r\n            courses: userCourses,\r\n            subjects,\r\n            error: error || errorLoadingSubjects ,\r\n            retry: () => {\r\n                if (error)\r\n                    fetchUserCourses();\r\n                if (errorLoadingSubjects)\r\n                    reloadSubjects();\r\n            }\r\n        };\r\n    }\r\n    else {\r\n        return {courses: userCourses, subjects};\r\n    }\r\n}\r\n\r\nexport function useLessons(courseId) {\r\n    const {data: {lessons}, setters: {setLessons}} = React.useContext(StoreContext);\r\n    const [error, setError] = React.useState(null);\r\n    const fetchLessons = React.useCallback(async (courseId) => {\r\n        if (requests.lessons && requests.lessons[courseId])\r\n            return requests.lessons[courseId];\r\n        const request = APIRequest.get('/lessons', {params: {\r\n                courseId\r\n            }});\r\n        (requests.lessons || (requests.lessons = {}))[courseId] = request;\r\n        try {\r\n            if (error)\r\n                setError(null);\r\n            const lessons = await request;\r\n            console.log('set lessons', lessons);\r\n            setLessons(loadedLessons => ({...loadedLessons, [courseId]: lessons}));\r\n        } catch (e) {\r\n            console.error(e);\r\n            setError(e);\r\n        }\r\n        finally {\r\n            delete requests.lessons[courseId];\r\n        }\r\n        return request;\r\n    }, [error]);\r\n\r\n    React.useEffect(() => {\r\n        if (!(lessons[courseId] || (requests.lessons && requests.lessons[courseId]) || error)) {\r\n            fetchLessons(courseId);\r\n        }\r\n    }, [lessons, courseId, error]);\r\n\r\n    if (error) {\r\n        return {\r\n            lessons: lessons[courseId],\r\n            error: error,\r\n            retry: () => {\r\n                if (error)\r\n                    fetchLessons(courseId);\r\n            }\r\n        };\r\n    }\r\n    else {\r\n        return {lessons: lessons[courseId]};\r\n    }\r\n}\r\n\r\nexport function useHomework(lessonId) {\r\n    const [homework, setHomework] = React.useState(null);\r\n    const [error, setError] = React.useState(null);\r\n    const fetchHomework = React.useCallback(async (lessonId) => {\r\n        if (requests.homework && requests.homework[lessonId])\r\n            return requests.homework[lessonId];\r\n        const request = APIRequest.get(`/lessons/${lessonId}/homeworks/pupil`);\r\n        (requests.homework || (requests.homework = {}))[lessonId] = request;\r\n        try {\r\n            if (error)\r\n                setError(null);\r\n            const homework = await request;\r\n            console.log('set homework', homework);\r\n            setHomework(homework);\r\n        } catch (e) {\r\n            console.error(e);\r\n            setError(e);\r\n        }\r\n        finally {\r\n            delete requests.homework[lessonId];\r\n        }\r\n        return request;\r\n    }, [error]);\r\n\r\n    React.useEffect(() => {\r\n        if (!(homework || (requests.homework && requests.homework[lessonId]) || error)) {\r\n            fetchHomework(lessonId);\r\n        }\r\n    }, [homework, lessonId, error]);\r\n\r\n    if (error) {\r\n        return {\r\n            homework,\r\n            error: error,\r\n            retry: () => {\r\n                if (error)\r\n                    fetchHomework(lessonId);\r\n            }\r\n        };\r\n    }\r\n    else {\r\n        return {homework};\r\n    }\r\n}\r\n\r\nconst GlobalStore = ({children}) => {\r\n    const [user, userInfo] = useUserAuth();\r\n    const data = useStoreData();\r\n    return (\r\n        <StoreContext.Provider value={{user, userInfo, ...data}}>\r\n            {children}\r\n        </StoreContext.Provider>\r\n    )\r\n};\r\n\r\nexport default GlobalStore;\r\n\r\nexport function useUser() {\r\n   const {user, userInfo} = React.useContext(StoreContext);\r\n   return {user, userInfo};\r\n}\r\n","import React from 'react';\r\nimport {Helmet} from \"react-helmet\";\r\nimport Sticky from 'react-sticky-el';\r\nimport {Link, Redirect} from \"react-router-dom\";\r\nimport {useUser} from \"../store\";\r\n\r\nexport const PageLoadingPlaceholder = () => (\r\n    <div className=\"layout__content\">\r\n        <div className=\"layout__loading-spinner\">\r\n            <i className=\"spinner-border\"/>\r\n        </div>\r\n    </div>\r\n);\r\n\r\nexport const PageLink = ({to, arrow=true, forward=true, className, children, ...props}) => (\r\n    <Link\r\n        className={`${arrow ? 'arrow-link' : ''} ${forward ? 'arrow-link-forward' : 'arrow-link-backward'} ${className || ''}`}\r\n        to={to}\r\n        {...props}>\r\n        {children}\r\n    </Link>\r\n);\r\n\r\nexport const PageContent = ({children, className, parentSection}) => (\r\n    <div className={`layout__content-container container ${className || ''}`}>\r\n        {parentSection && (\r\n            <PageLink\r\n                to={parentSection.url || '..'}\r\n                forward={false}\r\n                className=\"layout__content-parent-section-link\">\r\n                {parentSection.name}\r\n            </PageLink>\r\n        )}\r\n        {children}\r\n    </div>\r\n);\r\n\r\nexport const BottomTab = ({children, className, ...stickyProps}) => (\r\n    <Sticky mode=\"bottom\" {...stickyProps}>\r\n        <div className={`layout__bottom-tab ${className || ''}`}>\r\n            {children}\r\n        </div>\r\n    </Sticky>\r\n);\r\n\r\nclass PageErrorBoundary extends React.Component {\r\n    state = {\r\n        error: null\r\n    }\r\n}\r\n\r\nconst Page = ({title, className, children, checkLogin=true, location}) => {\r\n    //TODO: check permissions\r\n    const {user, userInfo} = useUser();\r\n    if (checkLogin) {\r\n        if (!user) {\r\n            return (\r\n                <Redirect to={{\r\n                    pathname: '/login/',\r\n                    state: location ? { referrer: location.pathname } : undefined\r\n                }}/>);\r\n        }\r\n    }\r\n    return (\r\n        <div className={`layout__content ${className || ''}`}>\r\n            {title && <Helmet><title>{title}   HACK</title></Helmet>}\r\n            {children}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Page;\r\n","import React from \"react\";\r\nimport Page from \"components/Page\";\r\nimport Auth from \"definitions/auth\";\r\nimport {useUser} from \"../../../store\";\r\nimport {Redirect, useLocation} from \"react-router-dom\";\r\nimport {DEFAULT_LOGIN_REDIRECT} from \"definitions/constants\";\r\n\r\nconst LoginPage = (props) => {\r\n    const {location} = props;\r\n    const {user, userInfo} = useUser();\r\n\r\n    React.useLayoutEffect(() => {\r\n        Auth.loginWidget('vk-auth');\r\n    }, []);\r\n\r\n    if (user) {\r\n        if (location.state && location.state.referrer)\r\n            return (<Redirect to={location.state.referrer}/>);\r\n        return (<Redirect to={DEFAULT_LOGIN_REDIRECT}/>);\r\n    }\r\n    return (\r\n        <Page\r\n            title=\"\"\r\n            className=\"login-page align-items-center justify-content-center\"\r\n            checkLogin={false}\r\n            location={location}>\r\n            <div id=\"vk-auth\"/>\r\n        </Page>\r\n    );\r\n};\r\n\r\nexport default LoginPage;\r\n","import React from \"react\";\r\nimport CoverImage from \"./CoverImage\";\r\nimport Contacts from \"./Contacts\";\r\n\r\nconst UserProfile = ({first_name, last_name, photo, contacts, about, role}) => {\r\n    const fullName = `${first_name} ${last_name}`;\r\n    return (\r\n        <React.Fragment>\r\n            <div className=\"user-profile__avatar-container\">\r\n                <div className=\"user-profile__avatar-wrap\">\r\n                    <CoverImage src={photo} className=\"user-profile__avatar\" round square/>\r\n                </div>\r\n            </div>\r\n            <div className=\"user-profile__info layout__content-block\">\r\n                <div className=\"d-flex flex-column align-items-center\">\r\n                    <h2>{fullName}</h2>\r\n                    {role && <div className=\"font-size-sm\">{role}</div>}\r\n                    {contacts && <Contacts contacts={contacts}/>}\r\n                    <div className=\"description-text font-size-sm\">{about}</div>\r\n                </div>\r\n            </div>\r\n        </React.Fragment>\r\n    )\r\n};\r\n\r\nexport default UserProfile;\r\n","import React from \"react\";\r\nimport Page, {PageContent} from \"components/Page\";\r\nimport UserProfile from \"components/common/UserProfile\";\r\nimport {useUser} from \"store\";\r\n\r\nconst AccountPage = () => {\r\n    const {user, userInfo} = useUser();\r\n    return (\r\n        <Page title=\"\" className=\"account-page\">\r\n            <PageContent>\r\n                <UserProfile {...user}/>\r\n            </PageContent>\r\n        </Page>\r\n    );\r\n};\r\n\r\nexport default AccountPage;\r\n","import React from 'react';\r\nimport Truncate from 'react-truncate';\r\nimport {useTruncate} from \"../../hooks/common\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\nexport default function ListItem(props) {\r\n    const {\r\n        preview, title, subtitle, description, item, selectable,\r\n        className,\r\n        children: action,\r\n        link,\r\n        onClick: clickCallback,\r\n        onActionClick: actionCallback,\r\n        callbackProps} = props;\r\n    const [descriptionRef, isFontLoaded] = useTruncate(description);\r\n    const onClick = React.useCallback((event) => {\r\n        const clicked = selectable && !(actionCallback && event.target.closest('.list__item-action'));\r\n        if (clicked && clickCallback)\r\n            clickCallback(item, callbackProps);\r\n        else if (!clicked && link)\r\n            event.preventDefault();\r\n    }, [item, clickCallback, selectable, callbackProps, link, actionCallback]);\r\n    const onActionClick = React.useCallback((event) => {\r\n        if (selectable && actionCallback)\r\n            actionCallback(item, callbackProps);\r\n    }, [item, actionCallback, selectable, callbackProps]);\r\n    const content = (\r\n        <div className=\"row align-items-center\">\r\n            <div className=\"list__item-preview col-12 col-md-auto\">\r\n                {preview}\r\n            </div>\r\n            <div className=\"list__item-description col align-self-stretch\">\r\n                <div className=\"list__item-description-inner\">\r\n                    <div className=\"title font-size-lg\">{title}</div>\r\n                    {subtitle && <div className=\"subtitle\">{subtitle}</div>}\r\n                    {description && (\r\n                        <div className=\"description-container font-size-xs\">\r\n                            <div className=\"description-text\">\r\n                                {isFontLoaded ? (\r\n                                    <Truncate lines={2} ref={descriptionRef}>\r\n                                        {description}\r\n                                    </Truncate>\r\n                                ) : null}\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n            {action && (\r\n                <div\r\n                    className=\"list__item-action col-auto d-flex align-items-center flex-column\"\r\n                    onClick={onActionClick}>\r\n                    {action}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n    if (link) {\r\n        return (\r\n            <Link\r\n                className={`list__item container ${selectable ? 'list__item-selectable' : ''} ${className || ''}`}\r\n                to={link}\r\n                onClick={onClick}>\r\n                {content}\r\n            </Link>\r\n        );\r\n    }\r\n    else {\r\n        return (\r\n            <div className={`list__item container ${selectable ? 'list__item-selectable' : ''} ${className || ''}`} onClick={onClick}>\r\n                {content}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React from 'react';\r\nimport ListItem from \"./ListItem\";\r\n\r\nexport default function List(props) {\r\n    const {children, renderItem, renderProps, flex, className} = props;\r\n    return flex\r\n        ? (\r\n            <div className={`${className || ''} list`}>\r\n                <div className=\"container p-0 overflow-hidden\">\r\n                    <div className=\"row\">\r\n                        {children.map((item, index) => renderItem(item, renderProps, index))}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n        : (\r\n        <div className={`${className || ''} list`}>\r\n            {children.map((item, index) => renderItem(item, renderProps, index))}\r\n        </div>\r\n    );\r\n}\r\n\r\nList.defaultProps = {\r\n    renderItem: (item, props, index) => <ListItem {...item} {...props} key={index}/>\r\n};\r\n","import React from 'react';\r\nimport {Scrollbars as ScrollComponent} from 'react-custom-scrollbars';\r\n\r\nconst renderTrackVertical = props => (<div {...props} className=\"track track-vertical\"/>);\r\nconst renderThumbVertical = props => (<div {...props} className=\"thumb thumb-vertical\"/>);\r\nconst renderTrackHorizontal = props => (<div {...props} className=\"track track-horizontal\"/>);\r\nconst renderThumbHorizontal = props => (<div {...props} className=\"thumb thumb-horizontal\"/>);\r\n\r\nconst ScrollBars = React.forwardRef(({children, ...props}, ref) => {\r\n    return (\r\n        <ScrollComponent\r\n            renderTrackVertical={renderTrackVertical}\r\n            renderThumbVertical={renderThumbVertical}\r\n            renderTrackHorizontal={renderTrackHorizontal}\r\n            renderThumbHorizontal={renderThumbHorizontal}\r\n            ref={ref}\r\n            {...props}>\r\n            {children}\r\n        </ScrollComponent>\r\n    );\r\n});\r\n\r\nexport default ScrollBars;\r\n","import React, {Component} from 'react';\r\nimport SelectInput, { components } from 'react-select';\r\nimport _ from 'lodash';\r\nimport PropTypes from 'prop-types';\r\nimport ScrollBars from \"./ScrollBars\";\r\n\r\nconst DropdownIndicator = (props) => (\r\n    <components.DropdownIndicator {...props}>\r\n        <i className=\"icon-angle\"/>\r\n    </components.DropdownIndicator>\r\n);\r\n\r\nconst SelectContainer = ({ children, selectProps, hasValue, setValue, ...props }) => (\r\n    <div className=\"select\">\r\n        <components.SelectContainer\r\n            selectProps={{...selectProps, isClearable: false}}\r\n            hasValue={hasValue}\r\n            setValue={setValue}\r\n            {...props}>\r\n            {children}\r\n        </components.SelectContainer>\r\n        {selectProps.isClearable && (\r\n            <div className={hasValue ? 'select__clear-btn' : 'select__clear-btn select__clear-btn-hidden'} onClick={() => {setValue(null);}}>\r\n                <i className=\"icon-close\"/>\r\n            </div>\r\n        )}\r\n    </div>\r\n);\r\n\r\n\r\nexport const Option = ({content, ...props}) => (\r\n    <components.Option {...props}>\r\n        {content ? content : props.label}\r\n    </components.Option>\r\n);\r\n\r\nOption.propTypes = {\r\n    content: PropTypes.node,\r\n    label: PropTypes.node\r\n};\r\n\r\nclass MenuList extends Component {\r\n    componentDidMount() {\r\n        //needed to the select to scroll the list to the selected option\r\n        this.props.innerRef(this.scrollBar.view);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <ScrollBars\r\n                autoHeight\r\n                hideTracksWhenNotNeeded\r\n                ref={ref => { this.scrollBar = ref; }}\r\n                autoHeightMax={this.props.maxHeight}>\r\n                <components.MenuList {...this.props}>\r\n                    {this.props.children}\r\n                </components.MenuList>\r\n            </ScrollBars>\r\n        );\r\n    }\r\n\r\n    static propTypes = {\r\n        maxHeight: PropTypes.number.isRequired,\r\n        children: PropTypes.node.isRequired,\r\n        innerRef: PropTypes.func.isRequired\r\n    }\r\n}\r\n\r\n//TODO: try react virtualized select\r\nexport default class Select extends React.PureComponent {\r\n    onChange = (option) => {\r\n        this.props.callback(option ? option.value : null, this.props.name);\r\n    };\r\n\r\n    render() {\r\n        const {name, options, value, components, selectProps, isClearable=true, isSearchable=true, placeholder} = this.props;\r\n        return (\r\n            <SelectInput\r\n                name={name}\r\n                options={options}\r\n                maxMenuHeight={200}\r\n                value={_.find(options, {value: value}) || null}\r\n                className='select__container' classNamePrefix='select'\r\n                onChange={this.onChange}\r\n                menuPlacement=\"auto\"\r\n                noOptionsMessage={() => ' '}\r\n                components={\r\n                    components ? ({\r\n                        Option,\r\n                        MenuList,\r\n                        DropdownIndicator,\r\n                        SelectContainer,\r\n                        ...components\r\n                    }) : ({\r\n                        Option,\r\n                        MenuList,\r\n                        DropdownIndicator,\r\n                        SelectContainer,\r\n                    })\r\n                }\r\n                styles={{\r\n                    //removes default styles from option elements\r\n                    option: () => ({})\r\n                }}\r\n                isClearable={isClearable}\r\n                isSearchable={isSearchable}\r\n                placeholder={placeholder}\r\n                {...selectProps}\r\n            />\r\n        );\r\n    }\r\n\r\n    static propTypes = {\r\n        name: PropTypes.string.isRequired,\r\n        options: PropTypes.arrayOf(PropTypes.shape({\r\n            value: PropTypes.any,\r\n            label: PropTypes.any\r\n        })).isRequired,\r\n        callback: PropTypes.func.isRequired,\r\n        value: PropTypes.any,\r\n        selectProps: PropTypes.object,\r\n        components: PropTypes.object\r\n    }\r\n}\r\n","import React from 'react';\r\nimport Select from \"./Select\";\r\n\r\nfunction useChangeHandler(callback, inputProp = 'value') {\r\n    return React.useCallback((event) => {\r\n        callback(event.currentTarget[inputProp], event.currentTarget.name, event);\r\n    }, [callback, inputProp])\r\n}\r\n\r\nconst CheckBox = ({value, onChange: callback, name, label, ...props}) => {\r\n    const onChange = useChangeHandler(callback, 'checked');\r\n    return (\r\n        <label className={`input input-checkbox`}>\r\n            <input type=\"checkbox\" name={name} checked={value} onChange={onChange} {...props}/>\r\n            <span className=\"input__box\"/>\r\n            <span className=\"input__label\">{label}</span>\r\n        </label>\r\n    );\r\n};\r\n\r\nconst Input = ({className, onChange: callback, ...props}) => {\r\n    const onChange = useChangeHandler(callback);\r\n    return (\r\n        <input className={`input ${className || ''}`} onChange={onChange} {...props}/>\r\n    );\r\n};\r\n\r\nObject.assign(Input, {\r\n    CheckBox,\r\n    Select\r\n});\r\n\r\nexport default Input;\r\n\r\n","import React from 'react';\r\nimport {useHistory, useLocation} from 'react-router-dom';\r\nimport List from \"./List\";\r\nimport Input from \"../ui/Input\";\r\nimport Page from \"../Page\";\r\n\r\nexport const CatalogContext = React.createContext({});\r\n\r\nconst Filter = ({filterBy: {subject:filterBySubject = true, online:filterByOnline = true}={}}) => {\r\n    const {options, subject, online, onChange} = React.useContext(CatalogContext);\r\n    return (\r\n        <div className=\"layout__content-block catalog__filters\">\r\n            <div className=\"container p-0\">\r\n                <div className=\"row\">\r\n                    {filterBySubject && (\r\n                        <div className=\"col-auto d-flex align-items-center\">\r\n                            <Input.Select\r\n                                name=\"subject\"\r\n                                options={options}\r\n                                value={subject}\r\n                                placeholder=''\r\n                                callback={onChange}/>\r\n                        </div>\r\n                    )}\r\n                    {filterByOnline && (\r\n                        <div className=\"col-auto d-flex align-items-center\">\r\n                            <Input.CheckBox\r\n                                name=\"online\"\r\n                                value={online}\r\n                                label=\"\"\r\n                                onChange={onChange}/>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst Catalog = ({renderFunc, placeholder, baseUrl, ...listProps}) => {\r\n    const {items, renderProps} = React.useContext(CatalogContext);\r\n    const renderItem = React.useCallback((item) => {\r\n        return renderFunc(item, {link: `${item.id}/`, ...renderProps});\r\n    }, [renderFunc, renderProps]);\r\n    return (\r\n        <div className=\"layout__content-block catalog__catalog\">\r\n            {items.length > 0 ? (\r\n                <List {...listProps}\r\n                    renderItem={renderItem}>\r\n                    {items}\r\n                </List>\r\n            ) : (\r\n                <div className=\"catalog__empty-catalog-fallback-message text-center font-size-sm\">\r\n                    {placeholder}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst Body = (props) => {\r\n    const {options, filterItems, children, renderProps={}} = props;\r\n    const history = useHistory();\r\n    const location = useLocation();\r\n    const params = new URLSearchParams(location.search);\r\n    const subject = parseInt(params.get('subject')) || null;\r\n    const online = params.get('online') === 'true';\r\n    const onFilterChange = React.useCallback((value, name) => {\r\n        const params = new URLSearchParams(location.search);\r\n        if (value)\r\n            params.set(name, value);\r\n        else\r\n            params.delete(name);\r\n        // setSubject(option);\r\n        history.push({\r\n            pathname: location.pathname,\r\n            search: `?${params}`\r\n        });\r\n    }, [location, history]);\r\n    const matchingItems = filterItems(subject, online);\r\n\r\n    return (\r\n        <CatalogContext.Provider\r\n            value={{\r\n                options, subject, online, onChange: onFilterChange, items: matchingItems, renderProps\r\n            }}>\r\n            <div className=\"catalog\">\r\n                {children}\r\n            </div>\r\n        </CatalogContext.Provider>\r\n    );\r\n};\r\n//\r\n// const CatalogPage = ({title, className, BodyComponent = Body, ...props}) => {\r\n//     return (\r\n//         <Page title={title} className={className}>\r\n//             <BodyComponent {...props}/>\r\n//         </Page>\r\n//     )\r\n// };\r\n\r\nexport default {\r\n    Filter,\r\n    Catalog,\r\n    Body,\r\n    // Page: CatalogPage\r\n};\r\n","import React from 'react';\r\nimport _ from 'lodash';\r\nimport {Link} from \"react-router-dom\";\r\nimport CoverImage from \"./CoverImage\";\r\nimport Contacts from \"./Contacts\";\r\n\r\nexport default function Teacher(props) {\r\n    const {\r\n        teacher: {\r\n        vk_info: {first_name, last_name, photo_max_orig: photo}, contacts, subjects: teacherSubjects, bio: about\r\n        },\r\n        subjects,\r\n        link,\r\n        bio=false,\r\n        className} = props;\r\n    const onClick = React.useCallback((event) => {\r\n        const clicked = !event.target.closest('.social-media');\r\n        // event.preventDefault();\r\n    }, []);\r\n    // const teacherSubjects = subject_ids.map(id => _.find(subjects, {id}));\r\n    return (\r\n        <Link to={link} className={`${className} teacher-profile`} onClick={onClick}>\r\n            <div className=\"container p-0\">\r\n                <div className=\"row flex-nowrap\">\r\n                    <div className=\"col-auto d-flex align-items-center\">\r\n                        <CoverImage src={photo} className=\"teacher-profile__photo\" round square/>\r\n                    </div>\r\n                    <div className=\"col d-flex flex-column justify-content-center\">\r\n                        <h3 className=\"teacher-profile__name\">{first_name} {last_name}</h3>\r\n                        {bio && (\r\n                            <div className=\"teacher-profile__subjects font-size-sm\">\r\n                                {teacherSubjects.map(({name}, i) => i === 0 ? name : name.toLowerCase()).join(', ')}\r\n                            </div>)}\r\n                        {contacts && (<Contacts contacts={contacts}/>)}\r\n                    </div>\r\n                </div>\r\n                {bio && (\r\n                    <div className=\"row\">\r\n                        <div className=\"col-12 description-text\">\r\n                            {about}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </Link>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport _  from 'lodash';\r\nimport Catalog from \"components/common/Catalog\";\r\nimport Teacher from \"../../../common/Teacher\";\r\n\r\nconst Filter = (props) => (<Catalog.Filter filterBy={{online: false}} {...props}/>);\r\n\r\nconst TeachersCatalog = (props) => {\r\n    const renderTeacher = React.useCallback((teacher, {link, subjects}) => (\r\n        <div className=\"list__item col-12 col-md-6 d-flex\" key={teacher.id}>\r\n            <Teacher\r\n                teacher={teacher}\r\n                subjects={subjects}\r\n                bio\r\n                link={link}/>\r\n        </div>\r\n    ), []);\r\n    return (\r\n        <Catalog.Catalog\r\n            placeholder=\" ,   \"\r\n            flex\r\n            renderFunc={renderTeacher}\r\n            {...props}/>\r\n    );\r\n};\r\n\r\nconst Body = (props) => {\r\n    const {teachers, subjects, ...otherProps} = props;\r\n\r\n    const options = React.useMemo(() => {\r\n        const subjectsMap = _.zipObject(subjects.map(({id}) => id), subjects);\r\n        const subjectsTeachers = _.reduce(teachers, (result, teacher) => {\r\n            teacher.subjects.forEach(subject => {result[subject.id] = subject});\r\n            return result;\r\n        }, {});\r\n        return _.values(subjectsTeachers).map(({id, name}) => ({value: id, label: name}));\r\n    }, [teachers, subjects]);\r\n\r\n    const getMatchingCourses = React.useCallback((subject) => teachers.filter((teacher) =>\r\n        (subject ? teacher.subjects.some(({id}) => subject === id)  : true)), [teachers]);\r\n\r\n    return (\r\n        <Catalog.Body\r\n            options={options}\r\n            renderProps={{subjects}}\r\n            filterItems={getMatchingCourses}\r\n            {...otherProps}/>\r\n    )\r\n};\r\n\r\n// const Page = (props) => (<Catalog.Page BodyComponent={Body} {...props}/>);\r\n\r\nexport default {\r\n    ...Catalog,\r\n    Filter,\r\n    Catalog: TeachersCatalog,\r\n    Body,\r\n    // Page\r\n}\r\n","import React from \"react\";\r\nimport Page, {PageContent, PageLoadingPlaceholder} from \"components/Page\";\r\nimport TeachersCatalog from \"./TeachersCatalog\";\r\nimport {useTeachers} from \"store\";\r\n\r\nconst TeachersCatalogPage = ({location}) => {\r\n    const {teachers, subjects, error, retry} = useTeachers();\r\n    return (\r\n        <Page\r\n            title=\" \"\r\n            className=\"catalog teachers-catalog\"\r\n            location={location}>\r\n            {!(teachers && subjects) ? (\r\n                    <PageLoadingPlaceholder/>\r\n                ) : (\r\n                <TeachersCatalog.Body\r\n                    subjects={subjects}\r\n                    teachers={teachers}>\r\n                    <PageContent>\r\n                        <TeachersCatalog.Filter/>\r\n                        <TeachersCatalog.Catalog/>\r\n                    </PageContent>\r\n                </TeachersCatalog.Body>\r\n            )\r\n            }\r\n        </Page>\r\n    );\r\n};\r\n\r\nexport default TeachersCatalogPage;\r\n","import React from \"react\";\r\n\r\nconst Button = ({className, children, active = true, neutral=false, icon, iconAction, tag:Tag='div', onClick, ...props}) => {\r\n    // const clickCallback = React.useCallback((e) => {\r\n    //     console.log(e.target, e.currentTarget, e.target === e.currentTarget);\r\n    //     if (e.target === e.currentTarget)\r\n    //         onClick(e);\r\n    // }, [onClick]);\r\n    return (\r\n        <Tag\r\n            className={`btn ${active ? '' : 'btn-inactive'} ${neutral ? 'btn-neutral' : ''} ${className ? className : ''}`}\r\n            {...props}>\r\n        <span className=\"btn__content\">\r\n            {icon && <div className=\"btn__after\" onClick={iconAction ? iconAction : onClick}>{icon}</div>}\r\n            <span\r\n                className=\"btn__name\"\r\n                onClick={onClick}>\r\n                {children}\r\n            </span>\r\n        </span>\r\n        </Tag>\r\n    );\r\n};\r\n\r\nexport default Button;\r\n","import React from \"react\";\r\nimport Page from \"./Page\";\r\nimport {Link} from \"react-router-dom\";\r\nimport Button from \"./ui/Button\";\r\n\r\nconst ErrorPage = ({errorCode, message, link: {text, url} = {}}) => {\r\n    const code = errorCode && errorCode.toString();\r\n    return (\r\n        <Page title={code} className=\"error-page\">\r\n            <div className=\"error-page__error-code\">\r\n                {code && code.split('').map((number, i) => <span key={i}>{number}</span>)}\r\n            </div>\r\n            <div className=\"error-page__error-message\">{message || ',  '}</div>\r\n            <Button tag={Link} to={`${url || ''}/`} replace className=\"btn\">{text || ' '}</Button>\r\n        </Page>\r\n    );\r\n};\r\n\r\nexport default ErrorPage;\r\n","import React from 'react';\r\nimport Catalog from \"./Catalog\";\r\nimport _ from \"lodash\";\r\n\r\nconst CourseCatalog = ({renderCourse, ...otherProps}) => (\r\n    <Catalog.Catalog\r\n        placeholder=\" ,   \"\r\n        renderFunc={renderCourse}\r\n        {...otherProps}/>\r\n);\r\n\r\nconst Body = (props) => {\r\n    const {courses, subjects, ...otherProps} = props;\r\n\r\n    const options = React.useMemo(() =>\r\n            subjects.map(({id, name}) => ({value: id, label: name})),\r\n        [subjects]);\r\n\r\n    const getMatchingCourses = React.useCallback((subject, online) => courses.filter((course) =>\r\n        (subject ? course.subject_id === subject : true) && (online ? course.online === online : true)), [courses]);\r\n\r\n    return (\r\n        <Catalog.Body\r\n            options={options}\r\n            filterItems={getMatchingCourses}\r\n            {...otherProps}/>\r\n    )\r\n};\r\n\r\n// const CourseCatalogPage = (props) => (<Catalog.Page BodyComponent={Body} {...props}/>);\r\n\r\nexport default {\r\n    ...Catalog,\r\n    Catalog: CourseCatalog,\r\n    Body,\r\n    // Page: CourseCatalogPage\r\n}\r\n","import React from 'react';\r\nimport {daysBetween} from \"../../definitions/helpers\";\r\nimport ListItem from \"./ListItem\";\r\nimport CoverImage from \"./CoverImage\";\r\n\r\nexport default function Course({course, online=true, isSelected=false, ...props}) {\r\n    const {name, image_link, date_start, description} = course;\r\n    const startsIn = daysBetween(new Date(), date_start);\r\n    return (\r\n        <ListItem\r\n            item={course}\r\n            className={isSelected ? 'course course-selected' : 'course'}\r\n            title={name}\r\n            subtitle={`   ${startsIn} ${startsIn === 1 ? '' : ''}`}\r\n            description={description}\r\n            preview={(\r\n                <div className=\"course__cover-container\">\r\n                    {course.online && (\r\n                        <div className={`course__online-badge ${online ? 'course__online-text' : ''} font-size-xs`}>\r\n                            <span></span>\r\n                        </div>\r\n                    )}\r\n                    <CoverImage src={image_link} className=\"poster-cover course__cover\"/>\r\n                </div>\r\n            )}\r\n            {...props}/>\r\n    );\r\n}\r\n","import React from \"react\";\r\nimport _ from \"lodash\";\r\nimport Page, {PageContent, PageLoadingPlaceholder} from \"components/Page\";\r\nimport ErrorPage from \"components/ErrorPage\";\r\nimport CourseCatalog from \"components/common/CourseCatalog\";\r\nimport Course from \"components/common/Course\";\r\nimport Button from \"components/ui/Button\";\r\nimport UserProfile from \"components/common/UserProfile\";\r\nimport {useShopCatalog, useTeachers} from \"store\";\r\n\r\nconst TeacherPage = (props) => {\r\n    const {match: {params: {id: param_id}}, path: root, className, location} = props;\r\n    const {teachers, subjects, error, retry} = useTeachers();\r\n    const {catalog, error: errorLoadingCatalog, retry: reloadCatalog} = useShopCatalog();\r\n    const id = parseInt(param_id);\r\n\r\n    const renderCourse = React.useCallback((course, {link}) => {\r\n        const {price, discount} = course;\r\n        return (\r\n            <Course\r\n                course={course}\r\n                selectable\r\n                key={course.id}\r\n                link={`/shop/${link}`}>\r\n                <div className=\"list__item-action-info\">\r\n                    <span className=\"price\">{price}</span> {discount && <span className=\"discount font-size-xs\">{discount + price}</span>}\r\n                </div>\r\n                <Button style={{minWidth: '110px'}}></Button>\r\n            </Course>\r\n        )\r\n    }, []);\r\n\r\n    if (teachers && catalog && subjects) {\r\n        const teacher = _.find(teachers, {id});\r\n\r\n        if (teacher) {\r\n            const {vk_info: {first_name, last_name, photo_max_orig: photo}, contacts, subjects: teacherSubjects, bio} = teacher;\r\n            // const teacherSubjects = subject_ids.map(id => _.find(subjects, {id}));\r\n            const teachersCourses = catalog.filter(course => _.indexOf(course.teacher_ids, id) >= 0);\r\n            const profile = {\r\n                first_name,\r\n                last_name,\r\n                photo,\r\n                contacts,\r\n                about: bio,\r\n                role: teacherSubjects.map(({name}, i) => i === 0 ? name : name.toLowerCase()).join(', ')\r\n            };\r\n            const fullName = `${first_name} ${last_name}`;\r\n            return (\r\n                <Page\r\n                    title={`${fullName}`}\r\n                    className={`teacher-page ${className || ''}`}\r\n                    location={location}>\r\n                    <PageContent parentSection={{name: \"\"}}>\r\n                        <UserProfile {...profile}/>\r\n                        <div className=\"layout__content-block\">\r\n                            <h3> </h3>\r\n                        </div>\r\n                        <CourseCatalog.Body\r\n                            className=\"course-shop\"\r\n                            subjects={subjects}\r\n                            courses={teachersCourses}>\r\n                            <CourseCatalog.Filter/>\r\n                            <CourseCatalog.Catalog\r\n                                renderCourse={renderCourse}/>\r\n                        </CourseCatalog.Body>\r\n                    </PageContent>\r\n                </Page>\r\n            )\r\n        } else\r\n            return <ErrorPage errorCode={404} message=\"  \" link={{url: root}}/>;\r\n    }\r\n    else {\r\n        return (\r\n            <Page\r\n                location={location}>\r\n                <PageLoadingPlaceholder/>\r\n            </Page>\r\n        );\r\n    }\r\n};\r\n\r\nexport default TeacherPage;\r\n","import React from \"react\";\r\nimport { Switch, Route } from \"react-router-dom\";\r\nimport {TEACHERS} from \"data/test_data\";\r\nimport {SHOP_CATALOG} from \"data/test_data\";\r\nimport CatalogPage from \"./catalog-page\";\r\nimport TeacherPage from \"./teacher-page\";\r\n\r\nconst Teachers = (props) => {\r\n    const {match} = props;\r\n    return (\r\n        <Switch>\r\n            <Route path={`${match.path}/:id`} render={(props) => (\r\n                <TeacherPage\r\n                    teachers={TEACHERS}\r\n                    courses={SHOP_CATALOG.catalog}\r\n                    path={match.path}\r\n                    {...props}/>\r\n            )}/>\r\n            <Route exact path={`${match.path}`} render={(props) => (\r\n                <CatalogPage {...props}/>\r\n            )}/>\r\n        </Switch>\r\n    );\r\n};\r\n\r\nexport default Teachers;\r\n","import React from 'react';\r\nimport {CSSTransition, TransitionGroup} from \"react-transition-group\";\r\nimport {useTruncate} from \"hooks/common\";\r\nimport CoverImage from \"components/common/CoverImage\";\r\nimport Truncate from \"react-truncate\";\r\nimport _ from \"lodash\";\r\nimport {BottomTab} from \"components/Page\";\r\nimport ScrollBars from \"components/ui/ScrollBars\";\r\nimport Button from \"components/ui/Button\";\r\n\r\nconst SelectedCourse = ({course, onCourseDeselect, onTruncate}) => {\r\n    const {name} = course;\r\n    const [descriptionRef] = useTruncate(name);\r\n    const onDeselectClick = React.useCallback(() => {\r\n        onCourseDeselect(course);\r\n    }, [onCourseDeselect, course]);\r\n    return (\r\n        <div className=\"selected-course d-flex align-items-center flex-shrink-0\">\r\n            <div className=\"selected-course__cover-container\">\r\n                <CoverImage src={course.image_link} className=\"selected-course__cover poster-cover\"/>\r\n                <i className=\"icon-close selected-course__deselect-btn animated__action-button\" onClick={onDeselectClick}/>\r\n            </div>\r\n            <div className=\"selected-course__description-container font-size-xs\">\r\n                <div className=\"selected-course__description\">\r\n                    <Truncate lines={2} ref={descriptionRef} onTruncate={onTruncate}>\r\n                        {name}\r\n                    </Truncate>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst renderView = ({style, ...props}) => (<div style={{...style, height: `calc(100% + ${style.minHeight}px)`}} {...props}/>);\r\n\r\nconst SelectedCoursesTab = ({courses, discount: discountInfo, onCourseDeselect}) => {\r\n    let price, discount, message;\r\n    if (discountInfo) {\r\n        const fullPrice = _.sumBy(courses, 'price');\r\n        price = discountInfo.discounted_price;\r\n        discount = fullPrice - discountInfo.discounted_price;\r\n        message = discountInfo.message;\r\n    }\r\n    // const discount = _.sumBy(courses, 'discount');\r\n    React.useEffect(() => {\r\n        window.dispatchEvent(new Event('scroll'));\r\n    });\r\n    return (\r\n        <BottomTab\r\n            className={`selected-courses ${courses.length === 0 ? 'hidden' : ''}`}>\r\n            <div className=\"container-fluid\">\r\n                <div className=\"row\">\r\n                    <div className=\"col-12 col-md p-0 selected-courses__courses\">\r\n                        <ScrollBars\r\n                            autoHeight\r\n                            autoHeightMax=\"unset\"\r\n                            hideTracksWhenNotNeeded\r\n                            renderView={renderView}\r\n                            style={{height: '100%'}}\r\n                            className=\"scrollbars\">\r\n                            <TransitionGroup\r\n                                className=\"layout__bottom-tab-container container-fluid d-flex flex-nowrap\"\r\n                                style={{height: '100%'}}>\r\n                                {courses.map(course => (\r\n                                    <CSSTransition\r\n                                        classNames=\"animation-fade\"\r\n                                        key={course.id}\r\n                                        timeout={300}>\r\n                                        <SelectedCourse\r\n                                            course={course}\r\n                                            onCourseDeselect={onCourseDeselect}\r\n                                            onTruncate={() => {\r\n                                                window.dispatchEvent(new Event('scroll'));\r\n                                            }}/>\r\n                                    </CSSTransition>\r\n                                ))}\r\n                            </TransitionGroup>\r\n                        </ScrollBars>\r\n                    </div>\r\n                    <div className=\"col-12 col-md-auto p-0 selected-courses__price\">\r\n                        <div className=\"layout__bottom-tab-container container d-flex align-items-center justify-content-end\">\r\n                            {discountInfo ? (\r\n                                <React.Fragment>\r\n                                    <Button className=\"order-1 order-md-0 flex-shrink-0\"></Button>\r\n                                    <div className=\"price selected-courses__price-container container\">\r\n                                        {discount > 0 && <div className=\"discount font-size-sm d-inline-block d-md-block\">{price + discount}</div>}\r\n                                        <div className=\"price font-size-lg d-inline-block d-md-block\">{price}</div>\r\n                                        {message && <div className=\"promotion font-size-xs\">{message}</div>}\r\n                                    </div>\r\n                                </React.Fragment>\r\n                            ) : (\r\n                                <div className=\"spinner-border\"/>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </BottomTab>\r\n    );\r\n};\r\n\r\nexport default SelectedCoursesTab;\r\n","import React from \"react\";\r\nimport Page, {PageContent, PageLoadingPlaceholder} from \"components/Page\";\r\nimport CourseCatalog from \"components/common/CourseCatalog\";\r\nimport SelectedCoursesTab from \"./SelectedCoursesTab\";\r\nimport Course from \"components/common/Course\";\r\nimport Button from \"components/ui/Button\";\r\nimport {useDiscount, useShopCatalog} from \"store\";\r\n\r\nconst ShopCatalogPage = ({selectedCourses, onCourseClick, onCourseSelect, onCourseDeselect, location}) => {\r\n    const {catalog, subjects, error, retry} = useShopCatalog();\r\n    const {discount, error: errorLoadingDiscount, retry: reloadDiscount} = useDiscount(selectedCourses);\r\n    const renderCourse = React.useCallback((course, props) => {\r\n        const isSelected = selectedCourses.has(course);\r\n        const {price, discount, purchased} = course;\r\n        return (\r\n            <Course\r\n                course={course}\r\n                selectable\r\n                isSelected={isSelected}\r\n                onActionClick={purchased ? null : onCourseSelect}\r\n                key={course.id}\r\n                {...props}>\r\n                {purchased ? (\r\n                    <Button style={{minWidth: '110px'}} active={false}></Button>\r\n                ) : (\r\n                    <React.Fragment>\r\n                        <div className=\"list__item-action-info\">\r\n                            <span className=\"price\">{price}</span> {discount && <span className=\"discount font-size-xs\">{discount + price}</span>}\r\n                        </div>\r\n                        <Button style={{minWidth: '110px'}}>{isSelected ? '' : ''}</Button>\r\n                    </React.Fragment>\r\n                )}\r\n            </Course>\r\n        )\r\n    }, [selectedCourses, onCourseSelect]);\r\n    return (\r\n        <Page\r\n            className=\"course-shop\"\r\n            title=\" \"\r\n            location={location}>\r\n            {!(catalog && subjects) ? (\r\n                <PageLoadingPlaceholder/>\r\n            ) : (\r\n                <CourseCatalog.Body\r\n                    subjects={subjects}\r\n                    courses={catalog}>\r\n                    <PageContent>\r\n                        <CourseCatalog.Filter/>\r\n                        <CourseCatalog.Catalog\r\n                            renderCourse={renderCourse}/>\r\n                    </PageContent>\r\n                </CourseCatalog.Body>\r\n            )}\r\n            <SelectedCoursesTab\r\n                onCourseDeselect={onCourseDeselect}\r\n                courses={[...selectedCourses]}\r\n                discount={discount}/>\r\n        </Page>\r\n    );\r\n};\r\n\r\nexport default ShopCatalogPage;\r\n","import React from 'react';\r\nimport _ from 'lodash';\r\nimport CoverImage from \"components/common/CoverImage\";\r\nimport {renderDate} from \"../../definitions/helpers\";\r\nimport List from \"./List\";\r\nimport Teacher from \"./Teacher\";\r\nimport Page, {PageLink} from \"../Page\";\r\nimport ErrorPage from \"../ErrorPage\";\r\n\r\nwindow._ = _;\r\n\r\nexport const CourseOverviewContext = React.createContext({});\r\n\r\nconst Description = () => {\r\n    const {course} = React.useContext(CourseOverviewContext);\r\n    return (\r\n        <React.Fragment>\r\n            <CoverImage src={course.image_link} className=\"course-overview__cover\"/>\r\n            <div className=\"course-overview__info layout__content-block\">\r\n                <h2>{course.name}</h2>\r\n                <div className=\"course-overview__summary\">\r\n                    <div className=\"col-auto course-overview__summary-item\">\r\n                        <i className=\"far fa-calendar-alt\"/>\r\n                        : {renderDate(course.date_start, renderDate.date)}\r\n                    </div>\r\n                    <div className=\"col-auto course-overview__summary-item\">\r\n                        <i className=\"far fa-clock\"/>\r\n                        : {course.total_hours} \r\n                    </div>\r\n                </div>\r\n                <div className=\"description-text font-size-sm\">{course.description}</div>\r\n            </div>\r\n        </React.Fragment>\r\n    );\r\n};\r\n\r\nconst Title = () => {\r\n    const {course} = React.useContext(CourseOverviewContext);\r\n    return (\r\n        <div className=\"course-overview__title layout__content-block\">\r\n            <h2>{course.name}</h2>\r\n            <PageLink className=\"course-overview__link\" to={`/shop/${course.id}`}>\r\n                 \r\n            </PageLink>\r\n        </div>\r\n    );\r\n};\r\n\r\n//TODO: error boundaries\r\nconst Teachers = () => {\r\n    const {course, teachers} = React.useContext(CourseOverviewContext);\r\n    return (\r\n        <div className=\"layout__content-block\">\r\n            <h3></h3>\r\n            <div className=\"course-overview__teachers container negate-block-padding\">\r\n                <div className=\"row\">\r\n                    {course.teacher_ids.map((id, i) => (\r\n                        <div className=\"col-12 col-md d-flex p-0\" key={i}>\r\n                            <Teacher\r\n                                teacher={_.find(teachers, {id})}\r\n                                link={`/teachers/${id}/`}/>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst Lessons = ({renderLesson: renderFunc}) => {\r\n    const {course, lessons} = React.useContext(CourseOverviewContext);\r\n    const renderCourse = React.useCallback((item) => {\r\n        return renderFunc(item, {link: `${item.id}/`});\r\n    }, [renderFunc]);\r\n    return (\r\n        <div className=\"layout__content-block\">\r\n            <h3></h3>\r\n            <List\r\n                renderItem={renderCourse}>\r\n                {lessons}\r\n            </List>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst CourseOverview = (props) => {\r\n    const {match: {params: {id: param_id}}, path: root, courses, teachers, lessons, children, className, location} = props;\r\n    const id = parseInt(param_id);\r\n    const course = _.find(courses, {id});\r\n    if (course) {\r\n        return (\r\n            <Page\r\n                title={`${course.title}`}\r\n                className={`course-overview ${className || ''}`}\r\n                location={location}>\r\n                <CourseOverviewContext.Provider\r\n                    value={{\r\n                        course,\r\n                        teachers,\r\n                        lessons\r\n                    }}>\r\n                    {children}\r\n                </CourseOverviewContext.Provider>\r\n            </Page>\r\n        )\r\n    } else\r\n        return <ErrorPage errorCode={404} message=\"  \" link={{url: root}}/>;\r\n};\r\n\r\nexport default {\r\n    Description,\r\n    Teachers,\r\n    Lessons,\r\n    Title,\r\n    Body: CourseOverview\r\n};\r\n","import React from \"react\";\r\nimport {CourseOverviewContext} from \"components/common/CourseOverview\";\r\nimport {BottomTab} from \"components/Page\";\r\nimport Button from \"../../../ui/Button\";\r\nimport _ from \"lodash\";\r\n\r\nconst CoursePriceTab = (props) => {\r\n    const {discount: discountInfo, error, retry} = props;\r\n    const {course: {price: fullPrice, purchased}} = React.useContext(CourseOverviewContext);\r\n    let price, discount, message;\r\n    if (discountInfo) {\r\n        price = discountInfo.discounted_price;\r\n        discount = fullPrice - discountInfo.discounted_price;\r\n        message = discountInfo.message;\r\n    }\r\n    React.useEffect(() => {\r\n        window.dispatchEvent(new Event('scroll'));\r\n    });\r\n    return (\r\n        <BottomTab className=\"course-overview__offer\">\r\n            <div className=\"container layout__bottom-tab-container\">\r\n                <div className=\"row justify-content-end align-items-center\">\r\n                    {purchased ? (\r\n                        <Button active={false}></Button>\r\n                    ) : (\r\n                        discountInfo ? (\r\n                            <React.Fragment>\r\n                                {discount > 0 && (\r\n                                    <div className=\"col-auto\">\r\n                                        <div className=\"discount\">{price + discount}</div>\r\n                                    </div>\r\n                                )}\r\n                                <div className=\"col-auto\">\r\n                                    <h2 className=\"price\">\r\n                                        {price}\r\n                                    </h2>\r\n                                </div>\r\n                                <div className=\"col-auto\">\r\n                                    <Button></Button>\r\n                                </div>\r\n                            </React.Fragment>\r\n                        ) : (\r\n                            <div className=\"spinner-border\"/>\r\n                        )\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </BottomTab>\r\n    );\r\n};\r\n\r\nexport default CoursePriceTab;\r\n","import React from \"react\";\r\nimport CoverImage from \"./CoverImage\";\r\n\r\nconst VideoCover = ({cover, watchProgress, locked=false, className}) => (\r\n    <CoverImage\r\n        src={cover}\r\n        className={`video-cover ${locked ? 'video-locked' : ''} ${className || ''}`}>\r\n        {watchProgress && (\r\n            <div className=\"video-cover__watch-progress-bar\">\r\n                <div\r\n                    className=\"watch-progress-bar__progress-line\"\r\n                    style={{width: `${watchProgress}%`}}/>\r\n            </div>\r\n        )}\r\n    </CoverImage>\r\n);\r\n\r\nexport default VideoCover;\r\n","import React from 'react';\r\nimport ListItem from \"./ListItem\";\r\nimport VideoCover from \"./VideoCover\";\r\n\r\nexport default function Lesson({lesson, locked=false, link, ...props}) {\r\n    const {name, image_link: cover, description, watchProgress} = lesson;\r\n    return (\r\n        <ListItem\r\n            item={lesson}\r\n            className={`video-class ${locked ? 'disabled' : ''}`}\r\n            title={name}\r\n            description={description}\r\n            preview={(\r\n                <VideoCover\r\n                    cover={cover}\r\n                    className=\"video-class__cover\"\r\n                    locked={locked}\r\n                    watchProgress={!locked && watchProgress}/>\r\n            )}\r\n            key={lesson.id}\r\n            link={locked ? undefined : link}\r\n            {...props}/>\r\n    );\r\n}\r\n","import React from \"react\";\r\nimport Page, {PageContent, PageLoadingPlaceholder} from \"components/Page\";\r\nimport CourseOverview from \"components/common/CourseOverview\";\r\nimport CoursePriceTab from \"./CoursePriceTab\";\r\nimport Lesson from \"components/common/Lesson\";\r\nimport {useShopCatalog, useTeachers, useLessons, useDiscount} from \"store\";\r\n\r\nconst CoursePage = ({path, location, match}) => {\r\n    const {params: {id: courseId}} = match;\r\n    const {catalog, subjects, error, retry} = useShopCatalog();\r\n    const {teachers, error: errorLoadingTeachers, retry: reloadTeachers} = useTeachers();\r\n    const {lessons, error: errorLoadingLessons, retry: reloadLessons} = useLessons(courseId);\r\n    const {discount, error: errorLoadingDiscount, retry: reloadDiscount} = useDiscount(courseId);\r\n    const renderLesson = (lesson, props) => (\r\n        <Lesson\r\n            lesson={lesson}\r\n            selectable={false}\r\n            locked={false}\r\n            key={lesson.id}/>\r\n    );\r\n    if (catalog && teachers && lessons ) {\r\n        return (\r\n            <CourseOverview.Body\r\n                match={match}\r\n                path={path}\r\n                courses={catalog}\r\n                teachers={teachers}\r\n                lessons={lessons}\r\n                location={location}>\r\n                <PageContent parentSection={{name: \" \"}}>\r\n                    <CourseOverview.Description/>\r\n                    <CourseOverview.Teachers/>\r\n                    <CourseOverview.Lessons renderLesson={renderLesson}/>\r\n                </PageContent>\r\n                <CoursePriceTab\r\n                    discount={discount}\r\n                    error={error}\r\n                    retry={reloadDiscount}/>\r\n            </CourseOverview.Body>\r\n        );\r\n    }\r\n    else {\r\n        return (\r\n            <Page\r\n                location={location}>\r\n                <PageLoadingPlaceholder/>\r\n            </Page>\r\n        );\r\n    }\r\n};\r\n\r\nexport default CoursePage;\r\n","import React from 'react';\r\nimport { Switch, Route } from \"react-router-dom\";\r\nimport ShopCatalogPage from \"./catalog-page\";\r\nimport CoursePage from \"./course-page\";\r\n\r\nexport default function Shop(props) {\r\n    const [selectedCourses, setSelectedCourses] = React.useState(new Set());\r\n    const onCourseSelect = React.useCallback((course) => {\r\n        setSelectedCourses(selectedCourses => {\r\n            if (selectedCourses.has(course))\r\n                return selectedCourses;\r\n            selectedCourses = new Set(selectedCourses);\r\n            selectedCourses.add(course);\r\n            return selectedCourses;\r\n        });\r\n    }, []);\r\n    const onCourseDeselect = React.useCallback((course) => {\r\n        setSelectedCourses(selectedCourses => {\r\n            selectedCourses = new Set(selectedCourses);\r\n            selectedCourses.delete(course);\r\n            return selectedCourses;\r\n        });\r\n    }, []);\r\n    const {match} = props;\r\n    return (\r\n        <Switch>\r\n            <Route path={`${match.path}/:id`} render={(props) => (\r\n                <CoursePage\r\n                    path={match.path}\r\n                    {...props}/>\r\n            )}/>\r\n            <Route exact path={`${match.path}`} render={(props) => (\r\n                <ShopCatalogPage\r\n                    selectedCourses={selectedCourses}\r\n                    onCourseSelect={onCourseSelect}\r\n                    onCourseDeselect={onCourseDeselect}\r\n                    {...props}/>\r\n            )}/>\r\n        </Switch>\r\n    )\r\n}\r\n","import React from \"react\";\r\nimport CourseCatalog from \"components/common/CourseCatalog\";\r\nimport Course from \"components/common/Course\";\r\nimport Button from \"components/ui/Button\";\r\nimport Page, {PageContent, PageLoadingPlaceholder} from \"components/Page\";\r\nimport {LEARNING_STATUS} from \"definitions/constants\";\r\nimport {useUserCourses} from \"store\";\r\n\r\nconst CatalogPage = ({location}) => {\r\n    const {courses, subjects, error, retry} = useUserCourses();\r\n    const renderCourse = React.useCallback((course, props) => (\r\n        <Course\r\n            course={course}\r\n            selectable\r\n            online={false}\r\n            key={course.id}\r\n            {...props}>\r\n            {course.status === LEARNING_STATUS.learning\r\n                ? <Button className=\"course__select-btn\"></Button>\r\n                : <Button className=\"course__select-btn\" active={false}></Button>}\r\n        </Course>\r\n    ), []);\r\n    return (\r\n        <Page\r\n            className=\"user-courses\"\r\n            location={location}\r\n            title=\" \">\r\n            {!(courses && subjects) ? (\r\n                    <PageLoadingPlaceholder/>\r\n                ) : (\r\n                <CourseCatalog.Body\r\n                    courses={courses}\r\n                    subjects={subjects}>\r\n                    <PageContent>\r\n                        <CourseCatalog.Filter/>\r\n                        <CourseCatalog.Catalog\r\n                            renderCourse={renderCourse}/>\r\n                    </PageContent>\r\n                </CourseCatalog.Body>\r\n            )\r\n            }\r\n        </Page>\r\n    );\r\n};\r\n\r\nexport default CatalogPage;\r\n","import React from \"react\";\r\nimport Page, {PageContent, PageLoadingPlaceholder} from \"components/Page\";\r\nimport CourseOverview from \"components/common/CourseOverview\";\r\nimport Lesson from \"components/common/Lesson\";\r\nimport Button from \"components/ui/Button\";\r\nimport {renderDate} from \"definitions/helpers\";\r\nimport {useLessons, useUserCourses} from \"store\";\r\n\r\nconst CoursePage = ({path, match, location, ...props}) => {\r\n    const {params: {id: courseId}} = match;\r\n    const {courses, error, retry} = useUserCourses();\r\n    // const {teachers, error: errorLoadingTeachers, retry: reloadTeachers} = useTeachers();\r\n    const {lessons, error: errorLoadingLessons, retry: reloadLessons} = useLessons(courseId);\r\n    const renderLesson = (lesson, props) => {\r\n        const {date, id, locked} = lesson;\r\n        return (\r\n            <Lesson\r\n                lesson={lesson}\r\n                locked={locked}\r\n                selectable={!locked}\r\n                key={id}\r\n                {...props}>\r\n                {/*<div className=\"list__item-action-info\">{renderDate(date, renderDate.shortDate)}</div>*/}\r\n                {!locked\r\n                    ? <Button></Button>\r\n                    : <Button active={false}></Button>}\r\n            </Lesson>\r\n        );\r\n    };\r\n    if (courses && lessons ) {\r\n        return (\r\n            <CourseOverview.Body\r\n                match={match}\r\n                path={path}\r\n                courses={courses}\r\n                lessons={lessons}\r\n                location={location}>\r\n                <PageContent parentSection={{name: \" \"}}>\r\n                    <CourseOverview.Title/>\r\n                    <CourseOverview.Lessons renderLesson={renderLesson}/>\r\n                </PageContent>\r\n            </CourseOverview.Body>\r\n        );\r\n    } else {\r\n        return (\r\n            <Page\r\n                location={location}>\r\n                <PageLoadingPlaceholder/>\r\n            </Page>\r\n        );\r\n    }\r\n};\r\n\r\nexport default CoursePage;\r\n","import React, { Component, Fragment } from 'react';\r\n\r\nclass Tooltip extends Component {\r\n    componentDidMount() {\r\n    }\r\n\r\n    render() {\r\n        let child = React.Children.only(this.props.children);\r\n        let position = 'pos-' + this.props.position;\r\n        return React.cloneElement(child, {\r\n            className: (child.props.className ? child.props.className + ' tooltip ' : 'tooltip ') + position,\r\n            children: (\r\n                <Fragment>\r\n                    {child.props.children}\r\n                    <div className=\"tooltip-arrow\"/>\r\n                    <div className=\"tooltip-block\">\r\n                        {\r\n                            this.props.content\r\n                        }\r\n                    </div>\r\n                </Fragment>\r\n            )\r\n        });\r\n    }\r\n}\r\n\r\nexport default Tooltip;\r\n","import React from 'react';\r\nimport {useUpdateEffect} from \"hooks/common\";\r\nimport {CSSTransition, SwitchTransition} from \"react-transition-group\";\r\nimport Tooltip from \"./Tooltip\";\r\n\r\nexport const LOADING_STATE = {\r\n    PENDING: 'pending',\r\n    LOADING: 'loading',\r\n    LOADED: 'loaded',\r\n    SUCCESS: 'success',\r\n    DONE: 'done',\r\n    REJECTED: 'rejected',\r\n    ERROR: 'error'\r\n};\r\n\r\nexport function useLoadingState(loading, done, rejected, error) {\r\n    const [state, setState] = React.useState(loading === null || done\r\n        ? LOADING_STATE.DONE\r\n        : (rejected\r\n            ? LOADING_STATE.REJECTED\r\n            : LOADING_STATE.LOADING));\r\n    useUpdateEffect(() => {\r\n        if (loading === false) {\r\n            setState(LOADING_STATE.LOADED);\r\n        } else if (loading === true) {\r\n            setState(LOADING_STATE.LOADING);\r\n        }\r\n    }, [loading]);\r\n    useUpdateEffect(() => {\r\n        if (state === LOADING_STATE.LOADED && done) {\r\n            setState(LOADING_STATE.SUCCESS);\r\n        }\r\n        else if (state === LOADING_STATE.SUCCESS) {\r\n            const timeout = setTimeout(() => {\r\n                setState(LOADING_STATE.DONE);\r\n            }, 1000);\r\n            return () => {\r\n                clearTimeout(timeout);\r\n            };\r\n        }\r\n    }, [state, done]);\r\n    useUpdateEffect(() => {\r\n        if (error)\r\n            setState(LOADING_STATE.ERROR);\r\n    }, [error]);\r\n    useUpdateEffect(() => {\r\n        if (rejected)\r\n            setState(LOADING_STATE.REJECTED);\r\n    }, [rejected]);\r\n    return state;\r\n}\r\n\r\nexport const LoadingIndicator = ({state, onClick, errorMessage}) => {\r\n    const icon = (state === LOADING_STATE.LOADED && \"spinner-border\")\r\n        || (state === LOADING_STATE.SUCCESS && \"icon-check\")\r\n        || (state === LOADING_STATE.ERROR && \"icon-reload\")\r\n        || (state === LOADING_STATE.REJECTED && \"icon-alert\")\r\n        || \"spinner-border\";\r\n    return (\r\n        <SwitchTransition>\r\n            {state !== LOADING_STATE.DONE ? (\r\n                <CSSTransition\r\n                    key={icon}\r\n                    appear={true}\r\n                    classNames=\"animation-scale\"\r\n                    timeout={300}>\r\n                    <div\r\n                        className=\"file__state-indicator\"\r\n                        onClick={onClick}>\r\n                        <Tooltip content={errorMessage}>\r\n                            <i\r\n                                className={icon}/>\r\n                        </Tooltip>\r\n                    </div>\r\n                </CSSTransition>\r\n            ) : null}\r\n        </SwitchTransition>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport Button from \"./Button\";\r\nimport {downloadFile} from \"../../definitions/helpers\";\r\nimport {LoadingIndicator, useLoadingState} from \"./LoadingIndicator\";\r\n\r\nconst File = ({\r\n                  file: {name, downloadName, url},\r\n                  error=null,\r\n                  rejected=null,\r\n                  loading=null,\r\n                  done=true,\r\n                  deletable=false,\r\n                  onDelete,\r\n                  onIndicatorClick,\r\n                  className,\r\n                  errorMessage,\r\n                  ...props\r\n              }) => {\r\n    const downloadCallback = React.useCallback(() => {\r\n        if (url)\r\n            downloadFile(url, downloadName || name);\r\n    }, [url, name, downloadName]);\r\n    const isUpload = loading !== null;\r\n    const state = useLoadingState(loading !== null ? loading < 100 : null, done, rejected, error);\r\n    return (\r\n        <div className={`file file-${state} ${className || ''}`}>\r\n            <Button\r\n                neutral\r\n                className=\"file__btn\"\r\n                icon={deletable\r\n                    ? <i className=\"icon-close file__action-btn file__delete-btn animated__action-button\"/>\r\n                    : <i className=\"icon-download file__action-btn file__download-btn animated__action-button\"/>}\r\n                iconAction={deletable ? onDelete : undefined}\r\n                onClick={downloadCallback}\r\n                {...props}>\r\n                {loading !== null && <div className=\"file__loading-progress\" style={{width: `${loading}%`}}/>}\r\n                <i className=\"file__icon far fa-file-alt\"/>\r\n                <span\r\n                    className=\"file__name\"\r\n                    title={name}>\r\n                {name}\r\n            </span>\r\n            </Button>\r\n            {isUpload && (\r\n                <LoadingIndicator\r\n                    onClick={onIndicatorClick}\r\n                    state={state}\r\n                    errorMessage={errorMessage}/>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default File;\r\n\r\n","import React from \"react\";\r\n\r\nconst VideoPlayer = ({video_link}) => (\r\n    <div className=\"video-player\">\r\n        <iframe\r\n            className=\"video-player__video\"\r\n            src={`https://player.vimeo.com/video/${video_link}?color=fa9346&title=0&byline=0&portrait=0`}\r\n            frameBorder=\"0\"\r\n            allow=\"autoplay; fullscreen\"\r\n            allowFullScreen/>\r\n    </div>\r\n);\r\n\r\nexport default VideoPlayer;\r\n","import {CSSTransition} from \"react-transition-group\";\r\nimport ReactDOM from 'react-dom';\r\n\r\n//hack to get context because lib doesn't export it properly and import doesn't work\r\n// const TransitionGroupContext = Transition.contextType;\r\n//\r\n// const getClassNames = (classNames, type) => {\r\n//     const isStringClassNames = typeof classNames === 'string';\r\n//     const prefix = isStringClassNames && classNames\r\n//         ? `${classNames}-`\r\n//         : '';\r\n//\r\n//     let baseClassName = isStringClassNames\r\n//         ? `${prefix}${type}`\r\n//         : classNames[type];\r\n//\r\n//     let activeClassName = isStringClassNames\r\n//         ? `${baseClassName}-active`\r\n//         : classNames[`${type}Active`];\r\n//\r\n//     let doneClassName = isStringClassNames\r\n//         ? `${baseClassName}-done`\r\n//         : classNames[`${type}Done`];\r\n//\r\n//     return {\r\n//         baseClassName,\r\n//         activeClassName,\r\n//         doneClassName\r\n//     };\r\n// };\r\n//\r\n// function getClassName(classNames, type, phase) {\r\n//     // console.log(arguments);\r\n//     let className = getClassNames(classNames, type)[`${phase}ClassName`];\r\n//\r\n//     if (type === 'appear' && phase === 'done') {\r\n//         className += ` ${getClassNames(classNames, 'enter').doneClassName}`;\r\n//     }\r\n//\r\n//     return className;\r\n// }\r\n//\r\n// const State = {\r\n//     entering: 'entering',\r\n//     entered:  'entered',\r\n//     exiting:  'exiting',\r\n//     exited: 'exited'\r\n// };\r\n//\r\n// const StableCSSTransition = ({classNames='', appear, children, ...props}) => {\r\n//     const isMounting = !useIsMounted();\r\n//     const context = React.useContext(TransitionGroupContext);\r\n//         const appearingRef = React.useRef(context ? context.isMounting : appear);\r\n//     const prevStateRef = React.useRef(null);\r\n//     const appliedClassNamesRef = React.useRef('');\r\n//     return (\r\n//         <Transition\r\n//             // mountOnEnter\r\n//             // unmountOnExit\r\n//             {...props}\r\n//             appear={appear}>\r\n//             {(state) => {\r\n//                 const appearing = appearingRef.current;\r\n//                 const prevState = prevStateRef.current;\r\n//                 const animateMounting = context != null;\r\n//\r\n//                 console.log(prevState, '->', state);\r\n//                 let className = appliedClassNamesRef.current;\r\n//                 if (state === State.exited) {\r\n//                     if (prevState !== State.exiting) {\r\n//                         if (appearing) {\r\n//                             className = getClassName(classNames, 'appear', 'base');\r\n//                         }\r\n//                         else if (prevState !== null || animateMounting) {\r\n//                             className = getClassName(classNames, 'enter', 'base');\r\n//                         }\r\n//                     }\r\n//                     else {\r\n//                         className = getClassName(classNames, 'exit', 'done');\r\n//                     }\r\n//                 }\r\n//                 else if (state === State.exiting) {\r\n//                     className = getClassName(classNames, 'exit', 'active');\r\n//                 }\r\n//                 else if (state === State.entered) {\r\n//                     if (prevState === State.entered) {\r\n//                         className = getClassName(classNames, 'exit', 'base');\r\n//                     }\r\n//                     else if (prevState !== null || animateMounting) {\r\n//                         className = getClassName(classNames, appearing ? 'appear' : 'enter', 'done');\r\n//                     }\r\n//                     appearingRef.current = false;\r\n//                 }\r\n//                 else if (state === State.entering || animateMounting) {\r\n//                     className = getClassName(classNames, appearing ? 'appear' : 'enter', 'active');\r\n//                 }\r\n//                 prevStateRef.current = state;\r\n//                 appliedClassNamesRef.current = className;\r\n//                 console.log(className);\r\n//                 const child = React.Children.only(children);\r\n//                 return React.cloneElement(child, {\r\n//                     className: child.props.className ? `${child.props.className} ${className}` : className\r\n//                 });\r\n//             }}\r\n//         </Transition>\r\n//     );\r\n// };\r\n\r\nclass StableCSSTransition extends CSSTransition {\r\n    type = null;\r\n    phase = null;\r\n\r\n    addClass(node, type, phase) {\r\n        super.addClass(node, type, phase);\r\n        this.type = type;\r\n        this.phase = phase;\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        if (this.appliedClasses[this.type] && this.appliedClasses[this.type][this.phase])\r\n            super.addClass(ReactDOM.findDOMNode(this), this.type, this.phase);\r\n    }\r\n}\r\n\r\nexport default StableCSSTransition;\r\n","import React from 'react';\r\nimport _ from 'lodash';\r\nimport Dropzone from \"react-dropzone-uploader\";\r\nimport {TransitionGroup} from \"react-transition-group\";\r\nimport {useRefValue} from \"hooks/common\";\r\nimport Auth from 'definitions/auth';\r\nimport {API_ROOT} from \"api\";\r\nimport {getAuthHeader, trimFileExtension} from \"definitions/helpers\";\r\nimport StableCSSTransition from \"components/common/StableCSSTransition\";\r\nimport {LOADING_STATE, LoadingIndicator, useLoadingState} from \"./LoadingIndicator\";\r\nimport File from \"./File\";\r\nimport Button from \"./Button\";\r\n\r\nimport 'react-dropzone-uploader/dist/styles.css';\r\n\r\nconst FILE_STATUS = {\r\n    rejected_file_type: 'rejected_file_type',\r\n    rejected_max_files: 'rejected_max_files',\r\n    preparing: 'preparing',\r\n    error_file_size: 'error_file_size',\r\n    error_validation: 'error_validation',\r\n    ready: 'ready',\r\n    started: 'started',\r\n    getting_upload_params: 'getting_upload_params',\r\n    error_upload_params: 'error_upload_params',\r\n    uploading: 'uploading',\r\n    exception_upload: 'exception_upload',\r\n    aborted: 'aborted',\r\n    restarted: 'restarted',\r\n    removed: 'removed',\r\n    error_upload: 'error_upload',\r\n    headers_received: 'headers_received',\r\n    done: 'done',\r\n};\r\nconst FileInputContext = React.createContext(null);\r\nconst isFileReady = f => f.meta.status === 'done';\r\nconst allFilesReady = files => files.every(f => isFileReady(f));\r\nconst getUploadParams = () => {\r\n    // return { url: 'https://httpbin.org/post' };\r\n    if (Auth.user) {\r\n        return {\r\n            url: `${API_ROOT}/files/`,\r\n            headers: getAuthHeader(Auth.user.uid, Auth.user.hash)\r\n        };\r\n    }\r\n    else\r\n        throw new Error('User not logged in');\r\n};\r\nconst getFileProp = ({original_file_name, id_file_name}) => ({\r\n    name: original_file_name,\r\n    downloadName: `${trimFileExtension(original_file_name)}_${id_file_name}`,\r\n    url: `${API_ROOT}/files/${id_file_name}?disp=attachment`\r\n});\r\n\r\nconst Input = (props) => {\r\n    const {\r\n        className,\r\n        style,\r\n        getFilesFromEvent,\r\n        accept,\r\n        multiple,\r\n        disabled,\r\n        onFiles,\r\n        files,\r\n        content,\r\n        extra: { maxFiles }\r\n    } = props;\r\n    const onChange = React.useCallback(async e => {\r\n        const target = e.target;\r\n        const chosenFiles = await getFilesFromEvent(e);\r\n        onFiles(chosenFiles);\r\n        target.value = null\r\n    }, [getFilesFromEvent, onFiles]);\r\n    const isActive = files.length < maxFiles && !disabled;\r\n    return (\r\n        <Button\r\n            tag=\"label\"\r\n            active={isActive}\r\n            icon={<i className=\"icon-add\"/>}>\r\n            {content}\r\n            <input\r\n                className={className}\r\n                style={style}\r\n                type=\"file\"\r\n                accept={accept}\r\n                multiple={multiple}\r\n                disabled={!isActive}\r\n                onChange={isActive ? onChange : null}\r\n            />\r\n        </Button>\r\n    );\r\n};\r\n\r\nconst Preview = (props) => {\r\n    const {\r\n        fileWithMeta: { cancel, remove, restart, xhr },\r\n        meta: { name = '', percent = 0, status},\r\n        isUpload,\r\n        canRemove,\r\n        className\r\n    } = props;\r\n    const [getResponse, setResponse] = useRefValue(null);\r\n    if (!getResponse() && xhr && xhr.responseText) {\r\n        try {\r\n            const {original_file_name, file_link, id_file_name} = JSON.parse(xhr.responseText);\r\n            if (!(original_file_name && file_link && id_file_name))\r\n                throw new Error('Incorrect response');\r\n            setResponse({\r\n                original_file_name,\r\n                file_link,\r\n                id_file_name\r\n            });\r\n        }\r\n        catch (e) {\r\n            console.log(e);\r\n        }\r\n    }\r\n    const response = getResponse();\r\n    const deleteCallback = React.useCallback(() => {\r\n        if (isUpload && !(status === 'done' || status === 'headers_received')) {\r\n            cancel();\r\n        }\r\n        remove();\r\n    }, [cancel, remove, isUpload, status]);\r\n    const hasError = _.startsWith(status, 'error') || _.startsWith(status, 'exception');\r\n    const isRejected = status === FILE_STATUS.error_file_size ? true : undefined;\r\n    const loading = isUpload ? status === 'done' || status === 'headers_received' ? 100 : percent : null;\r\n    const isDone = status === 'done';\r\n    return (\r\n        <File\r\n            file={response ? getFileProp(response) : ({name})}\r\n            loading={loading}\r\n            className={className}\r\n            done={isDone}\r\n            rejected={hasError && isRejected ? true : undefined}\r\n            error={hasError}\r\n            errorMessage={hasError && isRejected ? '    ' : undefined}\r\n            deletable={canRemove}\r\n            onDelete={deleteCallback}\r\n            onIndicatorClick={hasError && !isRejected ? restart : undefined}/>\r\n    );\r\n};\r\n\r\nconst SubmitButton = (props) => {\r\n    const {submitting, hasChanged} = React.useContext(FileInputContext) || ({});\r\n    const { disabled, onSubmit, files, content } = props;\r\n    const isDisabled = !allFilesReady(files) || disabled;\r\n\r\n    const submitCallback = React.useCallback(() => {\r\n        onSubmit(files);\r\n    }, [onSubmit, files]);\r\n\r\n    const state = useLoadingState(submitting, submitting === false);\r\n    console.log(state);\r\n    return (\r\n        <StableCSSTransition\r\n            in={onSubmit != null && (hasChanged || state !== LOADING_STATE.DONE)}\r\n            appear\r\n            mountOnEnter\r\n            unmountOnExit\r\n            classNames=\"animation-fade\"\r\n            timeout={300}>\r\n            <React.Fragment>\r\n                <Button\r\n                    active={!isDisabled}\r\n                    icon={\r\n                        hasChanged\r\n                            ? (<i className=\"icon-upload\"/>)\r\n                            : (<LoadingIndicator state={state}/>)\r\n                    }\r\n                    onClick={submitCallback}>\r\n                    {hasChanged ? content : ''}\r\n                </Button>\r\n            </React.Fragment>\r\n        </StableCSSTransition>\r\n    );\r\n};\r\n\r\nconst Layout = ({input, previews=[], submitButton, dropzoneProps, files, extra: { maxFiles } }) => {\r\n    const context = React.useContext(FileInputContext);\r\n    const {preloadedFiles=[], deletePreloadedFile, disabled} = context || ({});\r\n    const { ref } = dropzoneProps;\r\n    return (\r\n        <div\r\n            ref={ref}\r\n            className=\"file-input\">\r\n            {/*<StableCSSTransition*/}\r\n            {/*    in={previews.length > 0 || preloadedFiles.length > 0}*/}\r\n            {/*    mountOnEnter*/}\r\n            {/*    unmountOnExit*/}\r\n            {/*    classNames=\"animation-fade\"*/}\r\n            {/*    timeout={300}>*/}\r\n            <h4 className=\"file-input__files-title\"> </h4>\r\n            {/*</StableCSSTransition>*/}\r\n            <TransitionGroup className=\"file-container\">\r\n                {\r\n                    preloadedFiles && (\r\n                        preloadedFiles.map((file) => {\r\n                            const {id_file_name} = file;\r\n                            const deleteCallback = () => {deletePreloadedFile(file);};\r\n                            return (\r\n                                <StableCSSTransition\r\n                                    classNames=\"animation-fade\"\r\n                                    timeout={300}\r\n                                    key={id_file_name}>\r\n                                    <File\r\n                                        file={getFileProp(file)}\r\n                                        done={true}\r\n                                        deletable={!disabled}\r\n                                        onDelete={deleteCallback}/>\r\n                                </StableCSSTransition>\r\n                            );\r\n                        }\r\n                    ))\r\n                }\r\n                {previews.map((preview, i) => (\r\n                    <StableCSSTransition\r\n                        classNames=\"animation-fade\"\r\n                        timeout={300}\r\n                        key={preview.props.meta.id}>\r\n                        {preview}\r\n                    </StableCSSTransition>\r\n                ))}\r\n            </TransitionGroup>\r\n            <div className=\"file-input__controls\">\r\n                {input}\r\n                {submitButton}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst getCallbackFiles = (files, preloadedFiles) => {\r\n    if (!allFilesReady(files))\r\n        return null;\r\n    else\r\n        return _.concat(preloadedFiles, files.map(({xhr}) => JSON.parse(xhr.responseText)));\r\n};\r\n\r\n//TODO: check disabled on capturing phase of click\r\nconst FileInput = (props) => {\r\n    let {\r\n        initialFiles=[],\r\n        inputContent=\" \",\r\n        onChange,\r\n        onSubmit,\r\n        maxFiles=5,\r\n        maxSizeBytes=1024 * 1024 * 4,\r\n        accept,\r\n        isDisabled=false,\r\n        ...otherProps\r\n    } = props;\r\n\r\n    const [preloadedFiles, setPreloadedFiles] = React.useState(initialFiles);\r\n    const [hasChanged, setChanged] = React.useState(false);\r\n    const [submitting, setSubmitting] = React.useState(null);\r\n    const [getInputFiles, setInputFiles] = useRefValue([]);\r\n\r\n    const deletePreloadedFile = React.useCallback((file) => {\r\n        const newPreloadedFiles = preloadedFiles.filter(item => item !== file);\r\n        setChanged(true);\r\n        setPreloadedFiles(newPreloadedFiles);\r\n        onChange && onChange(getCallbackFiles(getInputFiles(), newPreloadedFiles));\r\n    }, [preloadedFiles, onChange, getInputFiles]);\r\n\r\n    const handleChangeStatus = React.useCallback(({meta, ...file}, status, files) => {\r\n        console.log(status, meta, _.cloneDeep(files));\r\n        setChanged(true);\r\n        setInputFiles(files);\r\n        onChange && onChange(true, getCallbackFiles(files, preloadedFiles));\r\n    }, [onChange, preloadedFiles, setInputFiles]);\r\n\r\n    const handleSubmit = React.useCallback(async (files) => {\r\n        console.log(files.map(f => f.meta));\r\n        if (onSubmit) {\r\n            const filesToSubmit = getCallbackFiles(files, preloadedFiles);\r\n            const returnValue = onSubmit(filesToSubmit);\r\n            if (returnValue instanceof Promise) {\r\n                setSubmitting(true);\r\n                try {\r\n                    await returnValue;\r\n                    setChanged(false);\r\n                    onChange && onChange(false, filesToSubmit);\r\n                }\r\n                finally {\r\n                    setSubmitting(false);\r\n                }\r\n            }\r\n        }\r\n    }, [onSubmit, preloadedFiles]);\r\n\r\n    maxFiles = preloadedFiles ? maxFiles - preloadedFiles.length : maxFiles;\r\n    const disabled = typeof isDisabled === 'function' ? isDisabled() : isDisabled;\r\n    return (\r\n        <FileInputContext.Provider\r\n            value={{\r\n                preloadedFiles,\r\n                deletePreloadedFile,\r\n                hasChanged,\r\n                disabled,\r\n                submitting\r\n            }}>\r\n            <Dropzone\r\n                inputContent={inputContent}\r\n                submitButtonContent={''}\r\n                {...otherProps}\r\n                getUploadParams={getUploadParams}\r\n                onChangeStatus={handleChangeStatus}\r\n                onSubmit={onSubmit && handleSubmit}\r\n                canCancel={false}\r\n                SubmitButtonComponent={SubmitButton}\r\n                LayoutComponent={Layout}\r\n                InputComponent={Input}\r\n                PreviewComponent={Preview}\r\n                maxFiles={maxFiles}\r\n                maxSizeBytes={maxSizeBytes}\r\n                accept={accept}\r\n                classNames={{preview: ''}}\r\n                disabled={isDisabled}\r\n            />\r\n        </FileInputContext.Provider>\r\n    )\r\n};\r\n\r\nexport default FileInput;\r\n\r\n\r\n","import React from 'react';\r\nimport {Prompt} from \"react-router-dom\";\r\n\r\nconst NavigationBlocker = () => {\r\n    const unloadCallback = React.useCallback((event) => {\r\n        // Cancel the event as stated by the standard.\r\n        event.preventDefault();\r\n        // Chrome requires returnValue to be set.\r\n        event.returnValue = '';\r\n    }, []);\r\n    React.useEffect(() => {\r\n        window.addEventListener('beforeunload', unloadCallback);\r\n        return () => {\r\n            window.removeEventListener('beforeunload', unloadCallback);\r\n        };\r\n    }, [unloadCallback]);\r\n    return (\r\n        <Prompt\r\n            message='    ,  ?'\r\n        />\r\n    );\r\n};\r\n\r\nexport default NavigationBlocker;\r\n","import React from \"react\";\r\nimport FileInput from \"components/ui/FileInput\";\r\nimport APIRequest from \"api\";\r\nimport NavigationBlocker from \"components/common/NavigationBlocker\";\r\nimport {useHomework} from \"store\";\r\n\r\nconst HomeworkLoader = ({homework, deadline, lessonId}) => {\r\n    const isHomeworkSubmissionClosed = React.useCallback(() => deadline && new Date() >= deadline, [deadline]);\r\n    const [hasChanges, setChanges] = React.useState(false);\r\n    const onChange = React.useCallback((files) => {\r\n        console.log('files changed', files);\r\n        setChanges(true);\r\n    }, []);\r\n    const onSubmit = React.useCallback(async (files) => {\r\n        console.log('files submitted', files);\r\n        const file = files[0] ? files[0].id_file_name : null;\r\n        //TODO: add error alert\r\n        return APIRequest({\r\n            url: `/lessons/${lessonId}/homeworks/pupil`,\r\n            method: file ? 'PUT' : 'DELETE',\r\n            data: {\r\n                file\r\n            }\r\n        }).then(() => {\r\n            setChanges(false);\r\n        });\r\n        // return Promise.resolve();\r\n    }, [homework, lessonId, setChanges]);\r\n    return (\r\n        <div className=\"submission\">\r\n            {hasChanges && <NavigationBlocker/>}\r\n            <FileInput\r\n                maxFiles={1}\r\n                accept=\"image/*,audio/*,video/*\"\r\n                initialFiles={homework.files}\r\n                onChange={onChange}\r\n                onSubmit={onSubmit}\r\n                isDisabled={isHomeworkSubmissionClosed}/>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default HomeworkLoader;\r\n","import React from \"react\";\r\nimport File from \"components/ui/File\";\r\nimport VideoPlayer from \"components/common/VideoPlayer\";\r\nimport {renderDate} from \"definitions/helpers\";\r\nimport HomeworkLoader from \"./HomeworkLoader\";\r\n\r\nconst LessonView = ({lesson: {id, name, image_link: cover, video_link: video, description, assignment}, homework}) => {\r\n    return (\r\n        <div className=\"col-12 col-lg layout__content-block lesson-page__current-lesson\">\r\n            <div className=\"block-container video-container\">\r\n                <VideoPlayer video_link={video}/>\r\n            </div>\r\n            <div className=\"block-container description-container\">\r\n                <h2>{name}</h2>\r\n                <div className=\"description-text\">{description}</div>\r\n            </div>\r\n            {assignment && (\r\n                <div className=\"block-container hw-container\">\r\n                    <h3> </h3>\r\n                    <div className=\"assignment\">\r\n                        {assignment.files && (\r\n                            <div className=\"assignment__files file-container\">\r\n                                {assignment.files.map((assignment, i) => (\r\n                                    <File file={assignment} key={i}/>\r\n                                ))}\r\n                            </div>\r\n                        )}\r\n                        {assignment.description && <div className=\"description-text\">{assignment.description}</div>}\r\n                        {assignment.deadline &&\r\n                        <div className=\"assignment__deadline\">: {renderDate(assignment.deadline, renderDate.date)}</div>}\r\n                    </div>\r\n                    <HomeworkLoader\r\n                        homework={homework}\r\n                        deadline={assignment.deadline}\r\n                        lessonId={id}/>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default LessonView;\r\n","import React from \"react\";\r\nimport _ from \"lodash\";\r\nimport Page, {PageContent, PageLoadingPlaceholder} from \"components/Page\";\r\nimport ErrorPage from \"components/ErrorPage\";\r\nimport Lesson from \"components/common/Lesson\";\r\nimport List from \"components/common/List\";\r\nimport LessonView from \"./LessonView\";\r\nimport {useHomework, useLessons, useUserCourses} from \"store\";\r\n\r\nconst LessonPage = (props) => {\r\n    const {match: {params: {courseId: param_course, lessonId: param_lesson}}, location} = props;\r\n    const courseId = parseInt(param_course);\r\n    const lessonId = parseInt(param_lesson);\r\n\r\n    const {courses, error, retry} = useUserCourses();\r\n    // const {teachers, error: errorLoadingTeachers, retry: reloadTeachers} = useTeachers();\r\n    const {lessons, error: errorLoadingLessons, retry: reloadLessons} = useLessons(courseId);\r\n    const {homework, error: errorLoadingHomework, retry: reloadHomework} = useHomework(lessonId);\r\n    const renderLesson = (lesson) => {\r\n        const {id, locked} = lesson;\r\n        return (\r\n            <Lesson\r\n                lesson={lesson}\r\n                locked={locked}\r\n                selectable={!locked}\r\n                key={id}\r\n                link={`../${lesson.id}/`}>\r\n            </Lesson>\r\n        );\r\n    };\r\n\r\n    if (courses && lessons && homework) {\r\n        const course = _.find(courses, {id: courseId});\r\n        const selectedLesson = (course && _.find(lessons, {id: lessonId})) || null;\r\n        if (selectedLesson && !selectedLesson.locked) {\r\n            let nextVideo = lessons[selectedLesson.num];\r\n            if (!nextVideo || nextVideo.locked)\r\n                nextVideo = null;\r\n            const otherLessons = _.sortBy(lessons.filter(lesson => (\r\n                lesson.id !== selectedLesson.id && (nextVideo ? lesson.id !== nextVideo.id : true\r\n                ))), 'num');\r\n            return (\r\n                <Page title={`${selectedLesson.title}`} className=\"lesson-page\" location={location}>\r\n                    <PageContent parentSection={{name: course.name}}>\r\n                        <div className=\"layout__content-block\">\r\n                            <div className=\"container p-lg-0\">\r\n                                <div className=\"row\">\r\n                                    <LessonView lesson={selectedLesson} homework={homework}/>\r\n                                    <div className=\"col-12 col-lg-auto layout__content-block lesson-page__other-lessons\">\r\n                                        {nextVideo && <h3> </h3>}\r\n                                        {nextVideo && (\r\n                                            <List renderItem={renderLesson}>{[nextVideo]}</List>\r\n                                        )}\r\n                                        {(otherLessons && otherLessons.length > 0) && (\r\n                                            <React.Fragment>\r\n                                                <h3> </h3>\r\n                                                <List\r\n                                                    renderItem={renderLesson}>\r\n                                                    {otherLessons}\r\n                                                </List>\r\n                                            </React.Fragment>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </PageContent>\r\n                </Page>\r\n            );\r\n        } else\r\n            return <ErrorPage errorCode={404} message=\"  \" />;\r\n    } else {\r\n        return (\r\n            <Page\r\n                location={location}>\r\n                <PageLoadingPlaceholder/>\r\n            </Page>\r\n        );\r\n    }\r\n};\r\n\r\nexport default LessonPage;\r\n","import React from 'react';\r\nimport _ from 'lodash';\r\nimport { Switch, Route } from \"react-router-dom\";\r\nimport {MY_COURSES} from \"data/test_data\";\r\nimport {LEARNING_STATUS} from \"definitions/constants\";\r\nimport CatalogPage from \"./catalog-page\";\r\nimport CoursePage from \"./course-page\";\r\nimport LessonPage from \"./lesson-page\";\r\n\r\nexport default class MyCourses extends React.Component {\r\n    state = {\r\n        courses: _.sortBy(MY_COURSES, (course) => course.status === LEARNING_STATUS.finished ? 1 : 0)\r\n    };\r\n\r\n    render() {\r\n        const {match} = this.props;\r\n        const {courses} = this.state;\r\n        return (\r\n            <Switch>\r\n                <Route path={`${match.path}/:courseId/:lessonId`} render={(props) => (\r\n                    <LessonPage catalog={courses}\r\n                                {...props}/>\r\n                )}/>\r\n                <Route path={`${match.path}/:id`} render={(props) => (\r\n                    <CoursePage\r\n                        catalog={courses}\r\n                        path={match.path}\r\n                        {...props}/>\r\n                )}/>\r\n                <Route exact path={`${match.path}`} render={(props) => (\r\n                    <CatalogPage catalog={courses} {...props}/>\r\n                )}/>\r\n            </Switch>\r\n        )\r\n    }\r\n}\r\n","import React from 'react';\r\nimport {CSSTransition} from \"react-transition-group\";\r\nimport {HashRouter as Router, Redirect, Route, Switch, useHistory, useLocation} from \"react-router-dom\";\r\nimport Header from \"./Header\";\r\nimport SideBar from \"./SideBar\";\r\nimport Page from \"./Page\";\r\nimport {useRefValue} from \"hooks/common\";\r\nimport GlobalStore, {useUser} from \"store\";\r\n\r\nimport Login from \"./pages/login\";\r\nimport Account from \"./pages/account\";\r\nimport Teachers from \"./pages/teachers\";\r\nimport Shop from \"./pages/shop\";\r\nimport MyCourses from \"./pages/courses\";\r\n\r\nimport 'sass/index.scss';\r\n\r\nfunction useLocationChangeEffect(effect) {\r\n    const history = useHistory();\r\n    React.useEffect(() => {\r\n        return history.listen(effect);\r\n    }, [history, effect]);\r\n}\r\n\r\nfunction useScrollToTop() {\r\n    const [getPrevPath, setPrevPath] = useRefValue(useLocation().pathname);\r\n    const onLocationChange = React.useCallback((location, action) => {\r\n        console.log('update');\r\n        if (getPrevPath() !== location.pathname && action !== 'POP') {\r\n            window.scrollTo(0, 0);\r\n        }\r\n        setPrevPath(location.pathname);\r\n    }, [getPrevPath, setPrevPath]);\r\n    useLocationChangeEffect(onLocationChange);\r\n}\r\n\r\nfunction useForceTrailingSlash() {\r\n    const location = useLocation();\r\n    const history = useHistory();\r\n    const path = location.pathname;\r\n    if (path.slice(-1) !== '/') {\r\n        history.replace(path + '/');\r\n    }\r\n}\r\n\r\nfunction useSideBarState() {\r\n    const [isSideBarOpened, setSideBar] = React.useState(false);\r\n    const toggleSideBar = React.useCallback(() => {\r\n        setSideBar(opened => !opened);\r\n    }, []);\r\n    return [isSideBarOpened, toggleSideBar];\r\n}\r\n\r\nconst onLocationChange = (location, args) => {\r\n    console.log(`- - - location: '${location.pathname}'`, args);\r\n};\r\n\r\nfunction App() {\r\n    // routing effects\r\n    useForceTrailingSlash();\r\n    useScrollToTop();\r\n    useLocationChangeEffect(onLocationChange);\r\n\r\n    const [isSideBarOpened, toggleSideBar] = useSideBarState();\r\n    const {user, userInfo} = useUser();\r\n    const showSidebar = user !== null;\r\n    return (\r\n        <div className=\"app\">\r\n            <Header\r\n                onMenuButtonClick={toggleSideBar}\r\n                user={user}\r\n                sidebar={showSidebar}/>\r\n            <CSSTransition\r\n                in={isSideBarOpened}\r\n                timeout={200}\r\n                classNames={App.layoutAnimationClassNames}>\r\n                <div className=\"layout\">\r\n                    <React.Fragment>\r\n                        {showSidebar && (\r\n                            <SideBar\r\n                                accountRoles={user ? (userInfo ? userInfo.roles : undefined) : null}\r\n                                onMenuClose={toggleSideBar}/>\r\n                        )}\r\n                        <Switch>\r\n                            <Route exact path=\"/\" render={() => <Redirect to=\"/courses\"/>}/>\r\n                            <Route path=\"/login\" component={Login}/>\r\n                            <Route path=\"/courses\" component={MyCourses}/>\r\n                            <Route path=\"/shop\" component={Shop}/>\r\n                            <Route path=\"/teachers\" component={Teachers}/>\r\n                            <Route path=\"/account\" component={Account}/>\r\n                            <Route path=\"/:section\" component={Page}/>\r\n                        </Switch>\r\n                    </React.Fragment>\r\n                </div>\r\n            </CSSTransition>\r\n        </div>\r\n    );\r\n}\r\n\r\nApp.layoutAnimationClassNames = {\r\n    enter: 'sidebar-opened',\r\n    enterActive: 'sidebar-opened',\r\n    enterDone: 'sidebar-opened',\r\n    exit: 'sidebar-hiding',\r\n    exitActive: 'sidebar-hiding'\r\n};\r\n\r\nexport default () => (\r\n    <Router basename={process.env.REACT_APP_BASE_URL}>\r\n        <GlobalStore>\r\n            <App/>\r\n        </GlobalStore>\r\n    </Router>\r\n);\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import 'definitions/polyfills';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from 'components/App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/dummy_poster.f51c6af6.jpg\";"],"sourceRoot":""}