(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{217:function(e,t,a){e.exports=a.p+"static/media/logo.54b51040.svg"},230:function(e,t,a){e.exports=a(498)},497:function(e,t,a){},498:function(e,t,a){"use strict";a.r(t);a(231),a(240);var n=a(216);Object(n.a)(window);var r=a(0),c=a.n(r),s=a(45),o=a.n(s),l=a(5),i=a(500),u=a(60),m=a(18),d=a(217),f=a.n(d),p=a(15),v=a.n(p),b=a(27),h=a(24),E=a(29),g=a(25),_=a(137),O=a.n(_);function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var N="https://egehackbottest.tk:8080",k=O.a.create({baseURL:N});k.interceptors.request.use(function(e){if(S.user)return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(a,!0).forEach(function(t){Object(g.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({auth:{username:S.user.uid,password:S.user.hash}},e);throw new O.a.Cancel("User not logged in.")}),k.interceptors.response.use(function(e){return e.data}),window.APIRequest=k;var y=k,w="ege-hack-user-data",C={login:"auth.login",logout:"auth.logout"},x=!1,S=new(function(){function e(){var t=this;Object(h.a)(this,e),this.user=null,this.eventHandlers={},this.login=function(){var e=Object(b.a)(v.a.mark(function e(a){var n,r,c,s,o;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(VK){e.next=2;break}return e.abrupt("return");case 2:for(x||VK.init({apiId:"7178754"}),console.info("Login",a),localStorage.setItem(w,JSON.stringify(a)),t.user=a,n=!0,r=!1,c=void 0,e.prev=9,s=(t.eventHandlers[C.login]||[])[Symbol.iterator]();!(n=(o=s.next()).done);n=!0)(0,o.value)(t.user);e.next=17;break;case 13:e.prev=13,e.t0=e.catch(9),r=!0,c=e.t0;case 17:e.prev=17,e.prev=18,n||null==s.return||s.return();case 20:if(e.prev=20,!r){e.next=23;break}throw c;case 23:return e.finish(20);case 24:return e.finish(17);case 25:case"end":return e.stop()}},e,null,[[9,13,17,25],[18,,20,24]])}));return function(t){return e.apply(this,arguments)}}(),this.logout=function(){console.info("Logout"),localStorage.removeItem(w),t.user=null,t.userInfo=null;var e=!0,a=!1,n=void 0;try{for(var r,c=(t.eventHandlers[C.logout]||[])[Symbol.iterator]();!(e=(r=c.next()).done);e=!0){(0,r.value)()}}catch(s){a=!0,n=s}finally{try{e||null==c.return||c.return()}finally{if(a)throw n}}};try{var a=localStorage.getItem(w);if(!a)return void(this.user=null);var n=JSON.parse(a),r=n.uid,c=n.first_name,s=n.last_name,o=n.photo,l=n.photo_rec,i=n.hash;if(!r||!i)throw new Error("Incomplete data parsed from local storage: ".concat(a));this.user={uid:r,first_name:c,last_name:s,photo:o,photo_rec:l,hash:i}}catch(u){console.error("User data can not be recovered",u),localStorage.removeItem(w),this.user=null}}return Object(E.a)(e,[{key:"subscribe",value:function(e,t){(this.eventHandlers[e]||(this.eventHandlers[e]=[])).push(t)}},{key:"unsubscribe",value:function(e,t){this.eventHandlers[e]=this.eventHandlers[e].filter(function(e){return e!==t})}},{key:"getUser",value:function(){return this.user}},{key:"getUserInfo",value:function(){var e=Object(b.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.userInfo){e.next=2;break}return e.abrupt("return",this.userInfo);case 2:return e.prev=2,e.next=5,y.get("/accounts/info");case 5:this.userInfo=e.sent,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0),this.userInfo=null;case 12:return e.abrupt("return",this.userInfo);case 13:case"end":return e.stop()}},e,this,[[2,8]])}));return function(){return e.apply(this,arguments)}}()},{key:"loginWidget",value:function(e){VK&&(x||VK.init({apiId:"7178754"}),VK.Widgets.Auth(e,{onAuth:this.login}))}}]),e}()),P=function(e){var t=e.src,a=e.className,n=e.children,r=e.square,s=void 0!==r&&r,o=e.round,l=void 0!==o&&o;return c.a.createElement("div",{className:"".concat(a," cover ").concat(s?"square-cover":""," ").concat(l?"round-cover":"")},c.a.createElement("div",{className:"cover-img",style:{backgroundImage:"url(".concat(t,")")}}),n)},D=function(e){var t=e.onMenuButtonClick,a=e.user,n=e.sidebar;return c.a.createElement("header",null,c.a.createElement("div",{className:"container-fluid header__container"},c.a.createElement("div",{className:"row"},n&&c.a.createElement("div",{className:"col-auto d-lg-none"},c.a.createElement("div",{className:"nav-btn",onClick:t},c.a.createElement("i",{className:"icon-bars"}))),c.a.createElement("div",{className:"col d-flex justify-content-center justify-content-lg-start p-0"},c.a.createElement("div",{className:"logo-container container d-flex align-items-center justify-content-center m-0"},c.a.createElement("img",{src:f.a,className:"logo",alt:"Logo"}))),c.a.createElement("div",{className:"col-auto"},c.a.createElement("div",{className:"user-nav"},a?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"user-nav__user-name"},a.first_name," ",a.last_name),a.photo_rec?c.a.createElement("div",{className:"nav-btn"},c.a.createElement(P,{src:a.photo_rec,round:!0,square:!0})):c.a.createElement("div",{className:"nav-btn"},c.a.createElement("i",{className:"icon-profile"})),c.a.createElement("div",{className:"user-nav__menu-container"},c.a.createElement("div",{className:"user-nav__menu"},c.a.createElement("div",{className:"user-nav__menu-options"},c.a.createElement(m.b,{to:"/account/",className:"menu-option"},c.a.createElement("i",{className:"icon-profile"}),"\u0410\u043a\u043a\u0430\u0443\u043d\u0442"),c.a.createElement(m.b,{to:"/account/settings/",className:"menu-option"},c.a.createElement("i",{className:"icon-settings"}),"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),c.a.createElement("div",{className:"menu-option",tabIndex:2,onClick:S.logout},c.a.createElement("i",{className:"icon-logout"}),"\u0412\u044b\u0445\u043e\u0434"))))):c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"nav-btn"},c.a.createElement("i",{className:"icon-profile"})),c.a.createElement("div",{className:"user-nav__menu-container"},c.a.createElement("div",{className:"user-nav__menu"},c.a.createElement("div",{className:"user-nav__menu-options"},c.a.createElement(m.b,{to:"/login/",className:"menu-option"},c.a.createElement("i",{className:"icon-login"}),"\u0412\u043e\u0439\u0442\u0438"))))))))))},I=a(31),L=a(21),F=a(30);function B(e){var t=e.contacts,a=t.vk,n=t.fb,r=t.ok,s=t.ig;return c.a.createElement("div",{className:"social-media font-light-grey"},a&&c.a.createElement("a",{href:a,className:"social-media__link"},c.a.createElement("i",{className:"fab fa-vk vk"})),n&&c.a.createElement("a",{href:n,className:"social-media__link"},c.a.createElement("i",{className:"fab fa-facebook-f fb"})),r&&c.a.createElement("a",{href:r,className:"social-media__link"},c.a.createElement("i",{className:"fab fa-odnoklassniki ok"})),s&&c.a.createElement("a",{href:s,className:"social-media__link"},c.a.createElement("i",{className:"fab fa-instagram ig"})))}function z(e){return c.a.createElement(m.c,Object.assign({className:"layout__sidebar-menu-link",activeClassName:"active"},e))}var A=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(I.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(r)))).onClick=function(e){(e.target===e.currentTarget||e.target.classList.contains("layout__sidebar-menu-link"))&&a.props.onMenuClose()},a}return Object(F.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"layout__sidebar",onClick:this.onClick},c.a.createElement("div",{className:"layout__sidebar-bar"},c.a.createElement("div",{className:"layout__sidebar-content"},c.a.createElement("div",{className:"layout__sidebar-menu"},c.a.createElement("div",{className:"layout__sidebar-menu-section"},c.a.createElement(z,{to:"/courses/"},"\u041c\u043e\u0438 \u043a\u0443\u0440\u0441\u044b")),c.a.createElement("div",{className:"layout__sidebar-menu-section"},c.a.createElement(z,{to:"/shop/"},"\u041c\u0430\u0433\u0430\u0437\u0438\u043d \u043a\u0443\u0440\u0441\u043e\u0432"),c.a.createElement(z,{to:"/teachers/"},"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438"))),c.a.createElement(B,{contacts:{vk:"/",fb:"/",ig:"/"}}),c.a.createElement("div",{className:"layout__sidebar-copyright font-size-sm font-light-grey"},"\u0412\u0441\u0435 \u043f\u0440\u0430\u0432\u0430 \u0437\u0430\u0449\u0438\u0449\u0435\u043d\u044b",c.a.createElement("br",null),'"\u0415\u0413\u042dHACK"'))))}}]),t}(c.a.Component),T=a(4),M=a(220),R=a(221),U=a.n(R),H=a(222),V=a(88),W=a.n(V),J=a(7),q=a.n(J),K={learning:"learning",finished:"finished"};function G(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?G(a,!0).forEach(function(t){Object(g.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):G(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var $=new H.LoremIpsum;function Q(e){var t=new Date;return t.setDate(t.getDate()+e),t}var X=[{id:1,name:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439 \u044f\u0437\u044b\u043a"},{id:2,name:"\u041b\u0438\u0442\u0435\u0440\u0430\u0442\u0443\u0440\u0430"},{id:3,name:"\u041c\u0430\u0442\u0435\u043c\u0430\u0442\u0438\u043a\u0430"},{id:4,name:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0442\u0438\u043a\u0430"},{id:5,name:"\u0424\u0438\u0437\u0438\u043a\u0430"},{id:6,name:"\u0425\u0438\u043c\u0438\u044f"},{id:7,name:"\u0411\u0438\u043e\u043b\u043e\u0433\u0438\u044f"},{id:8,name:"\u041e\u0431\u0449\u0435\u0441\u0442\u0432\u043e\u0437\u043d\u0430\u043d\u0438\u0435"},{id:9,name:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f"},{id:10,name:"\u0413\u0435\u043e\u0433\u0440\u0430\u0444\u0438\u044f"},{id:11,name:"\u0410\u043d\u0433\u043b\u0438\u0439\u0441\u043a\u0438\u0439 \u044f\u0437\u044b\u043a"},{id:12,name:"\u041d\u0435\u043c\u0435\u0446\u043a\u0438\u0439 \u044f\u0437\u044b\u043a"},{id:13,name:"\u0424\u0440\u0430\u043d\u0446\u0443\u0437\u0441\u043a\u0438\u0439 \u044f\u0437\u044b\u043a"},{id:14,name:"\u041a\u0438\u0442\u0430\u0439\u0441\u043a\u0438\u0439 \u044f\u0437\u044b\u043a"},{id:15,name:"\u0418\u0441\u043f\u0430\u043d\u0441\u043a\u0438\u0439 \u044f\u0437\u044b\u043a"}],Z=[{id:154792439,vk_info:{id:154792439,first_name:"Alexandra",last_name:"Petrova",photo_max_orig:"https://sun9-44.userapi.com/2Gx1eh3eOObO2tKqf0h3fuCDU0GEOjenhYUrjg/Q8hXPVStYbc.jpg?ava=1"},subjects:[{id:1,name:"\u041c\u0430\u0442\u0435\u043c\u0430\u0442\u0438\u043a\u0430",description:"\u041b\u0443\u0447\u0448\u0438\u0439 \u043f\u0440\u0435\u0434\u043c\u0435\u0442",image_link:"/files/asdsadasda.jpg"}]},{id:1,vk_info:{id:1,first_name:"\u0415\u043b\u0435\u043d\u0430",last_name:"\u0427\u0435\u0440\u0442\u043a\u043e\u0432\u0430",photo_max_orig:W.a},subjects:X.slice(0,2),contacts:{vk:"/",fb:"/",ok:"/",ig:"/"},bio:$.generateSentences(1)},{id:2,vk_info:{id:2,first_name:"\u0421\u0435\u0440\u0433\u0435\u0439",last_name:"\u0410\u0432\u0434\u043e\u0448\u0438\u043d",photo_max_orig:W.a},subjects:[X[3]],contacts:{vk:"/",fb:"/",ok:"/",ig:"/"},bio:$.generateSentences(1)}],ee=X.slice(0,5).map(function(e,t){return{name:"".concat(e.name,". \u041c\u0430\u0441\u0442\u0435\u0440 \u0433\u0440\u0443\u043f\u043f\u0430. \u0410\u043f\u0440\u0435\u043b\u044c."),id:t,subject_id:e.id,online:t<=2,image_link:W.a,date_start:Q(7+t),date_end:Q(7+t),description:$.generateParagraphs(1),lessons:q.a.times(4,function(e){return{num:e+1,id:e,name:"\u0417\u0430\u043d\u044f\u0442\u0438\u0435 ".concat(e+1),description:$.generateParagraphs(1),image_link:W.a,video_link:"375255364",locked:-4+t+e>0,hometask:{description:$.generateParagraphs(1),files:[{name:"\u0417\u0430\u0434\u0430\u043d\u0438\u0435",url:"/robots.txt"},{name:"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435",url:"/robots.txt"}],deadline:new Date(0)}}}),teacher_ids:t<=2?[Z[0].id]:Z.map(function(e){return e.id})}}),te={catalog:ee.map(function(e,t){return Y({},e,{price:2500,discount:0===t?1e3:void 0})})},ae=ee.map(function(e,t){return Y({},e,{lessons:e.lessons.map(function(e,t){return Y({},e,{watchProgress:e.locked?void 0:100-15*t,homework:{files:[{name:"\u0417\u0430\u0434\u0430\u043d\u0438\u0435",url:"/robots.txt"},{name:"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435",url:"/robots.txt"}],description:$.generateParagraphs(1),deadline:Q(7),submit:!0,submittedFiles:[{original_file_name:"5_64x64.png",id_file_name:"501371cc-f349-11e9-aa47-7990bff4dcd7.png",file_link:"/files/601371cc-f349-11e9-aa47-7990bff4dcd7.png"}]}})}),status:t<=2?K.finished:K.learning})});function ne(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function re(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ne(a,!0).forEach(function(t){Object(g.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ne(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ce=c.a.createContext(null);var se=function(){return c.a.useState(null)},oe=function(){return c.a.useState(null)},le=function(){return c.a.useState(null)},ie=function(){return c.a.useState({})};var ue={};function me(){var e=c.a.useContext(ce),t=e.data.subjects,a=e.setters.setSubjects,n=c.a.useState(null),r=Object(l.a)(n,2),s=r[0],o=r[1],i=c.a.useCallback(Object(b.a)(v.a.mark(function e(){var t,n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!ue.subjects){e.next=2;break}return e.abrupt("return",ue.subjects);case 2:return t=y.get("/subjects"),ue.subjects=t,e.prev=4,s&&o(null),e.next=8,t;case 8:n=e.sent,a(n),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),console.error(e.t0),o(e.t0);case 16:return e.prev=16,delete ue.subjects,e.finish(16);case 19:return e.abrupt("return",t);case 20:case"end":return e.stop()}},e,null,[[4,12,16,19]])})),[s]);return c.a.useEffect(function(){t||ue.subjects||s||i()},[t,s]),s?{subjects:t,error:s,retry:i}:{subjects:t}}function de(){var e=me(),t=e.subjects,a=e.errorLoadingSubjects,n=e.reloadSubjects,r=c.a.useContext(ce),s=r.data.teachers,o=r.setters.setTeachers,i=c.a.useState(null),u=Object(l.a)(i,2),m=u[0],d=u[1],f=c.a.useCallback(Object(b.a)(v.a.mark(function e(){var t,a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!ue.teachers){e.next=2;break}return e.abrupt("return",ue.teachers);case 2:return t=y.get("/accounts/teachers"),ue.teachers=t,e.prev=4,m&&d(null),e.next=8,t;case 8:e.t0=function(e){return re({id:e.account_id},Object(T.a)(e,["account_id"]))},a=e.sent.map(e.t0),console.log("set teachers",a),o(a),e.next=18;break;case 14:e.prev=14,e.t1=e.catch(4),console.error(e.t1),d(e.t1);case 18:return e.prev=18,delete ue.teachers,e.finish(18);case 21:return e.abrupt("return",t);case 22:case"end":return e.stop()}},e,null,[[4,14,18,21]])})),[m]);return c.a.useEffect(function(){s||ue.teachers||m||f()},[s,m]),m||a?{teachers:s,subjects:t,error:m||a,retry:function(){m&&f(),a&&n()}}:{teachers:s,subjects:t}}function fe(){var e=me(),t=e.subjects,a=e.errorLoadingSubjects,n=e.reloadSubjects,r=c.a.useContext(ce),s=r.data.catalog,o=r.setters.setCatalog,i=c.a.useState(null),u=Object(l.a)(i,2),m=u[0],d=u[1],f=c.a.useCallback(Object(b.a)(v.a.mark(function e(){var t,a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!ue.shopCatalog){e.next=2;break}return e.abrupt("return",ue.shopCatalog);case 2:return t=y.get("/courses",{params:{group:"MARKET"}}),ue.shopCatalog=t,e.prev=4,m&&d(null),e.next=8,t;case 8:e.t0=function(e){var t=e.date_start,a=e.date_end,n=e.image_link,r=e.teacher_id,c=Object(T.a)(e,["date_start","date_end","image_link","teacher_id"]);return re({date_start:new Date(t),date_end:new Date(a),image_link:"".concat(N).concat(n),teacher_ids:[r]},c)},a=e.sent.map(e.t0),o(a),e.next=17;break;case 13:e.prev=13,e.t1=e.catch(4),console.error(e.t1),d(e.t1);case 17:return e.prev=17,delete ue.shopCatalog,e.finish(17);case 20:return e.abrupt("return",t);case 21:case"end":return e.stop()}},e,null,[[4,13,17,20]])})),[m]);return c.a.useEffect(function(){s||ue.shopCatalog||m||f()},[s,m]),m||a?{catalog:s,subjects:t,error:m||a,retry:function(){m&&f(),a&&n()}}:{catalog:s,subjects:t}}var pe=function(e){var t=e.children,a=function(){var e=c.a.useState(S.getUser()),t=Object(l.a)(e,2),a=t[0],n=t[1],r=c.a.useState(null),s=Object(l.a)(r,2),o=s[0],i=s[1];c.a.useEffect(function(){a&&function(){var e=Object(b.a)(v.a.mark(function e(){var t;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.getUserInfo();case 2:t=e.sent,i(t);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[a]);var u=c.a.useCallback(function(e,t){n(e)},[]),m=c.a.useCallback(function(){n(null),i(null)},[]);return c.a.useLayoutEffect(function(){return S.subscribe(C.login,u),S.subscribe(C.logout,m),function(){S.unsubscribe(C.login,u),S.unsubscribe(C.logout,m)}},[u,m]),[a,o]}(),n=Object(l.a)(a,2),r=n[0],s=n[1],o=function(){var e=se(),t=Object(l.a)(e,2),a=t[0],n=t[1],r=oe(),c=Object(l.a)(r,2),s=c[0],o=c[1],i=le(),u=Object(l.a)(i,2),m=u[0],d=u[1],f=ie(),p=Object(l.a)(f,2);return{data:{catalog:a,subjects:s,teachers:m,lessons:p[0]},setters:{setCatalog:n,setSubjects:o,setTeachers:d,setLessons:p[1]}}}();return c.a.createElement(ce.Provider,{value:re({user:r,userInfo:s},o)},t)};function ve(){var e=c.a.useContext(ce);return{user:e.user,userInfo:e.userInfo}}var be=function(){return c.a.createElement("div",{className:"layout__content"},c.a.createElement("div",{className:"layout__loading-spinner"},c.a.createElement("i",{className:"spinner-border"})))},he=function(e){var t=e.to,a=e.arrow,n=void 0===a||a,r=e.forward,s=void 0===r||r,o=e.className,l=e.children,i=Object(T.a)(e,["to","arrow","forward","className","children"]);return c.a.createElement(m.b,Object.assign({className:"".concat(n?"arrow-link":""," ").concat(s?"arrow-link-forward":"arrow-link-backward"," ").concat(o||""),to:t},i),l)},Ee=function(e){var t=e.children,a=e.className,n=e.parentSection;return c.a.createElement("div",{className:"layout__content-container container ".concat(a||"")},n&&c.a.createElement(he,{to:n.url||"..",forward:!1,className:"layout__content-parent-section-link"},n.name),t)},ge=function(e){var t=e.children,a=e.className,n=Object(T.a)(e,["children","className"]);return c.a.createElement(U.a,Object.assign({mode:"bottom"},n),c.a.createElement("div",{className:"layout__bottom-tab ".concat(a||"")},t))},_e=(c.a.Component,function(e){var t=e.title,a=e.className,n=e.children,r=e.checkLogin,s=void 0===r||r,o=e.location,l=ve(),i=l.user;l.userInfo;return s&&!i?c.a.createElement(u.b,{to:{pathname:"/login/",state:o?{referrer:o.pathname}:void 0}}):c.a.createElement("div",{className:"layout__content ".concat(a||"")},t&&c.a.createElement(M.Helmet,null,c.a.createElement("title",null,t," \u2013 \u0415\u0413\u042d HACK")),n)});function Oe(e){var t=c.a.useRef(null),a=c.a.useState("complete"===document.readyState),n=Object(l.a)(a,2),r=n[0],s=n[1];return c.a.useEffect(function(){if(e){if(window.addEventListener("resize",n),r)return function(){window.removeEventListener("resize",n)};if("complete"===document.readyState)return s(!0),function(){window.removeEventListener("resize",n)};var a=function(){s(!0)};return window.addEventListener("load",a),function(){window.removeEventListener("load",a)}}function n(){t.current&&t.current.onResize()}},[r,e]),[t,r]}function je(e){var t=c.a.useRef(e);return[c.a.useCallback(function(){return t.current},[]),c.a.useCallback(function(e){t.current=e},[])]}function Ne(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=c.a.useRef(!0);c.a.useEffect(function(){a.current||e()},t),c.a.useEffect(function(){a.current=!1},[])}var ke=function(e){var t=e.location,a=ve(),n=a.user;a.userInfo;return c.a.useLayoutEffect(function(){S.loginWidget("vk-auth")},[]),n?t.state&&t.state.referrer?c.a.createElement(u.b,{to:t.state.referrer}):c.a.createElement(u.b,{to:"/shop/"}):c.a.createElement(_e,{title:"\u0412\u0445\u043e\u0434",className:"login-page align-items-center justify-content-center",checkLogin:!1,location:t},c.a.createElement("div",{id:"vk-auth"}))},ye=function(e){var t=e.first_name,a=e.last_name,n=e.photo,r=e.contacts,s=e.about,o=e.role,l="".concat(t," ").concat(a);return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"user-profile__avatar-container"},c.a.createElement("div",{className:"user-profile__avatar-wrap"},c.a.createElement(P,{src:n,className:"user-profile__avatar",round:!0,square:!0}))),c.a.createElement("div",{className:"user-profile__info layout__content-block"},c.a.createElement("div",{className:"d-flex flex-column align-items-center"},c.a.createElement("h2",null,l),o&&c.a.createElement("div",{className:"font-size-sm"},o),r&&c.a.createElement(B,{contacts:r}),c.a.createElement("div",{className:"description-text font-size-sm"},s))))},we=function(){var e=ve(),t=e.user;e.userInfo;return c.a.createElement(_e,{title:"\u0410\u043a\u043a\u0430\u0443\u043d\u0442",className:"account-page"},c.a.createElement(Ee,null,c.a.createElement(ye,t)))},Ce=a(107);function xe(e){var t=e.preview,a=e.title,n=e.subtitle,r=e.description,s=e.item,o=e.selectable,i=e.className,u=e.children,d=e.link,f=e.onClick,p=e.onActionClick,v=e.callbackProps,b=Oe(r),h=Object(l.a)(b,2),E=h[0],g=h[1],_=c.a.useCallback(function(e){var t=o&&!(p&&e.target.closest(".list__item-action"));t&&f?f(s,v):!t&&d&&e.preventDefault()},[s,f,o,v,d,p]),O=c.a.useCallback(function(e){o&&p&&p(s,v)},[s,p,o,v]),j=c.a.createElement("div",{className:"row align-items-center"},c.a.createElement("div",{className:"list__item-preview col-12 col-md-auto"},t),c.a.createElement("div",{className:"list__item-description col align-self-stretch"},c.a.createElement("div",{className:"list__item-description-inner"},c.a.createElement("div",{className:"title font-size-lg"},a),n&&c.a.createElement("div",{className:"subtitle"},n),r&&c.a.createElement("div",{className:"description-container font-size-xs"},c.a.createElement("div",{className:"description-text"},g?c.a.createElement(Ce.a,{lines:2,ref:E},r):null)))),u&&c.a.createElement("div",{className:"list__item-action col-auto d-flex align-items-center flex-column",onClick:O},u));return d?c.a.createElement(m.b,{className:"list__item container ".concat(o?"list__item-selectable":""," ").concat(i||""),to:d,onClick:_},j):c.a.createElement("div",{className:"list__item container ".concat(o?"list__item-selectable":""," ").concat(i||""),onClick:_},j)}function Se(e){var t=e.children,a=e.renderItem,n=e.renderProps,r=e.flex,s=e.className;return r?c.a.createElement("div",{className:"".concat(s||""," list")},c.a.createElement("div",{className:"container p-0 overflow-hidden"},c.a.createElement("div",{className:"row"},t.map(function(e,t){return a(e,n,t)})))):c.a.createElement("div",{className:"".concat(s||""," list")},t.map(function(e,t){return a(e,n,t)}))}Se.defaultProps={renderItem:function(e,t,a){return c.a.createElement(xe,Object.assign({},e,t,{key:a}))}};var Pe=a(73),De=a(223),Ie=function(e){return c.a.createElement("div",Object.assign({},e,{className:"track track-vertical"}))},Le=function(e){return c.a.createElement("div",Object.assign({},e,{className:"thumb thumb-vertical"}))},Fe=function(e){return c.a.createElement("div",Object.assign({},e,{className:"track track-horizontal"}))},Be=function(e){return c.a.createElement("div",Object.assign({},e,{className:"thumb thumb-horizontal"}))},ze=c.a.forwardRef(function(e,t){var a=e.children,n=Object(T.a)(e,["children"]);return c.a.createElement(De.Scrollbars,Object.assign({renderTrackVertical:Ie,renderThumbVertical:Le,renderTrackHorizontal:Fe,renderThumbHorizontal:Be,ref:t},n),a)});function Ae(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Te(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ae(a,!0).forEach(function(t){Object(g.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ae(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Me=function(e){return c.a.createElement(Pe.a.DropdownIndicator,e,c.a.createElement("i",{className:"icon-angle"}))},Re=function(e){var t=e.children,a=e.selectProps,n=e.hasValue,r=e.setValue,s=Object(T.a)(e,["children","selectProps","hasValue","setValue"]);return c.a.createElement("div",{className:"select"},c.a.createElement(Pe.a.SelectContainer,Object.assign({selectProps:Te({},a,{isClearable:!1}),hasValue:n,setValue:r},s),t),a.isClearable&&c.a.createElement("div",{className:n?"select__clear-btn":"select__clear-btn select__clear-btn-hidden",onClick:function(){r(null)}},c.a.createElement("i",{className:"icon-close"})))},Ue=function(e){var t=e.content,a=Object(T.a)(e,["content"]);return c.a.createElement(Pe.a.Option,a,t||a.label)},He=function(e){function t(){return Object(h.a)(this,t),Object(I.a)(this,Object(L.a)(t).apply(this,arguments))}return Object(F.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){this.props.innerRef(this.scrollBar.view)}},{key:"render",value:function(){var e=this;return c.a.createElement(ze,{autoHeight:!0,hideTracksWhenNotNeeded:!0,ref:function(t){e.scrollBar=t},autoHeightMax:this.props.maxHeight},c.a.createElement(Pe.a.MenuList,this.props,this.props.children))}}]),t}(r.Component),Ve=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(I.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(r)))).onChange=function(e){a.props.callback(e?e.value:null,a.props.name)},a}return Object(F.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.options,n=e.value,r=e.components,s=e.selectProps,o=e.isClearable,l=void 0===o||o,i=e.isSearchable,u=void 0===i||i,m=e.placeholder;return c.a.createElement(Pe.b,Object.assign({name:t,options:a,maxMenuHeight:200,value:q.a.find(a,{value:n})||null,className:"select__container",classNamePrefix:"select",onChange:this.onChange,menuPlacement:"auto",noOptionsMessage:function(){return"\u041d\u0435\u0442 \u043e\u043f\u0446\u0438\u0439"},components:r?Te({Option:Ue,MenuList:He,DropdownIndicator:Me,SelectContainer:Re},r):{Option:Ue,MenuList:He,DropdownIndicator:Me,SelectContainer:Re},styles:{option:function(){return{}}},isClearable:l,isSearchable:u,placeholder:m},s))}}]),t}(c.a.PureComponent);function We(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"value";return c.a.useCallback(function(a){e(a.currentTarget[t],a.currentTarget.name,a)},[e,t])}var Je=function(e){var t=e.className,a=e.onChange,n=Object(T.a)(e,["className","onChange"]),r=We(a);return c.a.createElement("input",Object.assign({className:"input ".concat(t||""),onChange:r},n))};Object.assign(Je,{CheckBox:function(e){var t=e.value,a=e.onChange,n=e.name,r=e.label,s=Object(T.a)(e,["value","onChange","name","label"]),o=We(a,"checked");return c.a.createElement("label",{className:"input input-checkbox"},c.a.createElement("input",Object.assign({type:"checkbox",name:n,checked:t,onChange:o},s)),c.a.createElement("span",{className:"input__box"}),c.a.createElement("span",{className:"input__label"},r))},Select:Ve});var qe=Je;function Ke(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var Ge=c.a.createContext({}),Ye={Filter:function(e){var t=e.filterBy,a=(t=void 0===t?{}:t).subject,n=void 0===a||a,r=t.online,s=void 0===r||r,o=c.a.useContext(Ge),l=o.options,i=o.subject,u=o.online,m=o.onChange;return c.a.createElement("div",{className:"layout__content-block catalog__filters"},c.a.createElement("div",{className:"container p-0"},c.a.createElement("div",{className:"row"},n&&c.a.createElement("div",{className:"col-auto d-flex align-items-center"},c.a.createElement(qe.Select,{name:"subject",options:l,value:i,placeholder:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442",callback:m})),s&&c.a.createElement("div",{className:"col-auto d-flex align-items-center"},c.a.createElement(qe.CheckBox,{name:"online",value:u,label:"\u041e\u043d\u043b\u0430\u0439\u043d",onChange:m})))))},Catalog:function(e){var t=e.renderFunc,a=e.placeholder,n=(e.baseUrl,Object(T.a)(e,["renderFunc","placeholder","baseUrl"])),r=c.a.useContext(Ge),s=r.items,o=r.renderProps,l=c.a.useCallback(function(e){return t(e,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ke(a,!0).forEach(function(t){Object(g.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ke(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({link:"".concat(e.id,"/")},o))},[t,o]);return c.a.createElement("div",{className:"layout__content-block catalog__catalog"},s.length>0?c.a.createElement(Se,Object.assign({},n,{renderItem:l}),s):c.a.createElement("div",{className:"catalog__empty-catalog-fallback-message text-center font-size-sm"},a))},Body:function(e){var t=e.options,a=e.filterItems,n=e.children,r=e.renderProps,s=void 0===r?{}:r,o=Object(u.h)(),l=Object(u.i)(),i=new URLSearchParams(l.search),m=parseInt(i.get("subject"))||null,d="true"===i.get("online"),f=c.a.useCallback(function(e,t){var a=new URLSearchParams(l.search);e?a.set(t,e):a.delete(t),o.push({pathname:l.pathname,search:"?".concat(a)})},[l,o]),p=a(m,d);return c.a.createElement(Ge.Provider,{value:{options:t,subject:m,online:d,onChange:f,items:p,renderProps:s}},c.a.createElement("div",{className:"catalog"},n))}};function $e(e){var t=e.teacher,a=t.vk_info,n=a.first_name,r=a.last_name,s=a.photo_max_orig,o=t.contacts,l=t.subjects,i=t.bio,u=(e.subjects,e.link),d=e.bio,f=void 0!==d&&d,p=e.className,v=c.a.useCallback(function(e){e.target.closest(".social-media")},[]);return c.a.createElement(m.b,{to:u,className:"".concat(p," teacher-profile"),onClick:v},c.a.createElement("div",{className:"container p-0"},c.a.createElement("div",{className:"row flex-nowrap"},c.a.createElement("div",{className:"col-auto d-flex align-items-center"},c.a.createElement(P,{src:s,className:"teacher-profile__photo",round:!0,square:!0})),c.a.createElement("div",{className:"col d-flex flex-column justify-content-center"},c.a.createElement("h3",{className:"teacher-profile__name"},n," ",r),f&&c.a.createElement("div",{className:"teacher-profile__subjects font-size-sm"},l.map(function(e,t){var a=e.name;return 0===t?a:a.toLowerCase()}).join(", ")),o&&c.a.createElement(B,{contacts:o}))),f&&c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-12 description-text"},i))))}function Qe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var Xe=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Qe(a,!0).forEach(function(t){Object(g.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Qe(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},Ye,{Filter:function(e){return c.a.createElement(Ye.Filter,Object.assign({filterBy:{online:!1}},e))},Catalog:function(e){var t=c.a.useCallback(function(e,t){var a=t.link,n=t.subjects;return c.a.createElement("div",{className:"list__item col-12 col-md-6 d-flex",key:e.id},c.a.createElement($e,{teacher:e,subjects:n,bio:!0,link:a}))},[]);return c.a.createElement(Ye.Catalog,Object.assign({placeholder:"\u041d\u0435\u0442 \u043f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0435\u0439, \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u043c \u043f\u043e\u0438\u0441\u043a\u0430",flex:!0,renderFunc:t},e))},Body:function(e){var t=e.teachers,a=e.subjects,n=Object(T.a)(e,["teachers","subjects"]),r=c.a.useMemo(function(){q.a.zipObject(a.map(function(e){return e.id}),a);var e=q.a.reduce(t,function(e,t){return t.subjects.forEach(function(t){e[t.id]=t}),e},{});return q.a.values(e).map(function(e){return{value:e.id,label:e.name}})},[t,a]),s=c.a.useCallback(function(e){return t.filter(function(t){return!e||t.subjects.some(function(t){var a=t.id;return e===a})})},[t]);return c.a.createElement(Ye.Body,Object.assign({options:r,renderProps:{subjects:a},filterItems:s},n))}}),Ze=function(e){var t=e.location,a=de(),n=a.teachers,r=a.subjects;a.error,a.retry;return c.a.createElement(_e,{title:"\u041c\u043e\u0438 \u043a\u0443\u0440\u0441\u044b",className:"catalog teachers-catalog",location:t},n&&r?c.a.createElement(Xe.Body,{subjects:r,teachers:n},c.a.createElement(Ee,null,c.a.createElement(Xe.Filter,null),c.a.createElement(Xe.Catalog,null))):c.a.createElement(be,null))},et=function(e){var t=e.className,a=e.children,n=e.active,r=void 0===n||n,s=e.neutral,o=void 0!==s&&s,l=e.icon,i=e.iconAction,u=e.tag,m=void 0===u?"div":u,d=e.onClick,f=Object(T.a)(e,["className","children","active","neutral","icon","iconAction","tag","onClick"]);return c.a.createElement(m,Object.assign({className:"btn ".concat(r?"":"btn-inactive"," ").concat(o?"btn-neutral":""," ").concat(t||"")},f),c.a.createElement("span",{className:"btn__content"},l&&c.a.createElement("div",{className:"btn__after",onClick:i||d},l),c.a.createElement("span",{className:"btn__name",onClick:d},a)))},tt=function(e){var t=e.errorCode,a=e.message,n=e.link,r=(n=void 0===n?{}:n).text,s=n.url,o=t&&t.toString();return c.a.createElement(_e,{title:o,className:"error-page"},c.a.createElement("div",{className:"error-page__error-code"},o&&o.split("").map(function(e,t){return c.a.createElement("span",{key:t},e)})),c.a.createElement("div",{className:"error-page__error-message"},a||"\u041f\u043e\u0445\u043e\u0436\u0435, \u0432\u044b \u043f\u043e\u0442\u0435\u0440\u044f\u043b\u0438\u0441\u044c"),c.a.createElement(et,{tag:m.b,to:"".concat(s||"","/"),replace:!0,className:"btn"},r||"\u041d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"))};function at(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var nt=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?at(a,!0).forEach(function(t){Object(g.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):at(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},Ye,{Catalog:function(e){var t=e.renderCourse,a=Object(T.a)(e,["renderCourse"]);return c.a.createElement(Ye.Catalog,Object.assign({placeholder:"\u041d\u0435\u0442 \u043a\u0443\u0440\u0441\u043e\u0432, \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u043c \u043f\u043e\u0438\u0441\u043a\u0430",renderFunc:t},a))},Body:function(e){var t=e.courses,a=e.subjects,n=Object(T.a)(e,["courses","subjects"]),r=c.a.useMemo(function(){return a.map(function(e){return{value:e.id,label:e.name}})},[a]),s=c.a.useCallback(function(e,a){return t.filter(function(t){return(!e||t.subject_id===e)&&(!a||t.online===a)})},[t]);return c.a.createElement(Ye.Body,Object.assign({options:r,filterItems:s},n))}}),rt=function(e,t){var a=new Date(e.getYear(),e.getMonth(),e.getDate()).getTime(),n=new Date(t.getYear(),t.getMonth(),t.getDate()).getTime()-a;return Math.floor(n/864e5)},ct=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ru";return e.toLocaleString(a,t)};Object.assign(ct,{date:{day:"numeric",month:"long"},shortDate:{day:"numeric",month:"numeric"},hour:{hour:"numeric",minute:"numeric"}});var st=function(){var e=Object(b.a)(v.a.mark(function e(t,a){var n,r,c;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!navigator.msSaveBlob){e.next=7;break}return e.next=3,fetch(t).then(function(e){return e.blob()});case 3:return n=e.sent,e.abrupt("return",navigator.msSaveBlob(n,a));case 7:(r=document.createElement("a")).download=a,r.href=t,c=new MouseEvent("click"),r.dispatchEvent(c);case 12:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}();function ot(e){var t=e.course,a=e.online,n=void 0===a||a,r=e.isSelected,s=void 0!==r&&r,o=Object(T.a)(e,["course","online","isSelected"]),l=t.name,i=t.image_link,u=t.date_start,m=t.description,d=rt(new Date,u);return c.a.createElement(xe,Object.assign({item:t,className:s?"course course-selected":"course",title:l,subtitle:"\u0414\u043e \u043d\u0430\u0447\u0430\u043b\u0430 \u043a\u0443\u0440\u0441\u0430 ".concat(d," ").concat(1===d?"\u0434\u0435\u043d\u044c":"\u0434\u043d\u0435\u0439"),description:m,preview:c.a.createElement("div",{className:"course__cover-container"},t.online&&c.a.createElement("div",{className:"course__online-badge ".concat(n?"course__online-text":""," font-size-xs")},c.a.createElement("span",null,"\u041e\u043d\u043b\u0430\u0439\u043d")),c.a.createElement(P,{src:i,className:"poster-cover course__cover"}))},o))}var lt=function(e){var t=e.match.params.id,a=e.path,n=e.className,r=e.location,s=de(),o=s.teachers,l=s.subjects,i=(s.error,s.retry,fe()),u=i.catalog,m=(i.error,i.retry,parseInt(t)),d=c.a.useCallback(function(e,t){var a=t.link,n=e.price,r=e.discount;return c.a.createElement(ot,{course:e,selectable:!0,key:e.id,link:"/shop/".concat(a)},c.a.createElement("div",{className:"list__item-action-info"},c.a.createElement("span",{className:"price"},n,"\u20bd")," ",r&&c.a.createElement("span",{className:"discount font-size-xs"},r+n,"\u20bd")),c.a.createElement(et,{style:{minWidth:"110px"}},"\u041e\u0442\u043a\u0440\u044b\u0442\u044c"))},[]);if(o&&u&&l){var f=q.a.find(o,{id:m});if(f){var p=f.vk_info,v=p.first_name,b=p.last_name,h=p.photo_max_orig,E=f.contacts,g=f.subjects,_=f.bio,O=u.filter(function(e){return q.a.indexOf(e.teacher_ids,m)>=0}),j={first_name:v,last_name:b,photo:h,contacts:E,about:_,role:g.map(function(e,t){var a=e.name;return 0===t?a:a.toLowerCase()}).join(", ")};console.log(u,O);var N="".concat(v," ").concat(b);return c.a.createElement(_e,{title:"".concat(N),className:"teacher-page ".concat(n||""),location:r},c.a.createElement(Ee,{parentSection:{name:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438"}},c.a.createElement(ye,j),c.a.createElement("div",{className:"layout__content-block"},c.a.createElement("h3",null,"\u041a\u0443\u0440\u0441\u044b \u043f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u044f")),c.a.createElement(nt.Body,{className:"course-shop",subjects:l,courses:O},c.a.createElement(nt.Filter,null),c.a.createElement(nt.Catalog,{renderCourse:d}))))}return c.a.createElement(tt,{errorCode:404,message:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u044c \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d",link:{url:a}})}return c.a.createElement(_e,{location:r},c.a.createElement(be,null))},it=function(e){var t=e.match;return c.a.createElement(u.e,null,c.a.createElement(u.c,{path:"".concat(t.path,"/:id"),render:function(e){return c.a.createElement(lt,Object.assign({teachers:Z,courses:te.catalog,path:t.path},e))}}),c.a.createElement(u.c,{exact:!0,path:"".concat(t.path),render:function(e){return c.a.createElement(Ze,e)}}))},ut=a(228),mt=a(501);function dt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ft(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?dt(a,!0).forEach(function(t){Object(g.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):dt(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var pt=function(e){var t=e.course,a=e.onCourseDeselect,n=e.onTruncate,r=t.name,s=Oe(r),o=Object(l.a)(s,1)[0],i=c.a.useCallback(function(){a(t)},[a,t]);return c.a.createElement("div",{className:"selected-course d-flex align-items-center flex-shrink-0"},c.a.createElement("div",{className:"selected-course__cover-container"},c.a.createElement(P,{src:t.image_link,className:"selected-course__cover poster-cover"}),c.a.createElement("i",{className:"icon-close selected-course__deselect-btn animated__action-button",onClick:i})),c.a.createElement("div",{className:"selected-course__description-container font-size-xs"},c.a.createElement("div",{className:"selected-course__description"},c.a.createElement(Ce.a,{lines:2,ref:o,onTruncate:n},r))))},vt=function(e){var t=e.style,a=Object(T.a)(e,["style"]);return c.a.createElement("div",Object.assign({style:ft({},t,{height:"calc(100% + ".concat(t.minHeight,"px)")})},a))},bt=function(e){var t=e.courses,a=e.onCourseDeselect,n=q.a.sumBy(t,"price"),r=q.a.sumBy(t,"discount");return c.a.useEffect(function(){}),c.a.createElement(ge,{className:"selected-courses ".concat(0===t.length?"hidden":"")},c.a.createElement("div",{className:"container-fluid"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-12 col-md p-0 selected-courses__courses"},c.a.createElement(ze,{autoHeight:!0,autoHeightMax:"unset",hideTracksWhenNotNeeded:!0,renderView:vt,style:{height:"100%"},className:"scrollbars"},c.a.createElement(mt.a,{className:"layout__bottom-tab-container container-fluid d-flex flex-nowrap",style:{height:"100%"}},t.map(function(e){return c.a.createElement(i.a,{classNames:"animation-fade",key:e.id,timeout:300},c.a.createElement(pt,{course:e,onCourseDeselect:a,onTruncate:function(){window.dispatchEvent(new Event("scroll"))}}))})))),c.a.createElement("div",{className:"col-12 col-md-auto p-0"},c.a.createElement("div",{className:"selected-courses__price layout__bottom-tab-container container d-flex align-items-center justify-content-end"},c.a.createElement(et,{className:"order-1 order-md-0 flex-shrink-0"},"\u041e\u043f\u043b\u0430\u0442\u0438\u0442\u044c"),c.a.createElement("div",{className:"price selected-courses__price-container container"},r&&c.a.createElement("div",{className:"discount font-size-sm d-inline-block d-md-block"},n+r,"\u20bd"),c.a.createElement("div",{className:"price font-size-lg d-inline-block d-md-block"},n,"\u20bd"),r&&c.a.createElement("div",{className:"promotion font-size-xs"},"\u0426\u0435\u043d\u0430 \u0441\u043e \u0441\u043a\u0438\u0434\u043a\u043e\u0439 \u0437\u0430 2 \u043a\u0443\u0440\u0441\u0430")))))))},ht=function(e){var t=e.selectedCourses,a=(e.onCourseClick,e.onCourseSelect),n=e.onCourseDeselect,r=e.location,s=fe(),o=s.catalog,l=s.subjects,i=(s.error,s.retry,c.a.useCallback(function(e,n){var r=t.has(e),s=e.price,o=e.discount;return c.a.createElement(ot,Object.assign({course:e,selectable:!0,isSelected:r,onActionClick:a,key:e.id},n),c.a.createElement("div",{className:"list__item-action-info"},c.a.createElement("span",{className:"price"},s,"\u20bd")," ",o&&c.a.createElement("span",{className:"discount font-size-xs"},o+s,"\u20bd")),c.a.createElement(et,{style:{minWidth:"110px"}},r?"\u0412\u044b\u0431\u0440\u0430\u043d\u043e":"\u0412\u044b\u0431\u0440\u0430\u0442\u044c"))},[t,a]));return c.a.createElement(_e,{className:"course-shop",title:"\u041c\u0430\u0433\u0430\u0437\u0438\u043d \u043a\u0443\u0440\u0441\u043e\u0432",location:r},o&&l?c.a.createElement(nt.Body,{subjects:l,courses:o},c.a.createElement(Ee,null,c.a.createElement(nt.Filter,null),c.a.createElement(nt.Catalog,{renderCourse:i}))):c.a.createElement(be,null),c.a.createElement(bt,{onCourseDeselect:n,courses:Object(ut.a)(t)}))};window._=q.a;var Et=c.a.createContext({}),gt=function(){var e=c.a.useContext(Et).course;return c.a.createElement(c.a.Fragment,null,c.a.createElement(P,{src:e.image_link,className:"course-overview__cover"}),c.a.createElement("div",{className:"course-overview__info layout__content-block"},c.a.createElement("h2",null,e.name),c.a.createElement("div",{className:"course-overview__summary"},c.a.createElement("div",{className:"col-auto course-overview__summary-item"},c.a.createElement("i",{className:"far fa-calendar-alt"}),"\u041d\u0430\u0447\u0430\u043b\u043e: ",ct(e.date_start,ct.date)),c.a.createElement("div",{className:"col-auto course-overview__summary-item"},c.a.createElement("i",{className:"far fa-clock"}),"\u0414\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c: ",e.total_hours," \u0447\u0430\u0441\u043e\u0432")),c.a.createElement("div",{className:"description-text font-size-sm"},e.description)))},_t=function(){var e=c.a.useContext(Et),t=e.course,a=e.teachers;return c.a.createElement("div",{className:"layout__content-block"},c.a.createElement("h3",null,"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438"),c.a.createElement("div",{className:"course-overview__teachers container negate-block-padding"},c.a.createElement("div",{className:"row"},t.teacher_ids.map(function(e,t){return c.a.createElement("div",{className:"col-12 col-md d-flex p-0",key:t},c.a.createElement($e,{teacher:q.a.find(a,{id:e}),link:"/teachers/".concat(e,"/")}))}))))},Ot=function(e){var t=e.renderLesson,a=c.a.useContext(Et),n=(a.course,a.lessons),r=c.a.useCallback(function(e){return t(e,{link:"".concat(e.id,"/")})},[t]);return c.a.createElement("div",{className:"layout__content-block"},c.a.createElement("h3",null,"\u0423\u0440\u043e\u043a\u0438"),c.a.createElement(Se,{renderItem:r},n))},jt=function(){var e=c.a.useContext(Et).course;return c.a.createElement("div",{className:"course-overview__title layout__content-block"},c.a.createElement("h2",null,e.name),c.a.createElement(he,{className:"course-overview__link",to:"/shop/".concat(e.id)},"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043a\u0443\u0440\u0441\u0430"))},Nt=function(e){var t=e.match.params.id,a=e.path,n=e.courses,r=e.teachers,s=e.lessons,o=e.children,l=e.className,i=e.location,u=parseInt(t),m=q.a.find(n,{id:u});return m?c.a.createElement(_e,{title:"".concat(m.title),className:"course-overview ".concat(l||""),location:i},c.a.createElement(Et.Provider,{value:{course:m,teachers:r,lessons:s}},o)):c.a.createElement(tt,{errorCode:404,message:"\u041a\u0443\u0440\u0441 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d",link:{url:a}})},kt=function(){var e=c.a.useContext(Et).course,t=e.price,a=e.discount;return c.a.createElement(ge,{className:"course-overview__offer"},c.a.createElement("div",{className:"container layout__bottom-tab-container"},c.a.createElement("div",{className:"row justify-content-end align-items-center"},a&&c.a.createElement("div",{className:"col-auto"},c.a.createElement("div",{className:"discount"},t+a,"\u20bd")),c.a.createElement("div",{className:"col-auto"},c.a.createElement("h2",{className:"price"},t,"\u20bd")),c.a.createElement("div",{className:"col-auto"},c.a.createElement(et,null,"\u041a\u0443\u043f\u0438\u0442\u044c")))))},yt=function(e){var t=e.cover,a=e.watchProgress,n=e.locked,r=void 0!==n&&n,s=e.className;return c.a.createElement(P,{src:t,className:"video-cover ".concat(r?"video-locked":""," ").concat(s||"")},a&&c.a.createElement("div",{className:"video-cover__watch-progress-bar"},c.a.createElement("div",{className:"watch-progress-bar__progress-line",style:{width:"".concat(a,"%")}})))};function wt(e){var t=e.lesson,a=e.locked,n=void 0!==a&&a,r=e.link,s=Object(T.a)(e,["lesson","locked","link"]),o=t.name,l=t.image_link,i=t.description,u=t.watchProgress;return c.a.createElement(xe,Object.assign({item:t,className:"video-class ".concat(n?"disabled":""),title:o,description:i,preview:c.a.createElement(yt,{cover:l,className:"video-class__cover",locked:n,watchProgress:!n&&u}),key:t.id,link:n?void 0:r},s))}var Ct=function(e){var t=e.path,a=e.location,n=e.match,r=n.params.id,s=fe(),o=s.catalog,i=(s.subjects,s.error,s.retry,de()),u=i.teachers,m=(i.error,i.retry,function(e){var t=c.a.useContext(ce),a=t.data.lessons,n=t.setters.setLessons,r=c.a.useState(null),s=Object(l.a)(r,2),o=s[0],i=s[1],u=c.a.useCallback(function(){var e=Object(b.a)(v.a.mark(function e(t){var a,r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!ue.lessons||!ue.lessons[t]){e.next=2;break}return e.abrupt("return",ue.lessons[t]);case 2:return a=y.get("/lessons",{params:{courseId:t}}),(ue.lessons||(ue.lessons={}))[t]=a,e.prev=4,o&&i(null),e.next=8,a;case 8:e.t0=function(e){return re({},e,{image_link:"".concat(N).concat(e.image_link)})},r=e.sent.map(e.t0),console.log(r),n(function(e){return re({},e,Object(g.a)({},t,r))}),e.next=18;break;case 14:e.prev=14,e.t1=e.catch(4),console.error(e.t1),i(e.t1);case 18:return e.prev=18,delete ue.lessons[t],e.finish(18);case 21:return e.abrupt("return",a);case 22:case"end":return e.stop()}},e,null,[[4,14,18,21]])}));return function(t){return e.apply(this,arguments)}}(),[o]);return c.a.useEffect(function(){a[e]||ue.lessons&&ue.lessons[e]||o||u(e)},[a,e,o]),o?{lessons:a[e],error:o,retry:function(){o&&u()}}:{lessons:a[e]}}(r)),d=m.lessons;m.error,m.retry;console.log(d);return o&&u&&d?c.a.createElement(Nt,{match:n,path:t,courses:o,teachers:u,lessons:d,location:a},c.a.createElement(Ee,{parentSection:{name:"\u041c\u0430\u0433\u0430\u0437\u0438\u043d \u043a\u0443\u0440\u0441\u043e\u0432"}},c.a.createElement(gt,null),c.a.createElement(_t,null),c.a.createElement(Ot,{renderLesson:function(e,t){return c.a.createElement(wt,{lesson:e,selectable:!1,locked:!1,key:e.id})}})),c.a.createElement(kt,null)):c.a.createElement(_e,{location:a},c.a.createElement(be,null))},xt=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(I.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(r)))).state={selectedCourses:new Set},a.onCourseSelect=function(e){var t=a.state.selectedCourses;t.has(e)||((t=new Set(t)).add(e),a.setState({selectedCourses:t}))},a.onCourseDeselect=function(e){var t=a.state.selectedCourses;(t=new Set(t)).delete(e),a.setState({selectedCourses:t})},a}return Object(F.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this,t=this.props.match,a=this.state.selectedCourses;return c.a.createElement(u.e,null,c.a.createElement(u.c,{exact:!0,path:"".concat(t.path),render:function(t){return c.a.createElement(ht,Object.assign({selectedCourses:a,onCourseSelect:e.onCourseSelect,onCourseDeselect:e.onCourseDeselect},t))}}),c.a.createElement(u.c,{path:"".concat(t.path,"/:id"),component:function(e){return c.a.createElement(Ct,Object.assign({path:t.path},e))}}))}}]),t}(c.a.Component),St=function(e){var t=e.catalog,a=e.location,n=c.a.useCallback(function(e,t){return c.a.createElement(ot,Object.assign({course:e,selectable:!0,online:!1,key:e.id},t),e.status===K.learning?c.a.createElement(et,{className:"course__select-btn"},"\u0418\u0437\u0443\u0447\u0430\u0442\u044c"):c.a.createElement(et,{className:"course__select-btn",active:!1},"\u041f\u0440\u043e\u0439\u0434\u0435\u043d"))},[]);return c.a.createElement(_e,{className:"user-courses",location:a,title:"\u041c\u043e\u0438 \u043a\u0443\u0440\u0441\u044b"},c.a.createElement(nt.Body,{courses:t,subjects:X},c.a.createElement(Ee,null,c.a.createElement(nt.Filter,null),c.a.createElement(nt.Catalog,{renderCourse:n}))))},Pt=function(e){var t=e.path,a=e.catalog,n=e.match,r=Object(T.a)(e,["path","catalog","match"]),s=n.params.id,o=parseInt(s),l=q.a.find(a,{id:o});console.log(a,s,l);return c.a.createElement(Nt,Object.assign({path:t,courses:a,lessons:l&&l.lessons,match:n},r),c.a.createElement(Ee,{parentSection:{name:"\u041c\u043e\u0438 \u043a\u0443\u0440\u0441\u044b"}},c.a.createElement(jt,null),c.a.createElement(Ot,{renderLesson:function(e,t){e.date;var a=e.id,n=e.locked;return c.a.createElement(wt,Object.assign({lesson:e,locked:n,selectable:!n,key:a},t),n?c.a.createElement(et,{active:!1},"\u0421\u043a\u043e\u0440\u043e"):c.a.createElement(et,null,"\u0418\u0437\u0443\u0447\u0430\u0442\u044c"))}})))},Dt=a(499),It=function(e){function t(){return Object(h.a)(this,t),Object(I.a)(this,Object(L.a)(t).apply(this,arguments))}return Object(F.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=c.a.Children.only(this.props.children),t="pos-"+this.props.position;return c.a.cloneElement(e,{className:(e.props.className?e.props.className+" tooltip ":"tooltip ")+t,children:c.a.createElement(r.Fragment,null,e.props.children,c.a.createElement("div",{className:"tooltip-arrow"}),c.a.createElement("div",{className:"tooltip-block"},this.props.content))})}}]),t}(r.Component),Lt={PENDING:"pending",LOADING:"loading",LOADED:"loaded",SUCCESS:"success",DONE:"done",REJECTED:"rejected",ERROR:"error"};function Ft(e,t,a,n){var r=c.a.useState(null===e||t?Lt.DONE:a?Lt.REJECTED:Lt.LOADING),s=Object(l.a)(r,2),o=s[0],i=s[1];return Ne(function(){!1===e?i(Lt.LOADED):!0===e&&i(Lt.LOADING)},[e]),Ne(function(){if(o===Lt.LOADED&&t)i(Lt.SUCCESS);else if(o===Lt.SUCCESS){var e=setTimeout(function(){i(Lt.DONE)},1e3);return function(){clearTimeout(e)}}},[o,t]),Ne(function(){n&&i(Lt.ERROR)},[n]),Ne(function(){a&&i(Lt.REJECTED)},[a]),o}var Bt=function(e){var t=e.state,a=e.onClick,n=e.errorMessage,r=(t===Lt.LOADED?"spinner-border":t===Lt.SUCCESS&&"icon-check")||t===Lt.ERROR&&"icon-reload"||t===Lt.REJECTED&&"icon-alert"||"spinner-border";return c.a.createElement(Dt.a,null,t!==Lt.DONE?c.a.createElement(i.a,{key:r,appear:!0,classNames:"animation-scale",timeout:300},c.a.createElement("div",{className:"file__state-indicator",onClick:a},c.a.createElement(It,{content:n},c.a.createElement("i",{className:r})))):null)},zt=function(e){var t=e.file,a=t.name,n=t.downloadName,r=t.url,s=e.error,o=void 0===s?null:s,l=e.rejected,i=void 0===l?null:l,u=e.loading,m=void 0===u?null:u,d=e.done,f=void 0===d||d,p=e.deletable,v=void 0!==p&&p,b=e.onDelete,h=e.onIndicatorClick,E=e.className,g=e.errorMessage,_=Object(T.a)(e,["file","error","rejected","loading","done","deletable","onDelete","onIndicatorClick","className","errorMessage"]),O=c.a.useCallback(function(){r&&st(r,n||a)},[r,a,n]),j=null!==m,N=Ft(null!==m?m<100:null,f,i,o);return c.a.createElement("div",{className:"file file-".concat(N," ").concat(E||"")},c.a.createElement(et,Object.assign({neutral:!0,className:"file__btn",icon:v?c.a.createElement("i",{className:"icon-close file__action-btn file__delete-btn animated__action-button"}):c.a.createElement("i",{className:"icon-download file__action-btn file__download-btn animated__action-button"}),iconAction:v?b:void 0,onClick:O},_),null!==m&&c.a.createElement("div",{className:"file__loading-progress",style:{width:"".concat(m,"%")}}),c.a.createElement("i",{className:"file__icon far fa-file-alt"}),c.a.createElement("span",{className:"file__name",title:a},a)),j&&c.a.createElement(Bt,{onClick:h,state:N,errorMessage:g}))},At=function(e){var t=e.video_link;return c.a.createElement("div",{className:"video-player"},c.a.createElement("iframe",{className:"video-player__video",src:"https://player.vimeo.com/video/".concat(t,"?color=fa9346&title=0&byline=0&portrait=0"),frameBorder:"0",allow:"autoplay; fullscreen",allowFullScreen:!0}))},Tt=a(226),Mt=a.n(Tt),Rt=a(140),Ut=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(I.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(r)))).type=null,a.phase=null,a}return Object(F.a)(t,e),Object(E.a)(t,[{key:"addClass",value:function(e,a,n){Object(Rt.a)(Object(L.a)(t.prototype),"addClass",this).call(this,e,a,n),this.type=a,this.phase=n}},{key:"componentDidUpdate",value:function(){this.appliedClasses[this.type]&&this.appliedClasses[this.type][this.phase]&&Object(Rt.a)(Object(L.a)(t.prototype),"addClass",this).call(this,o.a.findDOMNode(this),this.type,this.phase)}}]),t}(i.a),Ht=(a(496),"error_file_size"),Vt=c.a.createContext(null),Wt=function(e){return e.every(function(e){return function(e){return"done"===e.meta.status}(e)})},Jt=function(){if(S.user)return{url:"".concat(N,"/files/"),headers:(e=S.user.uid,t=S.user.hash,{Authorization:"Basic ".concat(btoa(e+":"+t))})};throw new Error("User not logged in");var e,t},qt=function(e){var t,a=e.original_file_name,n=e.id_file_name;return{name:a,downloadName:"".concat((t=a,t.replace(/\.[^\/.]+$/,"")),"_").concat(n),url:"".concat(N,"/files/attachments/").concat(n,"?disp=attachment")}},Kt=function(e){var t=e.className,a=e.style,n=e.getFilesFromEvent,r=e.accept,s=e.multiple,o=e.disabled,l=e.onFiles,i=e.files,u=e.content,m=e.extra.maxFiles,d=c.a.useCallback(function(){var e=Object(b.a)(v.a.mark(function e(t){var a,r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target,e.next=3,n(t);case 3:r=e.sent,l(r),a.value=null;case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[n,l]),f=i.length<m&&!o;return c.a.createElement(et,{tag:"label",active:f,icon:c.a.createElement("i",{className:"icon-add"})},u,c.a.createElement("input",{className:t,style:a,type:"file",accept:r,multiple:s,disabled:!f,onChange:f?d:null}))},Gt=function(e){var t=e.fileWithMeta,a=t.cancel,n=t.remove,r=t.restart,s=t.xhr,o=e.meta,i=o.name,u=void 0===i?"":i,m=o.percent,d=void 0===m?0:m,f=o.status,p=e.isUpload,v=e.canRemove,b=e.className,h=je(null),E=Object(l.a)(h,2),g=E[0],_=E[1];if(!g()&&s&&s.responseText)try{var O=JSON.parse(s.responseText),j=O.original_file_name,N=O.file_link,k=O.id_file_name;if(!(j&&N&&k))throw new Error("Incorrect response");_({original_file_name:j,file_link:N,id_file_name:k})}catch(D){console.log(D)}var y=g(),w=c.a.useCallback(function(){p&&"done"!==f&&"headers_received"!==f&&a(),n()},[a,n,p,f]),C=q.a.startsWith(f,"error")||q.a.startsWith(f,"exception"),x=f===Ht||void 0,S=p?"done"===f||"headers_received"===f?100:d:null,P="done"===f;return c.a.createElement(zt,{file:y?qt(y):{name:u},loading:S,className:b,done:P,rejected:!(!C||!x)||void 0,error:C,errorMessage:C&&x?"\u0424\u0430\u0439\u043b \u043f\u0440\u0435\u0432\u044b\u0448\u0430\u0435\u0442 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0439 \u0440\u0430\u0437\u043c\u0435\u0440":void 0,deletable:v,onDelete:w,onIndicatorClick:C&&!x?r:void 0})},Yt=function(e){var t=c.a.useContext(Vt)||{},a=t.submitting,n=t.hasChanged,r=e.disabled,s=e.onSubmit,o=e.files,l=e.content,i=!Wt(o)||r,u=c.a.useCallback(function(){s(o)},[s,o]),m=Ft(a,!1===a);return console.log(m),c.a.createElement(Ut,{in:null!=s&&(n||m!==Lt.DONE),appear:!0,mountOnEnter:!0,unmountOnExit:!0,classNames:"animation-fade",timeout:300},c.a.createElement(c.a.Fragment,null,c.a.createElement(et,{active:!i,icon:n?c.a.createElement("i",{className:"icon-upload"}):c.a.createElement(Bt,{state:m}),onClick:u},n?l:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043e")))},$t=function(e){var t=e.input,a=e.previews,n=void 0===a?[]:a,r=e.submitButton,s=e.dropzoneProps,o=(e.files,e.extra.maxFiles,c.a.useContext(Vt)||{}),l=o.preloadedFiles,i=void 0===l?[]:l,u=o.deletePreloadedFile,m=o.disabled,d=s.ref;return c.a.createElement("div",{ref:d,className:"file-input"},c.a.createElement("h4",{className:"file-input__files-title"},"\u0417\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043d\u044b\u0435 \u0444\u0430\u0439\u043b\u044b"),c.a.createElement(mt.a,{className:"file-container"},i&&i.map(function(e){var t=e.id_file_name;return c.a.createElement(Ut,{classNames:"animation-fade",timeout:300,key:t},c.a.createElement(zt,{file:qt(e),done:!0,deletable:!m,onDelete:function(){u(e)}}))}),n.map(function(e,t){return c.a.createElement(Ut,{classNames:"animation-fade",timeout:300,key:e.props.meta.id},e)})),c.a.createElement("div",{className:"file-input__controls"},t,r))},Qt=function(e,t){return Wt(e)?q.a.concat(t,e.map(function(e){var t=e.xhr;return JSON.parse(t.responseText)})):null},Xt=function(e){var t=e.initialFiles,a=void 0===t?[]:t,n=e.inputContent,r=void 0===n?"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0444\u0430\u0439\u043b":n,s=e.onChange,o=e.onSubmit,i=e.maxFiles,u=void 0===i?5:i,m=e.maxSizeBytes,d=void 0===m?4194304:m,f=e.accept,p=e.isDisabled,h=void 0!==p&&p,E=Object(T.a)(e,["initialFiles","inputContent","onChange","onSubmit","maxFiles","maxSizeBytes","accept","isDisabled"]),g=c.a.useState(a),_=Object(l.a)(g,2),O=_[0],j=_[1],N=c.a.useState(!1),k=Object(l.a)(N,2),y=k[0],w=k[1],C=c.a.useState(null),x=Object(l.a)(C,2),S=x[0],P=x[1],D=je([]),I=Object(l.a)(D,2),L=I[0],F=I[1],B=c.a.useCallback(function(e){var t=O.filter(function(t){return t!==e});w(!0),j(t),s&&s(Qt(L(),t))},[O,s,L]),z=c.a.useCallback(function(e,t,a){var n=e.meta;Object(T.a)(e,["meta"]),console.log(t,n,q.a.cloneDeep(a)),w(!0),F(a),s&&s(!0,Qt(a,O))},[s,O,F]),A=c.a.useCallback(function(){var e=Object(b.a)(v.a.mark(function e(t){var a,n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t.map(function(e){return e.meta})),!o){e.next=14;break}if(a=Qt(t,O),!((n=o(a))instanceof Promise)){e.next=14;break}return P(!0),e.prev=6,e.next=9,n;case 9:w(!1),s&&s(!1,a);case 11:return e.prev=11,P(!1),e.finish(11);case 14:case"end":return e.stop()}},e,null,[[6,,11,14]])}));return function(t){return e.apply(this,arguments)}}(),[o,O]);u=O?u-O.length:u;var M="function"===typeof h?h():h;return c.a.createElement(Vt.Provider,{value:{preloadedFiles:O,deletePreloadedFile:B,hasChanged:y,disabled:M,submitting:S}},c.a.createElement(Mt.a,Object.assign({inputContent:r,submitButtonContent:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"},E,{getUploadParams:Jt,onChangeStatus:z,onSubmit:o&&A,canCancel:!1,SubmitButtonComponent:Yt,LayoutComponent:$t,InputComponent:Kt,PreviewComponent:Gt,maxFiles:u,maxSizeBytes:d,accept:f,classNames:{preview:""},disabled:h})))},Zt=function(){var e=c.a.useCallback(function(e){e.preventDefault(),e.returnValue=""},[]);return c.a.useEffect(function(){return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}},[e]),c.a.createElement(u.a,{message:"\u0423 \u0432\u0430\u0441 \u0435\u0441\u0442\u044c \u043d\u0435\u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f, \u043f\u043e\u043a\u0438\u043d\u0443\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443?"})},ea=function(e){var t=e.homework,a=e.lessonId,n=c.a.useCallback(function(){return t.deadline&&new Date>=t.deadline},[t]),r=c.a.useState(!1),s=Object(l.a)(r,2),o=s[0],i=s[1],u=c.a.useCallback(function(e){console.log("files changed",e),i(!0)},[]),m=c.a.useCallback(function(){var e=Object(b.a)(v.a.mark(function e(n){var r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("files submitted",n),r=n[0]?n[0].id_file_name:null,e.abrupt("return",y({url:"/lessons/".concat(a,"/homeworks/"),method:r?t.submittedFiles?"PUT":"POST":"DELETE",data:{file:r}}).then(function(){i(!1)}));case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[t,a,i]);return c.a.createElement("div",{className:"submission"},o&&c.a.createElement(Zt,null),c.a.createElement(Xt,{maxFiles:1,accept:"image/*,audio/*,video/*",initialFiles:t.submittedFiles,onChange:u,onSubmit:m,isDisabled:n}))},ta=function(e){var t=e.lesson,a=t.id,n=t.name,r=(t.image_link,t.video_link),s=t.description,o=t.homework;return c.a.createElement("div",{className:"col-12 col-lg layout__content-block lesson-page__current-lesson"},c.a.createElement("div",{className:"block-container video-container"},c.a.createElement(At,{video_link:r})),c.a.createElement("div",{className:"block-container description-container"},c.a.createElement("h2",null,n),c.a.createElement("div",{className:"description-text"},s)),o&&c.a.createElement("div",{className:"block-container hw-container"},c.a.createElement("h3",null,"\u0414\u043e\u043c\u0430\u0448\u043d\u0435\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435"),c.a.createElement("div",{className:"assignment"},o.files&&c.a.createElement("div",{className:"assignment__files file-container"},o.files.map(function(e,t){return c.a.createElement(zt,{file:e,key:t})})),o.description&&c.a.createElement("div",{className:"description-text"},o.description),o.deadline&&c.a.createElement("div",{className:"assignment__deadline"},"\u0414\u0435\u0434\u043b\u0430\u0439\u043d: ",ct(o.deadline,ct.date))),o.submit&&c.a.createElement(ea,{homework:o,lessonId:a})))},aa=function(e){var t=e.match.params,a=t.courseId,n=t.lessonId,r=e.catalog,s=e.location,o=parseInt(a),l=parseInt(n),i=q.a.find(r,{id:o}),u=i&&q.a.find(i.lessons,{id:l})||null,m=function(e){var t=e.id,a=e.locked;return c.a.createElement(wt,{lesson:e,locked:a,selectable:!a,key:t,link:"../".concat(e.id,"/")})};if(u&&!u.locked){var d=i.lessons[u.num];d.locked&&(d=null);var f=q.a.sortBy(i.lessons.filter(function(e){return e.id!==u.id&&(!d||e.id!==d.id)}),"num");return c.a.createElement(_e,{title:"".concat(u.title),className:"lesson-page",location:s},c.a.createElement(Ee,{parentSection:{name:i.name}},c.a.createElement("div",{className:"layout__content-block"},c.a.createElement("div",{className:"container p-lg-0"},c.a.createElement("div",{className:"row"},c.a.createElement(ta,{lesson:u}),c.a.createElement("div",{className:"col-12 col-lg-auto layout__content-block lesson-page__other-lessons"},d&&c.a.createElement("h3",null,"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435 \u0437\u0430\u043d\u044f\u0442\u0438\u0435"),d&&c.a.createElement(Se,{renderItem:m},[d]),c.a.createElement("h3",null,"\u0414\u0440\u0443\u0433\u0438\u0435 \u0437\u0430\u043d\u044f\u0442\u0438\u044f"),c.a.createElement(Se,{renderItem:m},f)))))))}return c.a.createElement(tt,{errorCode:404,message:"\u0423\u0440\u043e\u043a \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"})},na=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(I.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(r)))).state={courses:q.a.sortBy(ae,function(e){return e.status===K.finished?1:0})},a}return Object(F.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props.match,t=this.state.courses;return c.a.createElement(u.e,null,c.a.createElement(u.c,{path:"".concat(e.path,"/:courseId/:lessonId"),render:function(e){return c.a.createElement(aa,Object.assign({catalog:t},e))}}),c.a.createElement(u.c,{path:"".concat(e.path,"/:id"),render:function(a){return c.a.createElement(Pt,Object.assign({catalog:t,path:e.path},a))}}),c.a.createElement(u.c,{exact:!0,path:"".concat(e.path),render:function(e){return c.a.createElement(St,Object.assign({catalog:t},e))}}))}}]),t}(c.a.Component);a(497);function ra(e){var t=Object(u.h)();c.a.useEffect(function(){return t.listen(e)},[t,e])}var ca=function(e,t){console.log("- - - location: '".concat(e.pathname,"'"),t)};function sa(){!function(){var e=Object(u.i)(),t=Object(u.h)(),a=e.pathname;"/"!==a.slice(-1)&&t.replace(a+"/")}(),function(){var e=je(Object(u.i)().pathname),t=Object(l.a)(e,2),a=t[0],n=t[1];ra(c.a.useCallback(function(e,t){console.log("update"),a()!==e.pathname&&"POP"!==t&&window.scrollTo(0,0),n(e.pathname)},[a,n]))}(),ra(ca);var e=function(){var e=c.a.useState(!1),t=Object(l.a)(e,2),a=t[0],n=t[1];return[a,c.a.useCallback(function(){n(function(e){return!e})},[])]}(),t=Object(l.a)(e,2),a=t[0],n=t[1],r=ve(),s=r.user,o=null!==r.userInfo;return c.a.createElement("div",{className:"app"},c.a.createElement(D,{onMenuButtonClick:n,user:s,sidebar:o}),c.a.createElement(i.a,{in:a,timeout:200,classNames:sa.layoutAnimationClassNames},c.a.createElement("div",{className:"layout"},c.a.createElement(c.a.Fragment,null,o&&c.a.createElement(A,{onMenuClose:n}),c.a.createElement(u.e,null,c.a.createElement(u.c,{exact:!0,path:"/",render:function(){return c.a.createElement(u.b,{to:"/courses"})}}),c.a.createElement(u.c,{path:"/login",component:ke}),c.a.createElement(u.c,{path:"/courses",component:na}),c.a.createElement(u.c,{path:"/shop",component:xt}),c.a.createElement(u.c,{path:"/teachers",component:it}),c.a.createElement(u.c,{path:"/account",component:we}),c.a.createElement(u.c,{path:"/:section",component:_e}))))))}sa.layoutAnimationClassNames={enter:"sidebar-opened",enterActive:"sidebar-opened",enterDone:"sidebar-opened",exit:"sidebar-hiding",exitActive:"sidebar-hiding"};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));window.APIRequest=y,o.a.render(c.a.createElement(function(){return c.a.createElement(m.a,{basename:"/ege-hack-front/"},c.a.createElement(pe,null,c.a.createElement(sa,null)))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},88:function(e,t,a){e.exports=a.p+"static/media/dummy_poster.f51c6af6.jpg"}},[[230,1,2]]]);
//# sourceMappingURL=main.8d543620.chunk.js.map