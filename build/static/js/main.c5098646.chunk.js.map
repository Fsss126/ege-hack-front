{"version":3,"sources":["img/logo.svg","definitions/polyfills.js","definitions/api.js","definitions/auth.js","components/common/CoverImage.jsx","components/Header.jsx","components/common/Contacts.jsx","components/SideBar.jsx","definitions/constants.js","data/test_data.js","store/index.js","components/Page.jsx","hooks/common.js","components/pages/login/LoginPage.jsx","components/common/UserProfile.jsx","components/pages/account/AccountPage.jsx","components/common/ListItem.jsx","components/common/List.jsx","components/ui/ScrollBars.jsx","components/ui/Select.jsx","components/ui/Input.jsx","components/common/Catalog.jsx","components/common/Teacher.jsx","components/pages/teachers/catalog-page/TeachersCatalog.jsx","components/pages/teachers/catalog-page/TeachersCatalogPage.jsx","components/ui/Button.jsx","components/ErrorPage.jsx","components/common/CourseCatalog.jsx","definitions/helpers.js","components/common/Course.jsx","components/pages/teachers/teacher-page/TeacherPage.jsx","components/pages/teachers/index.jsx","components/pages/shop/catalog-page/SelectedCoursesTab.jsx","components/pages/shop/catalog-page/ShopCatalogPage.jsx","components/common/CourseOverview.jsx","components/pages/shop/course-page/CoursePriceTab.jsx","components/common/VideoCover.jsx","components/common/Lesson.jsx","components/pages/shop/course-page/CoursePage.jsx","components/pages/shop/index.jsx","components/pages/courses/catalog-page/CatalogPage.jsx","components/pages/courses/course-page/CoursePage.jsx","components/ui/Tooltip.jsx","components/ui/LoadingIndicator.jsx","components/ui/File.jsx","components/common/StableCSSTransition.jsx","components/ui/FileInput.jsx","components/common/NavigationBlocker.jsx","components/pages/courses/lesson-page/HomeworkLoader.jsx","components/pages/courses/lesson-page/LessonView.jsx","components/pages/courses/lesson-page/LessonPage.jsx","components/pages/courses/index.jsx","components/App.jsx","serviceWorker.js","index.js","img/dummy_poster.jpg"],"names":["module","exports","__webpack_require__","p","elementClosest","window","API_ROOT","APIRequest","axios","create","baseURL","interceptors","request","use","config","Auth","user","_objectSpread","auth","username","uid","password","hash","Cancel","response","data","LOCAL_STORAGE_KEY","AuthEventTypes","login","logout","initVK","_this","this","Object","classCallCheck","eventHandlers","_ref","asyncToGenerator","regenerator_default","a","mark","_callee","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","wrap","_context","prev","next","VK","abrupt","init","apiId","process","console","info","localStorage","setItem","JSON","stringify","undefined","Symbol","iterator","done","handler","value","t0","return","finish","stop","_x","apply","arguments","removeItem","userInfo","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","err","storedString","getItem","storedData","parse","first_name","last_name","photo","photo_rec","Error","concat","e","error","eventType","push","filter","func","get","_context2","elementId","Widgets","onAuth","CoverImage","src","className","children","_ref$square","square","_ref$round","round","react_default","createElement","style","backgroundImage","Header","props","onMenuButtonClick","sidebar","onClick","logo","alt","Fragment","common_CoverImage","react_router_dom","to","tabIndex","Contacts","_ref$contacts","contacts","vk","fb","ok","ig","href","Link","assign","activeClassName","SideBar","event","target","currentTarget","classList","contains","onMenuClose","React","Component","LEARNING_STATUS","learning","finished","lorem","LoremIpsum","getDate","daysForward","date","Date","setDate","SUBJECTS","id","name","TEACHERS","vk_info","photo_max_orig","subjects","description","image_link","poster","slice","bio","generateSentences","COURSES","map","subject","i","subject_id","online","date_start","date_end","generateParagraphs","lessons","_","times","j","num","teacher_ids","SHOP_CATALOG","catalog","course","test_data_objectSpread","price","discount","MY_COURSES","lesson","watchProgress","homework","files","url","deadline","submit","submittedFiles","original_file_name","id_file_name","file_link","status","StoreContext","createContext","useShopCatalogStore","useState","useSubjectsStore","useTeachersStore","useLessonsStore","requests","useSubjects","_React$useContext","useContext","setSubjects","setters","_React$useState5","_React$useState6","slicedToArray","setError","fetchSubjects","useCallback","_callee2","_subjects","sent","useEffect","retry","useTeachers","_useSubjects","errorLoadingSubjects","reloadSubjects","_React$useContext2","teachers","setTeachers","_React$useState7","_React$useState8","fetchTeachers","_callee3","_teachers","_context3","_ref4","store_objectSpread","account_id","objectWithoutProperties","log","t1","useShopCatalog","_useSubjects2","_React$useContext3","setCatalog","_React$useState9","_React$useState10","fetchCatalog","_callee4","_catalog","_context4","shopCatalog","params","group","_ref6","teacher_id","rest","GlobalStore","_ref8","_useUserAuth","_React$useState","getUser","_React$useState2","setUser","_React$useState3","_React$useState4","setUserInfo","getUserInfo","fetchUserInfo","loginCallback","logoutCallback","useLayoutEffect","subscribe","unsubscribe","useUserAuth","_useUserAuth2","_useShopCatalogStore","_useShopCatalogStore2","_useSubjectsStore","_useSubjectsStore2","_useTeachersStore","_useTeachersStore2","_useLessonsStore","_useLessonsStore2","setLessons","useStoreData","Provider","useUser","_React$useContext5","PageLoadingPlaceholder","PageLink","_ref$arrow","arrow","_ref$forward","forward","PageContent","_ref2","parentSection","Page_PageLink","BottomTab","_ref3","stickyProps","lib_default","mode","Page","title","_ref4$checkLogin","checkLogin","location","_useUser","react_router","pathname","state","referrer","Helmet","useTruncate","text","descriptionRef","useRef","document","readyState","isFontLoaded","setFontLoaded","addEventListener","handleResize","removeEventListener","handleLoading","current","onResize","useRefValue","initialValue","ref","useUpdateEffect","effect","dependencies","length","isInitialMount","LoginPage","loginWidget","components_Page","UserProfile","about","role","fullName","AccountPage","Page_PageContent","common_UserProfile","ListItem","preview","subtitle","item","selectable","action","link","clickCallback","actionCallback","onActionClick","callbackProps","_useTruncate","_useTruncate2","clicked","closest","preventDefault","content","Truncate","lines","List","renderItem","renderProps","flex","index","defaultProps","key","renderTrackVertical","renderThumbVertical","renderTrackHorizontal","renderThumbHorizontal","ScrollBars","forwardRef","react_custom_scrollbars_lib","DropdownIndicator","react_select_esm","SelectContainer","selectProps","hasValue","setValue","Select_objectSpread","isClearable","Option","label","MenuList","innerRef","scrollBar","view","ui_ScrollBars","autoHeight","hideTracksWhenNotNeeded","autoHeightMax","maxHeight","Select","onChange","option","_this2","callback","_this$props","options","components","_this$props$isClearab","_this$props$isSearcha","isSearchable","placeholder","maxMenuHeight","find","classNamePrefix","menuPlacement","noOptionsMessage","styles","PureComponent","useChangeHandler","inputProp","Input","CheckBox","type","checked","CatalogContext","common_Catalog","Filter","_ref$filterBy","filterBy","_ref$filterBy$subject","filterBySubject","_ref$filterBy$online","filterByOnline","ui_Input","Catalog","renderFunc","listProps","baseUrl","items","Catalog_objectSpread","Body","filterItems","_props$renderProps","history","useHistory","useLocation","URLSearchParams","search","parseInt","onFilterChange","set","delete","matchingItems","Teacher","_props$teacher","teacher","_props$teacher$vk_inf","teacherSubjects","_props$bio","toLowerCase","join","catalog_page_TeachersCatalog","renderTeacher","otherProps","useMemo","zipObject","subjectsTeachers","reduce","result","forEach","values","getMatchingCourses","some","TeachersCatalogPage","_useTeachers","Page_PageLoadingPlaceholder","Button","_ref$active","active","_ref$neutral","neutral","icon","iconAction","_ref$tag","tag","Tag","ErrorPage","errorCode","message","_ref$link","code","toString","split","number","ui_Button","replace","common_CourseCatalog","renderCourse","courses","daysBetween","date1","date2","date1_ms","getYear","getMonth","getTime","difference_ms","Math","floor","renderDate","locale","toLocaleString","day","month","shortDate","hour","minute","downloadFile","blob","navigator","msSaveBlob","fetch","then","r","download","MouseEvent","dispatchEvent","_x2","Course","_ref$online","_ref$isSelected","isSelected","startsIn","TeacherPage","param_id","match","root","path","_useShopCatalog","minWidth","_teacher$vk_info","teachersCourses","indexOf","profile","components_ErrorPage","Teachers","render","teacher_page_TeacherPage","exact","catalog_page_TeachersCatalogPage","SelectedCourse","onCourseDeselect","onTruncate","onDeselectClick","renderView","SelectedCoursesTab_objectSpread","height","minHeight","SelectedCoursesTab","sumBy","Page_BottomTab","TransitionGroup","CSSTransition","classNames","timeout","SelectedCoursesTab_SelectedCourse","Event","ShopCatalogPage","selectedCourses","onCourseSelect","onCourseClick","has","catalog_page_SelectedCoursesTab","toConsumableArray","CourseOverviewContext","common_CourseOverview","total_hours","renderLesson","_React$useContext4","CoursePriceTab","_React$useContext$cou","VideoCover","cover","_ref$locked","locked","width","Lesson","common_VideoCover","CoursePage","courseId","_useLessons","_React$useState11","_React$useState12","fetchLessons","_ref7","_callee5","_lessons","_context5","loadedLessons","defineProperty","useLessons","course_page_CoursePriceTab","Shop","Set","add","setState","catalog_page_ShopCatalogPage","component","course_page_CoursePage","CatalogPage","Tooltip","child","Children","only","position","cloneElement","react","LOADING_STATE","PENDING","LOADING","LOADED","SUCCESS","DONE","REJECTED","ERROR","useLoadingState","loading","rejected","setTimeout","clearTimeout","LoadingIndicator","errorMessage","SwitchTransition","appear","ui_Tooltip","File","_ref$file","file","downloadName","_ref$error","_ref$rejected","_ref$loading","_ref$done","_ref$deletable","deletable","onDelete","onIndicatorClick","downloadCallback","isUpload","LoadingIndicator_LoadingIndicator","StableCSSTransition","phase","node","getPrototypeOf","prototype","call","appliedClasses","ReactDOM","findDOMNode","FILE_STATUS","FileInputContext","allFilesReady","every","f","meta","isFileReady","getUploadParams","headers","Authorization","btoa","getFileProp","filename","getFilesFromEvent","accept","multiple","disabled","onFiles","maxFiles","extra","chosenFiles","isActive","Preview","_props$fileWithMeta","fileWithMeta","cancel","remove","restart","xhr","_props$meta","_props$meta$name","_props$meta$percent","percent","canRemove","_useRefValue","_useRefValue2","getResponse","setResponse","responseText","_JSON$parse","deleteCallback","hasError","startsWith","isRejected","isDone","ui_File","SubmitButton","submitting","hasChanged","onSubmit","isDisabled","submitCallback","common_StableCSSTransition","in","mountOnEnter","unmountOnExit","Layout","input","_ref4$previews","previews","submitButton","dropzoneProps","_ref5","_ref5$preloadedFiles","preloadedFiles","deletePreloadedFile","getCallbackFiles","FileInput","_props$initialFiles","initialFiles","_props$inputContent","inputContent","_props$maxFiles","_props$maxSizeBytes","maxSizeBytes","_props$isDisabled","setPreloadedFiles","setChanged","setSubmitting","_useRefValue3","_useRefValue4","getInputFiles","setInputFiles","newPreloadedFiles","handleChangeStatus","cloneDeep","handleSubmit","returnValue","Promise","react_dropzone_uploader_default","submitButtonContent","onChangeStatus","canCancel","SubmitButtonComponent","LayoutComponent","InputComponent","PreviewComponent","NavigationBlocker","unloadCallback","HomeworkLoader","lessonId","isHomeworkSubmissionClosed","hasChanges","setChanges","resolve","common_NavigationBlocker","ui_FileInput","LessonView","_ref$lesson","assignment","lesson_page_HomeworkLoader","LessonPage","_props$match$params","param_course","param_lesson","selectedLesson","now","otherLessons","lesson_page_LessonView","MyCourses","sortBy","lesson_page_LessonPage","courses_course_page_CoursePage","catalog_page_CatalogPage","useLocationChangeEffect","listen","onLocationChange","args","App","useForceTrailingSlash","getPrevPath","setPrevPath","scrollTo","useScrollToTop","_useSideBarState","isSideBarOpened","setSideBar","opened","useSideBarState","_useSideBarState2","toggleSideBar","showSidebar","components_Header","layoutAnimationClassNames","SideBar_SideBar","Login","Account","enter","enterActive","enterDone","exit","exitActive","Boolean","hostname","basename","store","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.c5098646.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.54b51040.svg\";","import 'react-app-polyfill/ie11';\r\nimport 'react-app-polyfill/stable';\r\nimport elementClosest  from 'element-closest';\r\n\r\nelementClosest(window);\r\n","import Auth from 'definitions/auth';\r\nimport axios from 'axios';\r\n\r\nexport const API_ROOT = 'https://egehackbottest.tk:8080';\r\n\r\nconst APIRequest = axios.create({\r\n    baseURL: API_ROOT\r\n});\r\n\r\nAPIRequest.interceptors.request.use(function (config) {\r\n    if (Auth.user) {\r\n        return {\r\n            auth: {\r\n                username: Auth.user.uid,\r\n                password: Auth.user.hash\r\n            },\r\n            ...config\r\n        }\r\n    }\r\n    else\r\n        throw new axios.Cancel('User not logged in.');\r\n});\r\n\r\nAPIRequest.interceptors.response.use(function (response) {\r\n    return response.data;\r\n});\r\n\r\nwindow.APIRequest = APIRequest;\r\n\r\nexport default APIRequest;\r\n","/*global VK*/\r\nimport APIRequest from \"definitions/api\";\r\n\r\nconst LOCAL_STORAGE_KEY = 'ege-hack-user-data';\r\n\r\nexport const AuthEventTypes = {\r\n    login: 'auth.login',\r\n    logout: 'auth.logout'\r\n};\r\n\r\nconst initVK = false;\r\n\r\nclass Auth {\r\n    user = null;\r\n\r\n    constructor() {\r\n        try {\r\n            const storedString = localStorage.getItem(LOCAL_STORAGE_KEY);\r\n            if (!storedString) {\r\n                this.user = null;\r\n                return;\r\n            }\r\n            const storedData = JSON.parse(storedString);\r\n            const {uid, first_name, last_name, photo, photo_rec, hash} = storedData;\r\n            if (!(uid && hash))\r\n                throw new Error(`Incomplete data parsed from local storage: ${storedString}`);\r\n            this.user = {uid, first_name, last_name, photo, photo_rec, hash};\r\n        }\r\n        catch (e) {\r\n            console.error('User data can not be recovered', e);\r\n            localStorage.removeItem(LOCAL_STORAGE_KEY);\r\n            this.user = null;\r\n        }\r\n    }\r\n\r\n    eventHandlers = {};\r\n\r\n    login = async (user) => {\r\n        if (!VK)\r\n            return;\r\n        if (!initVK)\r\n            VK.init({apiId: process.env.REACT_APP_VK_APP_ID});\r\n        // user = {\r\n        //     ...user,\r\n        //     uid: 1,\r\n        //     hash: '68ab57e7e70fae3f8f96afc0d85465a9'\r\n        // };\r\n        console.info('Login', user);\r\n        localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(user));\r\n        this.user = user;\r\n        // await this.getUserInfo();\r\n        // if (!this.userInfo)\r\n        //     return;\r\n        for(let handler of (this.eventHandlers[AuthEventTypes.login] || []))\r\n            handler(this.user);\r\n    };\r\n\r\n    logout = () => {\r\n        // VK.Auth.logout((data) => {\r\n            console.info('Logout');\r\n            localStorage.removeItem(LOCAL_STORAGE_KEY);\r\n            this.user = null;\r\n            this.userInfo = null;\r\n            for(let handler of (this.eventHandlers[AuthEventTypes.logout] || []))\r\n                handler();\r\n        // });\r\n    };\r\n\r\n    subscribe(eventType, handler) {\r\n        (this.eventHandlers[eventType] || (this.eventHandlers[eventType] = [])).push(handler);\r\n    }\r\n\r\n    unsubscribe(eventType, handler) {\r\n        this.eventHandlers[eventType] = this.eventHandlers[eventType].filter(func => func !== handler);\r\n    }\r\n\r\n    // subscribe(eventType, handler) {\r\n    //     VK.Observer.subscribe(eventType, handler);\r\n    // }\r\n    //\r\n    // unsubscribe(eventType, handler) {\r\n    //     VK.Observer.unsubscribe(eventType, handler);\r\n    // }\r\n\r\n    getUser() {\r\n        return this.user;\r\n    }\r\n\r\n    async getUserInfo() {\r\n        if (this.userInfo)\r\n            return this.userInfo;\r\n        try {\r\n            this.userInfo = await APIRequest.get('/accounts/info');\r\n        }\r\n        catch (e) {\r\n            console.error(e);\r\n            this.userInfo = null;\r\n        }\r\n        return this.userInfo;\r\n    }\r\n\r\n    loginWidget(elementId) {\r\n        if (!VK)\r\n            return;\r\n        if (!initVK)\r\n            VK.init({apiId: process.env.REACT_APP_VK_APP_ID});\r\n        VK.Widgets.Auth(elementId, {onAuth: this.login});\r\n    }\r\n}\r\n\r\nexport default new Auth();\r\n","import React from 'react';\r\n\r\nconst CoverImage = ({src, className, children, square=false, round=false}) => {\r\n    return (\r\n        <div className={`${className} cover ${square ? 'square-cover' : ''} ${round ? 'round-cover' : ''}`}>\r\n            <div className=\"cover-img\" style={{backgroundImage: `url(${src})`}}/>\r\n            {children}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CoverImage;\r\n","import React from 'react';\r\nimport logo from 'img/logo.svg';\r\nimport Auth from 'definitions/auth';\r\nimport {Link} from 'react-router-dom';\r\nimport CoverImage from \"./common/CoverImage\";\r\n\r\nconst Header = (props) => {\r\n    const {onMenuButtonClick, user, sidebar} = props;\r\n    return (\r\n        <header>\r\n            <div className=\"container-fluid header__container\">\r\n                <div className=\"row\">\r\n                    {sidebar && (\r\n                        <div className=\"col-auto d-lg-none\">\r\n                            <div className=\"nav-btn\" onClick={onMenuButtonClick}>\r\n                                <i className=\"icon-bars\"/>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                    <div className=\"col d-flex justify-content-center justify-content-lg-start p-0\">\r\n                        <div className=\"logo-container container d-flex align-items-center justify-content-center m-0\">\r\n                            <img src={logo} className=\"logo\" alt=\"Logo\"/>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"col-auto\">\r\n                        <div className=\"user-nav\">\r\n                            {user ? (\r\n                                <React.Fragment>\r\n                                    <div className=\"user-nav__user-name\">{user.first_name} {user.last_name}</div>\r\n                                    {user.photo_rec ? (\r\n                                        <div className=\"nav-btn\">\r\n                                            <CoverImage src={user.photo_rec} round square/>\r\n                                        </div>\r\n                                    ) : (\r\n                                        <div className=\"nav-btn\">\r\n                                            <i className=\"icon-profile\"/>\r\n                                        </div>\r\n                                    )}\r\n                                    <div className=\"user-nav__menu-container\">\r\n                                        <div className=\"user-nav__menu\">\r\n                                            <div className=\"user-nav__menu-options\">\r\n                                                <Link to=\"/account/\" className=\"menu-option\">\r\n                                                    <i className=\"icon-profile\"/>Аккаунт\r\n                                                </Link>\r\n                                                <Link to=\"/account/settings/\" className=\"menu-option\">\r\n                                                    <i className=\"icon-settings\"/>Настройки\r\n                                                </Link>\r\n                                                <div\r\n                                                    className=\"menu-option\"\r\n                                                    tabIndex={2}\r\n                                                    onClick={Auth.logout}>\r\n                                                    <i className=\"icon-logout\"/>Выход\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </React.Fragment>\r\n                            ) : (\r\n                                <React.Fragment>\r\n                                    <div className=\"nav-btn\">\r\n                                        <i className=\"icon-profile\"/>\r\n                                    </div>\r\n                                    <div className=\"user-nav__menu-container\">\r\n                                        <div className=\"user-nav__menu\">\r\n                                            <div className=\"user-nav__menu-options\">\r\n                                                <Link to=\"/login/\" className=\"menu-option\">\r\n                                                    <i className=\"icon-login\"/>Войти\r\n                                                </Link>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </React.Fragment>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </header>\r\n    );\r\n};\r\n\r\nexport default Header;\r\n","import React from 'react';\r\n\r\nexport default function Contacts({contacts: {vk, fb, ok, ig}}) {\r\n    return (\r\n        <div className=\"social-media font-light-grey\">\r\n            {vk && <a href={vk} className=\"social-media__link\"><i className=\"fab fa-vk vk\"/></a>}\r\n            {fb && <a href={fb} className=\"social-media__link\"><i className=\"fab fa-facebook-f fb\"/></a>}\r\n            {ok && <a href={ok} className=\"social-media__link\"><i className=\"fab fa-odnoklassniki ok\"/></a>}\r\n            {ig && <a href={ig} className=\"social-media__link\"><i className=\"fab fa-instagram ig\"/></a>}\r\n        </div>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport { NavLink } from \"react-router-dom\";\r\nimport Contacts from \"./common/Contacts\";\r\n\r\nfunction Link(props) {\r\n    return <NavLink className=\"layout__sidebar-menu-link\" activeClassName=\"active\" {...props}/>;\r\n}\r\n\r\nexport default class SideBar extends React.Component{\r\n    onClick = (event) => {\r\n        if (event.target === event.currentTarget || event.target.classList.contains('layout__sidebar-menu-link'))\r\n            this.props.onMenuClose();\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"layout__sidebar\" onClick={this.onClick}>\r\n                <div className=\"layout__sidebar-bar\">\r\n                    <div className=\"layout__sidebar-content\">\r\n                        <div className=\"layout__sidebar-menu\">\r\n                            <div className=\"layout__sidebar-menu-section\">\r\n                                <Link to=\"/courses/\">Мои курсы</Link>\r\n                                {/*<Link to=\"/homework/\">Домашняя работа</Link>*/}\r\n                            </div>\r\n                            <div className=\"layout__sidebar-menu-section\">\r\n                                <Link to=\"/shop/\">Магазин курсов</Link>\r\n                                <Link to=\"/teachers/\">Преподаватели</Link>\r\n                                {/*<Link to=\"/about/\">О нас</Link>*/}\r\n                            </div>\r\n                        </div>\r\n                        <Contacts contacts={{vk: '/', fb: '/', ig: '/'}}/>\r\n                        <div className=\"layout__sidebar-copyright font-size-sm font-light-grey\">\r\n                            Все права защищены<br/>\r\n                            \"ЕГЭHACK\"\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","export const LEARNING_STATUS = {\r\n  learning: 'learning',\r\n  finished: 'finished'\r\n};\r\n\r\nexport const DEFAULT_LOGIN_REDIRECT = '/shop/';\r\n","import {LoremIpsum} from \"lorem-ipsum\";\r\nimport poster from \"../img/dummy_poster.jpg\";\r\nimport _ from \"lodash\";\r\nimport {LEARNING_STATUS} from \"../definitions/constants\";\r\n\r\nconst lorem = new LoremIpsum();\r\n\r\nfunction getDate(daysForward) {\r\n    const date = new Date();\r\n    date.setDate(date.getDate() + daysForward);\r\n    return date;\r\n}\r\n\r\nexport const SUBJECTS = [\r\n    // { id: 'russian', name: 'Русский язык' },\r\n    // { id: 'literature', name: 'Литература' },\r\n    // { id: 'math', name: 'Математика' },\r\n    // { id: 'informatics', name: 'Информатика' },\r\n    // { id: 'physics', name: 'Физика' },\r\n    // { id: 'chemistry', name: 'Химия' },\r\n    // { id: 'biology', name: 'Биология' },\r\n    // { id: 'sociology', name: 'Обществознание' },\r\n    // { id: 'history', name: 'История' },\r\n    // { id: 'geography', name: 'География' },\r\n    // { id: 'english', name: 'Английский язык' },\r\n    // { id: 'german', name: 'Немецкий язык' },\r\n    // { id: 'french', name: 'Французский язык' },\r\n    // { id: 'chinese', name: 'Китайский язык' },\r\n    // { id: 'spanish', name: 'Испанский язык' }\r\n    { id: 1, name: 'Русский язык' },\r\n    { id: 2, name: 'Литература' },\r\n    { id: 3, name: 'Математика' },\r\n    { id: 4, name: 'Информатика' },\r\n    { id: 5, name: 'Физика' },\r\n    { id: 6, name: 'Химия' },\r\n    { id: 7, name: 'Биология' },\r\n    { id: 8, name: 'Обществознание' },\r\n    { id: 9, name: 'История' },\r\n    { id: 10, name: 'География' },\r\n    { id: 11, name: 'Английский язык' },\r\n    { id: 12, name: 'Немецкий язык' },\r\n    { id: 13, name: 'Французский язык' },\r\n    { id: 14, name: 'Китайский язык' },\r\n    { id: 15, name: 'Испанский язык' }\r\n];\r\n\r\nexport const TEACHERS = [\r\n    {\r\n        id: 154792439,\r\n        vk_info: {\r\n            id: 154792439,\r\n            first_name: \"Alexandra\",\r\n            last_name: \"Petrova\",\r\n            photo_max_orig: \"https://sun9-44.userapi.com/2Gx1eh3eOObO2tKqf0h3fuCDU0GEOjenhYUrjg/Q8hXPVStYbc.jpg?ava=1\"\r\n        },\r\n        subjects: [\r\n            {\r\n                id: 1,\r\n                name: \"Математика\",\r\n                description: \"Лучший предмет\",\r\n                image_link: \"/files/asdsadasda.jpg\"\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        id: 1,\r\n        vk_info: {\r\n            id: 1,\r\n            first_name: 'Елена',\r\n            last_name: 'Черткова',\r\n            photo_max_orig: poster,\r\n        },\r\n        subjects: SUBJECTS.slice(0,2),\r\n        contacts: {vk: '/', fb: '/', ok: '/', ig: '/'},\r\n        bio: lorem.generateSentences(1)\r\n    },\r\n    {\r\n        id: 2,\r\n        vk_info: {\r\n            id: 2,\r\n            first_name: 'Сергей',\r\n            last_name: 'Авдошин',\r\n            photo_max_orig: poster,\r\n        },\r\n        subjects: [SUBJECTS[3]],\r\n        contacts: {vk: '/', fb: '/', ok: '/', ig: '/'},\r\n        bio: lorem.generateSentences(1)\r\n    }\r\n];\r\n\r\nexport const COURSES = SUBJECTS.slice(0, 5).map((subject, i) => ({\r\n    name: `${subject.name}. Мастер группа. Апрель.`,\r\n    id: i,\r\n    subject_id: subject.id,\r\n    online: i <= 2,\r\n    image_link: poster,\r\n    date_start: getDate(7 + i),\r\n    date_end: getDate(7 + i),\r\n    // totalHours: 80,\r\n    description: lorem.generateParagraphs(1),\r\n    lessons: _.times(4, (j) => ({\r\n        num: j + 1,\r\n        id: j,\r\n        date: getDate(-4 + i + j),\r\n        name: `Занятие ${j + 1}`,\r\n        description: lorem.generateParagraphs(1),\r\n        image_link: poster\r\n    })),\r\n    teacher_ids: i <= 2 ? [TEACHERS[0].id] : TEACHERS.map(({id}) => id)\r\n}));\r\n\r\nexport const SHOP_CATALOG = {\r\n    catalog: COURSES.map((course, i) => ({...course, price: 2500, discount: i === 0 ? 1000 : undefined})),\r\n    // promotions: [{\r\n    //\r\n    // }]\r\n};\r\n\r\nexport const MY_COURSES = COURSES.map((course, i) => ({\r\n    ...course,\r\n    lessons: course.lessons.map((lesson, j) => ({\r\n        ...lesson,\r\n        watchProgress: lesson.date < new Date() ? (100 - j * 15) : undefined,\r\n        homework: {\r\n            files: [\r\n                {name: \"Задание\", url: \"/robots.txt\"},\r\n                {name: \"Дополнительное задание\", url: \"/robots.txt\"}\r\n            ],\r\n            description: lorem.generateParagraphs(1),\r\n            deadline: getDate(7),\r\n            submit: true,\r\n            submittedFiles: [\r\n                {\r\n                    \"original_file_name\": \"5_64x64.png\",\r\n                    \"id_file_name\": \"501371cc-f349-11e9-aa47-7990bff4dcd7.png\",\r\n                    \"file_link\": \"/files/601371cc-f349-11e9-aa47-7990bff4dcd7.png\"\r\n                }\r\n            ]\r\n        }\r\n    })),\r\n    status: i <= 2 ? LEARNING_STATUS.finished : LEARNING_STATUS.learning\r\n}));\r\n\r\nexport const TEST_ID = 1;\r\nexport const TEST_HASH = '68ab57e7e70fae3f8f96afc0d85465a9';\r\n","import React from \"react\";\r\nimport Auth, {AuthEventTypes} from \"../definitions/auth\";\r\nimport {useHistory} from \"react-router-dom\";\r\nimport APIRequest, {API_ROOT} from \"../definitions/api\";\r\nimport {SHOP_CATALOG, SUBJECTS, TEACHERS} from \"../data/test_data\";\r\n\r\nconst StoreContext = React.createContext(null);\r\n\r\nfunction useUserAuth() {\r\n    const [user, setUser] = React.useState(Auth.getUser());\r\n    const [userInfo, setUserInfo] = React.useState(null);\r\n\r\n    React.useEffect(() => {\r\n        const fetchUserInfo = async () => {\r\n            const userInfo = await Auth.getUserInfo();\r\n            // const userInfo = {};\r\n            setUserInfo(userInfo);\r\n        };\r\n        if (user)\r\n            fetchUserInfo();\r\n    }, [user]);\r\n\r\n    // const history = useHistory();\r\n    const loginCallback = React.useCallback((user, userInfo) => {\r\n        setUser(user);\r\n        // setUserInfo(userInfo);\r\n        // history.push('/shop/');\r\n    }, []);\r\n\r\n    const logoutCallback = React.useCallback(() => {\r\n        setUser(null);\r\n        setUserInfo(null);\r\n        // history.push('/login/');\r\n    }, []);\r\n\r\n    React.useLayoutEffect(() => {\r\n        Auth.subscribe(AuthEventTypes.login, loginCallback);\r\n        Auth.subscribe(AuthEventTypes.logout, logoutCallback);\r\n        return () => {\r\n            Auth.unsubscribe(AuthEventTypes.login, loginCallback);\r\n            Auth.unsubscribe(AuthEventTypes.logout, logoutCallback);\r\n        }\r\n    }, [loginCallback, logoutCallback]);\r\n    return [user, userInfo];\r\n}\r\n\r\nconst useShopCatalogStore = () => React.useState(null);\r\nconst useSubjectsStore = () => React.useState(null);\r\nconst useTeachersStore = () => React.useState(null);\r\nconst useLessonsStore = () => React.useState({});\r\n\r\nfunction useStoreData() {\r\n    const [catalog, setCatalog] = useShopCatalogStore();\r\n    const [subjects, setSubjects] = useSubjectsStore();\r\n    const [teachers, setTeachers] = useTeachersStore();\r\n    const [lessons, setLessons] = useLessonsStore();\r\n    return {\r\n        data: {\r\n            catalog,\r\n            subjects,\r\n            teachers,\r\n            lessons\r\n        },\r\n        setters: {\r\n            setCatalog,\r\n            setSubjects,\r\n            setTeachers,\r\n            setLessons\r\n        }\r\n    }\r\n}\r\n\r\nconst requests = {};\r\n\r\nexport function useSubjects() {\r\n    const {data: {subjects}, setters: {setSubjects}} = React.useContext(StoreContext);\r\n    const [error, setError] = React.useState(null);\r\n    const fetchSubjects = React.useCallback(async () => {\r\n        if (requests.subjects)\r\n            return requests.subjects;\r\n        const request = APIRequest.get('/subjects');\r\n        requests.subjects = request;\r\n        try {\r\n            if (error)\r\n                setError(null);\r\n            const subjects = await request;\r\n            // const subjects = SUBJECTS;\r\n            setSubjects(subjects);\r\n        } catch (e) {\r\n            console.error(e);\r\n            setError(e);\r\n        }\r\n        finally {\r\n            delete requests.subjects;\r\n        }\r\n        return request;\r\n    }, [error]);\r\n\r\n    React.useEffect(() => {\r\n        if (!(subjects || requests.subjects || error)) {\r\n            fetchSubjects();\r\n        }\r\n    }, [subjects, error]);\r\n    if (error) {\r\n        return {subjects, error, retry: fetchSubjects};\r\n    }\r\n    else {\r\n        return {subjects};\r\n    }\r\n}\r\n\r\nexport function useTeachers() {\r\n    const {subjects, errorLoadingSubjects, reloadSubjects} = useSubjects();\r\n    const {data: {teachers}, setters: {setTeachers}} = React.useContext(StoreContext);\r\n    const [error, setError] = React.useState(null);\r\n    const fetchTeachers = React.useCallback(async () => {\r\n        if (requests.teachers)\r\n            return requests.teachers;\r\n        const request = APIRequest.get('/accounts/teachers');\r\n        requests.teachers = request;\r\n        try {\r\n            if (error)\r\n                setError(null);\r\n            const teachers = (await request).map(({account_id: id, ...teacher}) => ({id, ...teacher}));\r\n            // const teachers = TEACHERS;\r\n            console.log('set teachers', teachers);\r\n            setTeachers(teachers);\r\n        } catch (e) {\r\n            console.error(e);\r\n            setError(e);\r\n        }\r\n        finally {\r\n            delete requests.teachers;\r\n        }\r\n        return request;\r\n    }, [error]);\r\n\r\n    React.useEffect(() => {\r\n        if (!(teachers || requests.teachers || error)) {\r\n            fetchTeachers();\r\n        }\r\n    }, [teachers, error]);\r\n\r\n    if (error || errorLoadingSubjects) {\r\n        return {\r\n            teachers,\r\n            subjects,\r\n            error: error || errorLoadingSubjects ,\r\n            retry: () => {\r\n                if (error)\r\n                    fetchTeachers();\r\n                if (errorLoadingSubjects)\r\n                    reloadSubjects();\r\n            }\r\n        };\r\n    }\r\n    else {\r\n        return {teachers, subjects};\r\n    }\r\n}\r\n\r\nexport function useShopCatalog() {\r\n    const {subjects, errorLoadingSubjects, reloadSubjects} = useSubjects();\r\n    const {data: {catalog}, setters: {setCatalog}} = React.useContext(StoreContext);\r\n    const [error, setError] = React.useState(null);\r\n    const fetchCatalog = React.useCallback(async () => {\r\n        if (requests.shopCatalog)\r\n            return requests.shopCatalog;\r\n        const request = APIRequest.get('/courses', {params: {\r\n            group: 'MARKET'\r\n            }});\r\n        requests.shopCatalog = request;\r\n        try {\r\n            if (error)\r\n                setError(null);\r\n            const catalog = (await request).map(({date_start, date_end, image_link, teacher_id, ...rest}) => ({\r\n                date_start: new Date(date_start),\r\n                date_end: new Date(date_end),\r\n                image_link: `${API_ROOT}${image_link}`,\r\n                teacher_ids: [teacher_id],\r\n                ...rest\r\n            }));\r\n            // const catalog = SHOP_CATALOG.catalog;\r\n            setCatalog(catalog);\r\n        } catch (e) {\r\n            console.error(e);\r\n            setError(e);\r\n        }\r\n        finally {\r\n            delete requests.shopCatalog;\r\n        }\r\n        return request;\r\n    }, [error]);\r\n\r\n    React.useEffect(() => {\r\n        if (!(catalog || requests.shopCatalog || error)) {\r\n            fetchCatalog();\r\n        }\r\n    }, [catalog, error]);\r\n\r\n    if (error || errorLoadingSubjects) {\r\n        return {\r\n            catalog,\r\n            subjects,\r\n            error: error || errorLoadingSubjects ,\r\n            retry: () => {\r\n                if (error)\r\n                    fetchCatalog();\r\n                if (errorLoadingSubjects)\r\n                    reloadSubjects();\r\n            }\r\n        };\r\n    }\r\n    else {\r\n        return {catalog, subjects};\r\n    }\r\n}\r\n\r\nexport function useLessons(courseId) {\r\n    const {data: {lessons}, setters: {setLessons}} = React.useContext(StoreContext);\r\n    const [error, setError] = React.useState(null);\r\n    const fetchLessons = React.useCallback(async (courseId) => {\r\n        if (requests.lessons && requests.lessons[courseId])\r\n            return requests.lessons[courseId];\r\n        const request = APIRequest.get(`/lessons`, {params: {\r\n                courseId\r\n            }});\r\n        (requests.lessons || (requests.lessons = {}))[courseId] = request;\r\n        try {\r\n            if (error)\r\n                setError(null);\r\n            const lessons = (await request).map(lesson => ({...lesson, image_link: `${API_ROOT}${lesson.image_link}`}));\r\n            console.log(lessons);\r\n            setLessons(loadedLessons => ({...loadedLessons, [courseId]: lessons}));\r\n        } catch (e) {\r\n            console.error(e);\r\n            setError(e);\r\n        }\r\n        finally {\r\n            delete requests.lessons[courseId];\r\n        }\r\n        return request;\r\n    }, [error]);\r\n\r\n    React.useEffect(() => {\r\n        if (!(lessons[courseId] || (requests.lessons && requests.lessons[courseId]) || error)) {\r\n            fetchLessons(courseId);\r\n        }\r\n    }, [lessons, courseId, error]);\r\n\r\n    if (error) {\r\n        return {\r\n            lessons: lessons[courseId],\r\n            error: error,\r\n            retry: () => {\r\n                if (error)\r\n                    fetchLessons();\r\n            }\r\n        };\r\n    }\r\n    else {\r\n        return {lessons: lessons[courseId]};\r\n    }\r\n}\r\n\r\nconst GlobalStore = ({children}) => {\r\n    const [user, userInfo] = useUserAuth();\r\n    const data = useStoreData();\r\n    return (\r\n        <StoreContext.Provider value={{user, userInfo, ...data}}>\r\n            {children}\r\n        </StoreContext.Provider>\r\n    )\r\n};\r\n\r\nexport default GlobalStore;\r\n\r\nexport function useUser() {\r\n   const {user, userInfo} = React.useContext(StoreContext);\r\n   return {user, userInfo};\r\n}\r\n","import React from 'react';\r\nimport {Helmet} from \"react-helmet\";\r\nimport Sticky from 'react-sticky-el';\r\nimport {Link, Redirect} from \"react-router-dom\";\r\nimport {useUser} from \"../store\";\r\n\r\nexport const PageLoadingPlaceholder = () => (\r\n    <div className=\"layout__content\">\r\n        <div className=\"layout__loading-spinner\">\r\n            <i className=\"spinner-border\"/>\r\n        </div>\r\n    </div>\r\n);\r\n\r\nexport const PageLink = ({to, arrow=true, forward=true, className, children, ...props}) => (\r\n    <Link\r\n        className={`${arrow ? 'arrow-link' : ''} ${forward ? 'arrow-link-forward' : 'arrow-link-backward'} ${className || ''}`}\r\n        to={to}\r\n        {...props}>\r\n        {children}\r\n    </Link>\r\n);\r\n\r\nexport const PageContent = ({children, className, parentSection}) => (\r\n    <div className={`layout__content-container container ${className || ''}`}>\r\n        {parentSection && (\r\n            <PageLink\r\n                to={parentSection.url || '..'}\r\n                forward={false}\r\n                className=\"layout__content-parent-section-link\">\r\n                {parentSection.name}\r\n            </PageLink>\r\n        )}\r\n        {children}\r\n    </div>\r\n);\r\n\r\nexport const BottomTab = ({children, className, ...stickyProps}) => (\r\n    <Sticky mode=\"bottom\" {...stickyProps}>\r\n        <div className={`layout__bottom-tab ${className || ''}`}>\r\n            {children}\r\n        </div>\r\n    </Sticky>\r\n);\r\n\r\nclass PageErrorBoundary extends React.Component {\r\n    state = {\r\n        error: null\r\n    }\r\n}\r\n\r\nconst Page = ({title, className, children, checkLogin=true, location}) => {\r\n    //TODO: check permissions\r\n    const {user, userInfo} = useUser();\r\n    if (checkLogin) {\r\n        if (!user) {\r\n            return (\r\n                <Redirect to={{\r\n                    pathname: '/login/',\r\n                    state: location ? { referrer: location.pathname } : undefined\r\n                }}/>);\r\n        }\r\n    }\r\n    return (\r\n        <div className={`layout__content ${className || ''}`}>\r\n            {title && <Helmet><title>{title} – ЕГЭ HACK</title></Helmet>}\r\n            {children}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Page;\r\n","import React from 'react';\r\nimport {useUser} from \"../store\";\r\n\r\nexport function useTruncate(text) {\r\n    const descriptionRef = React.useRef(null);\r\n    const [isFontLoaded, setFontLoaded] = React.useState(document.readyState === \"complete\");\r\n    React.useEffect(() => {\r\n        if (!text)\r\n            return;\r\n        function handleResize() {\r\n            if (descriptionRef.current) {\r\n                descriptionRef.current.onResize();\r\n            }\r\n        }\r\n        window.addEventListener('resize', handleResize);\r\n        if (isFontLoaded)\r\n            return () => {\r\n                window.removeEventListener('resize', handleResize);\r\n            };\r\n        if (document.readyState === \"complete\") {\r\n            setFontLoaded(true);\r\n            return () => {\r\n                window.removeEventListener('resize', handleResize);\r\n            };\r\n        }\r\n        else {\r\n            function handleLoading() {\r\n                setFontLoaded(true);\r\n            }\r\n            window.addEventListener('load', handleLoading);\r\n            return () => {\r\n                window.removeEventListener('load', handleLoading);\r\n            };\r\n        }\r\n    }, [isFontLoaded, text]);\r\n    return [descriptionRef, isFontLoaded];\r\n}\r\n\r\nexport function useRefValue(initialValue) {\r\n    const ref = React.useRef(initialValue);\r\n    const getValue = React.useCallback(() => ref.current, []);\r\n    const setValue = React.useCallback((value) => {\r\n        ref.current = value;\r\n    }, []);\r\n    return [getValue, setValue];\r\n}\r\n\r\nexport function useIsMounted() {\r\n    const [getIsMounted, setIsMounted] = useRefValue(false);\r\n\r\n    React.useLayoutEffect(() => {\r\n        console.log('mounting');\r\n        setIsMounted(true);\r\n        return () => {\r\n            console.log('unmounting');\r\n            setIsMounted(false);\r\n        };\r\n    }, []);\r\n\r\n    return getIsMounted;\r\n}\r\n\r\nexport function useUpdateEffect(effect, dependencies = []) {\r\n    const isInitialMount = React.useRef(true);\r\n\r\n    React.useEffect(() => {\r\n        if (!isInitialMount.current) {\r\n            effect();\r\n        }\r\n    }, dependencies); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n    React.useEffect(() => {\r\n        isInitialMount.current = false;\r\n    }, []);\r\n}\r\n\r\nexport function useForceUpdate() {\r\n    const [, update] = React.useReducer(state => !state, true);\r\n    return update;\r\n}\r\n\r\n// export function useCheckPageAccess(checkLogin) {\r\n//\r\n// }\r\n","import React from \"react\";\r\nimport Page from \"components/Page\";\r\nimport Auth from \"definitions/auth\";\r\nimport {useUser} from \"../../../store\";\r\nimport {Redirect, useLocation} from \"react-router-dom\";\r\nimport {DEFAULT_LOGIN_REDIRECT} from \"definitions/constants\";\r\n\r\nconst LoginPage = (props) => {\r\n    const {location} = props;\r\n    const {user, userInfo} = useUser();\r\n\r\n    React.useLayoutEffect(() => {\r\n        Auth.loginWidget('vk-auth');\r\n    }, []);\r\n\r\n    if (user) {\r\n        if (location.state && location.state.referrer)\r\n            return (<Redirect to={location.state.referrer}/>);\r\n        return (<Redirect to={DEFAULT_LOGIN_REDIRECT}/>);\r\n    }\r\n    return (\r\n        <Page\r\n            title=\"Вход\"\r\n            className=\"login-page align-items-center justify-content-center\"\r\n            checkLogin={false}\r\n            location={location}>\r\n            <div id=\"vk-auth\"/>\r\n        </Page>\r\n    );\r\n};\r\n\r\nexport default LoginPage;\r\n","import React from \"react\";\r\nimport CoverImage from \"./CoverImage\";\r\nimport Contacts from \"./Contacts\";\r\n\r\nconst UserProfile = ({first_name, last_name, photo, contacts, about, role}) => {\r\n    const fullName = `${first_name} ${last_name}`;\r\n    return (\r\n        <React.Fragment>\r\n            <div className=\"user-profile__avatar-container\">\r\n                <div className=\"user-profile__avatar-wrap\">\r\n                    <CoverImage src={photo} className=\"user-profile__avatar\" round square/>\r\n                </div>\r\n            </div>\r\n            <div className=\"user-profile__info layout__content-block\">\r\n                <div className=\"d-flex flex-column align-items-center\">\r\n                    <h2>{fullName}</h2>\r\n                    {role && <div className=\"font-size-sm\">{role}</div>}\r\n                    {contacts && <Contacts contacts={contacts}/>}\r\n                    <div className=\"description-text font-size-sm\">{about}</div>\r\n                </div>\r\n            </div>\r\n        </React.Fragment>\r\n    )\r\n};\r\n\r\nexport default UserProfile;\r\n","import React from \"react\";\r\nimport Page, {PageContent} from \"components/Page\";\r\nimport UserProfile from \"components/common/UserProfile\";\r\nimport {useUser} from \"store\";\r\n\r\nconst AccountPage = () => {\r\n    const {user, userInfo} = useUser();\r\n    return (\r\n        <Page title=\"Аккаунт\" className=\"account-page\">\r\n            <PageContent>\r\n                <UserProfile {...user}/>\r\n            </PageContent>\r\n        </Page>\r\n    );\r\n};\r\n\r\nexport default AccountPage;\r\n","import React from 'react';\r\nimport Truncate from 'react-truncate';\r\nimport {useTruncate} from \"../../hooks/common\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\nexport default function ListItem(props) {\r\n    const {\r\n        preview, title, subtitle, description, item, selectable,\r\n        className,\r\n        children: action,\r\n        link,\r\n        onClick: clickCallback,\r\n        onActionClick: actionCallback,\r\n        callbackProps} = props;\r\n    const [descriptionRef, isFontLoaded] = useTruncate(description);\r\n    const onClick = React.useCallback((event) => {\r\n        const clicked = selectable && !(actionCallback && event.target.closest('.list__item-action'));\r\n        if (clicked && clickCallback)\r\n            clickCallback(item, callbackProps);\r\n        else if (!clicked && link)\r\n            event.preventDefault();\r\n    }, [item, clickCallback, selectable, callbackProps, link, actionCallback]);\r\n    const onActionClick = React.useCallback((event) => {\r\n        if (selectable && actionCallback)\r\n            actionCallback(item, callbackProps);\r\n    }, [item, actionCallback, selectable, callbackProps]);\r\n    const content = (\r\n        <div className=\"row align-items-center\">\r\n            <div className=\"list__item-preview col-12 col-md-auto\">\r\n                {preview}\r\n            </div>\r\n            <div className=\"list__item-description col align-self-stretch\">\r\n                <div className=\"list__item-description-inner\">\r\n                    <div className=\"title font-size-lg\">{title}</div>\r\n                    {subtitle && <div className=\"subtitle\">{subtitle}</div>}\r\n                    {description && (\r\n                        <div className=\"description-container font-size-xs\">\r\n                            <div className=\"description-text\">\r\n                                {isFontLoaded ? (\r\n                                    <Truncate lines={2} ref={descriptionRef}>\r\n                                        {description}\r\n                                    </Truncate>\r\n                                ) : null}\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n            {action && (\r\n                <div\r\n                    className=\"list__item-action col-auto d-flex align-items-center flex-column\"\r\n                    onClick={onActionClick}>\r\n                    {action}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n    if (link) {\r\n        return (\r\n            <Link\r\n                className={`list__item container ${selectable ? 'list__item-selectable' : ''} ${className || ''}`}\r\n                to={link}\r\n                onClick={onClick}>\r\n                {content}\r\n            </Link>\r\n        );\r\n    }\r\n    else {\r\n        return (\r\n            <div className={`list__item container ${selectable ? 'list__item-selectable' : ''} ${className || ''}`} onClick={onClick}>\r\n                {content}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React from 'react';\r\nimport ListItem from \"./ListItem\";\r\n\r\nexport default function List(props) {\r\n    const {children, renderItem, renderProps, flex, className} = props;\r\n    return flex\r\n        ? (\r\n            <div className={`${className || ''} list`}>\r\n                <div className=\"container p-0 overflow-hidden\">\r\n                    <div className=\"row\">\r\n                        {children.map((item, index) => renderItem(item, renderProps, index))}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n        : (\r\n        <div className={`${className || ''} list`}>\r\n            {children.map((item, index) => renderItem(item, renderProps, index))}\r\n        </div>\r\n    );\r\n}\r\n\r\nList.defaultProps = {\r\n    renderItem: (item, props, index) => <ListItem {...item} {...props} key={index}/>\r\n};\r\n","import React from 'react';\r\nimport {Scrollbars as ScrollComponent} from 'react-custom-scrollbars';\r\n\r\nconst renderTrackVertical = props => (<div {...props} className=\"track track-vertical\"/>);\r\nconst renderThumbVertical = props => (<div {...props} className=\"thumb thumb-vertical\"/>);\r\nconst renderTrackHorizontal = props => (<div {...props} className=\"track track-horizontal\"/>);\r\nconst renderThumbHorizontal = props => (<div {...props} className=\"thumb thumb-horizontal\"/>);\r\n\r\nconst ScrollBars = React.forwardRef(({children, ...props}, ref) => {\r\n    return (\r\n        <ScrollComponent\r\n            renderTrackVertical={renderTrackVertical}\r\n            renderThumbVertical={renderThumbVertical}\r\n            renderTrackHorizontal={renderTrackHorizontal}\r\n            renderThumbHorizontal={renderThumbHorizontal}\r\n            ref={ref}\r\n            {...props}>\r\n            {children}\r\n        </ScrollComponent>\r\n    );\r\n});\r\n\r\nexport default ScrollBars;\r\n","import React, {Component} from 'react';\r\nimport SelectInput, { components } from 'react-select';\r\nimport _ from 'lodash';\r\nimport PropTypes from 'prop-types';\r\nimport ScrollBars from \"./ScrollBars\";\r\n\r\nconst DropdownIndicator = (props) => (\r\n    <components.DropdownIndicator {...props}>\r\n        <i className=\"icon-angle\"/>\r\n    </components.DropdownIndicator>\r\n);\r\n\r\nconst SelectContainer = ({ children, selectProps, hasValue, setValue, ...props }) => (\r\n    <div className=\"select\">\r\n        <components.SelectContainer\r\n            selectProps={{...selectProps, isClearable: false}}\r\n            hasValue={hasValue}\r\n            setValue={setValue}\r\n            {...props}>\r\n            {children}\r\n        </components.SelectContainer>\r\n        {selectProps.isClearable && (\r\n            <div className={hasValue ? 'select__clear-btn' : 'select__clear-btn select__clear-btn-hidden'} onClick={() => {setValue(null);}}>\r\n                <i className=\"icon-close\"/>\r\n            </div>\r\n        )}\r\n    </div>\r\n);\r\n\r\n\r\nexport const Option = ({content, ...props}) => (\r\n    <components.Option {...props}>\r\n        {content ? content : props.label}\r\n    </components.Option>\r\n);\r\n\r\nOption.propTypes = {\r\n    content: PropTypes.node,\r\n    label: PropTypes.node\r\n};\r\n\r\nclass MenuList extends Component {\r\n    componentDidMount() {\r\n        //needed to the select to scroll the list to the selected option\r\n        this.props.innerRef(this.scrollBar.view);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <ScrollBars\r\n                autoHeight\r\n                hideTracksWhenNotNeeded\r\n                ref={ref => { this.scrollBar = ref; }}\r\n                autoHeightMax={this.props.maxHeight}>\r\n                <components.MenuList {...this.props}>\r\n                    {this.props.children}\r\n                </components.MenuList>\r\n            </ScrollBars>\r\n        );\r\n    }\r\n\r\n    static propTypes = {\r\n        maxHeight: PropTypes.number.isRequired,\r\n        children: PropTypes.node.isRequired,\r\n        innerRef: PropTypes.func.isRequired\r\n    }\r\n}\r\n\r\n//TODO: try react virtualized select\r\nexport default class Select extends React.PureComponent {\r\n    onChange = (option) => {\r\n        this.props.callback(option ? option.value : null, this.props.name);\r\n    };\r\n\r\n    render() {\r\n        const {name, options, value, components, selectProps, isClearable=true, isSearchable=true, placeholder} = this.props;\r\n        return (\r\n            <SelectInput\r\n                name={name}\r\n                options={options}\r\n                maxMenuHeight={200}\r\n                value={_.find(options, {value: value}) || null}\r\n                className='select__container' classNamePrefix='select'\r\n                onChange={this.onChange}\r\n                menuPlacement=\"auto\"\r\n                noOptionsMessage={() => 'Нет опций'}\r\n                components={\r\n                    components ? ({\r\n                        Option,\r\n                        MenuList,\r\n                        DropdownIndicator,\r\n                        SelectContainer,\r\n                        ...components\r\n                    }) : ({\r\n                        Option,\r\n                        MenuList,\r\n                        DropdownIndicator,\r\n                        SelectContainer,\r\n                    })\r\n                }\r\n                styles={{\r\n                    //removes default styles from option elements\r\n                    option: () => ({})\r\n                }}\r\n                isClearable={isClearable}\r\n                isSearchable={isSearchable}\r\n                placeholder={placeholder}\r\n                {...selectProps}\r\n            />\r\n        );\r\n    }\r\n\r\n    static propTypes = {\r\n        name: PropTypes.string.isRequired,\r\n        options: PropTypes.arrayOf(PropTypes.shape({\r\n            value: PropTypes.any,\r\n            label: PropTypes.any\r\n        })).isRequired,\r\n        callback: PropTypes.func.isRequired,\r\n        value: PropTypes.any,\r\n        selectProps: PropTypes.object,\r\n        components: PropTypes.object\r\n    }\r\n}\r\n","import React from 'react';\r\nimport Select from \"./Select\";\r\n\r\nfunction useChangeHandler(callback, inputProp = 'value') {\r\n    return React.useCallback((event) => {\r\n        callback(event.currentTarget[inputProp], event.currentTarget.name, event);\r\n    }, [callback, inputProp])\r\n}\r\n\r\nconst CheckBox = ({value, onChange: callback, name, label, ...props}) => {\r\n    const onChange = useChangeHandler(callback, 'checked');\r\n    return (\r\n        <label className={`input input-checkbox`}>\r\n            <input type=\"checkbox\" name={name} checked={value} onChange={onChange} {...props}/>\r\n            <span className=\"input__box\"/>\r\n            <span className=\"input__label\">{label}</span>\r\n        </label>\r\n    );\r\n};\r\n\r\nconst Input = ({className, onChange: callback, ...props}) => {\r\n    const onChange = useChangeHandler(callback);\r\n    return (\r\n        <input className={`input ${className || ''}`} onChange={onChange} {...props}/>\r\n    );\r\n};\r\n\r\nObject.assign(Input, {\r\n    CheckBox,\r\n    Select\r\n});\r\n\r\nexport default Input;\r\n\r\n","import React from 'react';\r\nimport {useHistory, useLocation} from 'react-router-dom';\r\nimport List from \"./List\";\r\nimport Input from \"../ui/Input\";\r\nimport Page from \"../Page\";\r\n\r\nexport const CatalogContext = React.createContext({});\r\n\r\nconst Filter = ({filterBy: {subject:filterBySubject = true, online:filterByOnline = true}={}}) => {\r\n    const {options, subject, online, onChange} = React.useContext(CatalogContext);\r\n    return (\r\n        <div className=\"layout__content-block catalog__filters\">\r\n            <div className=\"container p-0\">\r\n                <div className=\"row\">\r\n                    {filterBySubject && (\r\n                        <div className=\"col-auto d-flex align-items-center\">\r\n                            <Input.Select\r\n                                name=\"subject\"\r\n                                options={options}\r\n                                value={subject}\r\n                                placeholder='Предмет'\r\n                                callback={onChange}/>\r\n                        </div>\r\n                    )}\r\n                    {filterByOnline && (\r\n                        <div className=\"col-auto d-flex align-items-center\">\r\n                            <Input.CheckBox\r\n                                name=\"online\"\r\n                                value={online}\r\n                                label=\"Онлайн\"\r\n                                onChange={onChange}/>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst Catalog = ({renderFunc, placeholder, baseUrl, ...listProps}) => {\r\n    const {items, renderProps} = React.useContext(CatalogContext);\r\n    const renderItem = React.useCallback((item) => {\r\n        return renderFunc(item, {link: `${item.id}/`, ...renderProps});\r\n    }, [renderFunc, renderProps]);\r\n    return (\r\n        <div className=\"layout__content-block catalog__catalog\">\r\n            {items.length > 0 ? (\r\n                <List {...listProps}\r\n                    renderItem={renderItem}>\r\n                    {items}\r\n                </List>\r\n            ) : (\r\n                <div className=\"catalog__empty-catalog-fallback-message text-center font-size-sm\">\r\n                    {placeholder}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst Body = (props) => {\r\n    const {options, filterItems, children, renderProps={}} = props;\r\n    const history = useHistory();\r\n    const location = useLocation();\r\n    const params = new URLSearchParams(location.search);\r\n    const subject = parseInt(params.get('subject')) || null;\r\n    const online = params.get('online') === 'true';\r\n    const onFilterChange = React.useCallback((value, name) => {\r\n        const params = new URLSearchParams(location.search);\r\n        if (value)\r\n            params.set(name, value);\r\n        else\r\n            params.delete(name);\r\n        // setSubject(option);\r\n        history.push({\r\n            pathname: location.pathname,\r\n            search: `?${params}`\r\n        });\r\n    }, [location, history]);\r\n    const matchingItems = filterItems(subject, online);\r\n\r\n    return (\r\n        <CatalogContext.Provider\r\n            value={{\r\n                options, subject, online, onChange: onFilterChange, items: matchingItems, renderProps\r\n            }}>\r\n            <div className=\"catalog\">\r\n                {children}\r\n            </div>\r\n        </CatalogContext.Provider>\r\n    );\r\n};\r\n//\r\n// const CatalogPage = ({title, className, BodyComponent = Body, ...props}) => {\r\n//     return (\r\n//         <Page title={title} className={className}>\r\n//             <BodyComponent {...props}/>\r\n//         </Page>\r\n//     )\r\n// };\r\n\r\nexport default {\r\n    Filter,\r\n    Catalog,\r\n    Body,\r\n    // Page: CatalogPage\r\n};\r\n","import React from 'react';\r\nimport _ from 'lodash';\r\nimport {Link} from \"react-router-dom\";\r\nimport CoverImage from \"./CoverImage\";\r\nimport Contacts from \"./Contacts\";\r\n\r\nexport default function Teacher(props) {\r\n    const {\r\n        teacher: {\r\n        vk_info: {first_name, last_name, photo_max_orig: photo}, contacts, subjects: teacherSubjects, bio: about\r\n        },\r\n        subjects,\r\n        link,\r\n        bio=false,\r\n        className} = props;\r\n    const onClick = React.useCallback((event) => {\r\n        const clicked = !event.target.closest('.social-media');\r\n        // event.preventDefault();\r\n    }, []);\r\n    // const teacherSubjects = subject_ids.map(id => _.find(subjects, {id}));\r\n    return (\r\n        <Link to={link} className={`${className} teacher-profile`} onClick={onClick}>\r\n            <div className=\"container p-0\">\r\n                <div className=\"row flex-nowrap\">\r\n                    <div className=\"col-auto d-flex align-items-center\">\r\n                        <CoverImage src={photo} className=\"teacher-profile__photo\" round square/>\r\n                    </div>\r\n                    <div className=\"col d-flex flex-column justify-content-center\">\r\n                        <h3 className=\"teacher-profile__name\">{first_name} {last_name}</h3>\r\n                        {bio && (\r\n                            <div className=\"teacher-profile__subjects font-size-sm\">\r\n                                {teacherSubjects.map(({name}, i) => i === 0 ? name : name.toLowerCase()).join(', ')}\r\n                            </div>)}\r\n                        {contacts && (<Contacts contacts={contacts}/>)}\r\n                    </div>\r\n                </div>\r\n                {bio && (\r\n                    <div className=\"row\">\r\n                        <div className=\"col-12 description-text\">\r\n                            {about}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </Link>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport _  from 'lodash';\r\nimport Catalog from \"components/common/Catalog\";\r\nimport Teacher from \"../../../common/Teacher\";\r\n\r\nconst Filter = (props) => (<Catalog.Filter filterBy={{online: false}} {...props}/>);\r\n\r\nconst TeachersCatalog = (props) => {\r\n    const renderTeacher = React.useCallback((teacher, {link, subjects}) => (\r\n        <div className=\"list__item col-12 col-md-6 d-flex\" key={teacher.id}>\r\n            <Teacher\r\n                teacher={teacher}\r\n                subjects={subjects}\r\n                bio\r\n                link={link}/>\r\n        </div>\r\n    ), []);\r\n    return (\r\n        <Catalog.Catalog\r\n            placeholder=\"Нет преподавателей, соответствующих условиям поиска\"\r\n            flex\r\n            renderFunc={renderTeacher}\r\n            {...props}/>\r\n    );\r\n};\r\n\r\nconst Body = (props) => {\r\n    const {teachers, subjects, ...otherProps} = props;\r\n\r\n    const options = React.useMemo(() => {\r\n        const subjectsMap = _.zipObject(subjects.map(({id}) => id), subjects);\r\n        const subjectsTeachers = _.reduce(teachers, (result, teacher) => {\r\n            teacher.subjects.forEach(subject => {result[subject.id] = subject});\r\n            return result;\r\n        }, {});\r\n        return _.values(subjectsTeachers).map(({id, name}) => ({value: id, label: name}));\r\n    }, [teachers, subjects]);\r\n\r\n    const getMatchingCourses = React.useCallback((subject) => teachers.filter((teacher) =>\r\n        (subject ? teacher.subjects.some(({id}) => subject === id)  : true)), [teachers]);\r\n\r\n    return (\r\n        <Catalog.Body\r\n            options={options}\r\n            renderProps={{subjects}}\r\n            filterItems={getMatchingCourses}\r\n            {...otherProps}/>\r\n    )\r\n};\r\n\r\n// const Page = (props) => (<Catalog.Page BodyComponent={Body} {...props}/>);\r\n\r\nexport default {\r\n    ...Catalog,\r\n    Filter,\r\n    Catalog: TeachersCatalog,\r\n    Body,\r\n    // Page\r\n}\r\n","import React from \"react\";\r\nimport Page, {PageContent, PageLoadingPlaceholder} from \"components/Page\";\r\nimport TeachersCatalog from \"./TeachersCatalog\";\r\nimport {useTeachers} from \"store\";\r\n\r\nconst TeachersCatalogPage = ({location}) => {\r\n    const {teachers, subjects, error, retry} = useTeachers();\r\n    return (\r\n        <Page\r\n            title=\"Мои курсы\"\r\n            className=\"catalog teachers-catalog\"\r\n            location={location}>\r\n            {!(teachers && subjects) ? (\r\n                    <PageLoadingPlaceholder/>\r\n                ) : (\r\n                <TeachersCatalog.Body\r\n                    subjects={subjects}\r\n                    teachers={teachers}>\r\n                    <PageContent>\r\n                        <TeachersCatalog.Filter/>\r\n                        <TeachersCatalog.Catalog/>\r\n                    </PageContent>\r\n                </TeachersCatalog.Body>\r\n            )\r\n            }\r\n        </Page>\r\n    );\r\n};\r\n\r\nexport default TeachersCatalogPage;\r\n","import React from \"react\";\r\n\r\nconst Button = ({className, children, active = true, neutral=false, icon, iconAction, tag:Tag='div', onClick, ...props}) => {\r\n    // const clickCallback = React.useCallback((e) => {\r\n    //     console.log(e.target, e.currentTarget, e.target === e.currentTarget);\r\n    //     if (e.target === e.currentTarget)\r\n    //         onClick(e);\r\n    // }, [onClick]);\r\n    return (\r\n        <Tag\r\n            className={`btn ${active ? '' : 'btn-inactive'} ${neutral ? 'btn-neutral' : ''} ${className ? className : ''}`}\r\n            {...props}>\r\n        <span className=\"btn__content\">\r\n            {icon && <div className=\"btn__after\" onClick={iconAction ? iconAction : onClick}>{icon}</div>}\r\n            <span\r\n                className=\"btn__name\"\r\n                onClick={onClick}>\r\n                {children}\r\n            </span>\r\n        </span>\r\n        </Tag>\r\n    );\r\n};\r\n\r\nexport default Button;\r\n","import React from \"react\";\r\nimport Page from \"./Page\";\r\nimport {Link} from \"react-router-dom\";\r\nimport Button from \"./ui/Button\";\r\n\r\nconst ErrorPage = ({errorCode, message, link: {text, url} = {}}) => {\r\n    const code = errorCode && errorCode.toString();\r\n    return (\r\n        <Page title={code} className=\"error-page\">\r\n            <div className=\"error-page__error-code\">\r\n                {code && code.split('').map((number, i) => <span key={i}>{number}</span>)}\r\n            </div>\r\n            <div className=\"error-page__error-message\">{message || 'Похоже, вы потерялись'}</div>\r\n            <Button tag={Link} to={`${url || ''}/`} replace className=\"btn\">{text || 'На главную'}</Button>\r\n        </Page>\r\n    );\r\n};\r\n\r\nexport default ErrorPage;\r\n","import React from 'react';\r\nimport Catalog from \"./Catalog\";\r\nimport _ from \"lodash\";\r\n\r\nconst CourseCatalog = ({renderCourse, ...otherProps}) => (\r\n    <Catalog.Catalog\r\n        placeholder=\"Нет курсов, соответствующих условиям поиска\"\r\n        renderFunc={renderCourse}\r\n        {...otherProps}/>\r\n);\r\n\r\nconst Body = (props) => {\r\n    const {courses, subjects, ...otherProps} = props;\r\n\r\n    const options = React.useMemo(() =>\r\n            subjects.map(({id, name}) => ({value: id, label: name})),\r\n        [subjects]);\r\n\r\n    const getMatchingCourses = React.useCallback((subject, online) => courses.filter((course) =>\r\n        (subject ? course.subject_id === subject : true) && (online ? course.online === online : true)), [courses]);\r\n\r\n    return (\r\n        <Catalog.Body\r\n            options={options}\r\n            filterItems={getMatchingCourses}\r\n            {...otherProps}/>\r\n    )\r\n};\r\n\r\n// const CourseCatalogPage = (props) => (<Catalog.Page BodyComponent={Body} {...props}/>);\r\n\r\nexport default {\r\n    ...Catalog,\r\n    Catalog: CourseCatalog,\r\n    Body,\r\n    // Page: CourseCatalogPage\r\n}\r\n","export const daysBetween = (date1, date2) => {\r\n    const one_day = 1000 * 60 * 60 * 24;\r\n    const date1_ms = new Date(date1.getYear(), date1.getMonth(), date1.getDate()).getTime();\r\n    const date2_ms = new Date(date2.getYear(), date2.getMonth(), date2.getDate()).getTime();\r\n    const difference_ms = date2_ms - date1_ms;\r\n    return Math.floor(difference_ms / one_day);\r\n};\r\n\r\nexport const renderDate = (date, options, locale='ru') => date.toLocaleString(locale, options);\r\nObject.assign(renderDate, {\r\n    date: {\r\n        day: 'numeric',\r\n        month: 'long'\r\n    },\r\n    shortDate: {\r\n        day: 'numeric',\r\n        month: 'numeric'\r\n    },\r\n    hour: {\r\n        hour: 'numeric',\r\n        minute: 'numeric'\r\n    }\r\n});\r\n\r\nexport const getAuthHeader = (username, password) => ({'Authorization': `Basic ${btoa(username + \":\" + password)}`});\r\n\r\nexport const downloadFile = async (url, name) => {\r\n    // IE10+ : (has Blob, but not a[download] or URL)\r\n    if (navigator.msSaveBlob) {\r\n        let blob = await fetch(url).then(r => r.blob());\r\n        return navigator.msSaveBlob(blob, name);\r\n    }\r\n    else {\r\n        let link = document.createElement('a');\r\n        link.download = name;\r\n        link.href = url;\r\n        let event = new MouseEvent('click');\r\n        link.dispatchEvent(event);\r\n    }\r\n};\r\n","import React from 'react';\r\nimport {daysBetween} from \"../../definitions/helpers\";\r\nimport ListItem from \"./ListItem\";\r\nimport CoverImage from \"./CoverImage\";\r\n\r\nexport default function Course({course, online=true, isSelected=false, ...props}) {\r\n    const {name, image_link, date_start, description} = course;\r\n    const startsIn = daysBetween(new Date(), date_start);\r\n    return (\r\n        <ListItem\r\n            item={course}\r\n            className={isSelected ? 'course course-selected' : 'course'}\r\n            title={name}\r\n            subtitle={`До начала курса ${startsIn} ${startsIn === 1 ? 'день' : 'дней'}`}\r\n            description={description}\r\n            preview={(\r\n                <div className=\"course__cover-container\">\r\n                    {course.online && (\r\n                        <div className={`course__online-badge ${online ? 'course__online-text' : ''} font-size-xs`}>\r\n                            <span>Онлайн</span>\r\n                        </div>\r\n                    )}\r\n                    <CoverImage src={image_link} className=\"poster-cover course__cover\"/>\r\n                </div>\r\n            )}\r\n            {...props}/>\r\n    );\r\n}\r\n","import React from \"react\";\r\nimport _ from \"lodash\";\r\nimport Page, {PageContent, PageLoadingPlaceholder} from \"components/Page\";\r\nimport ErrorPage from \"components/ErrorPage\";\r\nimport CourseCatalog from \"components/common/CourseCatalog\";\r\nimport Course from \"components/common/Course\";\r\nimport Button from \"components/ui/Button\";\r\nimport UserProfile from \"components/common/UserProfile\";\r\nimport {useShopCatalog, useTeachers} from \"store\";\r\n\r\nconst TeacherPage = (props) => {\r\n    const {match: {params: {id: param_id}}, path: root, className, location} = props;\r\n    const {teachers, subjects, error, retry} = useTeachers();\r\n    const {catalog, error: errorLoadingCatalog, retry: reloadCatalog} = useShopCatalog();\r\n    const id = parseInt(param_id);\r\n\r\n    const renderCourse = React.useCallback((course, {link}) => {\r\n        const {price, discount} = course;\r\n        return (\r\n            <Course\r\n                course={course}\r\n                selectable\r\n                key={course.id}\r\n                link={`/shop/${link}`}>\r\n                <div className=\"list__item-action-info\">\r\n                    <span className=\"price\">{price}₽</span> {discount && <span className=\"discount font-size-xs\">{discount + price}₽</span>}\r\n                </div>\r\n                <Button style={{minWidth: '110px'}}>Открыть</Button>\r\n            </Course>\r\n        )\r\n    }, []);\r\n\r\n    if (teachers && catalog && subjects) {\r\n        const teacher = _.find(teachers, {id});\r\n\r\n        if (teacher) {\r\n            const {vk_info: {first_name, last_name, photo_max_orig: photo}, contacts, subjects: teacherSubjects, bio} = teacher;\r\n            // const teacherSubjects = subject_ids.map(id => _.find(subjects, {id}));\r\n            const teachersCourses = catalog.filter(course => _.indexOf(course.teacher_ids, id) >= 0);\r\n            const profile = {\r\n                first_name,\r\n                last_name,\r\n                photo,\r\n                contacts,\r\n                about: bio,\r\n                role: teacherSubjects.map(({name}, i) => i === 0 ? name : name.toLowerCase()).join(', ')\r\n            };\r\n            console.log(catalog, teachersCourses);\r\n            const fullName = `${first_name} ${last_name}`;\r\n            return (\r\n                <Page\r\n                    title={`${fullName}`}\r\n                    className={`teacher-page ${className || ''}`}\r\n                    location={location}>\r\n                    <PageContent parentSection={{name: \"Преподаватели\"}}>\r\n                        <UserProfile {...profile}/>\r\n                        <div className=\"layout__content-block\">\r\n                            <h3>Курсы преподавателя</h3>\r\n                        </div>\r\n                        <CourseCatalog.Body\r\n                            className=\"course-shop\"\r\n                            subjects={subjects}\r\n                            courses={teachersCourses}>\r\n                            <CourseCatalog.Filter/>\r\n                            <CourseCatalog.Catalog\r\n                                renderCourse={renderCourse}/>\r\n                        </CourseCatalog.Body>\r\n                    </PageContent>\r\n                </Page>\r\n            )\r\n        } else\r\n            return <ErrorPage errorCode={404} message=\"Преподаватель не найден\" link={{url: root}}/>;\r\n    }\r\n    else {\r\n        return (\r\n            <Page\r\n                location={location}>\r\n                <PageLoadingPlaceholder/>\r\n            </Page>\r\n        );\r\n    }\r\n};\r\n\r\nexport default TeacherPage;\r\n","import React from \"react\";\r\nimport { Switch, Route } from \"react-router-dom\";\r\nimport {TEACHERS} from \"data/test_data\";\r\nimport {SHOP_CATALOG} from \"data/test_data\";\r\nimport CatalogPage from \"./catalog-page\";\r\nimport TeacherPage from \"./teacher-page\";\r\n\r\nconst Teachers = (props) => {\r\n    const {match} = props;\r\n    return (\r\n        <Switch>\r\n            <Route path={`${match.path}/:id`} render={(props) => (\r\n                <TeacherPage\r\n                    teachers={TEACHERS}\r\n                    courses={SHOP_CATALOG.catalog}\r\n                    path={match.path}\r\n                    {...props}/>\r\n            )}/>\r\n            <Route exact path={`${match.path}`} render={(props) => (\r\n                <CatalogPage {...props}/>\r\n            )}/>\r\n        </Switch>\r\n    );\r\n};\r\n\r\nexport default Teachers;\r\n","import React from 'react';\r\nimport {useTruncate} from \"../../../../hooks/common\";\r\nimport CoverImage from \"../../../common/CoverImage\";\r\nimport Truncate from \"react-truncate\";\r\nimport _ from \"lodash\";\r\nimport {BottomTab} from \"../../../Page\";\r\nimport ScrollBars from \"../../../ui/ScrollBars\";\r\nimport {CSSTransition, TransitionGroup} from \"react-transition-group\";\r\nimport Button from \"../../../ui/Button\";\r\n\r\nconst SelectedCourse = ({course, onCourseDeselect, onTruncate}) => {\r\n    const {name} = course;\r\n    const [descriptionRef] = useTruncate(name);\r\n    const onDeselectClick = React.useCallback(() => {\r\n        onCourseDeselect(course);\r\n    }, [onCourseDeselect, course]);\r\n    return (\r\n        <div className=\"selected-course d-flex align-items-center flex-shrink-0\">\r\n            <div className=\"selected-course__cover-container\">\r\n                <CoverImage src={course.image_link} className=\"selected-course__cover poster-cover\"/>\r\n                <i className=\"icon-close selected-course__deselect-btn animated__action-button\" onClick={onDeselectClick}/>\r\n            </div>\r\n            <div className=\"selected-course__description-container font-size-xs\">\r\n                <div className=\"selected-course__description\">\r\n                    <Truncate lines={2} ref={descriptionRef} onTruncate={onTruncate}>\r\n                        {name}\r\n                    </Truncate>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst renderView = ({style, ...props}) => (<div style={{...style, height: `calc(100% + ${style.minHeight}px)`}} {...props}/>);\r\n\r\nconst SelectedCoursesTab = ({courses, onCourseDeselect}) => {\r\n    const price = _.sumBy(courses, 'price');\r\n    const discount = _.sumBy(courses, 'discount');\r\n    // const stickyRef =\r\n    React.useEffect(() => {\r\n        // window.dispatchEvent(new Event('scroll'));\r\n    });\r\n    return (\r\n        <BottomTab\r\n            className={`selected-courses ${courses.length === 0 ? 'hidden' : ''}`}>\r\n            <div className=\"container-fluid\">\r\n                <div className=\"row\">\r\n                    <div className=\"col-12 col-md p-0 selected-courses__courses\">\r\n                        <ScrollBars\r\n                            autoHeight\r\n                            autoHeightMax=\"unset\"\r\n                            hideTracksWhenNotNeeded\r\n                            renderView={renderView}\r\n                            style={{height: '100%'}}\r\n                            className=\"scrollbars\">\r\n                            <TransitionGroup\r\n                                className=\"layout__bottom-tab-container container-fluid d-flex flex-nowrap\"\r\n                                style={{height: '100%'}}>\r\n                                {courses.map(course => (\r\n                                    <CSSTransition\r\n                                        classNames=\"animation-fade\"\r\n                                        key={course.id}\r\n                                        timeout={300}>\r\n                                        <SelectedCourse\r\n                                            course={course}\r\n                                            onCourseDeselect={onCourseDeselect}\r\n                                            onTruncate={() => {\r\n                                                window.dispatchEvent(new Event('scroll'));\r\n                                            }}/>\r\n                                    </CSSTransition>\r\n                                ))}\r\n                            </TransitionGroup>\r\n                        </ScrollBars>\r\n                    </div>\r\n                    <div className=\"col-12 col-md-auto p-0\">\r\n                        <div className=\"selected-courses__price layout__bottom-tab-container container d-flex align-items-center justify-content-end\">\r\n                            <Button className=\"order-1 order-md-0 flex-shrink-0\">Оплатить</Button>\r\n                            <div className=\"price selected-courses__price-container container\">\r\n                                {discount && <div className=\"discount font-size-sm d-inline-block d-md-block\">{price + discount}₽</div>}\r\n                                <div className=\"price font-size-lg d-inline-block d-md-block\">{price}₽</div>\r\n                                {discount && <div className=\"promotion font-size-xs\">Цена со скидкой за 2 курса</div>}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </BottomTab>\r\n    );\r\n};\r\n\r\nexport default SelectedCoursesTab;\r\n","import React from \"react\";\r\nimport Page, {PageContent, PageLoadingPlaceholder} from \"components/Page\";\r\nimport CourseCatalog from \"components/common/CourseCatalog\";\r\nimport SelectedCoursesTab from \"./SelectedCoursesTab\";\r\nimport Course from \"components/common/Course\";\r\nimport Button from \"components/ui/Button\";\r\nimport {useShopCatalog} from \"store\";\r\n\r\nconst ShopCatalogPage = ({selectedCourses, onCourseClick, onCourseSelect, onCourseDeselect, location}) => {\r\n    const {catalog, subjects, error, retry} = useShopCatalog();\r\n    const renderCourse = React.useCallback((course, props) => {\r\n        const isSelected = selectedCourses.has(course);\r\n        const {price, discount} = course;\r\n        return (\r\n            <Course\r\n                course={course}\r\n                selectable\r\n                isSelected={isSelected}\r\n                onActionClick={onCourseSelect}\r\n                key={course.id}\r\n                {...props}>\r\n                <div className=\"list__item-action-info\">\r\n                    <span className=\"price\">{price}₽</span> {discount && <span className=\"discount font-size-xs\">{discount + price}₽</span>}\r\n                </div>\r\n                <Button style={{minWidth: '110px'}}>{isSelected ? 'Выбрано' : 'Выбрать'}</Button>\r\n            </Course>\r\n        )\r\n    }, [selectedCourses, onCourseSelect]);\r\n    return (\r\n        <Page\r\n            className=\"course-shop\"\r\n            title=\"Магазин курсов\"\r\n            location={location}>\r\n            {!(catalog && subjects) ? (\r\n                <PageLoadingPlaceholder/>\r\n            ) : (\r\n                <CourseCatalog.Body\r\n                    subjects={subjects}\r\n                    courses={catalog}>\r\n                    <PageContent>\r\n                        <CourseCatalog.Filter/>\r\n                        <CourseCatalog.Catalog\r\n                            renderCourse={renderCourse}/>\r\n                    </PageContent>\r\n                    <SelectedCoursesTab\r\n                        onCourseDeselect={onCourseDeselect}\r\n                        courses={[...selectedCourses]}/>\r\n                </CourseCatalog.Body>\r\n            )}\r\n        </Page>\r\n    );\r\n};\r\n\r\nexport default ShopCatalogPage;\r\n","import React from 'react';\r\nimport _ from 'lodash';\r\nimport CoverImage from \"components/common/CoverImage\";\r\nimport {renderDate} from \"../../definitions/helpers\";\r\nimport List from \"./List\";\r\nimport Teacher from \"./Teacher\";\r\nimport Page, {PageLink} from \"../Page\";\r\nimport ErrorPage from \"../ErrorPage\";\r\n\r\nwindow._ = _;\r\n\r\nexport const CourseOverviewContext = React.createContext({});\r\n\r\nconst Description = () => {\r\n    const {course} = React.useContext(CourseOverviewContext);\r\n    return (\r\n        <React.Fragment>\r\n            <CoverImage src={course.image_link} className=\"course-overview__cover\"/>\r\n            <div className=\"course-overview__info layout__content-block\">\r\n                <h2>{course.name}</h2>\r\n                <div className=\"course-overview__summary\">\r\n                    <div className=\"col-auto course-overview__summary-item\">\r\n                        <i className=\"far fa-calendar-alt\"/>\r\n                        Начало: {renderDate(course.date_start, renderDate.date)}\r\n                    </div>\r\n                    <div className=\"col-auto course-overview__summary-item\">\r\n                        <i className=\"far fa-clock\"/>\r\n                        Длительность: {course.total_hours} часов\r\n                    </div>\r\n                </div>\r\n                <div className=\"description-text font-size-sm\">{course.description}</div>\r\n            </div>\r\n        </React.Fragment>\r\n    );\r\n};\r\n\r\nconst Title = () => {\r\n    const {course} = React.useContext(CourseOverviewContext);\r\n    return (\r\n        <div className=\"course-overview__title layout__content-block\">\r\n            <h2>{course.name}</h2>\r\n            <PageLink className=\"course-overview__link\" to={`/shop/${course.id}`}>\r\n                Страница курса\r\n            </PageLink>\r\n        </div>\r\n    );\r\n};\r\n\r\n//TODO: error boundaries\r\nconst Teachers = () => {\r\n    const {course, teachers} = React.useContext(CourseOverviewContext);\r\n    return (\r\n        <div className=\"layout__content-block\">\r\n            <h3>Преподаватели</h3>\r\n            <div className=\"course-overview__teachers container negate-block-padding\">\r\n                <div className=\"row\">\r\n                    {course.teacher_ids.map((id, i) => (\r\n                        <div className=\"col-12 col-md d-flex p-0\" key={i}>\r\n                            <Teacher\r\n                                teacher={_.find(teachers, {id})}\r\n                                link={`/teachers/${id}/`}/>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst Lessons = ({renderLesson: renderFunc}) => {\r\n    const {course, lessons} = React.useContext(CourseOverviewContext);\r\n    const renderCourse = React.useCallback((item) => {\r\n        return renderFunc(item, {link: `${item.id}/`});\r\n    }, [renderFunc]);\r\n    return (\r\n        <div className=\"layout__content-block\">\r\n            <h3>Уроки</h3>\r\n            <List\r\n                renderItem={renderCourse}>\r\n                {lessons}\r\n            </List>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst CourseOverview = (props) => {\r\n    const {match: {params: {id: param_id}}, path: root, courses, teachers, lessons, children, className, location} = props;\r\n    const id = parseInt(param_id);\r\n    const course = _.find(courses, {id});\r\n    if (course) {\r\n        return (\r\n            <Page\r\n                title={`${course.title}`}\r\n                className={`course-overview ${className || ''}`}\r\n                location={location}>\r\n                <CourseOverviewContext.Provider\r\n                    value={{\r\n                        course,\r\n                        teachers,\r\n                        lessons\r\n                    }}>\r\n                    {children}\r\n                </CourseOverviewContext.Provider>\r\n            </Page>\r\n        )\r\n    } else\r\n        return <ErrorPage errorCode={404} message=\"Курс не найден\" link={{url: root}}/>;\r\n};\r\n\r\nexport default {\r\n    Description,\r\n    Teachers,\r\n    Lessons,\r\n    Title,\r\n    Body: CourseOverview\r\n};\r\n","import React from \"react\";\r\nimport {CourseOverviewContext} from \"components/common/CourseOverview\";\r\nimport {BottomTab} from \"components/Page\";\r\nimport Button from \"../../../ui/Button\";\r\n\r\nconst CoursePriceTab = () => {\r\n    const {course: {price, discount}} = React.useContext(CourseOverviewContext);\r\n    return (\r\n        <BottomTab className=\"course-overview__offer\">\r\n            <div className=\"container layout__bottom-tab-container\">\r\n                <div className=\"row justify-content-end align-items-center\">\r\n                    {discount && (\r\n                        <div className=\"col-auto\">\r\n                            <div className=\"discount\">{price + discount}₽</div>\r\n                        </div>\r\n                    )}\r\n                    <div className=\"col-auto\">\r\n                        <h2 className=\"price\">\r\n                            {price}₽\r\n                        </h2>\r\n                    </div>\r\n                    <div className=\"col-auto\">\r\n                        <Button>Купить</Button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </BottomTab>\r\n    );\r\n};\r\n\r\nexport default CoursePriceTab;\r\n","import React from \"react\";\r\nimport CoverImage from \"./CoverImage\";\r\n\r\nconst VideoCover = ({cover, watchProgress, locked=false, className}) => (\r\n    <CoverImage\r\n        src={cover}\r\n        className={`video-cover ${locked ? 'video-locked' : ''} ${className || ''}`}>\r\n        {watchProgress && (\r\n            <div className=\"video-cover__watch-progress-bar\">\r\n                <div\r\n                    className=\"watch-progress-bar__progress-line\"\r\n                    style={{width: `${watchProgress}%`}}/>\r\n            </div>\r\n        )}\r\n    </CoverImage>\r\n);\r\n\r\nexport default VideoCover;\r\n","import React from 'react';\r\nimport ListItem from \"./ListItem\";\r\nimport VideoCover from \"./VideoCover\";\r\n\r\nexport default function Lesson({lesson, locked=false, link, ...props}) {\r\n    const {name, image_link: cover, description, watchProgress} = lesson;\r\n    return (\r\n        <ListItem\r\n            item={lesson}\r\n            className={`video-class ${locked ? 'disabled' : ''}`}\r\n            title={name}\r\n            description={description}\r\n            preview={(\r\n                <VideoCover\r\n                    cover={cover}\r\n                    className=\"video-class__cover\"\r\n                    locked={locked}\r\n                    watchProgress={!locked && watchProgress}/>\r\n            )}\r\n            key={lesson.id}\r\n            link={locked ? undefined : link}\r\n            {...props}/>\r\n    );\r\n}\r\n","import React from \"react\";\r\nimport Page, {PageContent, PageLoadingPlaceholder} from \"components/Page\";\r\nimport CourseOverview from \"components/common/CourseOverview\";\r\nimport CoursePriceTab from \"./CoursePriceTab\";\r\nimport Lesson from \"components/common/Lesson\";\r\nimport {useShopCatalog, useTeachers, useLessons} from \"store\";\r\n\r\nconst CoursePage = ({path, location, match}) => {\r\n    const {params: {id: courseId}} = match;\r\n    const {catalog, subjects, error, retry} = useShopCatalog();\r\n    const {teachers, error: errorLoadingTeachers, retry: reloadTeachers} = useTeachers();\r\n    const {lessons, error: errorLoadingLessons, retry: reloadLessons} = useLessons(courseId);\r\n    console.log(lessons);\r\n    const renderLesson = (lesson, props) => (\r\n        <Lesson\r\n            lesson={lesson}\r\n            selectable={false}\r\n            locked={false}\r\n            key={lesson.id}/>\r\n    );\r\n    if (catalog && teachers && lessons) {\r\n        return (\r\n            <CourseOverview.Body\r\n                match={match}\r\n                path={path}\r\n                courses={catalog}\r\n                teachers={teachers}\r\n                lessons={lessons}\r\n                location={location}>\r\n                <PageContent parentSection={{name: \"Магазин курсов\"}}>\r\n                    <CourseOverview.Description/>\r\n                    <CourseOverview.Teachers/>\r\n                    <CourseOverview.Lessons renderLesson={renderLesson}/>\r\n                </PageContent>\r\n                <CoursePriceTab/>\r\n            </CourseOverview.Body>\r\n        );\r\n    }\r\n    else {\r\n        return (\r\n            <Page\r\n                location={location}>\r\n                <PageLoadingPlaceholder/>\r\n            </Page>\r\n        );\r\n    }\r\n};\r\n\r\nexport default CoursePage;\r\n","import React from 'react';\r\nimport { Switch, Route } from \"react-router-dom\";\r\nimport ShopCatalogPage from \"./catalog-page\";\r\nimport CoursePage from \"./course-page\";\r\n\r\nexport default class Shop extends React.Component {\r\n    state = {\r\n        selectedCourses: new Set()\r\n    };\r\n\r\n    onCourseSelect = (course) => {\r\n        let {selectedCourses} = this.state;\r\n        if (selectedCourses.has(course))\r\n            return;\r\n        selectedCourses = new Set(selectedCourses);\r\n        selectedCourses.add(course);\r\n        this.setState({selectedCourses});\r\n    };\r\n\r\n    onCourseDeselect = (course) => {\r\n        let {selectedCourses} = this.state;\r\n        selectedCourses = new Set(selectedCourses);\r\n        selectedCourses.delete(course);\r\n        this.setState({selectedCourses});\r\n    };\r\n\r\n    // shouldComponentUpdate(nextProps, nextState, nextContext) {\r\n    //     const shouldUpdate =  (_.reduce(this.props, (result, value, key) => {\r\n    //         const changed = this.props[key] !== nextProps[key];\r\n    //         if (changed)\r\n    //             console.log(key);\r\n    //         if (changed && key === 'match')\r\n    //             return result;\r\n    //         return result || changed;\r\n    //     }, false));\r\n    //     console.log(shouldUpdate);\r\n    //     return shouldUpdate;\r\n    // }\r\n\r\n    render() {\r\n        const {match} = this.props;\r\n        const {selectedCourses} = this.state;\r\n        return (\r\n            <Switch>\r\n                <Route exact path={`${match.path}`} render={(props) => (\r\n                    <ShopCatalogPage\r\n                        selectedCourses={selectedCourses}\r\n                        onCourseSelect={this.onCourseSelect}\r\n                        onCourseDeselect={this.onCourseDeselect}\r\n                        {...props}/>\r\n                )}/>\r\n                <Route path={`${match.path}/:id`} component={props => (\r\n                    <CoursePage\r\n                        path={match.path}\r\n                        {...props}/>\r\n                )}/>\r\n            </Switch>\r\n        )\r\n    }\r\n}\r\n","import React from \"react\";\r\nimport CourseCatalog from \"components/common/CourseCatalog\";\r\nimport Course from \"components/common/Course\";\r\nimport Button from \"components/ui/Button\";\r\nimport Page, {PageContent} from \"components/Page\";\r\nimport {LEARNING_STATUS} from \"definitions/constants\";\r\nimport {SUBJECTS} from \"../../../../data/test_data\";\r\n\r\nconst CatalogPage = ({catalog, location}) => {\r\n    const renderCourse = React.useCallback((course, props) => (\r\n        <Course\r\n            course={course}\r\n            selectable\r\n            online={false}\r\n            key={course.id}\r\n            {...props}>\r\n            {course.status === LEARNING_STATUS.learning\r\n                ? <Button className=\"course__select-btn\">Изучать</Button>\r\n                : <Button className=\"course__select-btn\" active={false}>Пройден</Button>}\r\n        </Course>\r\n    ), []);\r\n    return (\r\n        <Page\r\n            className=\"user-courses\"\r\n            location={location}\r\n            title=\"Мои курсы\">\r\n            <CourseCatalog.Body\r\n                courses={catalog}\r\n                subjects={SUBJECTS}>\r\n                <PageContent>\r\n                    <CourseCatalog.Filter/>\r\n                    <CourseCatalog.Catalog\r\n                        renderCourse={renderCourse}/>\r\n                </PageContent>\r\n            </CourseCatalog.Body>\r\n        </Page>\r\n    );\r\n};\r\n\r\nexport default CatalogPage;\r\n","import React from \"react\";\r\nimport {PageContent} from \"components/Page\";\r\nimport CourseOverview from \"components/common/CourseOverview\";\r\nimport Lesson from \"components/common/Lesson\";\r\nimport Button from \"components/ui/Button\";\r\nimport {renderDate} from \"definitions/helpers\";\r\nimport _ from \"lodash\";\r\n\r\nconst CoursePage = ({path, catalog, match, ...props}) => {\r\n    const {params: {id: courseId}} = match;\r\n    const id = parseInt(courseId);\r\n    const course = _.find(catalog, {id});\r\n    console.log(catalog, courseId, course);\r\n    const renderLesson = (lesson, props) => {\r\n        const {date, id} = lesson;\r\n        const selectable = date < new Date();\r\n        return (\r\n            <Lesson\r\n                lesson={lesson}\r\n                locked={!selectable}\r\n                selectable={selectable}\r\n                key={id}\r\n                {...props}>\r\n                <div className=\"list__item-action-info\">{renderDate(date, renderDate.shortDate)}</div>\r\n                {selectable\r\n                    ? <Button>Изучать</Button>\r\n                    : <Button active={false}>Скоро</Button>}\r\n            </Lesson>\r\n        );\r\n    };\r\n    return (\r\n        <CourseOverview.Body\r\n            path={path}\r\n            courses={catalog}\r\n            lessons={course && course.lessons}\r\n            match={match}\r\n            {...props}>\r\n            <PageContent parentSection={{name: \"Мои курсы\"}}>\r\n                <CourseOverview.Title/>\r\n                <CourseOverview.Lessons renderLesson={renderLesson}/>\r\n            </PageContent>\r\n        </CourseOverview.Body>\r\n    );\r\n};\r\n\r\nexport default CoursePage;\r\n","import React, { Component, Fragment } from 'react';\r\n\r\nclass Tooltip extends Component {\r\n    componentDidMount() {\r\n    }\r\n\r\n    render() {\r\n        let child = React.Children.only(this.props.children);\r\n        let position = 'pos-' + this.props.position;\r\n        return React.cloneElement(child, {\r\n            className: (child.props.className ? child.props.className + ' tooltip ' : 'tooltip ') + position,\r\n            children: (\r\n                <Fragment>\r\n                    {child.props.children}\r\n                    <div className=\"tooltip-arrow\"/>\r\n                    <div className=\"tooltip-block\">\r\n                        {\r\n                            this.props.content\r\n                        }\r\n                    </div>\r\n                </Fragment>\r\n            )\r\n        });\r\n    }\r\n}\r\n\r\nexport default Tooltip;\r\n","import React from 'react';\r\nimport {useUpdateEffect} from \"hooks/common\";\r\nimport {CSSTransition, SwitchTransition} from \"react-transition-group\";\r\nimport Tooltip from \"./Tooltip\";\r\n\r\nexport const LOADING_STATE = {\r\n    PENDING: 'pending',\r\n    LOADING: 'loading',\r\n    LOADED: 'loaded',\r\n    SUCCESS: 'success',\r\n    DONE: 'done',\r\n    REJECTED: 'rejected',\r\n    ERROR: 'error'\r\n};\r\n\r\nexport function useLoadingState(loading, done, rejected, error) {\r\n    const [state, setState] = React.useState(loading === null || done\r\n        ? LOADING_STATE.DONE\r\n        : (rejected\r\n            ? LOADING_STATE.REJECTED\r\n            : LOADING_STATE.LOADING));\r\n    useUpdateEffect(() => {\r\n        if (loading === false) {\r\n            setState(LOADING_STATE.LOADED);\r\n        } else if (loading === true) {\r\n            setState(LOADING_STATE.LOADING);\r\n        }\r\n    }, [loading]);\r\n    useUpdateEffect(() => {\r\n        if (state === LOADING_STATE.LOADED && done) {\r\n            setState(LOADING_STATE.SUCCESS);\r\n        }\r\n        else if (state === LOADING_STATE.SUCCESS) {\r\n            const timeout = setTimeout(() => {\r\n                setState(LOADING_STATE.DONE);\r\n            }, 1000);\r\n            return () => {\r\n                clearTimeout(timeout);\r\n            };\r\n        }\r\n    }, [state, done]);\r\n    useUpdateEffect(() => {\r\n        if (error)\r\n            setState(LOADING_STATE.ERROR);\r\n    }, [error]);\r\n    useUpdateEffect(() => {\r\n        if (rejected)\r\n            setState(LOADING_STATE.REJECTED);\r\n    }, [rejected]);\r\n    return state;\r\n}\r\n\r\nexport const LoadingIndicator = ({state, onClick, errorMessage}) => {\r\n    const icon = (state === LOADING_STATE.LOADED && \"spinner-border\")\r\n        || (state === LOADING_STATE.SUCCESS && \"icon-check\")\r\n        || (state === LOADING_STATE.ERROR && \"icon-reload\")\r\n        || (state === LOADING_STATE.REJECTED && \"icon-alert\")\r\n        || \"spinner-border\";\r\n    return (\r\n        <SwitchTransition>\r\n            {state !== LOADING_STATE.DONE ? (\r\n                <CSSTransition\r\n                    key={icon}\r\n                    appear={true}\r\n                    classNames=\"animation-scale\"\r\n                    timeout={300}>\r\n                    <div\r\n                        className=\"file__state-indicator\"\r\n                        onClick={onClick}>\r\n                        <Tooltip content={errorMessage}>\r\n                            <i\r\n                                className={icon}/>\r\n                        </Tooltip>\r\n                    </div>\r\n                </CSSTransition>\r\n            ) : null}\r\n        </SwitchTransition>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport Button from \"./Button\";\r\nimport {downloadFile} from \"../../definitions/helpers\";\r\nimport {LoadingIndicator, useLoadingState} from \"./LoadingIndicator\";\r\n\r\nconst File = ({\r\n                  file: {name, downloadName, url},\r\n                  error=null,\r\n                  rejected=null,\r\n                  loading=null,\r\n                  done=true,\r\n                  deletable=false,\r\n                  onDelete,\r\n                  onIndicatorClick,\r\n                  className,\r\n                  errorMessage,\r\n                  ...props\r\n              }) => {\r\n    const downloadCallback = React.useCallback(() => {\r\n        if (url)\r\n            downloadFile(url, downloadName || name);\r\n    }, [url, name, downloadName]);\r\n    const isUpload = loading !== null;\r\n    const state = useLoadingState(loading !== null ? loading < 100 : null, done, rejected, error);\r\n    return (\r\n        <div className={`file file-${state} ${className || ''}`}>\r\n            <Button\r\n                neutral\r\n                className=\"file__btn\"\r\n                icon={deletable\r\n                    ? <i className=\"icon-close file__action-btn file__delete-btn animated__action-button\"/>\r\n                    : <i className=\"icon-download file__action-btn file__download-btn animated__action-button\"/>}\r\n                iconAction={deletable ? onDelete : undefined}\r\n                onClick={downloadCallback}\r\n                {...props}>\r\n                {loading !== null && <div className=\"file__loading-progress\" style={{width: `${loading}%`}}/>}\r\n                <i className=\"file__icon far fa-file-alt\"/>\r\n                <span\r\n                    className=\"file__name\"\r\n                    title={name}>\r\n                {name}\r\n            </span>\r\n            </Button>\r\n            {isUpload && (\r\n                <LoadingIndicator\r\n                    onClick={onIndicatorClick}\r\n                    state={state}\r\n                    errorMessage={errorMessage}/>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default File;\r\n\r\n","import {CSSTransition} from \"react-transition-group\";\r\nimport ReactDOM from 'react-dom';\r\n\r\n//hack to get context because lib doesn't export it properly and import doesn't work\r\n// const TransitionGroupContext = Transition.contextType;\r\n//\r\n// const getClassNames = (classNames, type) => {\r\n//     const isStringClassNames = typeof classNames === 'string';\r\n//     const prefix = isStringClassNames && classNames\r\n//         ? `${classNames}-`\r\n//         : '';\r\n//\r\n//     let baseClassName = isStringClassNames\r\n//         ? `${prefix}${type}`\r\n//         : classNames[type];\r\n//\r\n//     let activeClassName = isStringClassNames\r\n//         ? `${baseClassName}-active`\r\n//         : classNames[`${type}Active`];\r\n//\r\n//     let doneClassName = isStringClassNames\r\n//         ? `${baseClassName}-done`\r\n//         : classNames[`${type}Done`];\r\n//\r\n//     return {\r\n//         baseClassName,\r\n//         activeClassName,\r\n//         doneClassName\r\n//     };\r\n// };\r\n//\r\n// function getClassName(classNames, type, phase) {\r\n//     // console.log(arguments);\r\n//     let className = getClassNames(classNames, type)[`${phase}ClassName`];\r\n//\r\n//     if (type === 'appear' && phase === 'done') {\r\n//         className += ` ${getClassNames(classNames, 'enter').doneClassName}`;\r\n//     }\r\n//\r\n//     return className;\r\n// }\r\n//\r\n// const State = {\r\n//     entering: 'entering',\r\n//     entered:  'entered',\r\n//     exiting:  'exiting',\r\n//     exited: 'exited'\r\n// };\r\n//\r\n// const StableCSSTransition = ({classNames='', appear, children, ...props}) => {\r\n//     const isMounting = !useIsMounted();\r\n//     const context = React.useContext(TransitionGroupContext);\r\n//         const appearingRef = React.useRef(context ? context.isMounting : appear);\r\n//     const prevStateRef = React.useRef(null);\r\n//     const appliedClassNamesRef = React.useRef('');\r\n//     return (\r\n//         <Transition\r\n//             // mountOnEnter\r\n//             // unmountOnExit\r\n//             {...props}\r\n//             appear={appear}>\r\n//             {(state) => {\r\n//                 const appearing = appearingRef.current;\r\n//                 const prevState = prevStateRef.current;\r\n//                 const animateMounting = context != null;\r\n//\r\n//                 console.log(prevState, '->', state);\r\n//                 let className = appliedClassNamesRef.current;\r\n//                 if (state === State.exited) {\r\n//                     if (prevState !== State.exiting) {\r\n//                         if (appearing) {\r\n//                             className = getClassName(classNames, 'appear', 'base');\r\n//                         }\r\n//                         else if (prevState !== null || animateMounting) {\r\n//                             className = getClassName(classNames, 'enter', 'base');\r\n//                         }\r\n//                     }\r\n//                     else {\r\n//                         className = getClassName(classNames, 'exit', 'done');\r\n//                     }\r\n//                 }\r\n//                 else if (state === State.exiting) {\r\n//                     className = getClassName(classNames, 'exit', 'active');\r\n//                 }\r\n//                 else if (state === State.entered) {\r\n//                     if (prevState === State.entered) {\r\n//                         className = getClassName(classNames, 'exit', 'base');\r\n//                     }\r\n//                     else if (prevState !== null || animateMounting) {\r\n//                         className = getClassName(classNames, appearing ? 'appear' : 'enter', 'done');\r\n//                     }\r\n//                     appearingRef.current = false;\r\n//                 }\r\n//                 else if (state === State.entering || animateMounting) {\r\n//                     className = getClassName(classNames, appearing ? 'appear' : 'enter', 'active');\r\n//                 }\r\n//                 prevStateRef.current = state;\r\n//                 appliedClassNamesRef.current = className;\r\n//                 console.log(className);\r\n//                 const child = React.Children.only(children);\r\n//                 return React.cloneElement(child, {\r\n//                     className: child.props.className ? `${child.props.className} ${className}` : className\r\n//                 });\r\n//             }}\r\n//         </Transition>\r\n//     );\r\n// };\r\n\r\nclass StableCSSTransition extends CSSTransition {\r\n    type = null;\r\n    phase = null;\r\n\r\n    addClass(node, type, phase) {\r\n        super.addClass(node, type, phase);\r\n        this.type = type;\r\n        this.phase = phase;\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        if (this.appliedClasses[this.type] && this.appliedClasses[this.type][this.phase])\r\n            super.addClass(ReactDOM.findDOMNode(this), this.type, this.phase);\r\n    }\r\n}\r\n\r\nexport default StableCSSTransition;\r\n","import React from 'react';\r\nimport _ from 'lodash';\r\nimport Dropzone from \"react-dropzone-uploader\";\r\nimport {TransitionGroup} from \"react-transition-group\";\r\nimport {useRefValue} from \"hooks/common\";\r\nimport Auth from 'definitions/auth';\r\nimport {API_ROOT} from \"definitions/api\";\r\nimport {getAuthHeader} from \"definitions/helpers\";\r\nimport StableCSSTransition from \"components/common/StableCSSTransition\";\r\nimport {LOADING_STATE, LoadingIndicator, useLoadingState} from \"./LoadingIndicator\";\r\nimport File from \"./File\";\r\nimport Button from \"./Button\";\r\n\r\nimport 'react-dropzone-uploader/dist/styles.css';\r\n\r\nconst trimExtension = (filename) => filename.replace(/\\.[^/.]+$/, \"\");\r\n\r\nconst FILE_STATUS = {\r\n    rejected_file_type: 'rejected_file_type',\r\n    rejected_max_files: 'rejected_max_files',\r\n    preparing: 'preparing',\r\n    error_file_size: 'error_file_size',\r\n    error_validation: 'error_validation',\r\n    ready: 'ready',\r\n    started: 'started',\r\n    getting_upload_params: 'getting_upload_params',\r\n    error_upload_params: 'error_upload_params',\r\n    uploading: 'uploading',\r\n    exception_upload: 'exception_upload',\r\n    aborted: 'aborted',\r\n    restarted: 'restarted',\r\n    removed: 'removed',\r\n    error_upload: 'error_upload',\r\n    headers_received: 'headers_received',\r\n    done: 'done',\r\n};\r\nconst FileInputContext = React.createContext(null);\r\nconst isFileReady = f => f.meta.status === 'done';\r\nconst allFilesReady = files => files.every(f => isFileReady(f));\r\nconst getUploadParams = () => {\r\n    // return { url: 'https://httpbin.org/post' };\r\n    if (Auth.user) {\r\n        return {\r\n            url: `${API_ROOT}/files/`,\r\n            headers: getAuthHeader(Auth.user.uid, Auth.user.hash)\r\n        };\r\n    }\r\n    else\r\n        throw new Error('User not logged in');\r\n};\r\nconst getFileProp = ({original_file_name, id_file_name}) => ({\r\n    name: original_file_name,\r\n    downloadName: `${trimExtension(original_file_name)}_${id_file_name}`,\r\n    url: `${API_ROOT}/files/attachments/${id_file_name}`\r\n});\r\n\r\nconst Input = (props) => {\r\n    const {\r\n        className,\r\n        style,\r\n        getFilesFromEvent,\r\n        accept,\r\n        multiple,\r\n        disabled,\r\n        onFiles,\r\n        files,\r\n        content,\r\n        extra: { maxFiles }\r\n    } = props;\r\n    const onChange = React.useCallback(async e => {\r\n        const target = e.target;\r\n        const chosenFiles = await getFilesFromEvent(e);\r\n        onFiles(chosenFiles);\r\n        target.value = null\r\n    }, [getFilesFromEvent, onFiles]);\r\n    const isActive = files.length < maxFiles && !disabled;\r\n    return (\r\n        <Button\r\n            tag=\"label\"\r\n            active={isActive}\r\n            icon={<i className=\"icon-add\"/>}>\r\n            {content}\r\n            <input\r\n                className={className}\r\n                style={style}\r\n                type=\"file\"\r\n                accept={accept}\r\n                multiple={multiple}\r\n                disabled={!isActive}\r\n                onChange={isActive ? onChange : null}\r\n            />\r\n        </Button>\r\n    );\r\n};\r\n\r\nconst Preview = (props) => {\r\n    const {\r\n        fileWithMeta: { cancel, remove, restart, xhr },\r\n        meta: { name = '', percent = 0, status},\r\n        isUpload,\r\n        canRemove,\r\n        className\r\n    } = props;\r\n    const [getResponse, setResponse] = useRefValue(null);\r\n    if (!getResponse() && xhr && xhr.responseText) {\r\n        try {\r\n            const {original_file_name, file_link, id_file_name} = JSON.parse(xhr.responseText);\r\n            if (!(original_file_name && file_link && id_file_name))\r\n                throw new Error('Incorrect response');\r\n            setResponse({\r\n                original_file_name,\r\n                file_link,\r\n                id_file_name\r\n            });\r\n        }\r\n        catch (e) {\r\n            console.log(e);\r\n        }\r\n    }\r\n    const response = getResponse();\r\n    const deleteCallback = React.useCallback(() => {\r\n        if (isUpload && !(status === 'done' || status === 'headers_received')) {\r\n            cancel();\r\n        }\r\n        remove();\r\n    }, [cancel, remove, isUpload, status]);\r\n    const hasError = _.startsWith(status, 'error') || _.startsWith(status, 'exception');\r\n    const isRejected = status === FILE_STATUS.error_file_size ? true : undefined;\r\n    const loading = isUpload ? status === 'done' || status === 'headers_received' ? 100 : percent : null;\r\n    const isDone = status === 'done';\r\n    return (\r\n        <File\r\n            file={response ? getFileProp(response) : ({name})}\r\n            loading={loading}\r\n            className={className}\r\n            done={isDone}\r\n            rejected={hasError && isRejected ? true : undefined}\r\n            error={hasError}\r\n            errorMessage={hasError && isRejected ? 'Файл превышает максимальный допустимый размер' : undefined}\r\n            deletable={canRemove}\r\n            onDelete={deleteCallback}\r\n            onIndicatorClick={hasError && !isRejected ? restart : undefined}/>\r\n    );\r\n};\r\n\r\nconst SubmitButton = (props) => {\r\n    const {submitting, hasChanged} = React.useContext(FileInputContext) || ({});\r\n    const { disabled, onSubmit, files, content } = props;\r\n    const isDisabled = !allFilesReady(files) || disabled;\r\n\r\n    const submitCallback = React.useCallback(() => {\r\n        onSubmit(files);\r\n    }, [onSubmit, files]);\r\n\r\n    const state = useLoadingState(submitting, submitting === false);\r\n    console.log(state);\r\n    return (\r\n        <StableCSSTransition\r\n            in={onSubmit != null && (hasChanged || state !== LOADING_STATE.DONE)}\r\n            appear\r\n            mountOnEnter\r\n            unmountOnExit\r\n            classNames=\"animation-fade\"\r\n            timeout={300}>\r\n            <React.Fragment>\r\n                <Button\r\n                    active={!isDisabled}\r\n                    icon={\r\n                        hasChanged\r\n                            ? (<i className=\"icon-upload\"/>)\r\n                            : (<LoadingIndicator state={state}/>)\r\n                    }\r\n                    onClick={submitCallback}>\r\n                    {hasChanged ? content : 'Сохранено'}\r\n                </Button>\r\n            </React.Fragment>\r\n        </StableCSSTransition>\r\n    );\r\n};\r\n\r\nconst Layout = ({input, previews=[], submitButton, dropzoneProps, files, extra: { maxFiles } }) => {\r\n    const context = React.useContext(FileInputContext);\r\n    const {preloadedFiles=[], deletePreloadedFile, disabled} = context || ({});\r\n    const { ref } = dropzoneProps;\r\n    return (\r\n        <div\r\n            ref={ref}\r\n            className=\"file-input\">\r\n            {/*<StableCSSTransition*/}\r\n            {/*    in={previews.length > 0 || preloadedFiles.length > 0}*/}\r\n            {/*    mountOnEnter*/}\r\n            {/*    unmountOnExit*/}\r\n            {/*    classNames=\"animation-fade\"*/}\r\n            {/*    timeout={300}>*/}\r\n            <h4 className=\"file-input__files-title\">Загруженные файлы</h4>\r\n            {/*</StableCSSTransition>*/}\r\n            <TransitionGroup className=\"file-container\">\r\n                {\r\n                    preloadedFiles && (\r\n                        preloadedFiles.map((file) => {\r\n                            const {id_file_name} = file;\r\n                            const deleteCallback = () => {deletePreloadedFile(file);};\r\n                            return (\r\n                                <StableCSSTransition\r\n                                    classNames=\"animation-fade\"\r\n                                    timeout={300}\r\n                                    key={id_file_name}>\r\n                                    <File\r\n                                        file={getFileProp(file)}\r\n                                        done={true}\r\n                                        deletable={!disabled}\r\n                                        onDelete={deleteCallback}/>\r\n                                </StableCSSTransition>\r\n                            );\r\n                        }\r\n                    ))\r\n                }\r\n                {previews.map((preview, i) => (\r\n                    <StableCSSTransition\r\n                        classNames=\"animation-fade\"\r\n                        timeout={300}\r\n                        key={preview.props.meta.id}>\r\n                        {preview}\r\n                    </StableCSSTransition>\r\n                ))}\r\n            </TransitionGroup>\r\n            <div className=\"file-input__controls\">\r\n                {input}\r\n                {submitButton}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst getCallbackFiles = (files, preloadedFiles) => {\r\n    if (!allFilesReady(files))\r\n        return null;\r\n    else\r\n        return _.concat(preloadedFiles, files.map(({xhr}) => JSON.parse(xhr.responseText)));\r\n};\r\n\r\n//TODO: check disabled on capturing phase of click\r\nconst FileInput = (props) => {\r\n    let {\r\n        initialFiles=[],\r\n        inputContent=\"Загрузить файл\",\r\n        onChange,\r\n        onSubmit,\r\n        maxFiles=5,\r\n        maxSizeBytes=1024 * 1024 * 4,\r\n        accept,\r\n        isDisabled=false,\r\n        ...otherProps\r\n    } = props;\r\n\r\n    const [preloadedFiles, setPreloadedFiles] = React.useState(initialFiles);\r\n    const [hasChanged, setChanged] = React.useState(false);\r\n    const [submitting, setSubmitting] = React.useState(null);\r\n    const [getInputFiles, setInputFiles] = useRefValue([]);\r\n\r\n    const deletePreloadedFile = React.useCallback((file) => {\r\n        const newPreloadedFiles = preloadedFiles.filter(item => item !== file);\r\n        setChanged(true);\r\n        setPreloadedFiles(newPreloadedFiles);\r\n        onChange && onChange(getCallbackFiles(getInputFiles(), newPreloadedFiles));\r\n    }, [preloadedFiles, onChange, getInputFiles]);\r\n\r\n    const handleChangeStatus = React.useCallback(({meta, ...file}, status, files) => {\r\n        console.log(status, meta, _.cloneDeep(files));\r\n        setChanged(true);\r\n        setInputFiles(files);\r\n        onChange && onChange(getCallbackFiles(files, preloadedFiles));\r\n    }, [onChange, preloadedFiles, setInputFiles]);\r\n\r\n    const handleSubmit = React.useCallback(async (files) => {\r\n        console.log(files.map(f => f.meta));\r\n        if (onSubmit) {\r\n            const returnValue = onSubmit(getCallbackFiles(files, preloadedFiles));\r\n            if (returnValue instanceof Promise) {\r\n                setSubmitting(true);\r\n                try {\r\n                    await returnValue;\r\n                    setChanged(false);\r\n                }\r\n                finally {\r\n                    setSubmitting(false);\r\n                }\r\n            }\r\n        }\r\n    }, [onSubmit, preloadedFiles]);\r\n\r\n    maxFiles = preloadedFiles ? maxFiles - preloadedFiles.length : maxFiles;\r\n    const disabled = typeof isDisabled === 'function' ? isDisabled() : isDisabled;\r\n    return (\r\n        <FileInputContext.Provider\r\n            value={{\r\n                preloadedFiles,\r\n                deletePreloadedFile,\r\n                hasChanged,\r\n                disabled,\r\n                submitting\r\n            }}>\r\n            <Dropzone\r\n                inputContent={inputContent}\r\n                submitButtonContent={'Сохранить'}\r\n                {...otherProps}\r\n                getUploadParams={getUploadParams}\r\n                onChangeStatus={handleChangeStatus}\r\n                onSubmit={onSubmit && handleSubmit}\r\n                canCancel={false}\r\n                SubmitButtonComponent={SubmitButton}\r\n                LayoutComponent={Layout}\r\n                InputComponent={Input}\r\n                PreviewComponent={Preview}\r\n                maxFiles={maxFiles}\r\n                maxSizeBytes={maxSizeBytes}\r\n                accept={accept}\r\n                classNames={{preview: ''}}\r\n                disabled={isDisabled}\r\n            />\r\n        </FileInputContext.Provider>\r\n    )\r\n};\r\n\r\nexport default FileInput;\r\n\r\n\r\n","import React from 'react';\r\nimport {Prompt} from \"react-router-dom\";\r\n\r\nconst NavigationBlocker = () => {\r\n    const unloadCallback = React.useCallback((event) => {\r\n        // Cancel the event as stated by the standard.\r\n        event.preventDefault();\r\n        // Chrome requires returnValue to be set.\r\n        event.returnValue = '';\r\n    }, []);\r\n    React.useEffect(() => {\r\n        window.addEventListener('beforeunload', unloadCallback);\r\n        return () => {\r\n            window.removeEventListener('beforeunload', unloadCallback);\r\n        };\r\n    }, [unloadCallback]);\r\n    return (\r\n        <Prompt\r\n            message='У вас есть несохраненные изменения, покинуть страницу?'\r\n        />\r\n    );\r\n};\r\n\r\nexport default NavigationBlocker;\r\n","import React from \"react\";\r\nimport FileInput from \"components/ui/FileInput\";\r\nimport APIRequest from \"definitions/api\";\r\nimport NavigationBlocker from \"components/common/NavigationBlocker\";\r\n\r\nconst HomeworkLoader = ({homework, lessonId}) => {\r\n    const isHomeworkSubmissionClosed = React.useCallback(() => homework.deadline && new Date() >= homework.deadline, [homework]);\r\n    const [hasChanges, setChanges] = React.useState(false);\r\n    const onChange = React.useCallback((files) => {\r\n        console.log('files changed', files);\r\n        setChanges(true);\r\n    }, []);\r\n    const onSubmit = React.useCallback(async (files) => {\r\n        console.log('files submitted', files);\r\n        const file = files[0] ? files[0].id_file_name : null;\r\n        //TODO: add error alert\r\n        // return APIRequest({\r\n        //     url: `/lessons/${lessonId}/homeworks/`,\r\n        //     method: file ? (homework.submittedFiles ? 'PUT' : 'POST') : 'DELETE',\r\n        //     data: {\r\n        //         file\r\n        //     }\r\n        // });\r\n        setChanges(false);\r\n        return Promise.resolve();\r\n    }, [homework, lessonId, setChanges]);\r\n    return (\r\n        <div className=\"submission\">\r\n            {hasChanges && <NavigationBlocker/>}\r\n            <FileInput\r\n                maxFiles={1}\r\n                accept=\"image/*,audio/*,video/*\"\r\n                initialFiles={homework.submittedFiles}\r\n                onChange={onChange}\r\n                onSubmit={onSubmit}\r\n                isDisabled={isHomeworkSubmissionClosed}/>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default HomeworkLoader;\r\n","import React from \"react\";\r\nimport VideoCover from \"components/common/VideoCover\";\r\nimport File from \"components/ui/File\";\r\nimport {renderDate} from \"definitions/helpers\";\r\nimport HomeworkLoader from \"./HomeworkLoader\";\r\n\r\nconst LessonView = ({lesson: {id, name, image_link: cover, description, homework}}) => {\r\n    return (\r\n        <div className=\"col-12 col-lg layout__content-block lesson-page__current-lesson\">\r\n            <div className=\"block-container video-container\">\r\n                <VideoCover\r\n                    className=\"video-class__cover\"\r\n                    cover={cover}/>\r\n            </div>\r\n            <div className=\"block-container description-container\">\r\n                <h2>{name}</h2>\r\n                <div className=\"description-text\">{description}</div>\r\n            </div>\r\n            {homework && (\r\n                <div className=\"block-container hw-container\">\r\n                    <h3>Домашнее задание</h3>\r\n                    <div className=\"assignment\">\r\n                        {homework.files && (\r\n                            <div className=\"assignment__files file-container\">\r\n                                {homework.files.map((assignment, i) => (\r\n                                    <File file={assignment} key={i}/>\r\n                                ))}\r\n                            </div>\r\n                        )}\r\n                        {homework.description && <div className=\"description-text\">{homework.description}</div>}\r\n                        {homework.deadline &&\r\n                        <div className=\"assignment__deadline\">Дедлайн: {renderDate(homework.deadline, renderDate.date)}</div>}\r\n                    </div>\r\n                    {homework.submit && (\r\n                        <HomeworkLoader homework={homework} lessonId={id}/>\r\n                    )}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default LessonView;\r\n","import React from \"react\";\r\nimport _ from \"lodash\";\r\nimport Page, {PageContent} from \"components/Page\";\r\nimport ErrorPage from \"components/ErrorPage\";\r\nimport Lesson from \"components/common/Lesson\";\r\nimport List from \"components/common/List\";\r\nimport LessonView from \"./LessonView\";\r\n\r\nconst LessonPage = (props) => {\r\n    const {match: {params: {courseId: param_course, lessonId: param_lesson}}, catalog, location} = props;\r\n    const courseId = parseInt(param_course);\r\n    const lessonId = parseInt(param_lesson);\r\n    const course = _.find(catalog, {id: courseId});\r\n    const selectedLesson = (course &&_.find(course.lessons, {id: lessonId})) || null;\r\n    const renderLesson = (lesson) => {\r\n        return (\r\n            <Lesson\r\n                lesson={lesson}\r\n                locked={false}\r\n                selectable={true}\r\n                key={lesson.id}\r\n                link={`../${lesson.id}/`}>\r\n            </Lesson>\r\n        );\r\n    };\r\n    if (selectedLesson) {\r\n        const now = new Date();\r\n        const otherLessons = course.lessons.filter(lesson => lesson.date < now && lesson.id !== selectedLesson.id);\r\n        return (\r\n            <Page title={`${selectedLesson.title}`} className=\"lesson-page\" location={location}>\r\n                <PageContent parentSection={{name: course.name}}>\r\n                    <div className=\"layout__content-block\">\r\n                        <div className=\"container p-lg-0\">\r\n                            <div className=\"row\">\r\n                                <LessonView lesson={selectedLesson}/>\r\n                                <div className=\"col-12 col-lg-auto layout__content-block lesson-page__other-lessons\">\r\n                                    <h3>Другие занятия</h3>\r\n                                    <List\r\n                                        renderItem={renderLesson}>\r\n                                        {otherLessons}\r\n                                    </List>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </PageContent>\r\n            </Page>\r\n        );\r\n    } else\r\n        return <ErrorPage errorCode={404} message=\"Урок не найден\" />;\r\n};\r\n\r\nexport default LessonPage;\r\n","import React from 'react';\r\nimport _ from 'lodash';\r\nimport { Switch, Route } from \"react-router-dom\";\r\nimport {MY_COURSES} from \"data/test_data\";\r\nimport {LEARNING_STATUS} from \"definitions/constants\";\r\nimport CatalogPage from \"./catalog-page\";\r\nimport CoursePage from \"./course-page\";\r\nimport LessonPage from \"./lesson-page\";\r\n\r\nexport default class MyCourses extends React.Component {\r\n    state = {\r\n        courses: _.sortBy(MY_COURSES, (course) => course.status === LEARNING_STATUS.finished ? 1 : 0)\r\n    };\r\n\r\n    render() {\r\n        const {match} = this.props;\r\n        const {courses} = this.state;\r\n        return (\r\n            <Switch>\r\n                <Route path={`${match.path}/:courseId/:lessonId`} render={(props) => (\r\n                    <LessonPage catalog={courses}\r\n                                {...props}/>\r\n                )}/>\r\n                <Route path={`${match.path}/:id`} render={(props) => (\r\n                    <CoursePage\r\n                        catalog={courses}\r\n                        path={match.path}\r\n                        {...props}/>\r\n                )}/>\r\n                <Route exact path={`${match.path}`} render={(props) => (\r\n                    <CatalogPage catalog={courses} {...props}/>\r\n                )}/>\r\n            </Switch>\r\n        )\r\n    }\r\n}\r\n","import React from 'react';\r\nimport {CSSTransition} from \"react-transition-group\";\r\nimport {HashRouter as Router, Redirect, Route, Switch, useHistory, useLocation} from \"react-router-dom\";\r\nimport Header from \"./Header\";\r\nimport SideBar from \"./SideBar\";\r\nimport Page from \"./Page\";\r\nimport {useRefValue} from \"../hooks/common\";\r\nimport GlobalStore, {useUser} from \"store\";\r\n\r\nimport Login from \"./pages/login\";\r\nimport Account from \"./pages/account\";\r\nimport Teachers from \"./pages/teachers\";\r\nimport Shop from \"./pages/shop\";\r\nimport MyCourses from \"./pages/courses\";\r\n\r\nimport 'sass/index.scss';\r\n\r\nfunction useLocationChangeEffect(effect) {\r\n    const history = useHistory();\r\n    React.useEffect(() => {\r\n        return history.listen(effect);\r\n    }, [history, effect]);\r\n}\r\n\r\nfunction useScrollToTop() {\r\n    const [getPrevPath, setPrevPath] = useRefValue(useLocation().pathname);\r\n    const onLocationChange = React.useCallback((location, action) => {\r\n        console.log('update');\r\n        if (getPrevPath() !== location.pathname && action !== 'POP') {\r\n            window.scrollTo(0, 0);\r\n        }\r\n        setPrevPath(location.pathname);\r\n    }, [getPrevPath, setPrevPath]);\r\n    useLocationChangeEffect(onLocationChange);\r\n}\r\n\r\nfunction useForceTrailingSlash() {\r\n    const location = useLocation();\r\n    const history = useHistory();\r\n    const path = location.pathname;\r\n    if (path.slice(-1) !== '/') {\r\n        history.replace(path + '/');\r\n    }\r\n}\r\n\r\nfunction useSideBarState() {\r\n    const [isSideBarOpened, setSideBar] = React.useState(false);\r\n    const toggleSideBar = React.useCallback(() => {\r\n        setSideBar(opened => !opened);\r\n    }, []);\r\n    return [isSideBarOpened, toggleSideBar];\r\n}\r\n\r\nconst onLocationChange = (location, args) => {\r\n    console.log(`- - - location: '${location.pathname}'`, args);\r\n};\r\n\r\nfunction App() {\r\n    // routing effects\r\n    useForceTrailingSlash();\r\n    useScrollToTop();\r\n    useLocationChangeEffect(onLocationChange);\r\n\r\n    const [isSideBarOpened, toggleSideBar] = useSideBarState();\r\n    const {user, userInfo} = useUser();\r\n    const showSidebar = userInfo !== null;\r\n    return (\r\n        <div className=\"app\">\r\n            <Header\r\n                onMenuButtonClick={toggleSideBar}\r\n                user={user}\r\n                sidebar={showSidebar}/>\r\n            <CSSTransition\r\n                in={isSideBarOpened}\r\n                timeout={200}\r\n                classNames={App.layoutAnimationClassNames}>\r\n                <div className=\"layout\">\r\n                    <React.Fragment>\r\n                        {showSidebar && (<SideBar onMenuClose={toggleSideBar}/>)}\r\n                        <Switch>\r\n                            <Route exact path=\"/\" render={() => <Redirect to=\"/courses\"/>}/>\r\n                            <Route path=\"/login\" component={Login}/>\r\n                            <Route path=\"/courses\" component={MyCourses}/>\r\n                            <Route path=\"/shop\" component={Shop}/>\r\n                            <Route path=\"/teachers\" component={Teachers}/>\r\n                            <Route path=\"/account\" component={Account}/>\r\n                            <Route path=\"/:section\" component={Page}/>\r\n                        </Switch>\r\n                    </React.Fragment>\r\n                </div>\r\n            </CSSTransition>\r\n        </div>\r\n    );\r\n}\r\n\r\nApp.layoutAnimationClassNames = {\r\n    enter: 'sidebar-opened',\r\n    enterActive: 'sidebar-opened',\r\n    enterDone: 'sidebar-opened',\r\n    exit: 'sidebar-hiding',\r\n    exitActive: 'sidebar-hiding'\r\n};\r\n\r\nexport default () => (\r\n    <Router basename={process.env.REACT_APP_BASE_NAME}>\r\n        <GlobalStore>\r\n            <App/>\r\n        </GlobalStore>\r\n    </Router>\r\n);\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import 'definitions/polyfills';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from 'components/App';\nimport APIRequest from \"definitions/api\";\nimport * as serviceWorker from './serviceWorker';\n\nwindow.APIRequest = APIRequest;\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/dummy_poster.f51c6af6.jpg\";"],"sourceRoot":""}