(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{218:function(e,t,a){e.exports=a.p+"static/media/logo.54b51040.svg"},230:function(e,t,a){e.exports=a(498)},497:function(e,t,a){},498:function(e,t,a){"use strict";a.r(t);a(231),a(240);var n=a(217);Object(n.a)(window);var r=a(0),c=a.n(r),s=a(45),o=a.n(s),l=a(3),i=a(500),u=a(60),m=a(19),d=a(218),f=a.n(d),p=a(8),v=a.n(p),b=a(21),h=a(28),E=a(38),g=a(6),_=a(24),k=a(4),O=a.n(k),j=a(109),N=a.n(j),y="ADMIN",w="MODERATOR",C="TEACHER",x="PUPIL",S={learning:"learning",finished:"finished"},P=function(e,t){var a=new Date(e.getYear(),e.getMonth(),e.getDate()).getTime(),n=new Date(t.getYear(),t.getMonth(),t.getDate()).getTime()-a;return Math.floor(n/864e5)},D=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ru";return e.toLocaleString(a,t)};Object.assign(D,{date:{day:"numeric",month:"long"},shortDate:{day:"numeric",month:"numeric"},hour:{hour:"numeric",minute:"numeric"}});var I=function(e){return e.split(".").pop()||""},L=function(){var e=Object(b.a)(v.a.mark(function e(t,a){var n,r,c;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t,a),!navigator.msSaveBlob){e.next=8;break}return e.next=4,fetch(t).then(function(e){return e.blob()});case 4:return n=e.sent,e.abrupt("return",navigator.msSaveBlob(n,a));case 8:(r=document.createElement("a")).download=a,r.href=t,c=new MouseEvent("click"),r.dispatchEvent(c);case 13:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}();function F(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?F(a,!0).forEach(function(t){Object(_.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):F(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var B="https://egehackbottest.tk:8080",T=N.a.CancelToken,A=function(){var e=T.source();return{token:e.token,cancel:e.cancel}},z=N.a.create({baseURL:B,paramsSerializer:function(e){var t=new URLSearchParams;return O.a.forEach(e,function(e,a){if(e instanceof Array){var n=!0,r=!1,c=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var l=s.value;t.append(a,l)}}catch(i){r=!0,c=i}finally{try{n||null==o.return||o.return()}finally{if(r)throw c}}}else t.append(a,e)}),t.toString()}});z.interceptors.request.use(function(e){if(W.user)return R({auth:{username:W.user.uid,password:W.user.hash}},e);throw new N.a.Cancel("User not logged in.")});z.interceptors.response.use(function(e){var t=e.config,a=e.data,n=new URL(t.url);switch(!0){case"/accounts/teachers"===n.pathname:return a.map(function(e){return R({id:e.account_id},Object(g.a)(e,["account_id"]))});case"/courses"===n.pathname:return a.map(function(e){var a=e.date_start,n=e.date_end,r=e.image_link,c=e.teacher_id,s=Object(g.a)(e,["date_start","date_end","image_link","teacher_id"]);return R({date_start:new Date(a),date_end:new Date(n),image_link:"".concat(B).concat(r),teacher_ids:[c],status:"PERSON"===t.params.group?S.learning:void 0},s)});case"/lessons"===n.pathname:return O.a.sortBy(a,"num").map(function(e){var t=e.hometask,a=Object(g.a)(e,["hometask"]);return R({},a,{image_link:"".concat(B).concat(a.image_link),assignment:t?{deadline:t.deadline?new Date(t.deadline):t.deadline,description:t.description,files:t.file_link?[{name:"\u0417\u0430\u0434\u0430\u043d\u0438\u0435",downloadName:"\u0417\u0430\u0434\u0430\u043d\u0438\u0435.".concat(I(t.file_link)),url:"".concat(B).concat(t.file_link,"?disp=attachment")}]:t.file_link}:t})});case/\/lessons\/(.*)\/homeworks\/pupil$/.test(n.pathname):var r=e.data,c=r.file;return r.date,R({},Object(g.a)(r,["file","date"]),{date:new Date,files:[{original_file_name:"\u0417\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043d\u043e\u0435_\u0440\u0435\u0448\u0435\u043d\u0438\u0435.".concat(I(c)),id_file_name:c,file_link:"".concat(B,"/files/").concat(c,"?disp=attachment")}]});default:return e.data}},function(e){if(!e.toJSON)throw e;var t=e.toJSON().config,a=new URL(t.url);if(!e.response||404!==e.response.status)throw e;switch(!0){case/\/lessons\/(.*)\/homeworks\/pupil$/.test(a.pathname):return{data:{}};default:throw e}}),window.APIRequest=z;var M=z,U="ege-hack-user-data",H={login:"auth.login",logout:"auth.logout"},V=!0;VK.init({apiId:"7178754"},!0);var W=new(function(){function e(){var t=this;Object(h.a)(this,e),this.user=null,this.eventHandlers={},this.login=function(){var e=Object(b.a)(v.a.mark(function e(a){var n,r,c,s,o;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(VK){e.next=2;break}return e.abrupt("return");case 2:for(V||VK.init({apiId:"7178754"},!0),console.info("Login",a),localStorage.setItem(U,JSON.stringify(a)),t.user=a,n=!0,r=!1,c=void 0,e.prev=9,s=(t.eventHandlers[H.login]||[])[Symbol.iterator]();!(n=(o=s.next()).done);n=!0)(0,o.value)(t.user);e.next=17;break;case 13:e.prev=13,e.t0=e.catch(9),r=!0,c=e.t0;case 17:e.prev=17,e.prev=18,n||null==s.return||s.return();case 20:if(e.prev=20,!r){e.next=23;break}throw c;case 23:return e.finish(20);case 24:return e.finish(17);case 25:case"end":return e.stop()}},e,null,[[9,13,17,25],[18,,20,24]])}));return function(t){return e.apply(this,arguments)}}(),this.logout=function(){console.info("Logout"),localStorage.removeItem(U),t.user=null,t.userInfo=null;var e=!0,a=!1,n=void 0;try{for(var r,c=(t.eventHandlers[H.logout]||[])[Symbol.iterator]();!(e=(r=c.next()).done);e=!0){(0,r.value)()}}catch(s){a=!0,n=s}finally{try{e||null==c.return||c.return()}finally{if(a)throw n}}};try{var a=localStorage.getItem(U);if(!a)return void(this.user=null);var n=JSON.parse(a),r=n.uid,c=n.first_name,s=n.last_name,o=n.photo,l=n.photo_rec,i=n.hash;if(!r||!i)throw new Error("Incomplete data parsed from local storage: ".concat(a));this.user={uid:r,first_name:c,last_name:s,photo:o,photo_rec:l,hash:i}}catch(u){console.error("User data can not be recovered",u),localStorage.removeItem(U),this.user=null}}return Object(E.a)(e,[{key:"subscribe",value:function(e,t){(this.eventHandlers[e]||(this.eventHandlers[e]=[])).push(t)}},{key:"unsubscribe",value:function(e,t){this.eventHandlers[e]=this.eventHandlers[e].filter(function(e){return e!==t})}},{key:"getUser",value:function(){return this.user}},{key:"getUserInfo",value:function(){var e=Object(b.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.userInfo){e.next=2;break}return e.abrupt("return",this.userInfo);case 2:return e.prev=2,e.next=5,M.get("/accounts/info");case 5:this.userInfo=e.sent,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0),this.userInfo=null;case 12:return e.abrupt("return",this.userInfo);case 13:case"end":return e.stop()}},e,this,[[2,8]])}));return function(){return e.apply(this,arguments)}}()},{key:"loginWidget",value:function(e){VK&&(V||VK.init({apiId:"7178754"}),VK.Widgets.Auth(e,{onAuth:this.login}))}}]),e}()),J=function(e){var t=e.src,a=e.className,n=e.children,r=e.square,s=void 0!==r&&r,o=e.round,l=void 0!==o&&o;return c.a.createElement("div",{className:"".concat(a," cover ").concat(s?"square-cover":""," ").concat(l?"round-cover":"")},c.a.createElement("div",{className:"cover-img",style:{backgroundImage:"url(".concat(t,")")}}),n)},K=function(e){var t=e.onMenuButtonClick,a=e.user,n=e.sidebar;return c.a.createElement("header",null,c.a.createElement("div",{className:"container-fluid header__container"},c.a.createElement("div",{className:"row"},n&&c.a.createElement("div",{className:"col-auto d-lg-none"},c.a.createElement("div",{className:"nav-btn",onClick:t},c.a.createElement("i",{className:"icon-bars"}))),c.a.createElement("div",{className:"col d-flex justify-content-center justify-content-lg-start p-0"},c.a.createElement("div",{className:"logo-container container d-flex align-items-center justify-content-center m-0"},c.a.createElement("img",{src:f.a,className:"logo",alt:"Logo"}))),c.a.createElement("div",{className:"col-auto d-flex"},c.a.createElement("div",{className:"user-nav"},a?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"user-nav__user-name"},a.first_name," ",a.last_name),a.photo_rec?c.a.createElement("div",{className:"nav-btn"},c.a.createElement(J,{src:a.photo_rec,round:!0,square:!0})):c.a.createElement("div",{className:"nav-btn"},c.a.createElement("i",{className:"icon-profile"})),c.a.createElement("div",{className:"user-nav__menu-container"},c.a.createElement("div",{className:"user-nav__menu"},c.a.createElement("div",{className:"user-nav__menu-options"},c.a.createElement(m.b,{to:"/account/",className:"menu-option"},c.a.createElement("i",{className:"icon-profile"}),"\u0410\u043a\u043a\u0430\u0443\u043d\u0442"),c.a.createElement(m.b,{to:"/account/settings/",className:"menu-option"},c.a.createElement("i",{className:"icon-settings"}),"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),c.a.createElement("div",{className:"menu-option",tabIndex:2,onClick:W.logout},c.a.createElement("i",{className:"icon-logout"}),"\u0412\u044b\u0445\u043e\u0434"))))):c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"nav-btn"},c.a.createElement("i",{className:"icon-profile"})),c.a.createElement("div",{className:"user-nav__menu-container"},c.a.createElement("div",{className:"user-nav__menu"},c.a.createElement("div",{className:"user-nav__menu-options"},c.a.createElement(m.b,{to:"/login/",className:"menu-option"},c.a.createElement("i",{className:"icon-login"}),"\u0412\u043e\u0439\u0442\u0438"))))))))))},q=a(40),G=a(25),$=a(39);function Y(e){var t=e.contacts,a=t.vk,n=t.fb,r=t.ok,s=t.ig;return c.a.createElement("div",{className:"social-media font-light-grey"},a&&c.a.createElement("a",{href:a,className:"social-media__link"},c.a.createElement("i",{className:"fab fa-vk vk"})),n&&c.a.createElement("a",{href:n,className:"social-media__link"},c.a.createElement("i",{className:"fab fa-facebook-f fb"})),r&&c.a.createElement("a",{href:r,className:"social-media__link"},c.a.createElement("i",{className:"fab fa-odnoklassniki ok"})),s&&c.a.createElement("a",{href:s,className:"social-media__link"},c.a.createElement("i",{className:"fab fa-instagram ig"})))}function Q(e){return c.a.createElement(m.c,Object.assign({className:"layout__sidebar-menu-link",activeClassName:"active"},e))}var X=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(q.a)(this,(e=Object(G.a)(t)).call.apply(e,[this].concat(r)))).onClick=function(e){(e.target===e.currentTarget||e.target.classList.contains("layout__sidebar-menu-link"))&&a.props.onMenuClose()},a}return Object($.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e,t,a,n=this.props.accountRoles;return void 0===n?(e=void 0,t=void 0,void 0,a=void 0):null===n&&(e=null,t=null,null,a=null),n&&(e=O.a.includes(n,y),t=O.a.includes(n,w),O.a.includes(n,C),a=O.a.includes(n,x)),null===n?null:c.a.createElement("div",{className:"layout__sidebar",onClick:this.onClick},c.a.createElement("div",{className:"layout__sidebar-bar"},void 0===n?c.a.createElement("div",{className:"layout__sidebar-content"},c.a.createElement("div",{className:"layout__sidebar-menu ph-item"},c.a.createElement("div",{className:"layout__sidebar-menu-section"},c.a.createElement("div",{className:"layout__sidebar-menu-link"},c.a.createElement("div",{className:"ph-text"})),c.a.createElement("div",{className:"layout__sidebar-menu-link"},c.a.createElement("div",{className:"ph-text"})),c.a.createElement("div",{className:"layout__sidebar-menu-link"},c.a.createElement("div",{className:"ph-text"})),c.a.createElement("div",{className:"layout__sidebar-menu-link"},c.a.createElement("div",{className:"ph-text"})),c.a.createElement("div",{className:"layout__sidebar-menu-link"},c.a.createElement("div",{className:"ph-text"}))))):c.a.createElement("div",{className:"layout__sidebar-content"},c.a.createElement("div",{className:"layout__sidebar-menu"},a&&c.a.createElement("div",{className:"layout__sidebar-menu-section"},c.a.createElement(Q,{to:"/courses/"},"\u041c\u043e\u0438 \u043a\u0443\u0440\u0441\u044b")),c.a.createElement("div",{className:"layout__sidebar-menu-section"},c.a.createElement(Q,{to:"/shop/"},"\u041c\u0430\u0433\u0430\u0437\u0438\u043d \u043a\u0443\u0440\u0441\u043e\u0432"),c.a.createElement(Q,{to:"/teachers/"},"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438"),c.a.createElement(Q,{to:"/about/"},"\u041e \u043d\u0430\u0441")),(e||t)&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"layout__sidebar-menu-section"},c.a.createElement(Q,{to:"/courses/"},"\u041c\u043e\u0438 \u043a\u0443\u0440\u0441\u044b"),c.a.createElement(Q,{to:"/homework/"},"\u0414\u043e\u043c\u0430\u0448\u043d\u044f\u044f \u0440\u0430\u0431\u043e\u0442\u0430")),c.a.createElement("div",{className:"layout__sidebar-menu-section"},c.a.createElement(Q,{to:"/shop/"},"\u041c\u0430\u0433\u0430\u0437\u0438\u043d \u043a\u0443\u0440\u0441\u043e\u0432"),c.a.createElement(Q,{to:"/teachers/"},"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438"),c.a.createElement(Q,{to:"/about/"},"\u041e \u043d\u0430\u0441")))),c.a.createElement(Y,{contacts:{vk:"/",fb:"/",ig:"/"}}),c.a.createElement("div",{className:"layout__sidebar-copyright font-size-sm font-light-grey"},"\u0412\u0441\u0435 \u043f\u0440\u0430\u0432\u0430 \u0437\u0430\u0449\u0438\u0449\u0435\u043d\u044b",c.a.createElement("br",null),'"\u0415\u0413\u042dHACK"'))))}}]),t}(c.a.Component),Z=a(221),ee=a(222),te=a.n(ee),ae=a(108),ne=a(223),re=a(68),ce=a.n(re);function se(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function oe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?se(a,!0).forEach(function(t){Object(_.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):se(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var le=new ne.LoremIpsum;function ie(e){var t=new Date;return t.setDate(t.getDate()+e),t}ce.a;var ue=[{id:1,name:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439 \u044f\u0437\u044b\u043a"},{id:2,name:"\u041b\u0438\u0442\u0435\u0440\u0430\u0442\u0443\u0440\u0430"},{id:3,name:"\u041c\u0430\u0442\u0435\u043c\u0430\u0442\u0438\u043a\u0430"},{id:4,name:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0442\u0438\u043a\u0430"},{id:5,name:"\u0424\u0438\u0437\u0438\u043a\u0430"},{id:6,name:"\u0425\u0438\u043c\u0438\u044f"},{id:7,name:"\u0411\u0438\u043e\u043b\u043e\u0433\u0438\u044f"},{id:8,name:"\u041e\u0431\u0449\u0435\u0441\u0442\u0432\u043e\u0437\u043d\u0430\u043d\u0438\u0435"},{id:9,name:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f"},{id:10,name:"\u0413\u0435\u043e\u0433\u0440\u0430\u0444\u0438\u044f"},{id:11,name:"\u0410\u043d\u0433\u043b\u0438\u0439\u0441\u043a\u0438\u0439 \u044f\u0437\u044b\u043a"},{id:12,name:"\u041d\u0435\u043c\u0435\u0446\u043a\u0438\u0439 \u044f\u0437\u044b\u043a"},{id:13,name:"\u0424\u0440\u0430\u043d\u0446\u0443\u0437\u0441\u043a\u0438\u0439 \u044f\u0437\u044b\u043a"},{id:14,name:"\u041a\u0438\u0442\u0430\u0439\u0441\u043a\u0438\u0439 \u044f\u0437\u044b\u043a"},{id:15,name:"\u0418\u0441\u043f\u0430\u043d\u0441\u043a\u0438\u0439 \u044f\u0437\u044b\u043a"}],me=[{id:154792439,vk_info:{id:154792439,first_name:"Alexandra",last_name:"Petrova",photo_max_orig:ce.a},subjects:[{id:1,name:"\u041c\u0430\u0442\u0435\u043c\u0430\u0442\u0438\u043a\u0430",description:"\u041b\u0443\u0447\u0448\u0438\u0439 \u043f\u0440\u0435\u0434\u043c\u0435\u0442",image_link:"/files/asdsadasda.jpg"}]},{id:1,vk_info:{id:1,first_name:"\u0415\u043b\u0435\u043d\u0430",last_name:"\u0427\u0435\u0440\u0442\u043a\u043e\u0432\u0430",photo_max_orig:ce.a},subjects:ue.slice(0,2),contacts:{vk:"/",fb:"/",ok:"/",ig:"/"},bio:le.generateSentences(1)},{id:2,vk_info:{id:2,first_name:"\u0421\u0435\u0440\u0433\u0435\u0439",last_name:"\u0410\u0432\u0434\u043e\u0448\u0438\u043d",photo_max_orig:ce.a},subjects:[ue[3]],contacts:{vk:"/",fb:"/",ok:"/",ig:"/"},bio:le.generateSentences(1)}],de=ue.slice(0,5).map(function(e,t){return{name:"".concat(e.name,". \u041c\u0430\u0441\u0442\u0435\u0440 \u0433\u0440\u0443\u043f\u043f\u0430. \u0410\u043f\u0440\u0435\u043b\u044c."),id:t,subject_id:e.id,online:t<=2,image_link:ce.a,date_start:ie(7+t),date_end:ie(7+t),description:le.generateParagraphs(1),teacher_ids:t<=2?[me[0].id]:me.map(function(e){return e.id})}}),fe=(O.a.times(4,function(e){var t=-2+e>0;return{num:e+1,id:e,name:"\u0417\u0430\u043d\u044f\u0442\u0438\u0435 ".concat(e+1),description:le.generateParagraphs(1),image_link:ce.a,video_link:"375255364",locked:t,assignment:{description:le.generateParagraphs(1),files:[{name:"\u0417\u0430\u0434\u0430\u043d\u0438\u0435",url:"/robots.txt"},{name:"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435",url:"/robots.txt"}],deadline:ie(7)},watchProgress:t?void 0:100-15*e}}),new Date,"".concat(B,"/files/51657ffc-fc8f-11e9-a562-0338e4bfa1ca.jpg?disp=attachment"),de.map(function(e,t){return oe({},e,{price:2500,discount:0===t?1e3:void 0})})),pe=de.slice(0,3).map(function(e,t){return oe({},e,{status:t<=1?S.finished:S.learning})});function ve(e){var t=c.a.useRef(null),a=c.a.useState("complete"===document.readyState),n=Object(l.a)(a,2),r=n[0],s=n[1];return c.a.useEffect(function(){if(e){if(window.addEventListener("resize",n),r)return function(){window.removeEventListener("resize",n)};if("complete"===document.readyState)return s(!0),function(){window.removeEventListener("resize",n)};var a=function(){s(!0)};return window.addEventListener("load",a),function(){window.removeEventListener("load",a)}}function n(){t.current&&t.current.onResize()}},[r,e]),[t,r]}function be(e){var t=c.a.useRef(e);return[c.a.useCallback(function(){return t.current},[]),c.a.useCallback(function(e){t.current=e},[])]}function he(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=c.a.useRef(!0);c.a.useEffect(function(){a.current||e()},t),c.a.useEffect(function(){a.current=!1},[])}function Ee(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ge(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ee(a,!0).forEach(function(t){Object(_.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ee(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var _e=c.a.createContext(null);var ke=function(){return c.a.useState(null)},Oe=function(){return c.a.useState(null)},je=function(){return c.a.useState(null)},Ne=function(){return c.a.useState(null)},ye=function(){return c.a.useState({})};var we={};function Ce(){var e=c.a.useContext(_e),t=e.data.subjects,a=e.setters.setSubjects,n=c.a.useState(null),r=Object(l.a)(n,2),s=r[0],o=r[1],i=c.a.useCallback(Object(b.a)(v.a.mark(function e(){var t,n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!we.subjects){e.next=2;break}return e.abrupt("return",we.subjects);case 2:return t=M.get("/subjects"),we.subjects=t,e.prev=4,s&&o(null),e.next=8,t;case 8:n=e.sent,a(n),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),console.error(e.t0),o(e.t0);case 16:return e.prev=16,delete we.subjects,e.finish(16);case 19:return e.abrupt("return",t);case 20:case"end":return e.stop()}},e,null,[[4,12,16,19]])})),[s]);return c.a.useEffect(function(){t||we.subjects||s||i()},[t,s]),s?{subjects:t,error:s,retry:i}:{subjects:t}}function xe(e){var t=c.a.useState(null),a=Object(l.a)(t,2),n=a[0],r=a[1],s=c.a.useState(null),o=Object(l.a)(s,2),i=o[0],u=o[1],m=be(null),d=Object(l.a)(m,2),f=d[0],p=d[1],h=c.a.useCallback(Object(b.a)(v.a.mark(function t(){var a,n,c,s,o,l;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==(a=e instanceof Set?Object(ae.a)(e).map(function(e){return e.id}):[e]).length){t.next=3;break}return t.abrupt("return");case 3:return(n=f())&&n(),c=A(),s=c.token,o=c.cancel,p(o),t.prev=7,i&&u(null),r(null),t.next=12,M.get("/payments/discounts",{params:{coursesIds:a},cancelToken:s});case 12:l=t.sent,r(l),t.next=20;break;case 16:t.prev=16,t.t0=t.catch(7),console.log("error loading discount",t.t0),u(t.t0);case 20:case"end":return t.stop()}},t,null,[[7,16]])})),[e,i]);return c.a.useEffect(function(){i||h()},[e,i]),i?{discount:n,error:i,retry:h}:{discount:n}}function Se(){var e=Ce(),t=e.subjects,a=e.errorLoadingSubjects,n=e.reloadSubjects,r=c.a.useContext(_e),s=r.data.teachers,o=r.setters.setTeachers,i=c.a.useState(null),u=Object(l.a)(i,2),m=u[0],d=u[1],f=c.a.useCallback(Object(b.a)(v.a.mark(function e(){var t,a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!we.teachers){e.next=2;break}return e.abrupt("return",we.teachers);case 2:return t=M.get("/accounts/teachers"),we.teachers=t,e.prev=4,m&&d(null),e.next=8,t;case 8:a=e.sent,console.log("set teachers",a),o(a),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(4),console.error(e.t0),d(e.t0);case 17:return e.prev=17,delete we.teachers,e.finish(17);case 20:return e.abrupt("return",t);case 21:case"end":return e.stop()}},e,null,[[4,13,17,20]])})),[m]);return c.a.useEffect(function(){s||we.teachers||m||f()},[s,m]),m||a?{teachers:s,subjects:t,error:m||a,retry:function(){m&&f(),a&&n()}}:{teachers:s,subjects:t}}function Pe(){var e=Ce(),t=e.subjects,a=e.errorLoadingSubjects,n=e.reloadSubjects,r=c.a.useContext(_e),s=r.data.catalog,o=r.setters.setCatalog,i=c.a.useState(null),u=Object(l.a)(i,2),m=u[0],d=u[1],f=c.a.useCallback(Object(b.a)(v.a.mark(function e(){var t,a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!we.shopCatalog){e.next=2;break}return e.abrupt("return",we.shopCatalog);case 2:return t=M.get("/courses",{params:{group:"MARKET"}}),we.shopCatalog=t,e.prev=4,m&&d(null),e.next=8,t;case 8:a=e.sent,o(a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),console.error(e.t0),d(e.t0);case 16:return e.prev=16,delete we.shopCatalog,e.finish(16);case 19:return e.abrupt("return",t);case 20:case"end":return e.stop()}},e,null,[[4,12,16,19]])})),[m]);return c.a.useEffect(function(){s||we.shopCatalog||m||f()},[s,m]),m||a?{catalog:s,subjects:t,error:m||a,retry:function(){m&&f(),a&&n()}}:{catalog:s,subjects:t}}function De(){var e=Ce(),t=e.subjects,a=e.errorLoadingSubjects,n=e.reloadSubjects,r=c.a.useContext(_e),s=r.data.userCourses,o=r.setters.setUserCourses,i=c.a.useState(null),u=Object(l.a)(i,2),m=u[0],d=u[1],f=c.a.useCallback(Object(b.a)(v.a.mark(function e(){var t,a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!we.userCourses){e.next=2;break}return e.abrupt("return",we.userCourses);case 2:return t=M.get("/courses",{params:{group:"PERSON"}}),we.userCourses=t,e.prev=4,m&&d(null),e.next=8,t;case 8:a=e.sent,o(a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),console.error(e.t0),d(e.t0);case 16:return e.prev=16,delete we.userCourses,e.finish(16);case 19:return e.abrupt("return",t);case 20:case"end":return e.stop()}},e,null,[[4,12,16,19]])})),[m]);return c.a.useEffect(function(){s||we.userCourses||m||f()},[s,m]),m||a?{courses:s,subjects:t,error:m||a,retry:function(){m&&f(),a&&n()}}:{courses:s,subjects:t}}function Ie(e){var t=c.a.useContext(_e),a=t.data.lessons,n=t.setters.setLessons,r=c.a.useState(null),s=Object(l.a)(r,2),o=s[0],i=s[1],u=c.a.useCallback(function(){var e=Object(b.a)(v.a.mark(function e(t){var a,r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!we.lessons||!we.lessons[t]){e.next=2;break}return e.abrupt("return",we.lessons[t]);case 2:return a=M.get("/lessons",{params:{courseId:t}}),(we.lessons||(we.lessons={}))[t]=a,e.prev=4,o&&i(null),e.next=8,a;case 8:r=e.sent,console.log("set lessons",r),n(function(e){return ge({},e,Object(_.a)({},t,r))}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(4),console.error(e.t0),i(e.t0);case 17:return e.prev=17,delete we.lessons[t],e.finish(17);case 20:return e.abrupt("return",a);case 21:case"end":return e.stop()}},e,null,[[4,13,17,20]])}));return function(t){return e.apply(this,arguments)}}(),[o]);return c.a.useEffect(function(){a[e]||we.lessons&&we.lessons[e]||o||u(e)},[a,e,o]),o?{lessons:a[e],error:o,retry:function(){o&&u(e)}}:{lessons:a[e]}}var Le=function(e){var t=e.children,a=function(){var e=c.a.useState(W.getUser()),t=Object(l.a)(e,2),a=t[0],n=t[1],r=c.a.useState(null),s=Object(l.a)(r,2),o=s[0],i=s[1];c.a.useEffect(function(){a&&function(){var e=Object(b.a)(v.a.mark(function e(){var t;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.getUserInfo();case 2:t=e.sent,i(t);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[a]);var u=c.a.useCallback(function(e,t){n(e)},[]),m=c.a.useCallback(function(){n(null),i(null)},[]);return c.a.useLayoutEffect(function(){return W.subscribe(H.login,u),W.subscribe(H.logout,m),function(){W.unsubscribe(H.login,u),W.unsubscribe(H.logout,m)}},[u,m]),[a,o]}(),n=Object(l.a)(a,2),r=n[0],s=n[1],o=function(){var e=ke(),t=Object(l.a)(e,2),a=t[0],n=t[1],r=Oe(),c=Object(l.a)(r,2),s=c[0],o=c[1],i=je(),u=Object(l.a)(i,2),m=u[0],d=u[1],f=Ne(),p=Object(l.a)(f,2),v=p[0],b=p[1],h=ye(),E=Object(l.a)(h,2);return{data:{catalog:a,subjects:m,teachers:v,lessons:E[0],userCourses:s},setters:{setCatalog:n,setSubjects:d,setTeachers:b,setLessons:E[1],setUserCourses:o}}}();return c.a.createElement(_e.Provider,{value:ge({user:r,userInfo:s},o)},t)};function Fe(){var e=c.a.useContext(_e);return{user:e.user,userInfo:e.userInfo}}var Re=function(){return c.a.createElement("div",{className:"layout__content"},c.a.createElement("div",{className:"layout__loading-spinner"},c.a.createElement("i",{className:"spinner-border"})))},Be=function(e){var t=e.to,a=e.arrow,n=void 0===a||a,r=e.forward,s=void 0===r||r,o=e.className,l=e.children,i=Object(g.a)(e,["to","arrow","forward","className","children"]);return c.a.createElement(m.b,Object.assign({className:"".concat(n?"arrow-link":""," ").concat(s?"arrow-link-forward":"arrow-link-backward"," ").concat(o||""),to:t},i),l)},Te=function(e){var t=e.children,a=e.className,n=e.parentSection;return c.a.createElement("div",{className:"layout__content-container container ".concat(a||"")},n&&c.a.createElement(Be,{to:n.url||"..",forward:!1,className:"layout__content-parent-section-link"},n.name),t)},Ae=function(e){var t=e.children,a=e.className,n=Object(g.a)(e,["children","className"]);return c.a.createElement(te.a,Object.assign({mode:"bottom"},n),c.a.createElement("div",{className:"layout__bottom-tab ".concat(a||"")},t))},ze=(c.a.Component,function(e){var t=e.title,a=e.className,n=e.children,r=e.checkLogin,s=void 0===r||r,o=e.location,l=Fe(),i=l.user;l.userInfo;return s&&!i?c.a.createElement(u.b,{to:{pathname:"/login/",state:o?{referrer:o.pathname}:void 0}}):c.a.createElement("div",{className:"layout__content ".concat(a||"")},t&&c.a.createElement(Z.Helmet,null,c.a.createElement("title",null,t," \u2013 \u0415\u0413\u042d HACK")),n)}),Me=function(e){var t=e.location,a=Fe(),n=a.user;a.userInfo;return c.a.useLayoutEffect(function(){W.loginWidget("vk-auth")},[]),n?t.state&&t.state.referrer?c.a.createElement(u.b,{to:t.state.referrer}):c.a.createElement(u.b,{to:"/shop/"}):c.a.createElement(ze,{title:"\u0412\u0445\u043e\u0434",className:"login-page align-items-center justify-content-center",checkLogin:!1,location:t},c.a.createElement("div",{id:"vk-auth"}))},Ue=function(e){var t=e.first_name,a=e.last_name,n=e.photo,r=e.contacts,s=e.about,o=e.role,l="".concat(t," ").concat(a);return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"user-profile__avatar-container"},c.a.createElement("div",{className:"user-profile__avatar-wrap"},c.a.createElement(J,{src:n,className:"user-profile__avatar",round:!0,square:!0}))),c.a.createElement("div",{className:"user-profile__info layout__content-block"},c.a.createElement("div",{className:"d-flex flex-column align-items-center"},c.a.createElement("h2",null,l),o&&c.a.createElement("div",{className:"font-size-sm"},o),r&&c.a.createElement(Y,{contacts:r}),c.a.createElement("div",{className:"description-text font-size-sm"},s))))},He=function(){var e=Fe(),t=e.user;e.userInfo;return c.a.createElement(ze,{title:"\u0410\u043a\u043a\u0430\u0443\u043d\u0442",className:"account-page"},c.a.createElement(Te,null,c.a.createElement(Ue,t)))},Ve=a(107);function We(e){var t=e.preview,a=e.title,n=e.subtitle,r=e.description,s=e.item,o=e.selectable,i=e.className,u=e.children,d=e.link,f=e.onClick,p=e.onActionClick,v=e.callbackProps,b=ve(r),h=Object(l.a)(b,2),E=h[0],g=h[1],_=c.a.useCallback(function(e){var t=o&&!(p&&e.target.closest(".list__item-action"));t&&f?f(s,v):!t&&d&&e.preventDefault()},[s,f,o,v,d,p]),k=c.a.useCallback(function(e){o&&p&&p(s,v)},[s,p,o,v]),O=c.a.createElement("div",{className:"row align-items-center"},c.a.createElement("div",{className:"list__item-preview col-12 col-md-auto"},t),c.a.createElement("div",{className:"list__item-description col align-self-stretch"},c.a.createElement("div",{className:"list__item-description-inner"},c.a.createElement("div",{className:"title font-size-lg"},a),n&&c.a.createElement("div",{className:"subtitle"},n),r&&c.a.createElement("div",{className:"description-container font-size-xs"},c.a.createElement("div",{className:"description-text"},g?c.a.createElement(Ve.a,{lines:2,ref:E},r):null)))),u&&c.a.createElement("div",{className:"list__item-action col-auto d-flex align-items-center flex-column",onClick:k},u));return d?c.a.createElement(m.b,{className:"list__item container ".concat(o?"list__item-selectable":""," ").concat(i||""),to:d,onClick:_},O):c.a.createElement("div",{className:"list__item container ".concat(o?"list__item-selectable":""," ").concat(i||""),onClick:_},O)}function Je(e){var t=e.children,a=e.renderItem,n=e.renderProps,r=e.flex,s=e.className;return r?c.a.createElement("div",{className:"".concat(s||""," list")},c.a.createElement("div",{className:"container p-0 overflow-hidden"},c.a.createElement("div",{className:"row"},t.map(function(e,t){return a(e,n,t)})))):c.a.createElement("div",{className:"".concat(s||""," list")},t.map(function(e,t){return a(e,n,t)}))}Je.defaultProps={renderItem:function(e,t,a){return c.a.createElement(We,Object.assign({},e,t,{key:a}))}};var Ke=a(74),qe=a(224),Ge=function(e){return c.a.createElement("div",Object.assign({},e,{className:"track track-vertical"}))},$e=function(e){return c.a.createElement("div",Object.assign({},e,{className:"thumb thumb-vertical"}))},Ye=function(e){return c.a.createElement("div",Object.assign({},e,{className:"track track-horizontal"}))},Qe=function(e){return c.a.createElement("div",Object.assign({},e,{className:"thumb thumb-horizontal"}))},Xe=c.a.forwardRef(function(e,t){var a=e.children,n=Object(g.a)(e,["children"]);return c.a.createElement(qe.Scrollbars,Object.assign({renderTrackVertical:Ge,renderThumbVertical:$e,renderTrackHorizontal:Ye,renderThumbHorizontal:Qe,ref:t},n),a)});function Ze(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function et(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ze(a,!0).forEach(function(t){Object(_.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ze(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var tt=function(e){return c.a.createElement(Ke.a.DropdownIndicator,e,c.a.createElement("i",{className:"icon-angle"}))},at=function(e){var t=e.children,a=e.selectProps,n=e.hasValue,r=e.setValue,s=Object(g.a)(e,["children","selectProps","hasValue","setValue"]);return c.a.createElement("div",{className:"select"},c.a.createElement(Ke.a.SelectContainer,Object.assign({selectProps:et({},a,{isClearable:!1}),hasValue:n,setValue:r},s),t),a.isClearable&&c.a.createElement("div",{className:n?"select__clear-btn":"select__clear-btn select__clear-btn-hidden",onClick:function(){r(null)}},c.a.createElement("i",{className:"icon-close"})))},nt=function(e){var t=e.content,a=Object(g.a)(e,["content"]);return c.a.createElement(Ke.a.Option,a,t||a.label)},rt=function(e){function t(){return Object(h.a)(this,t),Object(q.a)(this,Object(G.a)(t).apply(this,arguments))}return Object($.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){this.props.innerRef(this.scrollBar.view)}},{key:"render",value:function(){var e=this;return c.a.createElement(Xe,{autoHeight:!0,hideTracksWhenNotNeeded:!0,ref:function(t){e.scrollBar=t},autoHeightMax:this.props.maxHeight},c.a.createElement(Ke.a.MenuList,this.props,this.props.children))}}]),t}(r.Component),ct=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(q.a)(this,(e=Object(G.a)(t)).call.apply(e,[this].concat(r)))).onChange=function(e){a.props.callback(e?e.value:null,a.props.name)},a}return Object($.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.options,n=e.value,r=e.components,s=e.selectProps,o=e.isClearable,l=void 0===o||o,i=e.isSearchable,u=void 0===i||i,m=e.placeholder;return c.a.createElement(Ke.b,Object.assign({name:t,options:a,maxMenuHeight:200,value:O.a.find(a,{value:n})||null,className:"select__container",classNamePrefix:"select",onChange:this.onChange,menuPlacement:"auto",noOptionsMessage:function(){return"\u041d\u0435\u0442 \u043e\u043f\u0446\u0438\u0439"},components:r?et({Option:nt,MenuList:rt,DropdownIndicator:tt,SelectContainer:at},r):{Option:nt,MenuList:rt,DropdownIndicator:tt,SelectContainer:at},styles:{option:function(){return{}}},isClearable:l,isSearchable:u,placeholder:m},s))}}]),t}(c.a.PureComponent);function st(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"value";return c.a.useCallback(function(a){e(a.currentTarget[t],a.currentTarget.name,a)},[e,t])}var ot=function(e){var t=e.className,a=e.onChange,n=Object(g.a)(e,["className","onChange"]),r=st(a);return c.a.createElement("input",Object.assign({className:"input ".concat(t||""),onChange:r},n))};Object.assign(ot,{CheckBox:function(e){var t=e.value,a=e.onChange,n=e.name,r=e.label,s=Object(g.a)(e,["value","onChange","name","label"]),o=st(a,"checked");return c.a.createElement("label",{className:"input input-checkbox"},c.a.createElement("input",Object.assign({type:"checkbox",name:n,checked:t,onChange:o},s)),c.a.createElement("span",{className:"input__box"}),c.a.createElement("span",{className:"input__label"},r))},Select:ct});var lt=ot;function it(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var ut=c.a.createContext({}),mt={Filter:function(e){var t=e.filterBy,a=(t=void 0===t?{}:t).subject,n=void 0===a||a,r=t.online,s=void 0===r||r,o=c.a.useContext(ut),l=o.options,i=o.subject,u=o.online,m=o.onChange;return c.a.createElement("div",{className:"layout__content-block catalog__filters"},c.a.createElement("div",{className:"container p-0"},c.a.createElement("div",{className:"row"},n&&c.a.createElement("div",{className:"col-auto d-flex align-items-center"},c.a.createElement(lt.Select,{name:"subject",options:l,value:i,placeholder:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442",callback:m})),s&&c.a.createElement("div",{className:"col-auto d-flex align-items-center"},c.a.createElement(lt.CheckBox,{name:"online",value:u,label:"\u041e\u043d\u043b\u0430\u0439\u043d",onChange:m})))))},Catalog:function(e){var t=e.renderFunc,a=e.placeholder,n=(e.baseUrl,Object(g.a)(e,["renderFunc","placeholder","baseUrl"])),r=c.a.useContext(ut),s=r.items,o=r.renderProps,l=c.a.useCallback(function(e){return t(e,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?it(a,!0).forEach(function(t){Object(_.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):it(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({link:"".concat(e.id,"/")},o))},[t,o]);return c.a.createElement("div",{className:"layout__content-block catalog__catalog"},s.length>0?c.a.createElement(Je,Object.assign({},n,{renderItem:l}),s):c.a.createElement("div",{className:"catalog__empty-catalog-fallback-message text-center font-size-sm"},a))},Body:function(e){var t=e.options,a=e.filterItems,n=e.children,r=e.renderProps,s=void 0===r?{}:r,o=Object(u.h)(),l=Object(u.i)(),i=new URLSearchParams(l.search),m=parseInt(i.get("subject"))||null,d="true"===i.get("online"),f=c.a.useCallback(function(e,t){var a=new URLSearchParams(l.search);e?a.set(t,e):a.delete(t),o.push({pathname:l.pathname,search:"?".concat(a)})},[l,o]),p=a(m,d);return c.a.createElement(ut.Provider,{value:{options:t,subject:m,online:d,onChange:f,items:p,renderProps:s}},c.a.createElement("div",{className:"catalog"},n))}};function dt(e){var t=e.teacher,a=t.vk_info,n=a.first_name,r=a.last_name,s=a.photo_max_orig,o=t.contacts,l=t.subjects,i=t.bio,u=(e.subjects,e.link),d=e.bio,f=void 0!==d&&d,p=e.className,v=c.a.useCallback(function(e){e.target.closest(".social-media")},[]);return c.a.createElement(m.b,{to:u,className:"".concat(p," teacher-profile"),onClick:v},c.a.createElement("div",{className:"container p-0"},c.a.createElement("div",{className:"row flex-nowrap"},c.a.createElement("div",{className:"col-auto d-flex align-items-center"},c.a.createElement(J,{src:s,className:"teacher-profile__photo",round:!0,square:!0})),c.a.createElement("div",{className:"col d-flex flex-column justify-content-center"},c.a.createElement("h3",{className:"teacher-profile__name"},n," ",r),f&&c.a.createElement("div",{className:"teacher-profile__subjects font-size-sm"},l.map(function(e,t){var a=e.name;return 0===t?a:a.toLowerCase()}).join(", ")),o&&c.a.createElement(Y,{contacts:o}))),f&&c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-12 description-text"},i))))}function ft(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var pt=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ft(a,!0).forEach(function(t){Object(_.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ft(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},mt,{Filter:function(e){return c.a.createElement(mt.Filter,Object.assign({filterBy:{online:!1}},e))},Catalog:function(e){var t=c.a.useCallback(function(e,t){var a=t.link,n=t.subjects;return c.a.createElement("div",{className:"list__item col-12 col-md-6 d-flex",key:e.id},c.a.createElement(dt,{teacher:e,subjects:n,bio:!0,link:a}))},[]);return c.a.createElement(mt.Catalog,Object.assign({placeholder:"\u041d\u0435\u0442 \u043f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0435\u0439, \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u043c \u043f\u043e\u0438\u0441\u043a\u0430",flex:!0,renderFunc:t},e))},Body:function(e){var t=e.teachers,a=e.subjects,n=Object(g.a)(e,["teachers","subjects"]),r=c.a.useMemo(function(){O.a.zipObject(a.map(function(e){return e.id}),a);var e=O.a.reduce(t,function(e,t){return t.subjects.forEach(function(t){e[t.id]=t}),e},{});return O.a.values(e).map(function(e){return{value:e.id,label:e.name}})},[t,a]),s=c.a.useCallback(function(e){return t.filter(function(t){return!e||t.subjects.some(function(t){var a=t.id;return e===a})})},[t]);return c.a.createElement(mt.Body,Object.assign({options:r,renderProps:{subjects:a},filterItems:s},n))}}),vt=function(e){var t=e.location,a=Se(),n=a.teachers,r=a.subjects;a.error,a.retry;return c.a.createElement(ze,{title:"\u041c\u043e\u0438 \u043a\u0443\u0440\u0441\u044b",className:"catalog teachers-catalog",location:t},n&&r?c.a.createElement(pt.Body,{subjects:r,teachers:n},c.a.createElement(Te,null,c.a.createElement(pt.Filter,null),c.a.createElement(pt.Catalog,null))):c.a.createElement(Re,null))},bt=function(e){var t=e.className,a=e.children,n=e.active,r=void 0===n||n,s=e.neutral,o=void 0!==s&&s,l=e.icon,i=e.iconAction,u=e.tag,m=void 0===u?"div":u,d=e.onClick,f=Object(g.a)(e,["className","children","active","neutral","icon","iconAction","tag","onClick"]);return c.a.createElement(m,Object.assign({className:"btn ".concat(r?"":"btn-inactive"," ").concat(o?"btn-neutral":""," ").concat(t||"")},f),c.a.createElement("span",{className:"btn__content"},l&&c.a.createElement("div",{className:"btn__after",onClick:i||d},l),c.a.createElement("span",{className:"btn__name",onClick:d},a)))},ht=function(e){var t=e.errorCode,a=e.message,n=e.link,r=(n=void 0===n?{}:n).text,s=n.url,o=t&&t.toString();return c.a.createElement(ze,{title:o,className:"error-page"},c.a.createElement("div",{className:"error-page__error-code"},o&&o.split("").map(function(e,t){return c.a.createElement("span",{key:t},e)})),c.a.createElement("div",{className:"error-page__error-message"},a||"\u041f\u043e\u0445\u043e\u0436\u0435, \u0432\u044b \u043f\u043e\u0442\u0435\u0440\u044f\u043b\u0438\u0441\u044c"),c.a.createElement(bt,{tag:m.b,to:"".concat(s||"","/"),replace:!0,className:"btn"},r||"\u041d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"))};function Et(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var gt=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Et(a,!0).forEach(function(t){Object(_.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Et(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},mt,{Catalog:function(e){var t=e.renderCourse,a=Object(g.a)(e,["renderCourse"]);return c.a.createElement(mt.Catalog,Object.assign({placeholder:"\u041d\u0435\u0442 \u043a\u0443\u0440\u0441\u043e\u0432, \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u043c \u043f\u043e\u0438\u0441\u043a\u0430",renderFunc:t},a))},Body:function(e){var t=e.courses,a=e.subjects,n=Object(g.a)(e,["courses","subjects"]),r=c.a.useMemo(function(){return a.map(function(e){return{value:e.id,label:e.name}})},[a]),s=c.a.useCallback(function(e,a){return t.filter(function(t){return(!e||t.subject_id===e)&&(!a||t.online===a)})},[t]);return c.a.createElement(mt.Body,Object.assign({options:r,filterItems:s},n))}});function _t(e){var t=e.course,a=e.online,n=void 0===a||a,r=e.isSelected,s=void 0!==r&&r,o=Object(g.a)(e,["course","online","isSelected"]),l=t.name,i=t.image_link,u=t.date_start,m=t.description,d=P(new Date,u);return c.a.createElement(We,Object.assign({item:t,className:s?"course course-selected":"course",title:l,subtitle:"\u0414\u043e \u043d\u0430\u0447\u0430\u043b\u0430 \u043a\u0443\u0440\u0441\u0430 ".concat(d," ").concat(1===d?"\u0434\u0435\u043d\u044c":"\u0434\u043d\u0435\u0439"),description:m,preview:c.a.createElement("div",{className:"course__cover-container"},t.online&&c.a.createElement("div",{className:"course__online-badge ".concat(n?"course__online-text":""," font-size-xs")},c.a.createElement("span",null,"\u041e\u043d\u043b\u0430\u0439\u043d")),c.a.createElement(J,{src:i,className:"poster-cover course__cover"}))},o))}var kt=function(e){var t=e.match.params.id,a=e.path,n=e.className,r=e.location,s=Se(),o=s.teachers,l=s.subjects,i=(s.error,s.retry,Pe()),u=i.catalog,m=(i.error,i.retry,parseInt(t)),d=c.a.useCallback(function(e,t){var a=t.link,n=e.price,r=e.discount;return c.a.createElement(_t,{course:e,selectable:!0,key:e.id,link:"/shop/".concat(a)},c.a.createElement("div",{className:"list__item-action-info"},c.a.createElement("span",{className:"price"},n,"\u20bd")," ",r&&c.a.createElement("span",{className:"discount font-size-xs"},r+n,"\u20bd")),c.a.createElement(bt,{style:{minWidth:"110px"}},"\u041e\u0442\u043a\u0440\u044b\u0442\u044c"))},[]);if(o&&u&&l){var f=O.a.find(o,{id:m});if(f){var p=f.vk_info,v=p.first_name,b=p.last_name,h=p.photo_max_orig,E=f.contacts,g=f.subjects,_=f.bio,k=u.filter(function(e){return O.a.indexOf(e.teacher_ids,m)>=0}),j={first_name:v,last_name:b,photo:h,contacts:E,about:_,role:g.map(function(e,t){var a=e.name;return 0===t?a:a.toLowerCase()}).join(", ")},N="".concat(v," ").concat(b);return c.a.createElement(ze,{title:"".concat(N),className:"teacher-page ".concat(n||""),location:r},c.a.createElement(Te,{parentSection:{name:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438"}},c.a.createElement(Ue,j),c.a.createElement("div",{className:"layout__content-block"},c.a.createElement("h3",null,"\u041a\u0443\u0440\u0441\u044b \u043f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u044f")),c.a.createElement(gt.Body,{className:"course-shop",subjects:l,courses:k},c.a.createElement(gt.Filter,null),c.a.createElement(gt.Catalog,{renderCourse:d}))))}return c.a.createElement(ht,{errorCode:404,message:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u044c \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d",link:{url:a}})}return c.a.createElement(ze,{location:r},c.a.createElement(Re,null))},Ot=function(e){var t=e.match;return c.a.createElement(u.e,null,c.a.createElement(u.c,{path:"".concat(t.path,"/:id"),render:function(e){return c.a.createElement(kt,Object.assign({teachers:me,courses:fe.catalog,path:t.path},e))}}),c.a.createElement(u.c,{exact:!0,path:"".concat(t.path),render:function(e){return c.a.createElement(vt,e)}}))},jt=a(501);function Nt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function yt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Nt(a,!0).forEach(function(t){Object(_.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Nt(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var wt=function(e){var t=e.course,a=e.onCourseDeselect,n=e.onTruncate,r=t.name,s=ve(r),o=Object(l.a)(s,1)[0],i=c.a.useCallback(function(){a(t)},[a,t]);return c.a.createElement("div",{className:"selected-course d-flex align-items-center flex-shrink-0"},c.a.createElement("div",{className:"selected-course__cover-container"},c.a.createElement(J,{src:t.image_link,className:"selected-course__cover poster-cover"}),c.a.createElement("i",{className:"icon-close selected-course__deselect-btn animated__action-button",onClick:i})),c.a.createElement("div",{className:"selected-course__description-container font-size-xs"},c.a.createElement("div",{className:"selected-course__description"},c.a.createElement(Ve.a,{lines:2,ref:o,onTruncate:n},r))))},Ct=function(e){var t=e.style,a=Object(g.a)(e,["style"]);return c.a.createElement("div",Object.assign({style:yt({},t,{height:"calc(100% + ".concat(t.minHeight,"px)")})},a))},xt=function(e){var t,a,n,r=e.courses,s=e.discount,o=e.onCourseDeselect;if(s){var l=O.a.sumBy(r,"price");t=s.discounted_price,a=l-s.discounted_price,n=s.message}return c.a.useEffect(function(){window.dispatchEvent(new Event("scroll"))}),c.a.createElement(Ae,{className:"selected-courses ".concat(0===r.length?"hidden":"")},c.a.createElement("div",{className:"container-fluid"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-12 col-md p-0 selected-courses__courses"},c.a.createElement(Xe,{autoHeight:!0,autoHeightMax:"unset",hideTracksWhenNotNeeded:!0,renderView:Ct,style:{height:"100%"},className:"scrollbars"},c.a.createElement(jt.a,{className:"layout__bottom-tab-container container-fluid d-flex flex-nowrap",style:{height:"100%"}},r.map(function(e){return c.a.createElement(i.a,{classNames:"animation-fade",key:e.id,timeout:300},c.a.createElement(wt,{course:e,onCourseDeselect:o,onTruncate:function(){window.dispatchEvent(new Event("scroll"))}}))})))),c.a.createElement("div",{className:"col-12 col-md-auto p-0 selected-courses__price"},c.a.createElement("div",{className:"layout__bottom-tab-container container d-flex align-items-center justify-content-end"},s?c.a.createElement(c.a.Fragment,null,c.a.createElement(bt,{className:"order-1 order-md-0 flex-shrink-0"},"\u041e\u043f\u043b\u0430\u0442\u0438\u0442\u044c"),c.a.createElement("div",{className:"price selected-courses__price-container container"},a>0&&c.a.createElement("div",{className:"discount font-size-sm d-inline-block d-md-block"},t+a,"\u20bd"),c.a.createElement("div",{className:"price font-size-lg d-inline-block d-md-block"},t,"\u20bd"),n&&c.a.createElement("div",{className:"promotion font-size-xs"},n))):c.a.createElement("div",{className:"spinner-border"}))))))},St=function(e){var t=e.selectedCourses,a=(e.onCourseClick,e.onCourseSelect),n=e.onCourseDeselect,r=e.location,s=Pe(),o=s.catalog,l=s.subjects,i=(s.error,s.retry,xe(t)),u=i.discount,m=(i.error,i.retry,c.a.useCallback(function(e,n){var r=t.has(e),s=e.price,o=e.discount,l=e.purchased;return c.a.createElement(_t,Object.assign({course:e,selectable:!0,isSelected:r,onActionClick:l?null:a,key:e.id},n),l?c.a.createElement(bt,{style:{minWidth:"110px"},active:!1},"\u041a\u0443\u043f\u043b\u0435\u043d\u043e"):c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"list__item-action-info"},c.a.createElement("span",{className:"price"},s,"\u20bd")," ",o&&c.a.createElement("span",{className:"discount font-size-xs"},o+s,"\u20bd")),c.a.createElement(bt,{style:{minWidth:"110px"}},r?"\u0412\u044b\u0431\u0440\u0430\u043d\u043e":"\u0412\u044b\u0431\u0440\u0430\u0442\u044c")))},[t,a]));return c.a.createElement(ze,{className:"course-shop",title:"\u041c\u0430\u0433\u0430\u0437\u0438\u043d \u043a\u0443\u0440\u0441\u043e\u0432",location:r},o&&l?c.a.createElement(gt.Body,{subjects:l,courses:o},c.a.createElement(Te,null,c.a.createElement(gt.Filter,null),c.a.createElement(gt.Catalog,{renderCourse:m}))):c.a.createElement(Re,null),c.a.createElement(xt,{onCourseDeselect:n,courses:Object(ae.a)(t),discount:u}))};window._=O.a;var Pt=c.a.createContext({}),Dt=function(){var e=c.a.useContext(Pt).course;return c.a.createElement(c.a.Fragment,null,c.a.createElement(J,{src:e.image_link,className:"course-overview__cover"}),c.a.createElement("div",{className:"course-overview__info layout__content-block"},c.a.createElement("h2",null,e.name),c.a.createElement("div",{className:"course-overview__summary"},c.a.createElement("div",{className:"col-auto course-overview__summary-item"},c.a.createElement("i",{className:"far fa-calendar-alt"}),"\u041d\u0430\u0447\u0430\u043b\u043e: ",D(e.date_start,D.date)),c.a.createElement("div",{className:"col-auto course-overview__summary-item"},c.a.createElement("i",{className:"far fa-clock"}),"\u0414\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c: ",e.total_hours," \u0447\u0430\u0441\u043e\u0432")),c.a.createElement("div",{className:"description-text font-size-sm"},e.description)))},It=function(){var e=c.a.useContext(Pt),t=e.course,a=e.teachers;return c.a.createElement("div",{className:"layout__content-block"},c.a.createElement("h3",null,"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438"),c.a.createElement("div",{className:"course-overview__teachers container negate-block-padding"},c.a.createElement("div",{className:"row"},t.teacher_ids.map(function(e,t){return c.a.createElement("div",{className:"col-12 col-md d-flex p-0",key:t},c.a.createElement(dt,{teacher:O.a.find(a,{id:e}),link:"/teachers/".concat(e,"/")}))}))))},Lt=function(e){var t=e.renderLesson,a=c.a.useContext(Pt),n=(a.course,a.lessons),r=c.a.useCallback(function(e){return t(e,{link:"".concat(e.id,"/")})},[t]);return c.a.createElement("div",{className:"layout__content-block"},c.a.createElement("h3",null,"\u0423\u0440\u043e\u043a\u0438"),c.a.createElement(Je,{renderItem:r},n))},Ft=function(){var e=c.a.useContext(Pt).course;return c.a.createElement("div",{className:"course-overview__title layout__content-block"},c.a.createElement("h2",null,e.name),c.a.createElement(Be,{className:"course-overview__link",to:"/shop/".concat(e.id)},"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043a\u0443\u0440\u0441\u0430"))},Rt=function(e){var t=e.match.params.id,a=e.path,n=e.courses,r=e.teachers,s=e.lessons,o=e.children,l=e.className,i=e.location,u=parseInt(t),m=O.a.find(n,{id:u});return m?c.a.createElement(ze,{title:"".concat(m.title),className:"course-overview ".concat(l||""),location:i},c.a.createElement(Pt.Provider,{value:{course:m,teachers:r,lessons:s}},o)):c.a.createElement(ht,{errorCode:404,message:"\u041a\u0443\u0440\u0441 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d",link:{url:a}})},Bt=function(e){var t,a,n=e.discount,r=(e.error,e.retry,c.a.useContext(Pt).course),s=r.price,o=r.purchased;return n&&(t=n.discounted_price,a=s-n.discounted_price,n.message),c.a.useEffect(function(){window.dispatchEvent(new Event("scroll"))}),c.a.createElement(Ae,{className:"course-overview__offer"},c.a.createElement("div",{className:"container layout__bottom-tab-container"},c.a.createElement("div",{className:"row justify-content-end align-items-center"},o?c.a.createElement(bt,{active:!1},"\u041a\u0443\u043f\u043b\u0435\u043d\u043e"):n?c.a.createElement(c.a.Fragment,null,a>0&&c.a.createElement("div",{className:"col-auto"},c.a.createElement("div",{className:"discount"},t+a,"\u20bd")),c.a.createElement("div",{className:"col-auto"},c.a.createElement("h2",{className:"price"},t,"\u20bd")),c.a.createElement("div",{className:"col-auto"},c.a.createElement(bt,null,"\u041a\u0443\u043f\u0438\u0442\u044c"))):c.a.createElement("div",{className:"spinner-border"}))))},Tt=function(e){var t=e.cover,a=e.watchProgress,n=e.locked,r=void 0!==n&&n,s=e.className;return c.a.createElement(J,{src:t,className:"video-cover ".concat(r?"video-locked":""," ").concat(s||"")},a&&c.a.createElement("div",{className:"video-cover__watch-progress-bar"},c.a.createElement("div",{className:"watch-progress-bar__progress-line",style:{width:"".concat(a,"%")}})))};function At(e){var t=e.lesson,a=e.locked,n=void 0!==a&&a,r=e.link,s=Object(g.a)(e,["lesson","locked","link"]),o=t.name,l=t.image_link,i=t.description,u=t.watchProgress;return c.a.createElement(We,Object.assign({item:t,className:"video-class ".concat(n?"disabled":""),title:o,description:i,preview:c.a.createElement(Tt,{cover:l,className:"video-class__cover",locked:n,watchProgress:!n&&u}),key:t.id,link:n?void 0:r},s))}var zt=function(e){var t=e.path,a=e.location,n=e.match,r=n.params.id,s=Pe(),o=s.catalog,l=(s.subjects,s.error),i=(s.retry,Se()),u=i.teachers,m=(i.error,i.retry,Ie(r)),d=m.lessons,f=(m.error,m.retry,xe(r)),p=f.discount,v=(f.error,f.retry);return o&&u&&d?c.a.createElement(Rt,{match:n,path:t,courses:o,teachers:u,lessons:d,location:a},c.a.createElement(Te,{parentSection:{name:"\u041c\u0430\u0433\u0430\u0437\u0438\u043d \u043a\u0443\u0440\u0441\u043e\u0432"}},c.a.createElement(Dt,null),c.a.createElement(It,null),c.a.createElement(Lt,{renderLesson:function(e,t){return c.a.createElement(At,{lesson:e,selectable:!1,locked:!1,key:e.id})}})),c.a.createElement(Bt,{discount:p,error:l,retry:v})):c.a.createElement(ze,{location:a},c.a.createElement(Re,null))};function Mt(e){var t=c.a.useState(new Set),a=Object(l.a)(t,2),n=a[0],r=a[1],s=c.a.useCallback(function(e){r(function(t){return t.has(e)?t:((t=new Set(t)).add(e),t)})},[]),o=c.a.useCallback(function(e){r(function(t){return(t=new Set(t)).delete(e),t})},[]),i=e.match;return c.a.createElement(u.e,null,c.a.createElement(u.c,{path:"".concat(i.path,"/:id"),render:function(e){return c.a.createElement(zt,Object.assign({path:i.path},e))}}),c.a.createElement(u.c,{exact:!0,path:"".concat(i.path),render:function(e){return c.a.createElement(St,Object.assign({selectedCourses:n,onCourseSelect:s,onCourseDeselect:o},e))}}))}var Ut=function(e){var t=e.location,a=De(),n=a.courses,r=a.subjects,s=(a.error,a.retry,c.a.useCallback(function(e,t){return c.a.createElement(_t,Object.assign({course:e,selectable:!0,online:!1,key:e.id},t),e.status===S.learning?c.a.createElement(bt,{className:"course__select-btn"},"\u0418\u0437\u0443\u0447\u0430\u0442\u044c"):c.a.createElement(bt,{className:"course__select-btn",active:!1},"\u041f\u0440\u043e\u0439\u0434\u0435\u043d"))},[]));return c.a.createElement(ze,{className:"user-courses",location:t,title:"\u041c\u043e\u0438 \u043a\u0443\u0440\u0441\u044b"},n&&r?c.a.createElement(gt.Body,{courses:n,subjects:r},c.a.createElement(Te,null,c.a.createElement(gt.Filter,null),c.a.createElement(gt.Catalog,{renderCourse:s}))):c.a.createElement(Re,null))},Ht=function(e){var t=e.path,a=e.match,n=e.location,r=(Object(g.a)(e,["path","match","location"]),a.params.id),s=De(),o=s.courses,l=(s.error,s.retry,Ie(r)),i=l.lessons;l.error,l.retry;return o&&i?c.a.createElement(Rt,{match:a,path:t,courses:o,lessons:i,location:n},c.a.createElement(Te,{parentSection:{name:"\u041c\u043e\u0438 \u043a\u0443\u0440\u0441\u044b"}},c.a.createElement(Ft,null),c.a.createElement(Lt,{renderLesson:function(e,t){e.date;var a=e.id,n=e.locked;return c.a.createElement(At,Object.assign({lesson:e,locked:n,selectable:!n,key:a},t),n?c.a.createElement(bt,{active:!1},"\u0421\u043a\u043e\u0440\u043e"):c.a.createElement(bt,null,"\u0418\u0437\u0443\u0447\u0430\u0442\u044c"))}}))):c.a.createElement(ze,{location:n},c.a.createElement(Re,null))},Vt=a(499),Wt=function(e){function t(){return Object(h.a)(this,t),Object(q.a)(this,Object(G.a)(t).apply(this,arguments))}return Object($.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=c.a.Children.only(this.props.children),t="pos-"+this.props.position;return c.a.cloneElement(e,{className:(e.props.className?e.props.className+" tooltip ":"tooltip ")+t,children:c.a.createElement(r.Fragment,null,e.props.children,c.a.createElement("div",{className:"tooltip-arrow"}),c.a.createElement("div",{className:"tooltip-block"},this.props.content))})}}]),t}(r.Component),Jt={PENDING:"pending",LOADING:"loading",LOADED:"loaded",SUCCESS:"success",DONE:"done",REJECTED:"rejected",ERROR:"error"};function Kt(e,t,a,n){var r=c.a.useState(null===e||t?Jt.DONE:a?Jt.REJECTED:Jt.LOADING),s=Object(l.a)(r,2),o=s[0],i=s[1];return he(function(){!1===e?i(Jt.LOADED):!0===e&&i(Jt.LOADING)},[e]),he(function(){if(o===Jt.LOADED&&t)i(Jt.SUCCESS);else if(o===Jt.SUCCESS){var e=setTimeout(function(){i(Jt.DONE)},1e3);return function(){clearTimeout(e)}}},[o,t]),he(function(){n&&i(Jt.ERROR)},[n]),he(function(){a&&i(Jt.REJECTED)},[a]),o}var qt=function(e){var t=e.state,a=e.onClick,n=e.errorMessage,r=(t===Jt.LOADED?"spinner-border":t===Jt.SUCCESS&&"icon-check")||t===Jt.ERROR&&"icon-reload"||t===Jt.REJECTED&&"icon-alert"||"spinner-border";return c.a.createElement(Vt.a,null,t!==Jt.DONE?c.a.createElement(i.a,{key:r,appear:!0,classNames:"animation-scale",timeout:300},c.a.createElement("div",{className:"file__state-indicator",onClick:a},c.a.createElement(Wt,{content:n},c.a.createElement("i",{className:r})))):null)},Gt=function(e){var t=e.file,a=t.name,n=t.downloadName,r=t.url,s=e.error,o=void 0===s?null:s,l=e.rejected,i=void 0===l?null:l,u=e.loading,m=void 0===u?null:u,d=e.done,f=void 0===d||d,p=e.deletable,v=void 0!==p&&p,b=e.onDelete,h=e.onIndicatorClick,E=e.className,_=e.errorMessage,k=Object(g.a)(e,["file","error","rejected","loading","done","deletable","onDelete","onIndicatorClick","className","errorMessage"]),O=c.a.useCallback(function(){r&&L(r,n||a)},[r,a,n]),j=null!==m,N=Kt(null!==m?m<100:null,f,i,o);return c.a.createElement("div",{className:"file file-".concat(N," ").concat(E||"")},c.a.createElement(bt,Object.assign({neutral:!0,className:"file__btn",icon:v?c.a.createElement("i",{className:"icon-close file__action-btn file__delete-btn animated__action-button"}):c.a.createElement("i",{className:"icon-download file__action-btn file__download-btn animated__action-button"}),iconAction:v?b:void 0,onClick:O},k),null!==m&&c.a.createElement("div",{className:"file__loading-progress",style:{width:"".concat(m,"%")}}),c.a.createElement("i",{className:"file__icon far fa-file-alt"}),c.a.createElement("span",{className:"file__name",title:a},a)),j&&c.a.createElement(qt,{onClick:h,state:N,errorMessage:_}))},$t=function(e){var t=e.video_link;return c.a.createElement("div",{className:"video-player"},c.a.createElement("iframe",{className:"video-player__video",src:"https://player.vimeo.com/video/".concat(t,"?color=fa9346&title=0&byline=0&portrait=0"),frameBorder:"0",allow:"autoplay; fullscreen",allowFullScreen:!0}))},Yt=a(227),Qt=a.n(Yt),Xt=a(141),Zt=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(q.a)(this,(e=Object(G.a)(t)).call.apply(e,[this].concat(r)))).type=null,a.phase=null,a}return Object($.a)(t,e),Object(E.a)(t,[{key:"addClass",value:function(e,a,n){Object(Xt.a)(Object(G.a)(t.prototype),"addClass",this).call(this,e,a,n),this.type=a,this.phase=n}},{key:"componentDidUpdate",value:function(){this.appliedClasses[this.type]&&this.appliedClasses[this.type][this.phase]&&Object(Xt.a)(Object(G.a)(t.prototype),"addClass",this).call(this,o.a.findDOMNode(this),this.type,this.phase)}}]),t}(i.a),ea=(a(496),"error_file_size"),ta=c.a.createContext(null),aa=function(e){return e.every(function(e){return function(e){return"done"===e.meta.status}(e)})},na=function(){if(W.user)return{url:"".concat(B,"/files/"),headers:(e=W.user.uid,t=W.user.hash,{Authorization:"Basic ".concat(btoa(e+":"+t))})};throw new Error("User not logged in");var e,t},ra=function(e){var t,a=e.original_file_name,n=e.id_file_name;return{name:a,downloadName:"".concat((t=a,t.replace(/\.[^\/.]+$/,"")),"_").concat(n),url:"".concat(B,"/files/").concat(n,"?disp=attachment")}},ca=function(e){var t=e.className,a=e.style,n=e.getFilesFromEvent,r=e.accept,s=e.multiple,o=e.disabled,l=e.onFiles,i=e.files,u=e.content,m=e.extra.maxFiles,d=c.a.useCallback(function(){var e=Object(b.a)(v.a.mark(function e(t){var a,r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target,e.next=3,n(t);case 3:r=e.sent,l(r),a.value=null;case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[n,l]),f=i.length<m&&!o;return c.a.createElement(bt,{tag:"label",active:f,icon:c.a.createElement("i",{className:"icon-add"})},u,c.a.createElement("input",{className:t,style:a,type:"file",accept:r,multiple:s,disabled:!f,onChange:f?d:null}))},sa=function(e){var t=e.fileWithMeta,a=t.cancel,n=t.remove,r=t.restart,s=t.xhr,o=e.meta,i=o.name,u=void 0===i?"":i,m=o.percent,d=void 0===m?0:m,f=o.status,p=e.isUpload,v=e.canRemove,b=e.className,h=be(null),E=Object(l.a)(h,2),g=E[0],_=E[1];if(!g()&&s&&s.responseText)try{var k=JSON.parse(s.responseText),j=k.original_file_name,N=k.file_link,y=k.id_file_name;if(!(j&&N&&y))throw new Error("Incorrect response");_({original_file_name:j,file_link:N,id_file_name:y})}catch(I){console.log(I)}var w=g(),C=c.a.useCallback(function(){p&&"done"!==f&&"headers_received"!==f&&a(),n()},[a,n,p,f]),x=O.a.startsWith(f,"error")||O.a.startsWith(f,"exception"),S=f===ea||void 0,P=p?"done"===f||"headers_received"===f?100:d:null,D="done"===f;return c.a.createElement(Gt,{file:w?ra(w):{name:u},loading:P,className:b,done:D,rejected:!(!x||!S)||void 0,error:x,errorMessage:x&&S?"\u0424\u0430\u0439\u043b \u043f\u0440\u0435\u0432\u044b\u0448\u0430\u0435\u0442 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0439 \u0440\u0430\u0437\u043c\u0435\u0440":void 0,deletable:v,onDelete:C,onIndicatorClick:x&&!S?r:void 0})},oa=function(e){var t=c.a.useContext(ta)||{},a=t.submitting,n=t.hasChanged,r=e.disabled,s=e.onSubmit,o=e.files,l=e.content,i=!aa(o)||r,u=c.a.useCallback(function(){s(o)},[s,o]),m=Kt(a,!1===a);return console.log(m),c.a.createElement(Zt,{in:null!=s&&(n||m!==Jt.DONE),appear:!0,mountOnEnter:!0,unmountOnExit:!0,classNames:"animation-fade",timeout:300},c.a.createElement(c.a.Fragment,null,c.a.createElement(bt,{active:!i,icon:n?c.a.createElement("i",{className:"icon-upload"}):c.a.createElement(qt,{state:m}),onClick:u},n?l:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043e")))},la=function(e){var t=e.input,a=e.previews,n=void 0===a?[]:a,r=e.submitButton,s=e.dropzoneProps,o=(e.files,e.extra.maxFiles,c.a.useContext(ta)||{}),l=o.preloadedFiles,i=void 0===l?[]:l,u=o.deletePreloadedFile,m=o.disabled,d=s.ref;return c.a.createElement("div",{ref:d,className:"file-input"},c.a.createElement("h4",{className:"file-input__files-title"},"\u0417\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043d\u044b\u0435 \u0444\u0430\u0439\u043b\u044b"),c.a.createElement(jt.a,{className:"file-container"},i&&i.map(function(e){var t=e.id_file_name;return c.a.createElement(Zt,{classNames:"animation-fade",timeout:300,key:t},c.a.createElement(Gt,{file:ra(e),done:!0,deletable:!m,onDelete:function(){u(e)}}))}),n.map(function(e,t){return c.a.createElement(Zt,{classNames:"animation-fade",timeout:300,key:e.props.meta.id},e)})),c.a.createElement("div",{className:"file-input__controls"},t,r))},ia=function(e,t){return aa(e)?O.a.concat(t,e.map(function(e){var t=e.xhr;return JSON.parse(t.responseText)})):null},ua=function(e){var t=e.initialFiles,a=void 0===t?[]:t,n=e.inputContent,r=void 0===n?"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0444\u0430\u0439\u043b":n,s=e.onChange,o=e.onSubmit,i=e.maxFiles,u=void 0===i?5:i,m=e.maxSizeBytes,d=void 0===m?4194304:m,f=e.accept,p=e.isDisabled,h=void 0!==p&&p,E=Object(g.a)(e,["initialFiles","inputContent","onChange","onSubmit","maxFiles","maxSizeBytes","accept","isDisabled"]),_=c.a.useState(a),k=Object(l.a)(_,2),j=k[0],N=k[1],y=c.a.useState(!1),w=Object(l.a)(y,2),C=w[0],x=w[1],S=c.a.useState(null),P=Object(l.a)(S,2),D=P[0],I=P[1],L=be([]),F=Object(l.a)(L,2),R=F[0],B=F[1],T=c.a.useCallback(function(e){var t=j.filter(function(t){return t!==e});x(!0),N(t),s&&s(ia(R(),t))},[j,s,R]),A=c.a.useCallback(function(e,t,a){var n=e.meta;Object(g.a)(e,["meta"]),console.log(t,n,O.a.cloneDeep(a)),x(!0),B(a),s&&s(!0,ia(a,j))},[s,j,B]),z=c.a.useCallback(function(){var e=Object(b.a)(v.a.mark(function e(t){var a,n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t.map(function(e){return e.meta})),!o){e.next=14;break}if(a=ia(t,j),!((n=o(a))instanceof Promise)){e.next=14;break}return I(!0),e.prev=6,e.next=9,n;case 9:x(!1),s&&s(!1,a);case 11:return e.prev=11,I(!1),e.finish(11);case 14:case"end":return e.stop()}},e,null,[[6,,11,14]])}));return function(t){return e.apply(this,arguments)}}(),[o,j]);u=j?u-j.length:u;var M="function"===typeof h?h():h;return c.a.createElement(ta.Provider,{value:{preloadedFiles:j,deletePreloadedFile:T,hasChanged:C,disabled:M,submitting:D}},c.a.createElement(Qt.a,Object.assign({inputContent:r,submitButtonContent:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"},E,{getUploadParams:na,onChangeStatus:A,onSubmit:o&&z,canCancel:!1,SubmitButtonComponent:oa,LayoutComponent:la,InputComponent:ca,PreviewComponent:sa,maxFiles:u,maxSizeBytes:d,accept:f,classNames:{preview:""},disabled:h})))},ma=function(){var e=c.a.useCallback(function(e){e.preventDefault(),e.returnValue=""},[]);return c.a.useEffect(function(){return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}},[e]),c.a.createElement(u.a,{message:"\u0423 \u0432\u0430\u0441 \u0435\u0441\u0442\u044c \u043d\u0435\u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f, \u043f\u043e\u043a\u0438\u043d\u0443\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443?"})},da=function(e){var t=e.homework,a=e.deadline,n=e.lessonId,r=c.a.useCallback(function(){return a&&new Date>=a},[a]),s=c.a.useState(!1),o=Object(l.a)(s,2),i=o[0],u=o[1],m=c.a.useCallback(function(e){console.log("files changed",e),u(!0)},[]),d=c.a.useCallback(function(){var e=Object(b.a)(v.a.mark(function e(t){var a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("files submitted",t),a=t[0]?t[0].id_file_name:null,e.abrupt("return",M({url:"/lessons/".concat(n,"/homeworks/pupil"),method:a?"PUT":"DELETE",data:{file:a}}).then(function(){u(!1)}));case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[t,n,u]);return c.a.createElement("div",{className:"submission"},i&&c.a.createElement(ma,null),c.a.createElement(ua,{maxFiles:1,accept:"image/*,audio/*,video/*",initialFiles:t.files,onChange:m,onSubmit:d,isDisabled:r}))},fa=function(e){var t=e.lesson,a=t.id,n=t.name,r=(t.image_link,t.video_link),s=t.description,o=t.assignment,l=e.homework;return c.a.createElement("div",{className:"col-12 col-lg layout__content-block lesson-page__current-lesson"},c.a.createElement("div",{className:"block-container video-container"},c.a.createElement($t,{video_link:r})),c.a.createElement("div",{className:"block-container description-container"},c.a.createElement("h2",null,n),c.a.createElement("div",{className:"description-text"},s)),o&&c.a.createElement("div",{className:"block-container hw-container"},c.a.createElement("h3",null,"\u0414\u043e\u043c\u0430\u0448\u043d\u0435\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435"),c.a.createElement("div",{className:"assignment"},o.files&&c.a.createElement("div",{className:"assignment__files file-container"},o.files.map(function(e,t){return c.a.createElement(Gt,{file:e,key:t})})),o.description&&c.a.createElement("div",{className:"description-text"},o.description),o.deadline&&c.a.createElement("div",{className:"assignment__deadline"},"\u0414\u0435\u0434\u043b\u0430\u0439\u043d: ",D(o.deadline,D.date))),c.a.createElement(da,{homework:l,deadline:o.deadline,lessonId:a})))},pa=function(e){var t=e.match.params,a=t.courseId,n=t.lessonId,r=e.location,s=parseInt(a),o=parseInt(n),i=De(),u=i.courses,m=(i.error,i.retry,Ie(s)),d=m.lessons,f=(m.error,m.retry,function(e){var t=c.a.useState(null),a=Object(l.a)(t,2),n=a[0],r=a[1],s=c.a.useState(null),o=Object(l.a)(s,2),i=o[0],u=o[1],m=c.a.useCallback(function(){var e=Object(b.a)(v.a.mark(function e(t){var a,n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!we.homework||!we.homework[t]){e.next=2;break}return e.abrupt("return",we.homework[t]);case 2:return a=M.get("/lessons/".concat(t,"/homeworks/pupil")),(we.homework||(we.homework={}))[t]=a,e.prev=4,i&&u(null),e.next=8,a;case 8:n=e.sent,console.log("set homework",n),r(n),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(4),console.error(e.t0),u(e.t0);case 17:return e.prev=17,delete we.homework[t],e.finish(17);case 20:return e.abrupt("return",a);case 21:case"end":return e.stop()}},e,null,[[4,13,17,20]])}));return function(t){return e.apply(this,arguments)}}(),[i]);return c.a.useEffect(function(){n||we.homework&&we.homework[e]||i||m(e)},[n,e,i]),i?{homework:n,error:i,retry:function(){i&&m(e)}}:{homework:n}}(o)),p=f.homework,h=(f.error,f.retry,function(e){var t=e.id,a=e.locked;return c.a.createElement(At,{lesson:e,locked:a,selectable:!a,key:t,link:"../".concat(e.id,"/")})});if(u&&d&&p){var E=O.a.find(u,{id:s}),g=E&&O.a.find(d,{id:o})||null;if(g&&!g.locked){var _=d[g.num];_&&!_.locked||(_=null);var k=O.a.sortBy(d.filter(function(e){return e.id!==g.id&&(!_||e.id!==_.id)}),"num");return c.a.createElement(ze,{title:"".concat(g.title),className:"lesson-page",location:r},c.a.createElement(Te,{parentSection:{name:E.name}},c.a.createElement("div",{className:"layout__content-block"},c.a.createElement("div",{className:"container p-lg-0"},c.a.createElement("div",{className:"row"},c.a.createElement(fa,{lesson:g,homework:p}),c.a.createElement("div",{className:"col-12 col-lg-auto layout__content-block lesson-page__other-lessons"},_&&c.a.createElement("h3",null,"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435 \u0437\u0430\u043d\u044f\u0442\u0438\u0435"),_&&c.a.createElement(Je,{renderItem:h},[_]),k&&k.length>0&&c.a.createElement(c.a.Fragment,null,c.a.createElement("h3",null,"\u0414\u0440\u0443\u0433\u0438\u0435 \u0437\u0430\u043d\u044f\u0442\u0438\u044f"),c.a.createElement(Je,{renderItem:h},k))))))))}return c.a.createElement(ht,{errorCode:404,message:"\u0423\u0440\u043e\u043a \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"})}return c.a.createElement(ze,{location:r},c.a.createElement(Re,null))},va=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(q.a)(this,(e=Object(G.a)(t)).call.apply(e,[this].concat(r)))).state={courses:O.a.sortBy(pe,function(e){return e.status===S.finished?1:0})},a}return Object($.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props.match,t=this.state.courses;return c.a.createElement(u.e,null,c.a.createElement(u.c,{path:"".concat(e.path,"/:courseId/:lessonId"),render:function(e){return c.a.createElement(pa,Object.assign({catalog:t},e))}}),c.a.createElement(u.c,{path:"".concat(e.path,"/:id"),render:function(a){return c.a.createElement(Ht,Object.assign({catalog:t,path:e.path},a))}}),c.a.createElement(u.c,{exact:!0,path:"".concat(e.path),render:function(e){return c.a.createElement(Ut,Object.assign({catalog:t},e))}}))}}]),t}(c.a.Component);a(497);function ba(e){var t=Object(u.h)();c.a.useEffect(function(){return t.listen(e)},[t,e])}var ha=function(e,t){console.log("- - - location: '".concat(e.pathname,"'"),t)};function Ea(){!function(){var e=Object(u.i)(),t=Object(u.h)(),a=e.pathname;"/"!==a.slice(-1)&&t.replace(a+"/")}(),function(){var e=be(Object(u.i)().pathname),t=Object(l.a)(e,2),a=t[0],n=t[1];ba(c.a.useCallback(function(e,t){console.log("update"),a()!==e.pathname&&"POP"!==t&&window.scrollTo(0,0),n(e.pathname)},[a,n]))}(),ba(ha);var e=function(){var e=c.a.useState(!1),t=Object(l.a)(e,2),a=t[0],n=t[1];return[a,c.a.useCallback(function(){n(function(e){return!e})},[])]}(),t=Object(l.a)(e,2),a=t[0],n=t[1],r=Fe(),s=r.user,o=r.userInfo,m=null!==s;return c.a.createElement("div",{className:"app"},c.a.createElement(K,{onMenuButtonClick:n,user:s,sidebar:m}),c.a.createElement(i.a,{in:a,timeout:200,classNames:Ea.layoutAnimationClassNames},c.a.createElement("div",{className:"layout"},c.a.createElement(c.a.Fragment,null,m&&c.a.createElement(X,{accountRoles:s?o?o.roles:void 0:null,onMenuClose:n}),c.a.createElement(u.e,null,c.a.createElement(u.c,{exact:!0,path:"/",render:function(){return c.a.createElement(u.b,{to:"/courses"})}}),c.a.createElement(u.c,{path:"/login",component:Me}),c.a.createElement(u.c,{path:"/courses",component:va}),c.a.createElement(u.c,{path:"/shop",component:Mt}),c.a.createElement(u.c,{path:"/teachers",component:Ot}),c.a.createElement(u.c,{path:"/account",component:He}),c.a.createElement(u.c,{path:"/:section",component:ze}))))))}Ea.layoutAnimationClassNames={enter:"sidebar-opened",enterActive:"sidebar-opened",enterDone:"sidebar-opened",exit:"sidebar-hiding",exitActive:"sidebar-hiding"};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(function(){return c.a.createElement(m.a,{basename:"/web/"},c.a.createElement(Le,null,c.a.createElement(Ea,null)))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},68:function(e,t,a){e.exports=a.p+"static/media/dummy_poster.f51c6af6.jpg"}},[[230,1,2]]]);
//# sourceMappingURL=main.640f5985.chunk.js.map