{"version":3,"sources":["img/logo.svg","img/dummy-pic.jpg","definitions/polyfills.js","definitions/constants.js","definitions/helpers.js","api/index.js","definitions/auth.js","components/common/CoverImage.jsx","components/Header.jsx","components/common/Contacts.jsx","components/SideBar.jsx","hooks/common.js","store/index.js","components/Page.jsx","components/pages/login/LoginPage.jsx","components/common/UserProfile.jsx","components/pages/account/AccountPage.jsx","data/test_data.js","components/common/ListItem.jsx","components/common/List.jsx","components/ui/ScrollBars.jsx","components/ui/Select.jsx","components/ui/Input.jsx","components/common/Catalog.jsx","components/common/Teacher.jsx","components/pages/teachers/catalog-page/TeachersCatalog.jsx","components/pages/teachers/catalog-page/TeachersCatalogPage.jsx","components/ui/Button.jsx","components/ErrorPage.jsx","components/common/CourseCatalog.jsx","components/common/Course.jsx","components/pages/teachers/teacher-page/TeacherPage.jsx","components/pages/teachers/index.jsx","components/pages/shop/catalog-page/SelectedCoursesTab.jsx","components/pages/shop/catalog-page/ShopCatalogPage.jsx","components/common/CourseOverview.jsx","components/pages/shop/course-page/CoursePriceTab.jsx","components/common/VideoCover.jsx","components/common/Lesson.jsx","components/pages/shop/course-page/CoursePage.jsx","components/pages/shop/index.jsx","components/common/WebinarSchedule.jsx","components/pages/courses/catalog-page/CatalogPage.jsx","components/pages/courses/course-page/CoursePage.jsx","components/ui/Tooltip.jsx","components/ui/LoadingIndicator.jsx","components/ui/File.jsx","components/common/VideoPlayer.jsx","components/common/StableCSSTransition.jsx","components/ui/FileInput.jsx","components/common/NavigationBlocker.jsx","components/pages/courses/lesson-page/HomeworkLoader.jsx","components/pages/courses/lesson-page/LessonView.jsx","components/pages/courses/lesson-page/LessonPage.jsx","components/pages/courses/index.jsx","components/App.jsx","serviceWorker.js","index.js","img/dummy_poster.jpg"],"names":["module","exports","__webpack_require__","p","elementClosest","window","CustomEvent","event","params","bubbles","cancelable","detail","undefined","evt","document","createEvent","initCustomEvent","prototype","Event","ACCOUNT_ROLES","LEARNING_STATUS","learning","finished","daysBetween","date1","date2","date1_ms","Date","getYear","getMonth","getDate","getTime","difference_ms","Math","floor","renderDate","date","options","locale","arguments","length","toLocaleString","Object","assign","day","month","shortDate","hour","minute","getFileExtension","filename","filenameParts","split","concat","pop","downloadFile","_ref","asyncToGenerator","regenerator_default","a","mark","_callee","url","name","blob","link","wrap","_context","prev","next","console","log","navigator","msSaveBlob","fetch","then","r","sent","abrupt","createElement","download","href","MouseEvent","dispatchEvent","stop","_x","_x2","apply","this","API_ROOT","CancelToken","axios","getCancelToken","source","token","cancel","APIRequest","create","baseURL","paramsSerializer","searchParams","URLSearchParams","_","forEach","value","key","Array","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","done","element","append","err","return","toString","interceptors","request","use","config","Auth","user","_objectSpread","auth","username","uid","password","hash","Cancel","response","data","URL","pathname","map","id","account_id","objectWithoutProperties","_ref2","date_start","date_end","image_link","teacher_id","rest","teacher_ids","status","group","sortBy","_ref3","hometask","lesson","assignment","deadline","description","files","file_link","downloadName","test","_response$data","file","original_file_name","id_file_name","_ref4","_ref4$webinar","webinar","duration","error","toJSON","LOCAL_STORAGE_KEY","AuthEventTypes","login","logout","initVK","VK","init","apiId","process","_this","classCallCheck","eventHandlers","info","localStorage","setItem","JSON","stringify","handler","t0","finish","removeItem","userInfo","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","storedString","getItem","storedData","parse","first_name","last_name","photo","photo_rec","Error","e","eventType","push","filter","func","get","_context2","elementId","Widgets","onAuth","CoverImage","src","className","children","_ref$square","square","_ref$round","round","react_default","style","backgroundImage","Header","props","onMenuButtonClick","sidebar","onClick","logo","alt","Fragment","common_CoverImage","react_router_dom","to","tabIndex","Contacts","_ref$contacts","contacts","vk","fb","ok","ig","Link","activeClassName","SideBar","target","currentTarget","classList","contains","onMenuClose","isAdmin","isModerator","isPupil","accountRoles","includes","React","Component","useTruncate","text","descriptionRef","useRef","_React$useState","useState","readyState","_React$useState2","slicedToArray","isFontLoaded","setFontLoaded","useEffect","addEventListener","handleResize","removeEventListener","handleLoading","current","onResize","useRefValue","initialValue","ref","useCallback","useUpdateEffect","effect","dependencies","isInitialMount","StoreContext","createContext","useShopCatalogStore","useUserCoursesStore","useSubjectsStore","useTeachersStore","useLessonsStore","useWebinarsStore","requests","useSubjects","_React$useContext","useContext","subjects","setSubjects","setters","_React$useState5","_React$useState6","setError","fetchSubjects","_callee2","_subjects","retry","useDiscount","selectedCourses","_React$useState7","_React$useState8","discount","setDiscount","_React$useState9","_React$useState10","_useRefValue","_useRefValue2","getCancel","setCancel","fetchDiscount","_callee3","courses","cancelPrev","_getCancelToken","cancelToken","_discount","_context3","Set","toConsumableArray","coursesIds","useTeachers","_useSubjects","errorLoadingSubjects","reloadSubjects","_React$useContext2","teachers","setTeachers","_React$useState11","_React$useState12","fetchTeachers","_callee4","_teachers","_context4","useShopCatalog","_useSubjects2","_React$useContext3","catalog","setCatalog","_React$useState13","_React$useState14","fetchCatalog","_callee5","_catalog","_context5","shopCatalog","useUserCourses","_useSubjects3","_React$useContext4","userCourses","setUserCourses","_React$useState15","_React$useState16","fetchUserCourses","_callee6","_context6","useLessons","courseId","_React$useContext5","lessons","setLessons","_React$useState17","_React$useState18","fetchLessons","_ref8","_callee7","_lessons","_context7","loadedLessons","store_objectSpread","defineProperty","GlobalStore","_ref12","_useUserAuth","getUser","setUser","_React$useState3","_React$useState4","setUserInfo","getUserInfo","fetchUserInfo","loginCallback","logoutCallback","useLayoutEffect","subscribe","unsubscribe","useUserAuth","_useUserAuth2","_useShopCatalogStore","_useShopCatalogStore2","_useUserCoursesStore","_useUserCoursesStore2","_useSubjectsStore","_useSubjectsStore2","_useTeachersStore","_useTeachersStore2","_useLessonsStore","_useLessonsStore2","_useWebinarsStore","_useWebinarsStore2","webinars","setWebinars","useStoreData","Provider","useUser","_React$useContext8","PageLoadingPlaceholder","PageLink","_ref$arrow","arrow","_ref$forward","forward","PageContent","parentSection","Page_PageLink","BottomTab","stickyProps","lib_default","mode","Page","title","_ref4$checkLogin","checkLogin","location","_useUser","react_router","state","referrer","Helmet","LoginPage","loginWidget","components_Page","UserProfile","about","role","fullName","AccountPage","Page_PageContent","common_UserProfile","lorem","LoremIpsum","daysForward","setDate","poster","SUBJECTS","TEACHERS","vk_info","photo_max_orig","slice","bio","generateSentences","COURSES","subject","i","subject_id","online","generateParagraphs","SHOP_CATALOG","times","j","locked","num","video_link","watchProgress","course","test_data_objectSpread","price","MY_COURSES","subject_name","course_id","course_name","pic","ListItem","preview","subtitle","item","selectable","action","clickCallback","actionCallback","onActionClick","callbackProps","_useTruncate","_useTruncate2","clicked","closest","preventDefault","content","Truncate","lines","List","renderItem","renderProps","flex","index","defaultProps","renderEmpty","renderTrackVertical","renderThumbVertical","renderTrackHorizontal","renderThumbHorizontal","ScrollBars","forwardRef","_ref$hideVerticalScro","hideVerticalScrollbar","_ref$hideHorizontalSc","hideHorizontalScrollbar","react_custom_scrollbars_lib","DropdownIndicator","react_select_esm","SelectContainer","selectProps","hasValue","setValue","Select_objectSpread","isClearable","Option","label","MenuList","innerRef","scrollBar","view","ui_ScrollBars","autoHeight","hideTracksWhenNotNeeded","autoHeightMax","maxHeight","Select","onChange","option","_this2","callback","_this$props","components","_this$props$isClearab","_this$props$isSearcha","isSearchable","placeholder","maxMenuHeight","find","classNamePrefix","menuPlacement","noOptionsMessage","styles","PureComponent","useChangeHandler","inputProp","Input","CheckBox","type","checked","CatalogContext","common_Catalog","Filter","_ref$filterBy","filterBy","_ref$filterBy$subject","filterBySubject","_ref$filterBy$online","filterByOnline","ui_Input","Catalog","renderFunc","listProps","baseUrl","items","Catalog_objectSpread","Body","filterItems","_props$renderProps","history","useHistory","useLocation","search","parseInt","onFilterChange","set","delete","matchingItems","Teacher","_props$teacher","teacher","_props$teacher$vk_inf","teacherSubjects","_props$bio","toLowerCase","join","catalog_page_TeachersCatalog","renderTeacher","otherProps","useMemo","zipObject","subjectsTeachers","reduce","result","values","getMatchingCourses","some","TeachersCatalogPage","_useTeachers","Page_PageLoadingPlaceholder","Button","_ref$active","active","_ref$neutral","neutral","icon","iconAction","_ref$tag","tag","Tag","ErrorPage","_ref$errorCode","errorCode","message","_ref$link","code","number","ui_Button","replace","common_CourseCatalog","renderCourse","Course","_ref$online","_ref$isSelected","isSelected","startsIn","TeacherPage","param_id","match","root","path","_useShopCatalog","minWidth","_teacher$vk_info","teachersCourses","indexOf","profile","components_ErrorPage","Teachers","render","teacher_page_TeacherPage","exact","catalog_page_TeachersCatalogPage","SelectedCourse","onCourseDeselect","onTruncate","onDeselectClick","renderView","SelectedCoursesTab_objectSpread","height","minHeight","SelectedCoursesTab","discountInfo","fullPrice","sumBy","discounted_price","Page_BottomTab","TransitionGroup","CSSTransition","classNames","timeout","SelectedCoursesTab_SelectedCourse","ShopCatalogPage","onCourseSelect","onCourseClick","_useDiscount","has","purchased","catalog_page_SelectedCoursesTab","CourseOverviewContext","common_CourseOverview","total_hours","renderLesson","CoursePriceTab","_React$useContext$cou","VideoCover","cover","_ref$locked","width","Lesson","common_VideoCover","CoursePage","_useLessons","reloadDiscount","course_page_CoursePriceTab","Shop","setSelectedCourses","add","course_page_CoursePage","catalog_page_ShopCatalogPage","WEBINAR_STATE","Webinar","now","getWebinarState","setState","onWebinarStart","timeTillEnd","setTimeout","clearTimeout","newWindow","open","isAiring","index_es","renderer","remainingTime","_remainingTime$format","formatted","days","hours","minutes","seconds","completed","onComplete","WebinarSchedule","schedule","WebinarSchedule_Webinar","CatalogPage","_useUserCourses","_useUpcomingWebinars","_React$useContext6","_React$useState23","_React$useState24","fetchWebinars","_callee9","_webinars","_context9","upcoming","loadedWebinars","useUpcomingWebinars","common_WebinarSchedule","_useCourseWebinars","_React$useContext7","_React$useState25","_React$useState26","_ref11","_callee10","_webinars2","_context10","_x3","useCourseWebinars","Tooltip","child","Children","only","position","cloneElement","react","LOADING_STATE","PENDING","LOADING","LOADED","SUCCESS","DONE","REJECTED","ERROR","useLoadingState","loading","rejected","LoadingIndicator","errorMessage","SwitchTransition","appear","ui_Tooltip","File","_ref$file","_ref$error","_ref$rejected","_ref$loading","_ref$done","_ref$deletable","deletable","onDelete","onIndicatorClick","downloadCallback","isUpload","LoadingIndicator_LoadingIndicator","VideoPlayer","frameBorder","allow","allowFullScreen","StableCSSTransition","phase","node","getPrototypeOf","call","appliedClasses","ReactDOM","findDOMNode","FILE_STATUS","FileInputContext","allFilesReady","every","f","meta","isFileReady","getUploadParams","headers","Authorization","btoa","getFileProp","getFilesFromEvent","accept","multiple","disabled","onFiles","maxFiles","extra","chosenFiles","isActive","Preview","_props$fileWithMeta","fileWithMeta","remove","restart","xhr","_props$meta","_props$meta$name","_props$meta$percent","percent","canRemove","getResponse","setResponse","responseText","_JSON$parse","deleteCallback","hasError","startsWith","isRejected","isDone","ui_File","SubmitButton","submitting","hasChanged","onSubmit","isDisabled","submitCallback","common_StableCSSTransition","in","mountOnEnter","unmountOnExit","Layout","input","_ref4$previews","previews","submitButton","dropzoneProps","_ref5","_ref5$preloadedFiles","preloadedFiles","deletePreloadedFile","getCallbackFiles","_ref6","FileInput","_props$initialFiles","initialFiles","_props$inputContent","inputContent","_props$maxFiles","_props$maxSizeBytes","maxSizeBytes","_props$isDisabled","setPreloadedFiles","setChanged","setSubmitting","_useRefValue3","_useRefValue4","getInputFiles","setInputFiles","newPreloadedFiles","handleChangeStatus","_ref7","cloneDeep","handleSubmit","filesToSubmit","returnValue","Promise","react_dropzone_uploader_default","submitButtonContent","onChangeStatus","canCancel","SubmitButtonComponent","LayoutComponent","InputComponent","PreviewComponent","NavigationBlocker","unloadCallback","HomeworkLoader","homework","lessonId","isHomeworkSubmissionClosed","hasChanges","setChanges","method","common_NavigationBlocker","ui_FileInput","LessonView","_ref$lesson","video","common_VideoPlayer","lesson_page_HomeworkLoader","LessonPage","_props$match$params","param_course","param_lesson","_useHomework","_React$useState19","_React$useState20","setHomework","_React$useState21","_React$useState22","fetchHomework","_ref9","_callee8","_homework","_context8","useHomework","selectedLesson","nextVideo","otherLessons","lesson_page_LessonView","MyCourses","lesson_page_LessonPage","courses_course_page_CoursePage","catalog_page_CatalogPage","useLocationChangeEffect","listen","onLocationChange","args","DefaultRedirect","App","useForceTrailingSlash","getPrevPath","setPrevPath","scrollTo","useScrollToTop","_useSideBarState","isSideBarOpened","setSideBar","opened","useSideBarState","_useSideBarState2","toggleSideBar","showSidebar","components_Header","layoutAnimationClassNames","SideBar_SideBar","roles","component","Login","Account","enter","enterActive","enterDone","exit","exitActive","Boolean","hostname","basename","store","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.e29c6dbb.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.54b51040.svg\";","module.exports = __webpack_public_path__ + \"static/media/dummy-pic.c0547b67.jpg\";","import 'react-app-polyfill/ie11';\r\nimport 'react-app-polyfill/stable';\r\nimport elementClosest  from 'element-closest';\r\n\r\nelementClosest(window);\r\n\r\n//IE doesn't support event constructor\r\n(function () {\r\n    if ( typeof window.CustomEvent === \"function\" ) return false; //If not IE\r\n\r\n    function CustomEvent ( event, params ) {\r\n        params = params || { bubbles: false, cancelable: false, detail: undefined };\r\n        var evt = document.createEvent( 'CustomEvent' );\r\n        evt.initCustomEvent( event, params.bubbles, params.cancelable, params.detail );\r\n        return evt;\r\n    }\r\n\r\n    CustomEvent.prototype = window.Event.prototype;\r\n\r\n    window.CustomEvent = CustomEvent;\r\n})();\r\n","export const ACCOUNT_ROLES = {\r\n  ADMIN: 'ADMIN',\r\n  MODERATOR: 'MODERATOR',\r\n  TEACHER: 'TEACHER',\r\n  HELPER: 'HELPER',\r\n  PUPIL: 'PUPIL'\r\n};\r\n\r\nexport const LEARNING_STATUS = {\r\n  learning: 'learning',\r\n  finished: 'finished'\r\n};\r\n\r\nexport const DEFAULT_LOGIN_REDIRECT = '/shop/';\r\n","export const daysBetween = (date1, date2) => {\r\n    const one_day = 1000 * 60 * 60 * 24;\r\n    const date1_ms = new Date(date1.getYear(), date1.getMonth(), date1.getDate()).getTime();\r\n    const date2_ms = new Date(date2.getYear(), date2.getMonth(), date2.getDate()).getTime();\r\n    const difference_ms = date2_ms - date1_ms;\r\n    return Math.floor(difference_ms / one_day);\r\n};\r\n\r\nexport const renderDate = (date, options, locale='ru') => date.toLocaleString(locale, options);\r\nObject.assign(renderDate, {\r\n    date: {\r\n        day: 'numeric',\r\n        month: 'long'\r\n    },\r\n    shortDate: {\r\n        day: 'numeric',\r\n        month: 'numeric'\r\n    },\r\n    hour: {\r\n        hour: 'numeric',\r\n        minute: 'numeric'\r\n    }\r\n});\r\n\r\nexport const getAuthHeader = (username, password) => ({'Authorization': `Basic ${btoa(username + \":\" + password)}`});\r\n\r\nexport const trimFileExtension = (filename) => filename.replace(/\\.[^/.]+$/, \"\");\r\n\r\nexport const getFileExtension = (filename) => {\r\n    const filenameParts = filename.split('.');\r\n    if (filenameParts.length < 2)\r\n        return '';\r\n    return `.${filenameParts.pop()}`;\r\n};\r\n\r\nexport const downloadFile = async (url, name) => {\r\n    console.log(url, name);\r\n    // IE10+ : (has Blob, but not a[download] or URL)\r\n    if (navigator.msSaveBlob) {\r\n        let blob = await fetch(url).then(r => r.blob());\r\n        return navigator.msSaveBlob(blob, name);\r\n    }\r\n    else {\r\n        let link = document.createElement('a');\r\n        link.download = name;\r\n        link.href = url;\r\n        // link.target = '_blank';\r\n        let event = new MouseEvent('click');\r\n        link.dispatchEvent(event);\r\n    }\r\n};\r\n","import Auth from 'definitions/auth';\r\nimport _ from 'lodash';\r\nimport axios from 'axios';\r\n// import {handleRequstsWithTestData} from \"./test\";\r\nimport {LEARNING_STATUS} from \"definitions/constants\";\r\nimport {getFileExtension} from \"definitions/helpers\";\r\n\r\nexport const API_ROOT = 'https://egehackbottest.tk';\r\n\r\nconst CancelToken = axios.CancelToken;\r\n\r\nexport const getCancelToken = () => {\r\n    const source = CancelToken.source();\r\n    return {\r\n        token: source.token,\r\n        cancel: source.cancel\r\n    }\r\n};\r\n\r\nconst APIRequest = axios.create({\r\n    baseURL: API_ROOT,\r\n    paramsSerializer: (params) => {\r\n        const searchParams = new URLSearchParams();\r\n        _.forEach(params, (value, key) => {\r\n            if (value instanceof Array) {\r\n                for(let element of value)\r\n                    searchParams.append(key, element);\r\n            } else {\r\n                searchParams.append(key, value);\r\n            }\r\n        });\r\n        return searchParams.toString();\r\n    }\r\n});\r\n\r\nAPIRequest.interceptors.request.use(function (config) {\r\n    if (Auth.user) {\r\n        return {\r\n            auth: {\r\n                username: Auth.user.uid,\r\n                password: Auth.user.hash\r\n            },\r\n            ...config\r\n        }\r\n    }\r\n    else\r\n        throw new axios.Cancel('User not logged in.');\r\n});\r\n\r\n//Interceptors\r\nconst transformData = (response) => {\r\n    const {config, data} = response;\r\n    const url = new URL(config.url);\r\n    switch (true) {\r\n        case url.pathname === '/accounts/teachers':\r\n            return data.map(({account_id: id, ...teacher}) => ({id, ...teacher}));\r\n        case url.pathname === '/courses':\r\n            return data.map(({date_start, date_end, image_link, teacher_id, ...rest}) => ({\r\n                date_start: new Date(date_start),\r\n                date_end: new Date(date_end),\r\n                image_link: `${API_ROOT}${image_link}`,\r\n                teacher_ids: [teacher_id],\r\n                status: config.params.group === 'PERSON' ? LEARNING_STATUS.learning : undefined,\r\n                ...rest\r\n            }));\r\n        case url.pathname === '/lessons':\r\n            return _.sortBy(data, 'num').map(({hometask, ...lesson}) => ({\r\n                ...lesson,\r\n                image_link: `${API_ROOT}${lesson.image_link}`,\r\n                assignment: hometask ? ({\r\n                    deadline: hometask.deadline ? new Date(hometask.deadline) : hometask.deadline,\r\n                    description: hometask.description,\r\n                    files: hometask.file_link ? [\r\n                        {\r\n                            name: \"Задание\",\r\n                            downloadName: `Задание${getFileExtension(hometask.file_link)}`,\r\n                            url: `${API_ROOT}${hometask.file_link}?disp=attachment`},\r\n                    ] : hometask.file_link,\r\n                }) : hometask\r\n            }));\r\n        case /\\/lessons\\/(.*)\\/homeworks\\/pupil$/.test(url.pathname):\r\n            const {file_link:file, date:dateTime, ...rest} = response.data;\r\n            const date = new Date();\r\n            return {\r\n                ...rest,\r\n                date,\r\n                files: [\r\n                    {\r\n                        original_file_name: `Загруженное_решение${getFileExtension(file)}`,\r\n                        id_file_name: file,\r\n                        file_link: `${API_ROOT}/files/${file}?disp=attachment`\r\n                    }\r\n                ]\r\n            };\r\n        case url.pathname === '/courses/schedule/person':\r\n        case /\\/courses\\/(.*)\\/schedule\\/person$/.test(url.pathname):\r\n            return _.sortBy(data.map(({webinar: {date_start, duration, ...webinar}, image_link, ...rest}) => ({\r\n                date_start: new Date(date_start),\r\n                date_end: new Date(date_start + duration * 1000 * 60),\r\n                duration,\r\n                image_link: `${API_ROOT}${image_link}`,\r\n                ...webinar,\r\n                ...rest\r\n            })), 'date_start');\r\n        default:\r\n            return response.data;\r\n    }\r\n};\r\nconst transformError = (error) => {\r\n    if (!error.toJSON)\r\n        throw error;\r\n    const {config} = error.toJSON();\r\n    const url = new URL(config.url);\r\n    if (error.response && error.response.status === 404) {\r\n        switch (true) {\r\n            case /\\/lessons\\/(.*)\\/homeworks\\/pupil$/.test(url.pathname):\r\n                return ({data: {}});\r\n            default:\r\n                throw error;\r\n        }\r\n    }\r\n    else\r\n        throw error;\r\n};\r\nAPIRequest.interceptors.response.use(transformData, transformError);\r\n\r\n//returns test data for all failed requests\r\n// handleRequstsWithTestData(APIRequest);\r\n\r\nwindow.APIRequest = APIRequest;\r\n\r\nexport default APIRequest;\r\n","/*global VK*/\r\nimport APIRequest from \"api\";\r\n\r\nconst LOCAL_STORAGE_KEY = 'ege-hack-user-data';\r\n\r\nexport const AuthEventTypes = {\r\n    login: 'auth.login',\r\n    logout: 'auth.logout'\r\n};\r\n\r\nconst initVK = true;\r\n\r\nVK.init({apiId: process.env.REACT_APP_VK_APP_ID}, true);\r\n\r\nclass Auth {\r\n    user = null;\r\n\r\n    constructor() {\r\n        try {\r\n            const storedString = localStorage.getItem(LOCAL_STORAGE_KEY);\r\n            if (!storedString) {\r\n                this.user = null;\r\n                return;\r\n            }\r\n            const storedData = JSON.parse(storedString);\r\n            const {uid, first_name, last_name, photo, photo_rec, hash} = storedData;\r\n            if (!(uid && hash))\r\n                throw new Error(`Incomplete data parsed from local storage: ${storedString}`);\r\n            this.user = {uid, first_name, last_name, photo, photo_rec, hash};\r\n        }\r\n        catch (e) {\r\n            console.error('User data can not be recovered', e);\r\n            localStorage.removeItem(LOCAL_STORAGE_KEY);\r\n            this.user = null;\r\n        }\r\n    }\r\n\r\n    eventHandlers = {};\r\n\r\n    login = async (user) => {\r\n        if (!VK)\r\n            return;\r\n        if (!initVK)\r\n            VK.init({apiId: process.env.REACT_APP_VK_APP_ID}, true);\r\n        // user = {\r\n        //     ...user,\r\n        //     uid: 1,\r\n        //     hash: '68ab57e7e70fae3f8f96afc0d85465a9'\r\n        // };\r\n        console.info('Login', user);\r\n        localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(user));\r\n        this.user = user;\r\n        // await this.getUserInfo();\r\n        // if (!this.userInfo)\r\n        //     return;\r\n        for(let handler of (this.eventHandlers[AuthEventTypes.login] || []))\r\n            handler(this.user);\r\n    };\r\n\r\n    logout = () => {\r\n        // VK.Auth.logout((data) => {\r\n            console.info('Logout');\r\n            localStorage.removeItem(LOCAL_STORAGE_KEY);\r\n            this.user = null;\r\n            this.userInfo = null;\r\n            for(let handler of (this.eventHandlers[AuthEventTypes.logout] || []))\r\n                handler();\r\n        // });\r\n    };\r\n\r\n    subscribe(eventType, handler) {\r\n        (this.eventHandlers[eventType] || (this.eventHandlers[eventType] = [])).push(handler);\r\n    }\r\n\r\n    unsubscribe(eventType, handler) {\r\n        this.eventHandlers[eventType] = this.eventHandlers[eventType].filter(func => func !== handler);\r\n    }\r\n\r\n    // subscribe(eventType, handler) {\r\n    //     VK.Observer.subscribe(eventType, handler);\r\n    // }\r\n    //\r\n    // unsubscribe(eventType, handler) {\r\n    //     VK.Observer.unsubscribe(eventType, handler);\r\n    // }\r\n\r\n    getUser() {\r\n        return this.user;\r\n    }\r\n\r\n    async getUserInfo() {\r\n        if (this.userInfo)\r\n            return this.userInfo;\r\n        try {\r\n            this.userInfo = await APIRequest.get('/accounts/info');\r\n        }\r\n        catch (e) {\r\n            console.error(e);\r\n            this.userInfo = null;\r\n        }\r\n        return this.userInfo;\r\n    }\r\n\r\n    loginWidget(elementId) {\r\n        if (!VK)\r\n            return;\r\n        if (!initVK)\r\n            VK.init({apiId: process.env.REACT_APP_VK_APP_ID});\r\n        VK.Widgets.Auth(elementId, {onAuth: this.login});\r\n    }\r\n}\r\n\r\nexport default new Auth();\r\n","import React from 'react';\r\n\r\nconst CoverImage = ({src, className, children, square=false, round=false}) => {\r\n    return (\r\n        <div className={`${className || ''} cover ${square ? 'square-cover' : ''} ${round ? 'round-cover' : ''}`}>\r\n            <div className=\"cover-img\" style={{backgroundImage: `url(${src})`}}/>\r\n            {children}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CoverImage;\r\n","import React from 'react';\r\nimport logo from 'img/logo.svg';\r\nimport Auth from 'definitions/auth';\r\nimport {Link} from 'react-router-dom';\r\nimport CoverImage from \"./common/CoverImage\";\r\n\r\nconst Header = (props) => {\r\n    const {onMenuButtonClick, user, sidebar} = props;\r\n    return (\r\n        <header>\r\n            <div className=\"container-fluid header__container\">\r\n                <div className=\"row\">\r\n                    {sidebar && (\r\n                        <div className=\"col-auto d-lg-none\">\r\n                            <div className=\"nav-btn\" onClick={onMenuButtonClick}>\r\n                                <i className=\"icon-bars\"/>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                    <div className=\"col d-flex justify-content-center justify-content-lg-start p-0\">\r\n                        <div className=\"logo-container container d-flex align-items-center justify-content-center m-0\">\r\n                            <img src={logo} className=\"logo\" alt=\"Logo\"/>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"col-auto d-flex\">\r\n                        <div className=\"user-nav\">\r\n                            {user ? (\r\n                                <React.Fragment>\r\n                                    <div className=\"user-nav__user-name\">{user.first_name} {user.last_name}</div>\r\n                                    {user.photo_rec ? (\r\n                                        <div className=\"nav-btn\">\r\n                                            <CoverImage src={user.photo_rec} round square/>\r\n                                        </div>\r\n                                    ) : (\r\n                                        <div className=\"nav-btn\">\r\n                                            <i className=\"icon-profile\"/>\r\n                                        </div>\r\n                                    )}\r\n                                    <div className=\"user-nav__menu-container\">\r\n                                        <div className=\"user-nav__menu\">\r\n                                            <div className=\"user-nav__menu-options\">\r\n                                                <Link to=\"/account/\" className=\"menu-option\">\r\n                                                    <i className=\"icon-profile\"/>Аккаунт\r\n                                                </Link>\r\n                                                <Link to=\"/account/settings/\" className=\"menu-option\">\r\n                                                    <i className=\"icon-settings\"/>Настройки\r\n                                                </Link>\r\n                                                <div\r\n                                                    className=\"menu-option\"\r\n                                                    tabIndex={2}\r\n                                                    onClick={Auth.logout}>\r\n                                                    <i className=\"icon-logout\"/>Выход\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </React.Fragment>\r\n                            ) : (\r\n                                <React.Fragment>\r\n                                    <div className=\"nav-btn\">\r\n                                        <i className=\"icon-profile\"/>\r\n                                    </div>\r\n                                    <div className=\"user-nav__menu-container\">\r\n                                        <div className=\"user-nav__menu\">\r\n                                            <div className=\"user-nav__menu-options\">\r\n                                                <Link to=\"/login/\" className=\"menu-option\">\r\n                                                    <i className=\"icon-login\"/>Войти\r\n                                                </Link>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </React.Fragment>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </header>\r\n    );\r\n};\r\n\r\nexport default Header;\r\n","import React from 'react';\r\n\r\nexport default function Contacts({contacts: {vk, fb, ok, ig}}) {\r\n    return (\r\n        <div className=\"social-media font-light-grey\">\r\n            {vk && <a href={vk} className=\"social-media__link\"><i className=\"fab fa-vk vk\"/></a>}\r\n            {fb && <a href={fb} className=\"social-media__link\"><i className=\"fab fa-facebook-f fb\"/></a>}\r\n            {ok && <a href={ok} className=\"social-media__link\"><i className=\"fab fa-odnoklassniki ok\"/></a>}\r\n            {ig && <a href={ig} className=\"social-media__link\"><i className=\"fab fa-instagram ig\"/></a>}\r\n        </div>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport _ from 'lodash';\r\nimport { NavLink } from \"react-router-dom\";\r\nimport Contacts from \"./common/Contacts\";\r\nimport {ACCOUNT_ROLES} from \"definitions/constants\";\r\n\r\nfunction Link(props) {\r\n    return <NavLink className=\"layout__sidebar-menu-link\" activeClassName=\"active\" {...props}/>;\r\n}\r\n\r\nexport default class SideBar extends React.Component{\r\n    onClick = (event) => {\r\n        if (event.target === event.currentTarget || event.target.classList.contains('layout__sidebar-menu-link'))\r\n            this.props.onMenuClose();\r\n    };\r\n\r\n    render() {\r\n        const {accountRoles} = this.props;\r\n        let isAdmin, isModerator, isTeacher, isPupil;\r\n        if (accountRoles === undefined) {\r\n            isAdmin = undefined; isModerator = undefined; isTeacher = undefined; isPupil = undefined;\r\n        }\r\n        else if (accountRoles === null) {\r\n            isAdmin = null; isModerator = null; isTeacher = null; isPupil = null;\r\n        }\r\n        if (accountRoles) {\r\n            isAdmin = _.includes(accountRoles, ACCOUNT_ROLES.ADMIN);\r\n            isModerator = _.includes(accountRoles, ACCOUNT_ROLES.MODERATOR);\r\n            isTeacher = _.includes(accountRoles, ACCOUNT_ROLES.TEACHER);\r\n            isPupil = _.includes(accountRoles, ACCOUNT_ROLES.PUPIL);\r\n        }\r\n        if (accountRoles === null)\r\n            return null;\r\n        return (\r\n            <div className=\"layout__sidebar\" onClick={this.onClick}>\r\n                <div className=\"layout__sidebar-bar\">\r\n                    {accountRoles === undefined ? (\r\n                        <div className=\"layout__sidebar-content\">\r\n                            <div className=\"layout__sidebar-menu ph-item\">\r\n                                <div className=\"layout__sidebar-menu-section\">\r\n                                    <div className=\"layout__sidebar-menu-link\"><div className=\"ph-text\"/></div>\r\n                                    <div className=\"layout__sidebar-menu-link\"><div className=\"ph-text\"/></div>\r\n                                    <div className=\"layout__sidebar-menu-link\"><div className=\"ph-text\"/></div>\r\n                                    <div className=\"layout__sidebar-menu-link\"><div className=\"ph-text\"/></div>\r\n                                    <div className=\"layout__sidebar-menu-link\"><div className=\"ph-text\"/></div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"layout__sidebar-content\">\r\n                            <div className=\"layout__sidebar-menu\">\r\n                                {isPupil && (\r\n                                    <div className=\"layout__sidebar-menu-section\">\r\n                                        <Link to=\"/courses/\">Мои курсы</Link>\r\n                                        {/*<Link to=\"/homework/\">Домашняя работа</Link>*/}\r\n                                    </div>\r\n                                )}\r\n                                <div className=\"layout__sidebar-menu-section\">\r\n                                    <Link to=\"/shop/\">Магазин курсов</Link>\r\n                                    <Link to=\"/teachers/\">Преподаватели</Link>\r\n                                    {/*<Link to=\"/about/\">О нас</Link>*/}\r\n                                </div>\r\n                                {(isAdmin || isModerator) && (\r\n                                    <React.Fragment>\r\n                                        <div className=\"layout__sidebar-menu-section\">\r\n                                            <Link to=\"/courses/\">Мои курсы</Link>\r\n                                            <Link to=\"/homework/\">Домашняя работа</Link>\r\n                                        </div>\r\n                                        <div className=\"layout__sidebar-menu-section\">\r\n                                            <Link to=\"/shop/\">Магазин курсов</Link>\r\n                                            <Link to=\"/teachers/\">Преподаватели</Link>\r\n                                            <Link to=\"/about/\">О нас</Link>\r\n                                        </div>\r\n                                    </React.Fragment>\r\n                                )}\r\n                            </div>\r\n                            <Contacts contacts={{vk: '/', fb: '/', ig: '/'}}/>\r\n                            <div className=\"layout__sidebar-copyright font-size-sm font-light-grey\">\r\n                                Все права защищены<br/>\r\n                                \"ЕГЭHACK\"\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React from 'react';\r\n\r\nexport function useTruncate(text) {\r\n    const descriptionRef = React.useRef(null);\r\n    const [isFontLoaded, setFontLoaded] = React.useState(document.readyState === \"complete\");\r\n    React.useEffect(() => {\r\n        if (!text)\r\n            return;\r\n        function handleResize() {\r\n            if (descriptionRef.current) {\r\n                descriptionRef.current.onResize();\r\n            }\r\n        }\r\n        window.addEventListener('resize', handleResize);\r\n        if (isFontLoaded)\r\n            return () => {\r\n                window.removeEventListener('resize', handleResize);\r\n            };\r\n        if (document.readyState === \"complete\") {\r\n            setFontLoaded(true);\r\n            return () => {\r\n                window.removeEventListener('resize', handleResize);\r\n            };\r\n        }\r\n        else {\r\n            function handleLoading() {\r\n                setFontLoaded(true);\r\n            }\r\n            window.addEventListener('load', handleLoading);\r\n            return () => {\r\n                window.removeEventListener('load', handleLoading);\r\n            };\r\n        }\r\n    }, [isFontLoaded, text]);\r\n    return [descriptionRef, isFontLoaded];\r\n}\r\n\r\nexport function useRefValue(initialValue) {\r\n    const ref = React.useRef(initialValue);\r\n    const getValue = React.useCallback(() => ref.current, []);\r\n    const setValue = React.useCallback((value) => {\r\n        ref.current = value;\r\n    }, []);\r\n    return [getValue, setValue];\r\n}\r\n\r\nexport function useIsMounted() {\r\n    const [getIsMounted, setIsMounted] = useRefValue(false);\r\n\r\n    React.useLayoutEffect(() => {\r\n        console.log('mounting');\r\n        setIsMounted(true);\r\n        return () => {\r\n            console.log('unmounting');\r\n            setIsMounted(false);\r\n        };\r\n    }, []);\r\n\r\n    return getIsMounted;\r\n}\r\n\r\nexport function useUpdateEffect(effect, dependencies = []) {\r\n    const isInitialMount = React.useRef(true);\r\n\r\n    React.useEffect(() => {\r\n        if (!isInitialMount.current) {\r\n            effect();\r\n        }\r\n    }, dependencies); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n    React.useEffect(() => {\r\n        isInitialMount.current = false;\r\n    }, []);\r\n}\r\n\r\nexport function useForceUpdate() {\r\n    const [, update] = React.useReducer(state => !state, true);\r\n    return update;\r\n}\r\n","import React from \"react\";\r\nimport Auth, {AuthEventTypes} from \"definitions/auth\";\r\nimport APIRequest, {getCancelToken} from \"api\";\r\nimport {useRefValue} from \"hooks/common\";\r\n\r\nconst StoreContext = React.createContext(null);\r\n\r\nfunction useUserAuth() {\r\n    const [user, setUser] = React.useState(Auth.getUser());\r\n    const [userInfo, setUserInfo] = React.useState(null);\r\n\r\n    React.useEffect(() => {\r\n        const fetchUserInfo = async () => {\r\n            const userInfo = await Auth.getUserInfo();\r\n            setUserInfo(userInfo);\r\n        };\r\n        if (user)\r\n            fetchUserInfo();\r\n    }, [user]);\r\n\r\n    const loginCallback = React.useCallback((user, userInfo) => {\r\n        setUser(user);\r\n    }, []);\r\n\r\n    const logoutCallback = React.useCallback(() => {\r\n        setUser(null);\r\n        setUserInfo(null);\r\n    }, []);\r\n\r\n    React.useLayoutEffect(() => {\r\n        Auth.subscribe(AuthEventTypes.login, loginCallback);\r\n        Auth.subscribe(AuthEventTypes.logout, logoutCallback);\r\n        return () => {\r\n            Auth.unsubscribe(AuthEventTypes.login, loginCallback);\r\n            Auth.unsubscribe(AuthEventTypes.logout, logoutCallback);\r\n        }\r\n    }, [loginCallback, logoutCallback]);\r\n    return [user, userInfo];\r\n}\r\n\r\nconst useShopCatalogStore = () => React.useState(null);\r\nconst useUserCoursesStore = () => React.useState(null);\r\nconst useSubjectsStore = () => React.useState(null);\r\nconst useTeachersStore = () => React.useState(null);\r\nconst useLessonsStore = () => React.useState({});\r\nconst useWebinarsStore = () => React.useState({});\r\n\r\nfunction useStoreData() {\r\n    const [catalog, setCatalog] = useShopCatalogStore();\r\n    const [userCourses, setUserCourses] = useUserCoursesStore();\r\n    const [subjects, setSubjects] = useSubjectsStore();\r\n    const [teachers, setTeachers] = useTeachersStore();\r\n    const [lessons, setLessons] = useLessonsStore();\r\n    const [webinars, setWebinars] = useWebinarsStore();\r\n    return {\r\n        data: {\r\n            catalog,\r\n            subjects,\r\n            teachers,\r\n            lessons,\r\n            userCourses,\r\n            webinars\r\n        },\r\n        setters: {\r\n            setCatalog,\r\n            setSubjects,\r\n            setTeachers,\r\n            setLessons,\r\n            setUserCourses,\r\n            setWebinars\r\n        }\r\n    }\r\n}\r\n\r\nconst requests = {};\r\n\r\nexport function useSubjects() {\r\n    const {data: {subjects}, setters: {setSubjects}} = React.useContext(StoreContext);\r\n    const [error, setError] = React.useState(null);\r\n    const fetchSubjects = React.useCallback(async () => {\r\n        if (requests.subjects)\r\n            return requests.subjects;\r\n        const request = APIRequest.get('/subjects');\r\n        requests.subjects = request;\r\n        try {\r\n            if (error)\r\n                setError(null);\r\n            const subjects = await request;\r\n            setSubjects(subjects);\r\n        } catch (e) {\r\n            console.error(e);\r\n            setError(e);\r\n        }\r\n        finally {\r\n            delete requests.subjects;\r\n        }\r\n        return request;\r\n    }, [error]);\r\n\r\n    React.useEffect(() => {\r\n        if (!(subjects || requests.subjects || error)) {\r\n            fetchSubjects();\r\n        }\r\n    }, [subjects, error]);\r\n    if (error) {\r\n        return {subjects, error, retry: fetchSubjects};\r\n    }\r\n    else {\r\n        return {subjects};\r\n    }\r\n}\r\n\r\nexport function useDiscount(selectedCourses) {\r\n    const [discount, setDiscount] = React.useState(null);\r\n    const [error, setError] = React.useState(null);\r\n    const [getCancel, setCancel] = useRefValue(null);\r\n    const fetchDiscount = React.useCallback(async () => {\r\n        const courses = selectedCourses instanceof Set ? [...selectedCourses].map(({id}) => id) : [selectedCourses];\r\n        if (courses.length === 0)\r\n            return ;\r\n        const cancelPrev = getCancel();\r\n        if (cancelPrev)\r\n            cancelPrev();\r\n        const {token: cancelToken, cancel} = getCancelToken();\r\n        setCancel(cancel);\r\n        try {\r\n            if (error)\r\n                setError(null);\r\n            setDiscount(null);\r\n            const discount = await APIRequest.get('/payments/discounts', {\r\n                params: {\r\n                    coursesIds: courses\r\n                },\r\n                cancelToken\r\n            });\r\n            setDiscount(discount);\r\n        } catch (e) {\r\n            console.log('error loading discount', e);\r\n            setError(e);\r\n        }\r\n    }, [selectedCourses, error]);\r\n\r\n    React.useEffect(() => {\r\n        if (!(error))\r\n            fetchDiscount();\r\n    }, [selectedCourses, error]);\r\n    if (error) {\r\n        return {discount, error, retry: fetchDiscount};\r\n    }\r\n    else {\r\n        return {discount};\r\n    }\r\n}\r\n\r\nexport function useTeachers() {\r\n    const {subjects, errorLoadingSubjects, reloadSubjects} = useSubjects();\r\n    const {data: {teachers}, setters: {setTeachers}} = React.useContext(StoreContext);\r\n    const [error, setError] = React.useState(null);\r\n    const fetchTeachers = React.useCallback(async () => {\r\n        if (requests.teachers)\r\n            return requests.teachers;\r\n        const request = APIRequest.get('/accounts/teachers');\r\n        requests.teachers = request;\r\n        try {\r\n            if (error)\r\n                setError(null);\r\n            const teachers = await request;\r\n            console.log('set teachers', teachers);\r\n            setTeachers(teachers);\r\n        } catch (e) {\r\n            console.error(e);\r\n            setError(e);\r\n        }\r\n        finally {\r\n            delete requests.teachers;\r\n        }\r\n        return request;\r\n    }, [error]);\r\n\r\n    React.useEffect(() => {\r\n        if (!(teachers || requests.teachers || error)) {\r\n            fetchTeachers();\r\n        }\r\n    }, [teachers, error]);\r\n\r\n    if (error || errorLoadingSubjects) {\r\n        return {\r\n            teachers,\r\n            subjects,\r\n            error: error || errorLoadingSubjects ,\r\n            retry: () => {\r\n                if (error)\r\n                    fetchTeachers();\r\n                if (errorLoadingSubjects)\r\n                    reloadSubjects();\r\n            }\r\n        };\r\n    }\r\n    else {\r\n        return {teachers, subjects};\r\n    }\r\n}\r\n\r\nexport function useShopCatalog() {\r\n    const {subjects, errorLoadingSubjects, reloadSubjects} = useSubjects();\r\n    const {data: {catalog}, setters: {setCatalog}} = React.useContext(StoreContext);\r\n    const [error, setError] = React.useState(null);\r\n    const fetchCatalog = React.useCallback(async () => {\r\n        if (requests.shopCatalog)\r\n            return requests.shopCatalog;\r\n        const request = APIRequest.get('/courses', {\r\n            params: {\r\n                group: 'MARKET'\r\n            }\r\n        });\r\n        requests.shopCatalog = request;\r\n        try {\r\n            if (error)\r\n                setError(null);\r\n            const catalog = await request;\r\n            setCatalog(catalog);\r\n        } catch (e) {\r\n            console.error(e);\r\n            setError(e);\r\n        }\r\n        finally {\r\n            delete requests.shopCatalog;\r\n        }\r\n        return request;\r\n    }, [error]);\r\n\r\n    React.useEffect(() => {\r\n        if (!(catalog || requests.shopCatalog || error)) {\r\n            fetchCatalog();\r\n        }\r\n    }, [catalog, error]);\r\n\r\n    if (error || errorLoadingSubjects) {\r\n        return {\r\n            catalog,\r\n            subjects,\r\n            error: error || errorLoadingSubjects ,\r\n            retry: () => {\r\n                if (error)\r\n                    fetchCatalog();\r\n                if (errorLoadingSubjects)\r\n                    reloadSubjects();\r\n            }\r\n        };\r\n    }\r\n    else {\r\n        return {catalog, subjects};\r\n    }\r\n}\r\n\r\nexport function useUserCourses() {\r\n    const {subjects, errorLoadingSubjects, reloadSubjects} = useSubjects();\r\n    const {data: {userCourses}, setters: {setUserCourses}} = React.useContext(StoreContext);\r\n    const [error, setError] = React.useState(null);\r\n    const fetchUserCourses = React.useCallback(async () => {\r\n        if (requests.userCourses)\r\n            return requests.userCourses;\r\n        const request = APIRequest.get('/courses', {\r\n            params: {\r\n                group: 'PERSON'\r\n            }\r\n        });\r\n        requests.userCourses = request;\r\n        try {\r\n            if (error)\r\n                setError(null);\r\n            const courses = await request;\r\n            setUserCourses(courses);\r\n        } catch (e) {\r\n            console.error(e);\r\n            setError(e);\r\n        }\r\n        finally {\r\n            delete requests.userCourses;\r\n        }\r\n        return request;\r\n    }, [error]);\r\n\r\n    React.useEffect(() => {\r\n        if (!(userCourses || requests.userCourses || error)) {\r\n            fetchUserCourses();\r\n        }\r\n    }, [userCourses, error]);\r\n\r\n    if (error || errorLoadingSubjects) {\r\n        return {\r\n            courses: userCourses,\r\n            subjects,\r\n            error: error || errorLoadingSubjects ,\r\n            retry: () => {\r\n                if (error)\r\n                    fetchUserCourses();\r\n                if (errorLoadingSubjects)\r\n                    reloadSubjects();\r\n            }\r\n        };\r\n    }\r\n    else {\r\n        return {courses: userCourses, subjects};\r\n    }\r\n}\r\n\r\nexport function useLessons(courseId) {\r\n    const {data: {lessons}, setters: {setLessons}} = React.useContext(StoreContext);\r\n    const [error, setError] = React.useState(null);\r\n    const fetchLessons = React.useCallback(async (courseId) => {\r\n        if (requests.lessons && requests.lessons[courseId])\r\n            return requests.lessons[courseId];\r\n        const request = APIRequest.get('/lessons', {params: {\r\n                courseId\r\n            }});\r\n        (requests.lessons || (requests.lessons = {}))[courseId] = request;\r\n        try {\r\n            if (error)\r\n                setError(null);\r\n            const lessons = await request;\r\n            console.log('set lessons', lessons);\r\n            setLessons(loadedLessons => ({...loadedLessons, [courseId]: lessons}));\r\n        } catch (e) {\r\n            console.error(e);\r\n            setError(e);\r\n        }\r\n        finally {\r\n            delete requests.lessons[courseId];\r\n        }\r\n        return request;\r\n    }, [error]);\r\n\r\n    React.useEffect(() => {\r\n        if (!(lessons[courseId] || (requests.lessons && requests.lessons[courseId]) || error)) {\r\n            fetchLessons(courseId);\r\n        }\r\n    }, [lessons, courseId, error]);\r\n\r\n    if (error) {\r\n        return {\r\n            lessons: lessons[courseId],\r\n            error: error,\r\n            retry: () => {\r\n                if (error)\r\n                    fetchLessons(courseId);\r\n            }\r\n        };\r\n    }\r\n    else {\r\n        return {lessons: lessons[courseId]};\r\n    }\r\n}\r\n\r\nexport function useHomework(lessonId) {\r\n    const [homework, setHomework] = React.useState(null);\r\n    const [error, setError] = React.useState(null);\r\n    const fetchHomework = React.useCallback(async (lessonId) => {\r\n        if (requests.homework && requests.homework[lessonId])\r\n            return requests.homework[lessonId];\r\n        const request = APIRequest.get(`/lessons/${lessonId}/homeworks/pupil`);\r\n        (requests.homework || (requests.homework = {}))[lessonId] = request;\r\n        try {\r\n            if (error)\r\n                setError(null);\r\n            const homework = await request;\r\n            console.log('set homework', homework);\r\n            setHomework(homework);\r\n        } catch (e) {\r\n            console.error(e);\r\n            setError(e);\r\n        }\r\n        finally {\r\n            delete requests.homework[lessonId];\r\n        }\r\n        return request;\r\n    }, [error]);\r\n\r\n    React.useEffect(() => {\r\n        if (!(homework || (requests.homework && requests.homework[lessonId]) || error)) {\r\n            fetchHomework(lessonId);\r\n        }\r\n    }, [homework, lessonId, error]);\r\n\r\n    if (error) {\r\n        return {\r\n            homework,\r\n            error: error,\r\n            retry: () => {\r\n                if (error)\r\n                    fetchHomework(lessonId);\r\n            }\r\n        };\r\n    }\r\n    else {\r\n        return {homework};\r\n    }\r\n}\r\n\r\nexport function useUpcomingWebinars() {\r\n    const {data: {webinars}, setters: {setWebinars}} = React.useContext(StoreContext);\r\n    const [error, setError] = React.useState(null);\r\n    const fetchWebinars = React.useCallback(async () => {\r\n        if (requests.webinars && requests.webinars.upcoming)\r\n            return requests.webinars.upcoming;\r\n        const request = APIRequest.get('/courses/schedule/person');\r\n        (requests.webinars || (requests.webinars = {})).upcoming = request;\r\n        try {\r\n            if (error)\r\n                setError(null);\r\n            const webinars = await request;\r\n            console.log('set webinars', webinars);\r\n            setWebinars(loadedWebinars => ({...loadedWebinars, upcoming: webinars}));\r\n        } catch (e) {\r\n            console.error(e);\r\n            setError(e);\r\n        }\r\n        finally {\r\n            delete requests.webinars.upcoming;\r\n        }\r\n        return request;\r\n    }, [error]);\r\n\r\n    React.useEffect(() => {\r\n        if (!(webinars.upcoming || (requests.webinars && requests.webinars.upcoming) || error)) {\r\n            fetchWebinars();\r\n        }\r\n    }, [webinars, error]);\r\n\r\n    if (error) {\r\n        return {\r\n            webinars: webinars.upcoming,\r\n            error: error,\r\n            retry: () => {\r\n                if (error)\r\n                    fetchWebinars();\r\n            }\r\n        };\r\n    }\r\n    else {\r\n        return {webinars: webinars.upcoming};\r\n    }\r\n}\r\n\r\nexport function useCourseWebinars(courseId) {\r\n    const {data: {webinars}, setters: {setWebinars}} = React.useContext(StoreContext);\r\n    const [error, setError] = React.useState(null);\r\n    const fetchWebinars = React.useCallback(async (courseId) => {\r\n        if (requests.webinars && requests.webinars[courseId])\r\n            return requests.webinars.upcoming;\r\n        const request = APIRequest.get(`/courses/${courseId}/schedule/person`);\r\n        (requests.webinars || (requests.webinars = {}))[courseId] = request;\r\n        try {\r\n            if (error)\r\n                setError(null);\r\n            const webinars = await request;\r\n            console.log('set course webinars', webinars);\r\n            setWebinars(loadedWebinars => ({...loadedWebinars, [courseId]: webinars}));\r\n        } catch (e) {\r\n            console.error(e);\r\n            setError(e);\r\n        }\r\n        finally {\r\n            delete requests.webinars[courseId];\r\n        }\r\n        return request;\r\n    }, [error]);\r\n\r\n    React.useEffect(() => {\r\n        if (!(webinars[courseId] || (requests.webinars && requests.webinars[courseId]) || error)) {\r\n            fetchWebinars(courseId);\r\n        }\r\n    }, [webinars, courseId, error]);\r\n\r\n    if (error) {\r\n        return {\r\n            webinars: webinars[courseId],\r\n            error: error,\r\n            retry: () => {\r\n                if (error)\r\n                    fetchWebinars(courseId);\r\n            }\r\n        };\r\n    }\r\n    else {\r\n        return {webinars: webinars[courseId]};\r\n    }\r\n}\r\n\r\nconst GlobalStore = ({children}) => {\r\n    const [user, userInfo] = useUserAuth();\r\n    const data = useStoreData();\r\n    return (\r\n        <StoreContext.Provider value={{user, userInfo, ...data}}>\r\n            {children}\r\n        </StoreContext.Provider>\r\n    )\r\n};\r\n\r\nexport default GlobalStore;\r\n\r\nexport function useUser() {\r\n   const {user, userInfo} = React.useContext(StoreContext);\r\n   return {user, userInfo};\r\n}\r\n","import React from 'react';\r\nimport {Helmet} from \"react-helmet\";\r\nimport Sticky from 'react-sticky-el';\r\nimport {Link, Redirect} from \"react-router-dom\";\r\nimport {useUser} from \"../store\";\r\n\r\nexport const PageLoadingPlaceholder = () => (\r\n    <div className=\"layout__content\">\r\n        <div className=\"layout__loading-spinner\">\r\n            <i className=\"spinner-border\"/>\r\n        </div>\r\n    </div>\r\n);\r\n\r\nexport const PageLink = ({to, arrow=true, forward=true, className, children, ...props}) => (\r\n    <Link\r\n        className={`${arrow ? 'arrow-link' : ''} ${forward ? 'arrow-link-forward' : 'arrow-link-backward'} ${className || ''}`}\r\n        to={to}\r\n        {...props}>\r\n        {children}\r\n    </Link>\r\n);\r\n\r\nexport const PageContent = ({children, className, parentSection}) => (\r\n    <div className={`layout__content-container container ${className || ''}`}>\r\n        {parentSection && (\r\n            <PageLink\r\n                to={parentSection.url || '..'}\r\n                forward={false}\r\n                className=\"layout__content-parent-section-link\">\r\n                {parentSection.name}\r\n            </PageLink>\r\n        )}\r\n        {children}\r\n    </div>\r\n);\r\n\r\nexport const BottomTab = ({children, className, ...stickyProps}) => (\r\n    <Sticky mode=\"bottom\" {...stickyProps}>\r\n        <div className={`layout__bottom-tab ${className || ''}`}>\r\n            {children}\r\n        </div>\r\n    </Sticky>\r\n);\r\n\r\nclass PageErrorBoundary extends React.Component {\r\n    state = {\r\n        error: null\r\n    }\r\n}\r\n\r\nconst Page = ({title, className, children, checkLogin=true, location}) => {\r\n    //TODO: check permissions\r\n    const {user, userInfo} = useUser();\r\n    if (checkLogin) {\r\n        if (!user) {\r\n            return (\r\n                <Redirect to={{\r\n                    pathname: '/login/',\r\n                    state: location ? { referrer: location.pathname } : undefined\r\n                }}/>);\r\n        }\r\n    }\r\n    return (\r\n        <div className={`layout__content ${className || ''}`}>\r\n            {title && <Helmet><title>{title} – ЕГЭ HACK</title></Helmet>}\r\n            {children}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Page;\r\n","import React from \"react\";\r\nimport Page from \"components/Page\";\r\nimport Auth from \"definitions/auth\";\r\nimport {useUser} from \"../../../store\";\r\nimport {Redirect, useLocation} from \"react-router-dom\";\r\nimport {DEFAULT_LOGIN_REDIRECT} from \"definitions/constants\";\r\n\r\nconst LoginPage = (props) => {\r\n    const {location} = props;\r\n    const {user, userInfo} = useUser();\r\n\r\n    React.useLayoutEffect(() => {\r\n        Auth.loginWidget('vk-auth');\r\n    }, []);\r\n\r\n    if (user) {\r\n        if (location.state && location.state.referrer)\r\n            return (<Redirect to={location.state.referrer}/>);\r\n        return (<Redirect to={DEFAULT_LOGIN_REDIRECT}/>);\r\n    }\r\n    return (\r\n        <Page\r\n            title=\"Вход\"\r\n            className=\"login-page align-items-center justify-content-center\"\r\n            checkLogin={false}\r\n            location={location}>\r\n            <div id=\"vk-auth\"/>\r\n        </Page>\r\n    );\r\n};\r\n\r\nexport default LoginPage;\r\n","import React from \"react\";\r\nimport CoverImage from \"./CoverImage\";\r\nimport Contacts from \"./Contacts\";\r\n\r\nconst UserProfile = ({first_name, last_name, photo, contacts, about, role}) => {\r\n    const fullName = `${first_name} ${last_name}`;\r\n    return (\r\n        <React.Fragment>\r\n            <div className=\"user-profile__avatar-container\">\r\n                <div className=\"user-profile__avatar-wrap\">\r\n                    <CoverImage src={photo} className=\"user-profile__avatar\" round square/>\r\n                </div>\r\n            </div>\r\n            <div className=\"user-profile__info layout__content-block\">\r\n                <div className=\"d-flex flex-column align-items-center\">\r\n                    <h2>{fullName}</h2>\r\n                    {role && <div className=\"font-size-sm\">{role}</div>}\r\n                    {contacts && <Contacts contacts={contacts}/>}\r\n                    <div className=\"description-text font-size-sm\">{about}</div>\r\n                </div>\r\n            </div>\r\n        </React.Fragment>\r\n    )\r\n};\r\n\r\nexport default UserProfile;\r\n","import React from \"react\";\r\nimport Page, {PageContent} from \"components/Page\";\r\nimport UserProfile from \"components/common/UserProfile\";\r\nimport {useUser} from \"store\";\r\n\r\nconst AccountPage = () => {\r\n    const {user, userInfo} = useUser();\r\n    return (\r\n        <Page title=\"Аккаунт\" className=\"account-page\">\r\n            <PageContent>\r\n                <UserProfile {...user}/>\r\n            </PageContent>\r\n        </Page>\r\n    );\r\n};\r\n\r\nexport default AccountPage;\r\n","import {LoremIpsum} from \"lorem-ipsum\";\r\nimport _ from \"lodash\";\r\nimport {LEARNING_STATUS} from \"definitions/constants\";\r\nimport {API_ROOT} from \"api\";\r\n\r\nimport poster from \"img/dummy_poster.jpg\";\r\nimport pic from \"img/dummy-pic.jpg\";\r\n\r\nconst lorem = new LoremIpsum();\r\n\r\nfunction getDate(daysForward) {\r\n    const date = new Date();\r\n    date.setDate(date.getDate() + daysForward);\r\n    return date;\r\n}\r\n\r\nexport const ACCOUNT_INFO = {\r\n    id: 154792439,\r\n    roles: [\r\n        \"PUPIL\",\r\n        \"TEACHER\"\r\n    ],\r\n    permissions: [],\r\n    vk_info: {\r\n        id: 154792439,\r\n        first_name: \"Alexandra\",\r\n        last_name: \"Petrova\",\r\n        photo_max_orig: poster,\r\n    },\r\n    pupil: {\r\n        account_id: 154792439\r\n    },\r\n    teacher: {\r\n        account_id: 154792439,\r\n        subjects: [\r\n            {\r\n                id: 1,\r\n                name: \"Математика\",\r\n                description: \"Лучший предмет\",\r\n                image_link: \"/files/asdsadasda.jpg\"\r\n            }\r\n        ]\r\n    }\r\n};\r\n\r\nexport const SUBJECTS = [\r\n    // { id: 'russian', name: 'Русский язык' },\r\n    // { id: 'literature', name: 'Литература' },\r\n    // { id: 'math', name: 'Математика' },\r\n    // { id: 'informatics', name: 'Информатика' },\r\n    // { id: 'physics', name: 'Физика' },\r\n    // { id: 'chemistry', name: 'Химия' },\r\n    // { id: 'biology', name: 'Биология' },\r\n    // { id: 'sociology', name: 'Обществознание' },\r\n    // { id: 'history', name: 'История' },\r\n    // { id: 'geography', name: 'География' },\r\n    // { id: 'english', name: 'Английский язык' },\r\n    // { id: 'german', name: 'Немецкий язык' },\r\n    // { id: 'french', name: 'Французский язык' },\r\n    // { id: 'chinese', name: 'Китайский язык' },\r\n    // { id: 'spanish', name: 'Испанский язык' }\r\n    { id: 1, name: 'Русский язык' },\r\n    { id: 2, name: 'Литература' },\r\n    { id: 3, name: 'Математика' },\r\n    { id: 4, name: 'Информатика' },\r\n    { id: 5, name: 'Физика' },\r\n    { id: 6, name: 'Химия' },\r\n    { id: 7, name: 'Биология' },\r\n    { id: 8, name: 'Обществознание' },\r\n    { id: 9, name: 'История' },\r\n    { id: 10, name: 'География' },\r\n    { id: 11, name: 'Английский язык' },\r\n    { id: 12, name: 'Немецкий язык' },\r\n    { id: 13, name: 'Французский язык' },\r\n    { id: 14, name: 'Китайский язык' },\r\n    { id: 15, name: 'Испанский язык' }\r\n];\r\n\r\nexport const TEACHERS = [\r\n    {\r\n        id: 154792439,\r\n        vk_info: {\r\n            id: 154792439,\r\n            first_name: \"Alexandra\",\r\n            last_name: \"Petrova\",\r\n            photo_max_orig: poster,\r\n        },\r\n        subjects: [\r\n            {\r\n                id: 1,\r\n                name: \"Математика\",\r\n                description: \"Лучший предмет\",\r\n                image_link: \"/files/asdsadasda.jpg\"\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        id: 1,\r\n        vk_info: {\r\n            id: 1,\r\n            first_name: 'Елена',\r\n            last_name: 'Черткова',\r\n            photo_max_orig: poster,\r\n        },\r\n        subjects: SUBJECTS.slice(0,2),\r\n        contacts: {vk: '/', fb: '/', ok: '/', ig: '/'},\r\n        bio: lorem.generateSentences(1)\r\n    },\r\n    {\r\n        id: 2,\r\n        vk_info: {\r\n            id: 2,\r\n            first_name: 'Сергей',\r\n            last_name: 'Авдошин',\r\n            photo_max_orig: poster,\r\n        },\r\n        subjects: [SUBJECTS[3]],\r\n        contacts: {vk: '/', fb: '/', ok: '/', ig: '/'},\r\n        bio: lorem.generateSentences(1)\r\n    }\r\n];\r\n\r\nexport const COURSES = SUBJECTS.slice(0, 5).map((subject, i) => ({\r\n    name: `${subject.name}. Мастер группа. Апрель.`,\r\n    id: i,\r\n    subject_id: subject.id,\r\n    online: i <= 2,\r\n    image_link: poster,\r\n    date_start: getDate(7 + i),\r\n    date_end: getDate(7 + i),\r\n    // totalHours: 80,\r\n    description: lorem.generateParagraphs(1),\r\n    teacher_ids: i <= 2 ? [TEACHERS[0].id] : TEACHERS.map(({id}) => id)\r\n}));\r\n\r\nexport const LESSONS = _.times(4, (j) => {\r\n    const locked = -2 + j > 0;\r\n    return ({\r\n        num: j + 1,\r\n        id: j,\r\n        // date: getDate(-4 + i + j),\r\n        name: `Занятие ${j + 1}`,\r\n        description: lorem.generateParagraphs(1),\r\n        image_link: poster,\r\n        video_link: '375255364',\r\n        locked,\r\n        assignment: {\r\n            description: lorem.generateParagraphs(1),\r\n            files: [\r\n                {name: \"Задание\", url: \"/robots.txt\"},\r\n                {name: \"Дополнительное задание\", url: \"/robots.txt\"}\r\n            ],\r\n            deadline:  getDate(7)\r\n        },\r\n        watchProgress: locked ? undefined : (100 - j * 15),\r\n    });\r\n});\r\n\r\nexport const HOMEWORK = {\r\n    comment: \"Очень плохо\",\r\n    date: new Date(),\r\n    files: [\r\n        {\r\n            original_file_name: 'Стыд.jpg',\r\n            id_file_name: '51657ffc-fc8f-11e9-a562-0338e4bfa1ca.jpg',\r\n            file_link: `${API_ROOT}/files/51657ffc-fc8f-11e9-a562-0338e4bfa1ca.jpg?disp=attachment`\r\n        }\r\n    ],\r\n    lesson_id: 0,\r\n    mark: 4,\r\n    pupil_id: 0\r\n};\r\n\r\nexport const SHOP_CATALOG = COURSES.map((course, i) => ({...course, price: 2500, discount: i === 0 ? 1000 : undefined}));\r\n\r\nexport const MY_COURSES = COURSES.slice(0, 3).map((course, i) => ({\r\n    ...course,\r\n    status: i <= 1 ? LEARNING_STATUS.finished : LEARNING_STATUS.learning\r\n}));\r\n// export const MY_COURSES = COURSES.map((course, i) => ({\r\n//     ...course,\r\n//     lessons: LESSONS.map((lesson, j) => ({\r\n//         ...lesson,\r\n//         watchProgress: lesson.locked ? undefined : (100 - j * 15),\r\n//         homework: {\r\n//             files: [\r\n//                 {name: \"Задание\", url: \"/robots.txt\"},\r\n//                 {name: \"Дополнительное задание\", url: \"/robots.txt\"}\r\n//             ],\r\n//             description: lorem.generateParagraphs(1),\r\n//             deadline: getDate(7),\r\n//             submit: true,\r\n//             submittedFiles: [\r\n//                 {\r\n//                     original_file_name: \"5_64x64.png\",\r\n//                     id_file_name: \"501371cc-f349-11e9-aa47-7990bff4dcd7.png\",\r\n//                     file_link: \"/files/601371cc-f349-11e9-aa47-7990bff4dcd7.png\"\r\n//                 }\r\n//             ]\r\n//         }\r\n//     })),\r\n//     status: i <= 2 ? LEARNING_STATUS.finished : LEARNING_STATUS.learning\r\n// }));\r\n\r\nexport const WEBINAR_SCHEDULE = COURSES.slice(0, 3).map(({id, name, subject_id}, i) => ({\r\n    subject_id,\r\n    subject_name: SUBJECTS[subject_id - 1].name,\r\n    course_id: id,\r\n    course_name: name,\r\n    id: i,\r\n    name: \"Играю в майнкрафт\",\r\n    description: \"Скидывайте ваши донаты\",\r\n    date_start: getDate(i),\r\n    duration: 60*2,\r\n    date_end: new Date(getDate(1 + i).getTime() + 60*2 * 1000 * 60),\r\n    image_link: pic\r\n}));\r\n\r\nexport const TEST_ID = 1;\r\nexport const TEST_HASH = '2d01669a3c8cda169545b4f7b607efb3';\r\n","import React from 'react';\r\nimport Truncate from 'react-truncate';\r\nimport {useTruncate} from \"hooks/common\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\nexport default function ListItem(props) {\r\n    const {\r\n        preview, title, subtitle, description, item, selectable,\r\n        className,\r\n        children: action,\r\n        link,\r\n        onClick: clickCallback,\r\n        onActionClick: actionCallback,\r\n        callbackProps} = props;\r\n    const [descriptionRef, isFontLoaded] = useTruncate(description);\r\n    const onClick = React.useCallback((event) => {\r\n        const clicked = selectable && !(actionCallback && event.target.closest('.list__item-action'));\r\n        if (clicked && clickCallback)\r\n            clickCallback(item, callbackProps);\r\n        else if (!clicked && link)\r\n            event.preventDefault();\r\n    }, [item, clickCallback, selectable, callbackProps, link, actionCallback]);\r\n    const onActionClick = React.useCallback((event) => {\r\n        if (selectable && actionCallback)\r\n            actionCallback(item, callbackProps);\r\n    }, [item, actionCallback, selectable, callbackProps]);\r\n    const content = (\r\n        <div className=\"row align-items-center\">\r\n            <div className=\"list__item-preview col-12 col-md-auto\">\r\n                {preview}\r\n            </div>\r\n            <div className=\"list__item-description col align-self-stretch\">\r\n                <div className=\"list__item-description-inner\">\r\n                    <div className=\"title font-size-lg\">{title}</div>\r\n                    {subtitle && <div className=\"subtitle\">{subtitle}</div>}\r\n                    {description && (\r\n                        <div className=\"description-container font-size-xs\">\r\n                            <div className=\"description-text\">\r\n                                {isFontLoaded ? (\r\n                                    <Truncate lines={2} ref={descriptionRef}>\r\n                                        {description}\r\n                                    </Truncate>\r\n                                ) : null}\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n            {action && (\r\n                <div\r\n                    className=\"list__item-action col-auto d-flex align-items-center flex-column\"\r\n                    onClick={onActionClick}>\r\n                    {action}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n    if (link) {\r\n        return (\r\n            <Link\r\n                className={`list__item container ${selectable ? 'list__item-selectable' : ''} ${className || ''}`}\r\n                to={link}\r\n                onClick={onClick}>\r\n                {content}\r\n            </Link>\r\n        );\r\n    }\r\n    else {\r\n        return (\r\n            <div className={`list__item container ${selectable ? 'list__item-selectable' : ''} ${className || ''}`} onClick={onClick}>\r\n                {content}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React from 'react';\r\nimport ListItem from \"./ListItem\";\r\n\r\nexport default function List(props) {\r\n    const {children, renderItem, renderProps, flex, className} = props;\r\n    return flex\r\n        ? (\r\n            <div className={`${className || ''} list`}>\r\n                <div className=\"container p-0 overflow-hidden\">\r\n                    <div className=\"row\">\r\n                        {children.map((item, index) => renderItem(item, renderProps, index))}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n        : (\r\n        <div className={`${className || ''} list`}>\r\n            {children.map((item, index) => renderItem(item, renderProps, index))}\r\n        </div>\r\n    );\r\n}\r\n\r\nList.defaultProps = {\r\n    renderItem: (item, props, index) => <ListItem {...item} {...props} key={index}/>\r\n};\r\n","import React from 'react';\r\nimport {Scrollbars as ScrollComponent} from 'react-custom-scrollbars';\r\n\r\nconst renderEmpty = () => <div/>;\r\n\r\nconst renderTrackVertical = props => (<div {...props} className=\"track track-vertical\"/>);\r\nconst renderThumbVertical = props => (<div {...props} className=\"thumb thumb-vertical\"/>);\r\nconst renderTrackHorizontal = props => (<div {...props} className=\"track track-horizontal\"/>);\r\nconst renderThumbHorizontal = props => (<div {...props} className=\"thumb thumb-horizontal\"/>);\r\n\r\nconst ScrollBars = React.forwardRef(({children, hideVerticalScrollbar=false, hideHorizontalScrollbar=false, ...props}, ref) => {\r\n    return (\r\n        <ScrollComponent\r\n            renderTrackVertical={hideVerticalScrollbar ? renderEmpty : renderTrackVertical}\r\n            renderThumbVertical={renderThumbVertical}\r\n            renderTrackHorizontal={hideHorizontalScrollbar ? renderEmpty : renderTrackHorizontal}\r\n            renderThumbHorizontal={renderThumbHorizontal}\r\n            ref={ref}\r\n            {...props}>\r\n            {children}\r\n        </ScrollComponent>\r\n    );\r\n});\r\n\r\nexport default ScrollBars;\r\n","import React, {Component} from 'react';\r\nimport SelectInput, { components } from 'react-select';\r\nimport _ from 'lodash';\r\nimport PropTypes from 'prop-types';\r\nimport ScrollBars from \"./ScrollBars\";\r\n\r\nconst DropdownIndicator = (props) => (\r\n    <components.DropdownIndicator {...props}>\r\n        <i className=\"icon-angle\"/>\r\n    </components.DropdownIndicator>\r\n);\r\n\r\nconst SelectContainer = ({ children, selectProps, hasValue, setValue, ...props }) => (\r\n    <div className=\"select\">\r\n        <components.SelectContainer\r\n            selectProps={{...selectProps, isClearable: false}}\r\n            hasValue={hasValue}\r\n            setValue={setValue}\r\n            {...props}>\r\n            {children}\r\n        </components.SelectContainer>\r\n        {selectProps.isClearable && (\r\n            <div className={hasValue ? 'select__clear-btn' : 'select__clear-btn select__clear-btn-hidden'} onClick={() => {setValue(null);}}>\r\n                <i className=\"icon-close\"/>\r\n            </div>\r\n        )}\r\n    </div>\r\n);\r\n\r\n\r\nexport const Option = ({content, ...props}) => (\r\n    <components.Option {...props}>\r\n        {content ? content : props.label}\r\n    </components.Option>\r\n);\r\n\r\nOption.propTypes = {\r\n    content: PropTypes.node,\r\n    label: PropTypes.node\r\n};\r\n\r\nclass MenuList extends Component {\r\n    componentDidMount() {\r\n        //needed to the select to scroll the list to the selected option\r\n        this.props.innerRef(this.scrollBar.view);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <ScrollBars\r\n                autoHeight\r\n                hideTracksWhenNotNeeded\r\n                ref={ref => { this.scrollBar = ref; }}\r\n                autoHeightMax={this.props.maxHeight}>\r\n                <components.MenuList {...this.props}>\r\n                    {this.props.children}\r\n                </components.MenuList>\r\n            </ScrollBars>\r\n        );\r\n    }\r\n\r\n    static propTypes = {\r\n        maxHeight: PropTypes.number.isRequired,\r\n        children: PropTypes.node.isRequired,\r\n        innerRef: PropTypes.func.isRequired\r\n    }\r\n}\r\n\r\n//TODO: try react virtualized select\r\nexport default class Select extends React.PureComponent {\r\n    onChange = (option) => {\r\n        this.props.callback(option ? option.value : null, this.props.name);\r\n    };\r\n\r\n    render() {\r\n        const {name, options, value, components, selectProps, isClearable=true, isSearchable=true, placeholder} = this.props;\r\n        return (\r\n            <SelectInput\r\n                name={name}\r\n                options={options}\r\n                maxMenuHeight={200}\r\n                value={_.find(options, {value: value}) || null}\r\n                className='select__container' classNamePrefix='select'\r\n                onChange={this.onChange}\r\n                menuPlacement=\"auto\"\r\n                noOptionsMessage={() => 'Нет опций'}\r\n                components={\r\n                    components ? ({\r\n                        Option,\r\n                        MenuList,\r\n                        DropdownIndicator,\r\n                        SelectContainer,\r\n                        ...components\r\n                    }) : ({\r\n                        Option,\r\n                        MenuList,\r\n                        DropdownIndicator,\r\n                        SelectContainer,\r\n                    })\r\n                }\r\n                styles={{\r\n                    //removes default styles from option elements\r\n                    option: () => ({})\r\n                }}\r\n                isClearable={isClearable}\r\n                isSearchable={isSearchable}\r\n                placeholder={placeholder}\r\n                {...selectProps}\r\n            />\r\n        );\r\n    }\r\n\r\n    static propTypes = {\r\n        name: PropTypes.string.isRequired,\r\n        options: PropTypes.arrayOf(PropTypes.shape({\r\n            value: PropTypes.any,\r\n            label: PropTypes.any\r\n        })).isRequired,\r\n        callback: PropTypes.func.isRequired,\r\n        value: PropTypes.any,\r\n        selectProps: PropTypes.object,\r\n        components: PropTypes.object\r\n    }\r\n}\r\n","import React from 'react';\r\nimport Select from \"./Select\";\r\n\r\nfunction useChangeHandler(callback, inputProp = 'value') {\r\n    return React.useCallback((event) => {\r\n        callback(event.currentTarget[inputProp], event.currentTarget.name, event);\r\n    }, [callback, inputProp])\r\n}\r\n\r\nconst CheckBox = ({value, onChange: callback, name, label, ...props}) => {\r\n    const onChange = useChangeHandler(callback, 'checked');\r\n    return (\r\n        <label className={`input input-checkbox`}>\r\n            <input type=\"checkbox\" name={name} checked={value} onChange={onChange} {...props}/>\r\n            <span className=\"input__box\"/>\r\n            <span className=\"input__label\">{label}</span>\r\n        </label>\r\n    );\r\n};\r\n\r\nconst Input = ({className, onChange: callback, ...props}) => {\r\n    const onChange = useChangeHandler(callback);\r\n    return (\r\n        <input className={`input ${className || ''}`} onChange={onChange} {...props}/>\r\n    );\r\n};\r\n\r\nObject.assign(Input, {\r\n    CheckBox,\r\n    Select\r\n});\r\n\r\nexport default Input;\r\n\r\n","import React from 'react';\r\nimport {useHistory, useLocation} from 'react-router-dom';\r\nimport List from \"./List\";\r\nimport Input from \"../ui/Input\";\r\nimport Page from \"../Page\";\r\n\r\nexport const CatalogContext = React.createContext({});\r\n\r\nconst Filter = ({filterBy: {subject:filterBySubject = true, online:filterByOnline = true}={}}) => {\r\n    const {options, subject, online, onChange} = React.useContext(CatalogContext);\r\n    return (\r\n        <div className=\"layout__content-block catalog__filters\">\r\n            <div className=\"container p-0\">\r\n                <div className=\"row\">\r\n                    {filterBySubject && (\r\n                        <div className=\"col-auto d-flex align-items-center\">\r\n                            <Input.Select\r\n                                name=\"subject\"\r\n                                options={options}\r\n                                value={subject}\r\n                                placeholder='Предмет'\r\n                                callback={onChange}/>\r\n                        </div>\r\n                    )}\r\n                    {filterByOnline && (\r\n                        <div className=\"col-auto d-flex align-items-center\">\r\n                            <Input.CheckBox\r\n                                name=\"online\"\r\n                                value={online}\r\n                                label=\"Онлайн\"\r\n                                onChange={onChange}/>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst Catalog = ({renderFunc, placeholder, baseUrl, ...listProps}) => {\r\n    const {items, renderProps} = React.useContext(CatalogContext);\r\n    const renderItem = React.useCallback((item) => {\r\n        return renderFunc(item, {link: `${item.id}/`, ...renderProps});\r\n    }, [renderFunc, renderProps]);\r\n    return (\r\n        <div className=\"layout__content-block catalog__catalog\">\r\n            {items.length > 0 ? (\r\n                <List {...listProps}\r\n                    renderItem={renderItem}>\r\n                    {items}\r\n                </List>\r\n            ) : (\r\n                <div className=\"catalog__empty-catalog-fallback-message text-center font-size-sm\">\r\n                    {placeholder}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst Body = (props) => {\r\n    const {options, filterItems, children, renderProps={}} = props;\r\n    const history = useHistory();\r\n    const location = useLocation();\r\n    const params = new URLSearchParams(location.search);\r\n    const subject = parseInt(params.get('subject')) || null;\r\n    const online = params.get('online') === 'true';\r\n    const onFilterChange = React.useCallback((value, name) => {\r\n        const params = new URLSearchParams(location.search);\r\n        if (value)\r\n            params.set(name, value);\r\n        else\r\n            params.delete(name);\r\n        // setSubject(option);\r\n        history.push({\r\n            pathname: location.pathname,\r\n            search: `?${params}`\r\n        });\r\n    }, [location, history]);\r\n    const matchingItems = filterItems(subject, online);\r\n\r\n    return (\r\n        <CatalogContext.Provider\r\n            value={{\r\n                options, subject, online, onChange: onFilterChange, items: matchingItems, renderProps\r\n            }}>\r\n            <div className=\"catalog\">\r\n                {children}\r\n            </div>\r\n        </CatalogContext.Provider>\r\n    );\r\n};\r\n//\r\n// const CatalogPage = ({title, className, BodyComponent = Body, ...props}) => {\r\n//     return (\r\n//         <Page title={title} className={className}>\r\n//             <BodyComponent {...props}/>\r\n//         </Page>\r\n//     )\r\n// };\r\n\r\nexport default {\r\n    Filter,\r\n    Catalog,\r\n    Body,\r\n    // Page: CatalogPage\r\n};\r\n","import React from 'react';\r\nimport _ from 'lodash';\r\nimport {Link} from \"react-router-dom\";\r\nimport CoverImage from \"./CoverImage\";\r\nimport Contacts from \"./Contacts\";\r\n\r\nexport default function Teacher(props) {\r\n    const {\r\n        teacher: {\r\n        vk_info: {first_name, last_name, photo_max_orig: photo}, contacts, subjects: teacherSubjects, bio: about\r\n        },\r\n        subjects,\r\n        link,\r\n        bio=false,\r\n        className} = props;\r\n    const onClick = React.useCallback((event) => {\r\n        const clicked = !event.target.closest('.social-media');\r\n        // event.preventDefault();\r\n    }, []);\r\n    // const teacherSubjects = subject_ids.map(id => _.find(subjects, {id}));\r\n    return (\r\n        <Link to={link} className={`${className} teacher-profile`} onClick={onClick}>\r\n            <div className=\"container p-0\">\r\n                <div className=\"row flex-nowrap\">\r\n                    <div className=\"col-auto d-flex align-items-center\">\r\n                        <CoverImage src={photo} className=\"teacher-profile__photo\" round square/>\r\n                    </div>\r\n                    <div className=\"col d-flex flex-column justify-content-center\">\r\n                        <h3 className=\"teacher-profile__name\">{first_name} {last_name}</h3>\r\n                        {bio && (\r\n                            <div className=\"teacher-profile__subjects font-size-sm\">\r\n                                {teacherSubjects.map(({name}, i) => i === 0 ? name : name.toLowerCase()).join(', ')}\r\n                            </div>)}\r\n                        {contacts && (<Contacts contacts={contacts}/>)}\r\n                    </div>\r\n                </div>\r\n                {bio && (\r\n                    <div className=\"row\">\r\n                        <div className=\"col-12 description-text\">\r\n                            {about}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </Link>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport _  from 'lodash';\r\nimport Catalog from \"components/common/Catalog\";\r\nimport Teacher from \"../../../common/Teacher\";\r\n\r\nconst Filter = (props) => (<Catalog.Filter filterBy={{online: false}} {...props}/>);\r\n\r\nconst TeachersCatalog = (props) => {\r\n    const renderTeacher = React.useCallback((teacher, {link, subjects}) => (\r\n        <div className=\"list__item col-12 col-md-6 d-flex\" key={teacher.id}>\r\n            <Teacher\r\n                teacher={teacher}\r\n                subjects={subjects}\r\n                bio\r\n                link={link}/>\r\n        </div>\r\n    ), []);\r\n    return (\r\n        <Catalog.Catalog\r\n            placeholder=\"Нет преподавателей, соответствующих условиям поиска\"\r\n            flex\r\n            renderFunc={renderTeacher}\r\n            {...props}/>\r\n    );\r\n};\r\n\r\nconst Body = (props) => {\r\n    const {teachers, subjects, ...otherProps} = props;\r\n\r\n    const options = React.useMemo(() => {\r\n        const subjectsMap = _.zipObject(subjects.map(({id}) => id), subjects);\r\n        const subjectsTeachers = _.reduce(teachers, (result, teacher) => {\r\n            teacher.subjects.forEach(subject => {result[subject.id] = subject});\r\n            return result;\r\n        }, {});\r\n        return _.values(subjectsTeachers).map(({id, name}) => ({value: id, label: name}));\r\n    }, [teachers, subjects]);\r\n\r\n    const getMatchingCourses = React.useCallback((subject) => teachers.filter((teacher) =>\r\n        (subject ? teacher.subjects.some(({id}) => subject === id)  : true)), [teachers]);\r\n\r\n    return (\r\n        <Catalog.Body\r\n            options={options}\r\n            renderProps={{subjects}}\r\n            filterItems={getMatchingCourses}\r\n            {...otherProps}/>\r\n    )\r\n};\r\n\r\n// const Page = (props) => (<Catalog.Page BodyComponent={Body} {...props}/>);\r\n\r\nexport default {\r\n    ...Catalog,\r\n    Filter,\r\n    Catalog: TeachersCatalog,\r\n    Body,\r\n    // Page\r\n}\r\n","import React from \"react\";\r\nimport Page, {PageContent, PageLoadingPlaceholder} from \"components/Page\";\r\nimport TeachersCatalog from \"./TeachersCatalog\";\r\nimport {useTeachers} from \"store\";\r\n\r\nconst TeachersCatalogPage = ({location}) => {\r\n    const {teachers, subjects, error, retry} = useTeachers();\r\n    return (\r\n        <Page\r\n            title=\"Мои курсы\"\r\n            className=\"catalog teachers-catalog\"\r\n            location={location}>\r\n            {!(teachers && subjects) ? (\r\n                    <PageLoadingPlaceholder/>\r\n                ) : (\r\n                <TeachersCatalog.Body\r\n                    subjects={subjects}\r\n                    teachers={teachers}>\r\n                    <PageContent>\r\n                        <TeachersCatalog.Filter/>\r\n                        <TeachersCatalog.Catalog/>\r\n                    </PageContent>\r\n                </TeachersCatalog.Body>\r\n            )\r\n            }\r\n        </Page>\r\n    );\r\n};\r\n\r\nexport default TeachersCatalogPage;\r\n","import React from \"react\";\r\n\r\nconst Button = ({className, children, active = true, neutral=false, icon, iconAction, tag:Tag='div', onClick, ...props}) => {\r\n    // const clickCallback = React.useCallback((e) => {\r\n    //     console.log(e.target, e.currentTarget, e.target === e.currentTarget);\r\n    //     if (e.target === e.currentTarget)\r\n    //         onClick(e);\r\n    // }, [onClick]);\r\n    return (\r\n        <Tag\r\n            className={`btn ${active ? '' : 'btn-inactive'} ${neutral ? 'btn-neutral' : ''} ${className ? className : ''}`}\r\n            {...props}>\r\n        <span className=\"btn__content\">\r\n            {icon && <div className=\"btn__after\" onClick={iconAction ? iconAction : onClick}>{icon}</div>}\r\n            <span\r\n                className=\"btn__name\"\r\n                onClick={onClick}>\r\n                {children}\r\n            </span>\r\n        </span>\r\n        </Tag>\r\n    );\r\n};\r\n\r\nexport default Button;\r\n","import React from \"react\";\r\nimport Page from \"./Page\";\r\nimport {Link} from \"react-router-dom\";\r\nimport Button from \"./ui/Button\";\r\n\r\nconst ErrorPage = ({errorCode = 404, message, link: {text, url} = {}}) => {\r\n    const code = errorCode && errorCode.toString();\r\n    return (\r\n        <Page title={code} className=\"error-page\">\r\n            <div className=\"error-page__error-code\">\r\n                {code && code.split('').map((number, i) => <span key={i}>{number}</span>)}\r\n            </div>\r\n            <div className=\"error-page__error-message\">{message || 'Похоже, вы потерялись'}</div>\r\n            <Button tag={Link} to={`${url || ''}/`} replace className=\"btn\">{text || 'На главную'}</Button>\r\n        </Page>\r\n    );\r\n};\r\n\r\nexport default ErrorPage;\r\n","import React from 'react';\r\nimport Catalog from \"./Catalog\";\r\nimport _ from \"lodash\";\r\n\r\nconst CourseCatalog = ({renderCourse, ...otherProps}) => (\r\n    <Catalog.Catalog\r\n        placeholder=\"Нет курсов, соответствующих условиям поиска\"\r\n        renderFunc={renderCourse}\r\n        {...otherProps}/>\r\n);\r\n\r\nconst Body = (props) => {\r\n    const {courses, subjects, ...otherProps} = props;\r\n\r\n    const options = React.useMemo(() =>\r\n            subjects.map(({id, name}) => ({value: id, label: name})),\r\n        [subjects]);\r\n\r\n    const getMatchingCourses = React.useCallback((subject, online) => courses.filter((course) =>\r\n        (subject ? course.subject_id === subject : true) && (online ? course.online === online : true)), [courses]);\r\n\r\n    return (\r\n        <Catalog.Body\r\n            options={options}\r\n            filterItems={getMatchingCourses}\r\n            {...otherProps}/>\r\n    )\r\n};\r\n\r\n// const CourseCatalogPage = (props) => (<Catalog.Page BodyComponent={Body} {...props}/>);\r\n\r\nexport default {\r\n    ...Catalog,\r\n    Catalog: CourseCatalog,\r\n    Body,\r\n    // Page: CourseCatalogPage\r\n}\r\n","import React from 'react';\r\nimport {daysBetween} from \"../../definitions/helpers\";\r\nimport ListItem from \"./ListItem\";\r\nimport CoverImage from \"./CoverImage\";\r\n\r\nexport default function Course({course, online=true, isSelected=false, ...props}) {\r\n    const {name, image_link, date_start, description} = course;\r\n    const startsIn = daysBetween(new Date(), date_start);\r\n    return (\r\n        <ListItem\r\n            item={course}\r\n            className={isSelected ? 'course course-selected' : 'course'}\r\n            title={name}\r\n            subtitle={`До начала курса ${startsIn} ${startsIn === 1 ? 'день' : 'дней'}`}\r\n            description={description}\r\n            preview={(\r\n                <div className=\"course__cover-container\">\r\n                    {course.online && (\r\n                        <div className={`course__online-badge ${online ? 'course__online-text' : ''} font-size-xs`}>\r\n                            <span>Онлайн</span>\r\n                        </div>\r\n                    )}\r\n                    <CoverImage src={image_link} className=\"poster-cover course__cover\"/>\r\n                </div>\r\n            )}\r\n            {...props}/>\r\n    );\r\n}\r\n","import React from \"react\";\r\nimport _ from \"lodash\";\r\nimport Page, {PageContent, PageLoadingPlaceholder} from \"components/Page\";\r\nimport ErrorPage from \"components/ErrorPage\";\r\nimport CourseCatalog from \"components/common/CourseCatalog\";\r\nimport Course from \"components/common/Course\";\r\nimport Button from \"components/ui/Button\";\r\nimport UserProfile from \"components/common/UserProfile\";\r\nimport {useShopCatalog, useTeachers} from \"store\";\r\n\r\nconst TeacherPage = (props) => {\r\n    const {match: {params: {id: param_id}}, path: root, className, location} = props;\r\n    const {teachers, subjects, error, retry} = useTeachers();\r\n    const {catalog, error: errorLoadingCatalog, retry: reloadCatalog} = useShopCatalog();\r\n    const id = parseInt(param_id);\r\n\r\n    const renderCourse = React.useCallback((course, {link}) => {\r\n        const {price, discount} = course;\r\n        return (\r\n            <Course\r\n                course={course}\r\n                selectable\r\n                key={course.id}\r\n                link={`/shop/${link}`}>\r\n                <div className=\"list__item-action-info\">\r\n                    <span className=\"price\">{price}₽</span> {discount && <span className=\"discount font-size-xs\">{discount + price}₽</span>}\r\n                </div>\r\n                <Button style={{minWidth: '110px'}}>Открыть</Button>\r\n            </Course>\r\n        )\r\n    }, []);\r\n\r\n    if (teachers && catalog && subjects) {\r\n        const teacher = _.find(teachers, {id});\r\n\r\n        if (teacher) {\r\n            const {vk_info: {first_name, last_name, photo_max_orig: photo}, contacts, subjects: teacherSubjects, bio} = teacher;\r\n            // const teacherSubjects = subject_ids.map(id => _.find(subjects, {id}));\r\n            const teachersCourses = catalog.filter(course => _.indexOf(course.teacher_ids, id) >= 0);\r\n            const profile = {\r\n                first_name,\r\n                last_name,\r\n                photo,\r\n                contacts,\r\n                about: bio,\r\n                role: teacherSubjects.map(({name}, i) => i === 0 ? name : name.toLowerCase()).join(', ')\r\n            };\r\n            const fullName = `${first_name} ${last_name}`;\r\n            return (\r\n                <Page\r\n                    title={`${fullName}`}\r\n                    className={`teacher-page ${className || ''}`}\r\n                    location={location}>\r\n                    <PageContent parentSection={{name: \"Преподаватели\"}}>\r\n                        <UserProfile {...profile}/>\r\n                        <div className=\"layout__content-block\">\r\n                            <h3>Курсы преподавателя</h3>\r\n                        </div>\r\n                        <CourseCatalog.Body\r\n                            className=\"course-shop\"\r\n                            subjects={subjects}\r\n                            courses={teachersCourses}>\r\n                            <CourseCatalog.Filter/>\r\n                            <CourseCatalog.Catalog\r\n                                renderCourse={renderCourse}/>\r\n                        </CourseCatalog.Body>\r\n                    </PageContent>\r\n                </Page>\r\n            )\r\n        } else\r\n            return <ErrorPage errorCode={404} message=\"Преподаватель не найден\" link={{url: root}}/>;\r\n    }\r\n    else {\r\n        return (\r\n            <Page\r\n                location={location}>\r\n                <PageLoadingPlaceholder/>\r\n            </Page>\r\n        );\r\n    }\r\n};\r\n\r\nexport default TeacherPage;\r\n","import React from \"react\";\r\nimport { Switch, Route } from \"react-router-dom\";\r\nimport {TEACHERS} from \"data/test_data\";\r\nimport {SHOP_CATALOG} from \"data/test_data\";\r\nimport CatalogPage from \"./catalog-page\";\r\nimport TeacherPage from \"./teacher-page\";\r\n\r\nconst Teachers = (props) => {\r\n    const {match} = props;\r\n    return (\r\n        <Switch>\r\n            <Route path={`${match.path}/:id`} render={(props) => (\r\n                <TeacherPage\r\n                    teachers={TEACHERS}\r\n                    courses={SHOP_CATALOG.catalog}\r\n                    path={match.path}\r\n                    {...props}/>\r\n            )}/>\r\n            <Route exact path={`${match.path}`} render={(props) => (\r\n                <CatalogPage {...props}/>\r\n            )}/>\r\n        </Switch>\r\n    );\r\n};\r\n\r\nexport default Teachers;\r\n","import React from 'react';\r\nimport {CSSTransition, TransitionGroup} from \"react-transition-group\";\r\nimport {useTruncate} from \"hooks/common\";\r\nimport CoverImage from \"components/common/CoverImage\";\r\nimport Truncate from \"react-truncate\";\r\nimport _ from \"lodash\";\r\nimport {BottomTab} from \"components/Page\";\r\nimport ScrollBars from \"components/ui/ScrollBars\";\r\nimport Button from \"components/ui/Button\";\r\n\r\nconst SelectedCourse = ({course, onCourseDeselect, onTruncate}) => {\r\n    const {name} = course;\r\n    const [descriptionRef] = useTruncate(name);\r\n    const onDeselectClick = React.useCallback(() => {\r\n        onCourseDeselect(course);\r\n    }, [onCourseDeselect, course]);\r\n    return (\r\n        <div className=\"selected-course d-flex align-items-center flex-shrink-0\">\r\n            <div className=\"selected-course__cover-container\">\r\n                <CoverImage src={course.image_link} className=\"selected-course__cover poster-cover\"/>\r\n                <i className=\"icon-close selected-course__deselect-btn animated__action-button\" onClick={onDeselectClick}/>\r\n            </div>\r\n            <div className=\"selected-course__description-container font-size-xs\">\r\n                <div className=\"selected-course__description\">\r\n                    <Truncate lines={2} ref={descriptionRef} onTruncate={onTruncate}>\r\n                        {name}\r\n                    </Truncate>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst renderView = ({style, ...props}) => (<div style={{...style, height: `calc(100% + ${style.minHeight}px)`}} {...props}/>);\r\n\r\nconst SelectedCoursesTab = ({courses, discount: discountInfo, onCourseDeselect}) => {\r\n    let price, discount, message;\r\n    if (discountInfo) {\r\n        const fullPrice = _.sumBy(courses, 'price');\r\n        price = discountInfo.discounted_price;\r\n        discount = fullPrice - discountInfo.discounted_price;\r\n        message = discountInfo.message;\r\n    }\r\n    // const discount = _.sumBy(courses, 'discount');\r\n    React.useEffect(() => {\r\n        if (window.dispatchEvent)\r\n            window.dispatchEvent(new CustomEvent('scroll'));\r\n    });\r\n    return (\r\n        <BottomTab\r\n            className={`selected-courses ${courses.length === 0 ? 'hidden' : ''}`}>\r\n            <div className=\"container-fluid\">\r\n                <div className=\"row\">\r\n                    <div className=\"col-12 col-md p-0 selected-courses__courses\">\r\n                        <ScrollBars\r\n                            autoHeight\r\n                            autoHeightMax=\"unset\"\r\n                            hideTracksWhenNotNeeded\r\n                            renderView={renderView}\r\n                            style={{height: '100%'}}\r\n                            className=\"scrollbars\">\r\n                            <TransitionGroup\r\n                                className=\"layout__bottom-tab-container container-fluid d-flex flex-nowrap\"\r\n                                style={{height: '100%'}}>\r\n                                {courses.map(course => (\r\n                                    <CSSTransition\r\n                                        classNames=\"animation-fade\"\r\n                                        key={course.id}\r\n                                        timeout={300}>\r\n                                        <SelectedCourse\r\n                                            course={course}\r\n                                            onCourseDeselect={onCourseDeselect}\r\n                                            onTruncate={() => {\r\n                                                window.dispatchEvent(new CustomEvent('scroll'));\r\n                                            }}/>\r\n                                    </CSSTransition>\r\n                                ))}\r\n                            </TransitionGroup>\r\n                        </ScrollBars>\r\n                    </div>\r\n                    <div className=\"col-12 col-md-auto p-0 selected-courses__price\">\r\n                        <div className=\"layout__bottom-tab-container container d-flex align-items-center justify-content-end\">\r\n                            {discountInfo ? (\r\n                                <React.Fragment>\r\n                                    <Button className=\"order-1 order-md-0 flex-shrink-0\">Оплатить</Button>\r\n                                    <div className=\"price selected-courses__price-container container\">\r\n                                        {discount > 0 && <div className=\"discount font-size-sm d-inline-block d-md-block\">{price + discount}₽</div>}\r\n                                        <div className=\"price font-size-lg d-inline-block d-md-block\">{price}₽</div>\r\n                                        {message && <div className=\"promotion font-size-xs\">{message}</div>}\r\n                                    </div>\r\n                                </React.Fragment>\r\n                            ) : (\r\n                                <div className=\"spinner-border\"/>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </BottomTab>\r\n    );\r\n};\r\n\r\nexport default SelectedCoursesTab;\r\n","import React from \"react\";\r\nimport Page, {PageContent, PageLoadingPlaceholder} from \"components/Page\";\r\nimport CourseCatalog from \"components/common/CourseCatalog\";\r\nimport SelectedCoursesTab from \"./SelectedCoursesTab\";\r\nimport Course from \"components/common/Course\";\r\nimport Button from \"components/ui/Button\";\r\nimport {useDiscount, useShopCatalog} from \"store\";\r\n\r\nconst ShopCatalogPage = ({selectedCourses, onCourseClick, onCourseSelect, onCourseDeselect, location}) => {\r\n    const {catalog, subjects, error, retry} = useShopCatalog();\r\n    const {discount, error: errorLoadingDiscount, retry: reloadDiscount} = useDiscount(selectedCourses);\r\n    const renderCourse = React.useCallback((course, props) => {\r\n        const isSelected = selectedCourses.has(course);\r\n        const {price, discount, purchased} = course;\r\n        return (\r\n            <Course\r\n                course={course}\r\n                selectable\r\n                isSelected={isSelected}\r\n                onActionClick={purchased ? null : onCourseSelect}\r\n                key={course.id}\r\n                {...props}>\r\n                {purchased ? (\r\n                    <Button style={{minWidth: '110px'}} active={false}>Куплено</Button>\r\n                ) : (\r\n                    <React.Fragment>\r\n                        <div className=\"list__item-action-info\">\r\n                            <span className=\"price\">{price}₽</span> {discount && <span className=\"discount font-size-xs\">{discount + price}₽</span>}\r\n                        </div>\r\n                        <Button style={{minWidth: '110px'}}>{isSelected ? 'Выбрано' : 'Выбрать'}</Button>\r\n                    </React.Fragment>\r\n                )}\r\n            </Course>\r\n        )\r\n    }, [selectedCourses, onCourseSelect]);\r\n    return (\r\n        <Page\r\n            className=\"course-shop\"\r\n            title=\"Магазин курсов\"\r\n            location={location}>\r\n            {!(catalog && subjects) ? (\r\n                <PageLoadingPlaceholder/>\r\n            ) : (\r\n                <CourseCatalog.Body\r\n                    subjects={subjects}\r\n                    courses={catalog}>\r\n                    <PageContent>\r\n                        <CourseCatalog.Filter/>\r\n                        <CourseCatalog.Catalog\r\n                            renderCourse={renderCourse}/>\r\n                    </PageContent>\r\n                </CourseCatalog.Body>\r\n            )}\r\n            <SelectedCoursesTab\r\n                onCourseDeselect={onCourseDeselect}\r\n                courses={[...selectedCourses]}\r\n                discount={discount}/>\r\n        </Page>\r\n    );\r\n};\r\n\r\nexport default ShopCatalogPage;\r\n","import React from 'react';\r\nimport _ from 'lodash';\r\nimport CoverImage from \"components/common/CoverImage\";\r\nimport {renderDate} from \"../../definitions/helpers\";\r\nimport List from \"./List\";\r\nimport Teacher from \"./Teacher\";\r\nimport Page, {PageLink} from \"../Page\";\r\nimport ErrorPage from \"../ErrorPage\";\r\n\r\nwindow._ = _;\r\n\r\nexport const CourseOverviewContext = React.createContext({});\r\n\r\nconst Description = () => {\r\n    const {course} = React.useContext(CourseOverviewContext);\r\n    return (\r\n        <React.Fragment>\r\n            <CoverImage src={course.image_link} className=\"course-overview__cover\"/>\r\n            <div className=\"course-overview__info layout__content-block\">\r\n                <h2>{course.name}</h2>\r\n                <div className=\"course-overview__summary\">\r\n                    <div className=\"col-auto course-overview__summary-item\">\r\n                        <i className=\"far fa-calendar-alt\"/>\r\n                        Начало: {renderDate(course.date_start, renderDate.date)}\r\n                    </div>\r\n                    <div className=\"col-auto course-overview__summary-item\">\r\n                        <i className=\"far fa-clock\"/>\r\n                        Длительность: {course.total_hours} часов\r\n                    </div>\r\n                </div>\r\n                <div className=\"description-text font-size-sm\">{course.description}</div>\r\n            </div>\r\n        </React.Fragment>\r\n    );\r\n};\r\n\r\nconst Title = () => {\r\n    const {course} = React.useContext(CourseOverviewContext);\r\n    return (\r\n        <div className=\"course-overview__title layout__content-block\">\r\n            <h2>{course.name}</h2>\r\n            <PageLink className=\"course-overview__link\" to={`/shop/${course.id}`}>\r\n                Страница курса\r\n            </PageLink>\r\n        </div>\r\n    );\r\n};\r\n\r\n//TODO: error boundaries\r\nconst Teachers = () => {\r\n    const {course, teachers} = React.useContext(CourseOverviewContext);\r\n    return (\r\n        <div className=\"layout__content-block\">\r\n            <h3>Преподаватели</h3>\r\n            <div className=\"course-overview__teachers container negate-block-padding\">\r\n                <div className=\"row\">\r\n                    {course.teacher_ids.map((id, i) => (\r\n                        <div className=\"col-12 col-md d-flex p-0\" key={i}>\r\n                            <Teacher\r\n                                teacher={_.find(teachers, {id})}\r\n                                link={`/teachers/${id}/`}/>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst Lessons = ({renderLesson: renderFunc}) => {\r\n    const {course, lessons} = React.useContext(CourseOverviewContext);\r\n    const renderCourse = React.useCallback((item) => {\r\n        return renderFunc(item, {link: `${item.id}/`});\r\n    }, [renderFunc]);\r\n    return (\r\n        <div className=\"layout__content-block\">\r\n            <h3>Уроки</h3>\r\n            <List\r\n                renderItem={renderCourse}>\r\n                {lessons}\r\n            </List>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst CourseOverview = (props) => {\r\n    const {match: {params: {id: param_id}}, path: root, courses, teachers, lessons, children, className, location} = props;\r\n    const id = parseInt(param_id);\r\n    const course = _.find(courses, {id});\r\n    if (course) {\r\n        return (\r\n            <Page\r\n                title={`${course.title}`}\r\n                className={`course-overview ${className || ''}`}\r\n                location={location}>\r\n                <CourseOverviewContext.Provider\r\n                    value={{\r\n                        course,\r\n                        teachers,\r\n                        lessons\r\n                    }}>\r\n                    {children}\r\n                </CourseOverviewContext.Provider>\r\n            </Page>\r\n        )\r\n    } else\r\n        return <ErrorPage errorCode={404} message=\"Курс не найден\" link={{url: root}}/>;\r\n};\r\n\r\nexport default {\r\n    Description,\r\n    Teachers,\r\n    Lessons,\r\n    Title,\r\n    Body: CourseOverview\r\n};\r\n","import React from \"react\";\r\nimport {CourseOverviewContext} from \"components/common/CourseOverview\";\r\nimport {BottomTab} from \"components/Page\";\r\nimport Button from \"../../../ui/Button\";\r\nimport _ from \"lodash\";\r\n\r\nconst CoursePriceTab = (props) => {\r\n    const {discount: discountInfo, error, retry} = props;\r\n    const {course: {price: fullPrice, purchased}} = React.useContext(CourseOverviewContext);\r\n    let price, discount, message;\r\n    if (discountInfo) {\r\n        price = discountInfo.discounted_price;\r\n        discount = fullPrice - discountInfo.discounted_price;\r\n        message = discountInfo.message;\r\n    }\r\n    React.useEffect(() => {\r\n        if (window.dispatchEvent)\r\n            window.dispatchEvent(new CustomEvent('scroll'));\r\n    });\r\n    return (\r\n        <BottomTab className=\"course-overview__offer\">\r\n            <div className=\"container layout__bottom-tab-container\">\r\n                <div className=\"row justify-content-end align-items-center\">\r\n                    {purchased ? (\r\n                        <Button active={false}>Куплено</Button>\r\n                    ) : (\r\n                        discountInfo ? (\r\n                            <React.Fragment>\r\n                                {discount > 0 && (\r\n                                    <div className=\"col-auto\">\r\n                                        <div className=\"discount\">{price + discount}₽</div>\r\n                                    </div>\r\n                                )}\r\n                                <div className=\"col-auto\">\r\n                                    <h2 className=\"price\">\r\n                                        {price}₽\r\n                                    </h2>\r\n                                </div>\r\n                                <div className=\"col-auto\">\r\n                                    <Button>Купить</Button>\r\n                                </div>\r\n                            </React.Fragment>\r\n                        ) : (\r\n                            <div className=\"spinner-border\"/>\r\n                        )\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </BottomTab>\r\n    );\r\n};\r\n\r\nexport default CoursePriceTab;\r\n","import React from \"react\";\r\nimport CoverImage from \"./CoverImage\";\r\n\r\nconst VideoCover = ({cover, watchProgress, locked=false, className}) => (\r\n    <CoverImage\r\n        src={cover}\r\n        className={`video-cover ${locked ? 'video-locked' : ''} ${className || ''}`}>\r\n        {watchProgress && (\r\n            <div className=\"video-cover__watch-progress-bar\">\r\n                <div\r\n                    className=\"watch-progress-bar__progress-line\"\r\n                    style={{width: `${watchProgress}%`}}/>\r\n            </div>\r\n        )}\r\n    </CoverImage>\r\n);\r\n\r\nexport default VideoCover;\r\n","import React from 'react';\r\nimport ListItem from \"./ListItem\";\r\nimport VideoCover from \"./VideoCover\";\r\n\r\nexport default function Lesson({lesson, locked=false, link, ...props}) {\r\n    const {name, image_link: cover, description, watchProgress} = lesson;\r\n    return (\r\n        <ListItem\r\n            item={lesson}\r\n            className={`video-class ${locked ? 'disabled' : ''}`}\r\n            title={name}\r\n            description={description}\r\n            preview={(\r\n                <VideoCover\r\n                    cover={cover}\r\n                    className=\"video-class__cover\"\r\n                    locked={locked}\r\n                    watchProgress={!locked && watchProgress}/>\r\n            )}\r\n            key={lesson.id}\r\n            link={locked ? undefined : link}\r\n            {...props}/>\r\n    );\r\n}\r\n","import React from \"react\";\r\nimport Page, {PageContent, PageLoadingPlaceholder} from \"components/Page\";\r\nimport CourseOverview from \"components/common/CourseOverview\";\r\nimport CoursePriceTab from \"./CoursePriceTab\";\r\nimport Lesson from \"components/common/Lesson\";\r\nimport {useShopCatalog, useTeachers, useLessons, useDiscount} from \"store\";\r\n\r\nconst CoursePage = ({path, location, match}) => {\r\n    const {params: {id: courseId}} = match;\r\n    const {catalog, subjects, error, retry} = useShopCatalog();\r\n    const {teachers, error: errorLoadingTeachers, retry: reloadTeachers} = useTeachers();\r\n    const {lessons, error: errorLoadingLessons, retry: reloadLessons} = useLessons(courseId);\r\n    const {discount, error: errorLoadingDiscount, retry: reloadDiscount} = useDiscount(courseId);\r\n    const renderLesson = (lesson, props) => (\r\n        <Lesson\r\n            lesson={lesson}\r\n            selectable={false}\r\n            locked={false}\r\n            key={lesson.id}/>\r\n    );\r\n    if (catalog && teachers && lessons ) {\r\n        return (\r\n            <CourseOverview.Body\r\n                match={match}\r\n                path={path}\r\n                courses={catalog}\r\n                teachers={teachers}\r\n                lessons={lessons}\r\n                location={location}>\r\n                <PageContent parentSection={{name: \"Магазин курсов\"}}>\r\n                    <CourseOverview.Description/>\r\n                    <CourseOverview.Teachers/>\r\n                    <CourseOverview.Lessons renderLesson={renderLesson}/>\r\n                </PageContent>\r\n                <CoursePriceTab\r\n                    discount={discount}\r\n                    error={error}\r\n                    retry={reloadDiscount}/>\r\n            </CourseOverview.Body>\r\n        );\r\n    }\r\n    else {\r\n        return (\r\n            <Page\r\n                location={location}>\r\n                <PageLoadingPlaceholder/>\r\n            </Page>\r\n        );\r\n    }\r\n};\r\n\r\nexport default CoursePage;\r\n","import React from 'react';\r\nimport { Switch, Route } from \"react-router-dom\";\r\nimport ShopCatalogPage from \"./catalog-page\";\r\nimport CoursePage from \"./course-page\";\r\n\r\nexport default function Shop(props) {\r\n    const [selectedCourses, setSelectedCourses] = React.useState(new Set());\r\n    const onCourseSelect = React.useCallback((course) => {\r\n        setSelectedCourses(selectedCourses => {\r\n            if (selectedCourses.has(course))\r\n                return selectedCourses;\r\n            selectedCourses = new Set(selectedCourses);\r\n            selectedCourses.add(course);\r\n            return selectedCourses;\r\n        });\r\n    }, []);\r\n    const onCourseDeselect = React.useCallback((course) => {\r\n        setSelectedCourses(selectedCourses => {\r\n            selectedCourses = new Set(selectedCourses);\r\n            selectedCourses.delete(course);\r\n            return selectedCourses;\r\n        });\r\n    }, []);\r\n    const {match} = props;\r\n    return (\r\n        <Switch>\r\n            <Route path={`${match.path}/:id`} render={(props) => (\r\n                <CoursePage\r\n                    path={match.path}\r\n                    {...props}/>\r\n            )}/>\r\n            <Route exact path={`${match.path}`} render={(props) => (\r\n                <ShopCatalogPage\r\n                    selectedCourses={selectedCourses}\r\n                    onCourseSelect={onCourseSelect}\r\n                    onCourseDeselect={onCourseDeselect}\r\n                    {...props}/>\r\n            )}/>\r\n        </Switch>\r\n    )\r\n}\r\n","import React from \"react\";\r\nimport Countdown from 'react-countdown-now';\r\nimport ScrollBars from \"components/ui/ScrollBars\";\r\nimport CoverImage from \"./CoverImage\";\r\nimport APIRequest from \"api\";\r\n\r\n// const getTimerState = (releaseDate) => {\r\n//     console.log(releaseDate);\r\n//     const total = Math.max(releaseDate - new Date(), 0);\r\n//     const seconds = Math.floor((total / 1000) % 60);\r\n//     const minutes = Math.floor((total / 1000 / 60) % 60);\r\n//     const hours = Math.floor((total / (1000 * 60 * 60)) % 24);\r\n//     const days = Math.floor(total / (1000 * 60 * 60 * 24));\r\n//     return ({\r\n//         isAvailable: total === 0,\r\n//         remainingTime: {\r\n//             total,\r\n//             days,\r\n//             hours,\r\n//             minutes,\r\n//             seconds,\r\n//         }});\r\n// };\r\n//\r\n// function useCountdown(deadline) {\r\n//     const [state, setState] = React.useState(getTimerState(deadline));\r\n//     const timer = React.useRef();\r\n//     React.useEffect(() => {\r\n//         if (deadline > new Date()) {\r\n//             // noinspection JSValidateTypes\r\n//             timer.current = setInterval(() => {\r\n//                 const newState = getTimerState(deadline);\r\n//                 if (newState.isAvailable)\r\n//                     clearInterval(timer.current);\r\n//                 setState(newState);\r\n//             }, 1000);\r\n//         }\r\n//         return () => {clearInterval(timer.current);};\r\n//     }, [deadline]);\r\n//     return state;\r\n// }\r\n\r\nconst WEBINAR_STATE = {\r\n    WAITING: 'WAITING',\r\n    AIRING: 'AIRING',\r\n    ENDED: 'ENDED'\r\n};\r\n\r\nconst getWebinarState = (webinar) => {\r\n    const now = new Date();\r\n    return webinar.date_start > now ? WEBINAR_STATE.WAITING : (now > webinar.date_end ? WEBINAR_STATE.ENDED : WEBINAR_STATE.AIRING);\r\n};\r\n\r\nconst Webinar = ({webinar, courseId}) => {\r\n    const [state, setState] = React.useState(getWebinarState(webinar));\r\n    const onWebinarStart = React.useCallback(() => {\r\n        setState(WEBINAR_STATE.AIRING);\r\n    }, []);\r\n    React.useEffect(() => {\r\n        if (state === WEBINAR_STATE.AIRING) {\r\n            const now = new Date();\r\n            const timeTillEnd = webinar.date_end.getTime() - now.getTime();\r\n            const timeout = setTimeout(() => {\r\n                setState(WEBINAR_STATE.ENDED);\r\n            }, timeTillEnd);\r\n            return () => {\r\n                clearTimeout(timeout);\r\n            };\r\n        }\r\n    }, [state, webinar]);\r\n    const onClick = React.useCallback(async (event) => {\r\n        if (state !== WEBINAR_STATE.AIRING) {\r\n            event.preventDefault();\r\n            return;\r\n        }\r\n        const newWindow = window.open();\r\n        const response = await APIRequest.get(`/courses/${webinar.course_id || courseId}/schedule/link`);\r\n        newWindow.location = response.link;\r\n    }, [state, webinar, courseId]);\r\n    if (state === WEBINAR_STATE.ENDED) {\r\n        return null;\r\n    }\r\n    const isAiring = state === WEBINAR_STATE.AIRING;\r\n    const renderCountdown = (remainingTime) => {\r\n        const {formatted: {days, hours, minutes, seconds}, completed} = remainingTime;\r\n        return completed ? (\r\n            <div className=\"d-flex\"><span>В</span><span>&nbsp;</span><span>эфире</span></div> //fixes a big on mobile\r\n        ) : (\r\n            <div className=\"countdown\">\r\n                <span>{days}</span>:\r\n                <span>{hours}</span>:\r\n                <span>{minutes}</span>:\r\n                <span>{seconds}</span>\r\n            </div>\r\n        );\r\n    };\r\n    return (\r\n        <div\r\n            onClick={onClick}\r\n            className={`webinar-schedule__webinar d-flex ${isAiring ? '' : 'webinar-schedule__webinar-locked'}`}>\r\n            <div className=\"container d-flex overflow-hidden\">\r\n                <div className=\"row flex-nowrap flex-grow-1\">\r\n                    <div className=\"col-auto d-flex align-items-center webinar-schedule__webinar-status\">\r\n                        {isAiring ? <i className=\"fas fa-unlock\"/> : <i className=\"fas fa-lock\"/>}\r\n                    </div>\r\n                    <div className=\"col d-flex flex-shrink-0 p-0\">\r\n                        <CoverImage\r\n                            className=\"webinar-schedule__webinar-poster\"\r\n                            src={webinar.image_link}/>\r\n                        <div className=\"webinar-schedule__webinar-title d-flex flex-column justify-content-center p-2\">\r\n                            <div>{webinar.subject_name}</div>\r\n                            <div>{webinar.name}</div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"col-auto d-flex align-items-center webinar-schedule__webinar-countdown\">\r\n                        <Countdown\r\n                            date={webinar.date_start}\r\n                            className=\"countdown\"\r\n                            renderer={renderCountdown}\r\n                            onComplete={onWebinarStart}>\r\n                        </Countdown>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst WebinarSchedule = ({schedule}) => {\r\n    if (schedule.length === 0)\r\n        return null;\r\n    return (\r\n        <div className=\"layout__content-block webinar-schedule\">\r\n            <ScrollBars\r\n                autoHeight\r\n                autoHeightMax=\"unset\"\r\n                hideVerticalScrollbar\r\n                hideHorizontalScrollbar\r\n                hideTracksWhenNotNeeded\r\n                style={{height: '100%'}}\r\n                className=\"scrollbars\">\r\n                <div className=\"d-flex flex-nowrap\">\r\n                    {schedule.map((webinar) => (\r\n                        <Webinar webinar={webinar} key={webinar.id}/>\r\n                    ))}\r\n                </div>\r\n            </ScrollBars>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default WebinarSchedule;\r\n","import React from \"react\";\r\nimport CourseCatalog from \"components/common/CourseCatalog\";\r\nimport Course from \"components/common/Course\";\r\nimport Button from \"components/ui/Button\";\r\nimport Page, {PageContent, PageLoadingPlaceholder} from \"components/Page\";\r\nimport {LEARNING_STATUS} from \"definitions/constants\";\r\nimport {useUpcomingWebinars, useUserCourses} from \"store\";\r\nimport WebinarSchedule from \"components/common/WebinarSchedule\";\r\n\r\nconst CatalogPage = ({location}) => {\r\n    const {courses, subjects, error, retry} = useUserCourses();\r\n    const {webinars, error: errorLoadingWebinars, retry: reloadWebinars} = useUpcomingWebinars();\r\n    const renderCourse = React.useCallback((course, props) => (\r\n        <Course\r\n            course={course}\r\n            selectable\r\n            online={false}\r\n            key={course.id}\r\n            {...props}>\r\n            {course.status === LEARNING_STATUS.learning\r\n                ? <Button className=\"course__select-btn\">Изучать</Button>\r\n                : <Button className=\"course__select-btn\" active={false}>Пройден</Button>}\r\n        </Course>\r\n    ), []);\r\n    return (\r\n        <Page\r\n            className=\"user-courses\"\r\n            location={location}\r\n            title=\"Мои курсы\">\r\n            {!(courses && subjects && webinars) ? (\r\n                    <PageLoadingPlaceholder/>\r\n                ) : (\r\n                <CourseCatalog.Body\r\n                    courses={courses}\r\n                    subjects={subjects}>\r\n                    <PageContent>\r\n                        <CourseCatalog.Filter/>\r\n                        <WebinarSchedule schedule={webinars}/>\r\n                        <CourseCatalog.Catalog\r\n                            renderCourse={renderCourse}/>\r\n                    </PageContent>\r\n                </CourseCatalog.Body>\r\n            )\r\n            }\r\n        </Page>\r\n    );\r\n};\r\n\r\nexport default CatalogPage;\r\n","import React from \"react\";\r\nimport Page, {PageContent, PageLoadingPlaceholder} from \"components/Page\";\r\nimport CourseOverview from \"components/common/CourseOverview\";\r\nimport Lesson from \"components/common/Lesson\";\r\nimport Button from \"components/ui/Button\";\r\nimport {renderDate} from \"definitions/helpers\";\r\nimport {useCourseWebinars, useLessons, useUpcomingWebinars, useUserCourses} from \"store\";\r\nimport WebinarSchedule from \"../../../common/WebinarSchedule\";\r\n\r\nconst CoursePage = ({path, match, location, ...props}) => {\r\n    const {params: {id: courseId}} = match;\r\n    const {courses, error, retry} = useUserCourses();\r\n    const {webinars, error: errorLoadingWebinars, retry: reloadWebinars} = useCourseWebinars(courseId);\r\n    // const {teachers, error: errorLoadingTeachers, retry: reloadTeachers} = useTeachers();\r\n    const {lessons, error: errorLoadingLessons, retry: reloadLessons} = useLessons(courseId);\r\n    const renderLesson = (lesson, props) => {\r\n        const {date, id, locked} = lesson;\r\n        return (\r\n            <Lesson\r\n                lesson={lesson}\r\n                locked={locked}\r\n                selectable={!locked}\r\n                key={id}\r\n                {...props}>\r\n                {/*<div className=\"list__item-action-info\">{renderDate(date, renderDate.shortDate)}</div>*/}\r\n                {!locked\r\n                    ? <Button>Изучать</Button>\r\n                    : <Button active={false}>Скоро</Button>}\r\n            </Lesson>\r\n        );\r\n    };\r\n    if (courses && lessons && webinars) {\r\n        return (\r\n            <CourseOverview.Body\r\n                match={match}\r\n                path={path}\r\n                courses={courses}\r\n                lessons={lessons}\r\n                location={location}>\r\n                <PageContent parentSection={{name: \"Мои курсы\"}}>\r\n                    <CourseOverview.Title/>\r\n                    <WebinarSchedule\r\n                        schedule={webinars}\r\n                        courseId={courseId}/>\r\n                    <CourseOverview.Lessons renderLesson={renderLesson}/>\r\n                </PageContent>\r\n            </CourseOverview.Body>\r\n        );\r\n    } else {\r\n        return (\r\n            <Page\r\n                location={location}>\r\n                <PageLoadingPlaceholder/>\r\n            </Page>\r\n        );\r\n    }\r\n};\r\n\r\nexport default CoursePage;\r\n","import React, { Component, Fragment } from 'react';\r\n\r\nclass Tooltip extends Component {\r\n    componentDidMount() {\r\n    }\r\n\r\n    render() {\r\n        let child = React.Children.only(this.props.children);\r\n        let position = 'pos-' + this.props.position;\r\n        return React.cloneElement(child, {\r\n            className: (child.props.className ? child.props.className + ' tooltip ' : 'tooltip ') + position,\r\n            children: (\r\n                <Fragment>\r\n                    {child.props.children}\r\n                    <div className=\"tooltip-arrow\"/>\r\n                    <div className=\"tooltip-block\">\r\n                        {\r\n                            this.props.content\r\n                        }\r\n                    </div>\r\n                </Fragment>\r\n            )\r\n        });\r\n    }\r\n}\r\n\r\nexport default Tooltip;\r\n","import React from 'react';\r\nimport {useUpdateEffect} from \"hooks/common\";\r\nimport {CSSTransition, SwitchTransition} from \"react-transition-group\";\r\nimport Tooltip from \"./Tooltip\";\r\n\r\nexport const LOADING_STATE = {\r\n    PENDING: 'pending',\r\n    LOADING: 'loading',\r\n    LOADED: 'loaded',\r\n    SUCCESS: 'success',\r\n    DONE: 'done',\r\n    REJECTED: 'rejected',\r\n    ERROR: 'error'\r\n};\r\n\r\nexport function useLoadingState(loading, done, rejected, error) {\r\n    const [state, setState] = React.useState(loading === null || done\r\n        ? LOADING_STATE.DONE\r\n        : (rejected\r\n            ? LOADING_STATE.REJECTED\r\n            : LOADING_STATE.LOADING));\r\n    useUpdateEffect(() => {\r\n        if (loading === false) {\r\n            setState(LOADING_STATE.LOADED);\r\n        } else if (loading === true) {\r\n            setState(LOADING_STATE.LOADING);\r\n        }\r\n    }, [loading]);\r\n    useUpdateEffect(() => {\r\n        if (state === LOADING_STATE.LOADED && done) {\r\n            setState(LOADING_STATE.SUCCESS);\r\n        }\r\n        else if (state === LOADING_STATE.SUCCESS) {\r\n            const timeout = setTimeout(() => {\r\n                setState(LOADING_STATE.DONE);\r\n            }, 1000);\r\n            return () => {\r\n                clearTimeout(timeout);\r\n            };\r\n        }\r\n    }, [state, done]);\r\n    useUpdateEffect(() => {\r\n        if (error)\r\n            setState(LOADING_STATE.ERROR);\r\n    }, [error]);\r\n    useUpdateEffect(() => {\r\n        if (rejected)\r\n            setState(LOADING_STATE.REJECTED);\r\n    }, [rejected]);\r\n    return state;\r\n}\r\n\r\nexport const LoadingIndicator = ({state, onClick, errorMessage}) => {\r\n    const icon = (state === LOADING_STATE.LOADED && \"spinner-border\")\r\n        || (state === LOADING_STATE.SUCCESS && \"icon-check\")\r\n        || (state === LOADING_STATE.ERROR && \"icon-reload\")\r\n        || (state === LOADING_STATE.REJECTED && \"icon-alert\")\r\n        || \"spinner-border\";\r\n    return (\r\n        <SwitchTransition>\r\n            {state !== LOADING_STATE.DONE ? (\r\n                <CSSTransition\r\n                    key={icon}\r\n                    appear={true}\r\n                    classNames=\"animation-scale\"\r\n                    timeout={300}>\r\n                    <div\r\n                        className=\"file__state-indicator\"\r\n                        onClick={onClick}>\r\n                        <Tooltip content={errorMessage}>\r\n                            <i\r\n                                className={icon}/>\r\n                        </Tooltip>\r\n                    </div>\r\n                </CSSTransition>\r\n            ) : null}\r\n        </SwitchTransition>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport Button from \"./Button\";\r\nimport {downloadFile} from \"../../definitions/helpers\";\r\nimport {LoadingIndicator, useLoadingState} from \"./LoadingIndicator\";\r\n\r\nconst File = ({\r\n                  file: {name, downloadName, url},\r\n                  error=null,\r\n                  rejected=null,\r\n                  loading=null,\r\n                  done=true,\r\n                  deletable=false,\r\n                  onDelete,\r\n                  onIndicatorClick,\r\n                  className,\r\n                  errorMessage,\r\n                  ...props\r\n              }) => {\r\n    const downloadCallback = React.useCallback(() => {\r\n        if (url)\r\n            downloadFile(url, downloadName || name);\r\n    }, [url, name, downloadName]);\r\n    const isUpload = loading !== null;\r\n    const state = useLoadingState(loading !== null ? loading < 100 : null, done, rejected, error);\r\n    return (\r\n        <div className={`file file-${state} ${className || ''}`}>\r\n            <Button\r\n                neutral\r\n                className=\"file__btn\"\r\n                icon={deletable\r\n                    ? <i className=\"icon-close file__action-btn file__delete-btn animated__action-button\"/>\r\n                    : <i className=\"icon-download file__action-btn file__download-btn animated__action-button\"/>}\r\n                iconAction={deletable ? onDelete : undefined}\r\n                onClick={downloadCallback}\r\n                {...props}>\r\n                {loading !== null && <div className=\"file__loading-progress\" style={{width: `${loading}%`}}/>}\r\n                <i className=\"file__icon far fa-file-alt\"/>\r\n                <span\r\n                    className=\"file__name\"\r\n                    title={name}>\r\n                {name}\r\n            </span>\r\n            </Button>\r\n            {isUpload && (\r\n                <LoadingIndicator\r\n                    onClick={onIndicatorClick}\r\n                    state={state}\r\n                    errorMessage={errorMessage}/>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default File;\r\n\r\n","import React from \"react\";\r\n\r\nconst VideoPlayer = ({video_link}) => (\r\n    <div className=\"video-player\">\r\n        <iframe\r\n            className=\"video-player__video\"\r\n            src={`https://player.vimeo.com/video/${video_link}?color=fa9346&title=0&byline=0&portrait=0`}\r\n            frameBorder=\"0\"\r\n            allow=\"autoplay; fullscreen\"\r\n            allowFullScreen/>\r\n    </div>\r\n);\r\n\r\nexport default VideoPlayer;\r\n","import {CSSTransition} from \"react-transition-group\";\r\nimport ReactDOM from 'react-dom';\r\n\r\n//hack to get context because lib doesn't export it properly and import doesn't work\r\n// const TransitionGroupContext = Transition.contextType;\r\n//\r\n// const getClassNames = (classNames, type) => {\r\n//     const isStringClassNames = typeof classNames === 'string';\r\n//     const prefix = isStringClassNames && classNames\r\n//         ? `${classNames}-`\r\n//         : '';\r\n//\r\n//     let baseClassName = isStringClassNames\r\n//         ? `${prefix}${type}`\r\n//         : classNames[type];\r\n//\r\n//     let activeClassName = isStringClassNames\r\n//         ? `${baseClassName}-active`\r\n//         : classNames[`${type}Active`];\r\n//\r\n//     let doneClassName = isStringClassNames\r\n//         ? `${baseClassName}-done`\r\n//         : classNames[`${type}Done`];\r\n//\r\n//     return {\r\n//         baseClassName,\r\n//         activeClassName,\r\n//         doneClassName\r\n//     };\r\n// };\r\n//\r\n// function getClassName(classNames, type, phase) {\r\n//     // console.log(arguments);\r\n//     let className = getClassNames(classNames, type)[`${phase}ClassName`];\r\n//\r\n//     if (type === 'appear' && phase === 'done') {\r\n//         className += ` ${getClassNames(classNames, 'enter').doneClassName}`;\r\n//     }\r\n//\r\n//     return className;\r\n// }\r\n//\r\n// const State = {\r\n//     entering: 'entering',\r\n//     entered:  'entered',\r\n//     exiting:  'exiting',\r\n//     exited: 'exited'\r\n// };\r\n//\r\n// const StableCSSTransition = ({classNames='', appear, children, ...props}) => {\r\n//     const isMounting = !useIsMounted();\r\n//     const context = React.useContext(TransitionGroupContext);\r\n//         const appearingRef = React.useRef(context ? context.isMounting : appear);\r\n//     const prevStateRef = React.useRef(null);\r\n//     const appliedClassNamesRef = React.useRef('');\r\n//     return (\r\n//         <Transition\r\n//             // mountOnEnter\r\n//             // unmountOnExit\r\n//             {...props}\r\n//             appear={appear}>\r\n//             {(state) => {\r\n//                 const appearing = appearingRef.current;\r\n//                 const prevState = prevStateRef.current;\r\n//                 const animateMounting = context != null;\r\n//\r\n//                 console.log(prevState, '->', state);\r\n//                 let className = appliedClassNamesRef.current;\r\n//                 if (state === State.exited) {\r\n//                     if (prevState !== State.exiting) {\r\n//                         if (appearing) {\r\n//                             className = getClassName(classNames, 'appear', 'base');\r\n//                         }\r\n//                         else if (prevState !== null || animateMounting) {\r\n//                             className = getClassName(classNames, 'enter', 'base');\r\n//                         }\r\n//                     }\r\n//                     else {\r\n//                         className = getClassName(classNames, 'exit', 'done');\r\n//                     }\r\n//                 }\r\n//                 else if (state === State.exiting) {\r\n//                     className = getClassName(classNames, 'exit', 'active');\r\n//                 }\r\n//                 else if (state === State.entered) {\r\n//                     if (prevState === State.entered) {\r\n//                         className = getClassName(classNames, 'exit', 'base');\r\n//                     }\r\n//                     else if (prevState !== null || animateMounting) {\r\n//                         className = getClassName(classNames, appearing ? 'appear' : 'enter', 'done');\r\n//                     }\r\n//                     appearingRef.current = false;\r\n//                 }\r\n//                 else if (state === State.entering || animateMounting) {\r\n//                     className = getClassName(classNames, appearing ? 'appear' : 'enter', 'active');\r\n//                 }\r\n//                 prevStateRef.current = state;\r\n//                 appliedClassNamesRef.current = className;\r\n//                 console.log(className);\r\n//                 const child = React.Children.only(children);\r\n//                 return React.cloneElement(child, {\r\n//                     className: child.props.className ? `${child.props.className} ${className}` : className\r\n//                 });\r\n//             }}\r\n//         </Transition>\r\n//     );\r\n// };\r\n\r\nclass StableCSSTransition extends CSSTransition {\r\n    type = null;\r\n    phase = null;\r\n\r\n    addClass(node, type, phase) {\r\n        super.addClass(node, type, phase);\r\n        this.type = type;\r\n        this.phase = phase;\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        if (this.appliedClasses[this.type] && this.appliedClasses[this.type][this.phase])\r\n            super.addClass(ReactDOM.findDOMNode(this), this.type, this.phase);\r\n    }\r\n}\r\n\r\nexport default StableCSSTransition;\r\n","import React from 'react';\r\nimport _ from 'lodash';\r\nimport Dropzone from \"react-dropzone-uploader\";\r\nimport {TransitionGroup} from \"react-transition-group\";\r\nimport {useRefValue} from \"hooks/common\";\r\nimport Auth from 'definitions/auth';\r\nimport {API_ROOT} from \"api\";\r\nimport {getAuthHeader, trimFileExtension} from \"definitions/helpers\";\r\nimport StableCSSTransition from \"components/common/StableCSSTransition\";\r\nimport {LOADING_STATE, LoadingIndicator, useLoadingState} from \"./LoadingIndicator\";\r\nimport File from \"./File\";\r\nimport Button from \"./Button\";\r\n\r\nimport 'react-dropzone-uploader/dist/styles.css';\r\n\r\nconst FILE_STATUS = {\r\n    rejected_file_type: 'rejected_file_type',\r\n    rejected_max_files: 'rejected_max_files',\r\n    preparing: 'preparing',\r\n    error_file_size: 'error_file_size',\r\n    error_validation: 'error_validation',\r\n    ready: 'ready',\r\n    started: 'started',\r\n    getting_upload_params: 'getting_upload_params',\r\n    error_upload_params: 'error_upload_params',\r\n    uploading: 'uploading',\r\n    exception_upload: 'exception_upload',\r\n    aborted: 'aborted',\r\n    restarted: 'restarted',\r\n    removed: 'removed',\r\n    error_upload: 'error_upload',\r\n    headers_received: 'headers_received',\r\n    done: 'done',\r\n};\r\nconst FileInputContext = React.createContext(null);\r\nconst isFileReady = f => f.meta.status === 'done';\r\nconst allFilesReady = files => files.every(f => isFileReady(f));\r\nconst getUploadParams = () => {\r\n    // return { url: 'https://httpbin.org/post' };\r\n    if (Auth.user) {\r\n        return {\r\n            url: `${API_ROOT}/files/`,\r\n            headers: getAuthHeader(Auth.user.uid, Auth.user.hash)\r\n        };\r\n    }\r\n    else\r\n        throw new Error('User not logged in');\r\n};\r\nconst getFileProp = ({original_file_name, id_file_name}) => ({\r\n    name: original_file_name,\r\n    downloadName: `${trimFileExtension(original_file_name)}_${id_file_name}`,\r\n    url: `${API_ROOT}/files/${id_file_name}?disp=attachment`\r\n});\r\n\r\nconst Input = (props) => {\r\n    const {\r\n        className,\r\n        style,\r\n        getFilesFromEvent,\r\n        accept,\r\n        multiple,\r\n        disabled,\r\n        onFiles,\r\n        files,\r\n        content,\r\n        extra: { maxFiles }\r\n    } = props;\r\n    const onChange = React.useCallback(async e => {\r\n        const target = e.target;\r\n        const chosenFiles = await getFilesFromEvent(e);\r\n        onFiles(chosenFiles);\r\n        target.value = null\r\n    }, [getFilesFromEvent, onFiles]);\r\n    const isActive = files.length < maxFiles && !disabled;\r\n    return (\r\n        <Button\r\n            tag=\"label\"\r\n            active={isActive}\r\n            icon={<i className=\"icon-add\"/>}>\r\n            {content}\r\n            <input\r\n                className={className}\r\n                style={style}\r\n                type=\"file\"\r\n                accept={accept}\r\n                multiple={multiple}\r\n                disabled={!isActive}\r\n                onChange={isActive ? onChange : null}\r\n            />\r\n        </Button>\r\n    );\r\n};\r\n\r\nconst Preview = (props) => {\r\n    const {\r\n        fileWithMeta: { cancel, remove, restart, xhr },\r\n        meta: { name = '', percent = 0, status},\r\n        isUpload,\r\n        canRemove,\r\n        className\r\n    } = props;\r\n    const [getResponse, setResponse] = useRefValue(null);\r\n    if (!getResponse() && xhr && xhr.responseText) {\r\n        try {\r\n            const {original_file_name, file_link, id_file_name} = JSON.parse(xhr.responseText);\r\n            if (!(original_file_name && file_link && id_file_name))\r\n                throw new Error('Incorrect response');\r\n            setResponse({\r\n                original_file_name,\r\n                file_link,\r\n                id_file_name\r\n            });\r\n        }\r\n        catch (e) {\r\n            console.log(e);\r\n        }\r\n    }\r\n    const response = getResponse();\r\n    const deleteCallback = React.useCallback(() => {\r\n        if (isUpload && !(status === 'done' || status === 'headers_received')) {\r\n            cancel();\r\n        }\r\n        remove();\r\n    }, [cancel, remove, isUpload, status]);\r\n    const hasError = _.startsWith(status, 'error') || _.startsWith(status, 'exception');\r\n    const isRejected = status === FILE_STATUS.error_file_size ? true : undefined;\r\n    const loading = isUpload ? status === 'done' || status === 'headers_received' ? 100 : percent : null;\r\n    const isDone = status === 'done';\r\n    return (\r\n        <File\r\n            file={response ? getFileProp(response) : ({name})}\r\n            loading={loading}\r\n            className={className}\r\n            done={isDone}\r\n            rejected={hasError && isRejected ? true : undefined}\r\n            error={hasError}\r\n            errorMessage={hasError && isRejected ? 'Файл превышает максимальный допустимый размер' : undefined}\r\n            deletable={canRemove}\r\n            onDelete={deleteCallback}\r\n            onIndicatorClick={hasError && !isRejected ? restart : undefined}/>\r\n    );\r\n};\r\n\r\nconst SubmitButton = (props) => {\r\n    const {submitting, hasChanged} = React.useContext(FileInputContext) || ({});\r\n    const { disabled, onSubmit, files, content } = props;\r\n    const isDisabled = !allFilesReady(files) || disabled;\r\n\r\n    const submitCallback = React.useCallback(() => {\r\n        onSubmit(files);\r\n    }, [onSubmit, files]);\r\n\r\n    const state = useLoadingState(submitting, submitting === false);\r\n    console.log(state);\r\n    return (\r\n        <StableCSSTransition\r\n            in={onSubmit != null && (hasChanged || state !== LOADING_STATE.DONE)}\r\n            appear\r\n            mountOnEnter\r\n            unmountOnExit\r\n            classNames=\"animation-fade\"\r\n            timeout={300}>\r\n            <React.Fragment>\r\n                <Button\r\n                    active={!isDisabled}\r\n                    icon={\r\n                        hasChanged\r\n                            ? (<i className=\"icon-upload\"/>)\r\n                            : (<LoadingIndicator state={state}/>)\r\n                    }\r\n                    onClick={submitCallback}>\r\n                    {hasChanged ? content : 'Сохранено'}\r\n                </Button>\r\n            </React.Fragment>\r\n        </StableCSSTransition>\r\n    );\r\n};\r\n\r\nconst Layout = ({input, previews=[], submitButton, dropzoneProps, files, extra: { maxFiles } }) => {\r\n    const context = React.useContext(FileInputContext);\r\n    const {preloadedFiles=[], deletePreloadedFile, disabled} = context || ({});\r\n    const { ref } = dropzoneProps;\r\n    return (\r\n        <div\r\n            ref={ref}\r\n            className=\"file-input\">\r\n            {/*<StableCSSTransition*/}\r\n            {/*    in={previews.length > 0 || preloadedFiles.length > 0}*/}\r\n            {/*    mountOnEnter*/}\r\n            {/*    unmountOnExit*/}\r\n            {/*    classNames=\"animation-fade\"*/}\r\n            {/*    timeout={300}>*/}\r\n            <h4 className=\"file-input__files-title\">Загруженные файлы</h4>\r\n            {/*</StableCSSTransition>*/}\r\n            <TransitionGroup className=\"file-container\">\r\n                {\r\n                    preloadedFiles && (\r\n                        preloadedFiles.map((file) => {\r\n                            const {id_file_name} = file;\r\n                            const deleteCallback = () => {deletePreloadedFile(file);};\r\n                            return (\r\n                                <StableCSSTransition\r\n                                    classNames=\"animation-fade\"\r\n                                    timeout={300}\r\n                                    key={id_file_name}>\r\n                                    <File\r\n                                        file={getFileProp(file)}\r\n                                        done={true}\r\n                                        deletable={!disabled}\r\n                                        onDelete={deleteCallback}/>\r\n                                </StableCSSTransition>\r\n                            );\r\n                        }\r\n                    ))\r\n                }\r\n                {previews.map((preview, i) => (\r\n                    <StableCSSTransition\r\n                        classNames=\"animation-fade\"\r\n                        timeout={300}\r\n                        key={preview.props.meta.id}>\r\n                        {preview}\r\n                    </StableCSSTransition>\r\n                ))}\r\n            </TransitionGroup>\r\n            <div className=\"file-input__controls\">\r\n                {input}\r\n                {submitButton}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst getCallbackFiles = (files, preloadedFiles) => {\r\n    if (!allFilesReady(files))\r\n        return null;\r\n    else\r\n        return _.concat(preloadedFiles, files.map(({xhr}) => JSON.parse(xhr.responseText)));\r\n};\r\n\r\n//TODO: check disabled on capturing phase of click\r\nconst FileInput = (props) => {\r\n    let {\r\n        initialFiles=[],\r\n        inputContent=\"Загрузить файл\",\r\n        onChange,\r\n        onSubmit,\r\n        maxFiles=5,\r\n        maxSizeBytes=1024 * 1024 * 4,\r\n        accept,\r\n        isDisabled=false,\r\n        ...otherProps\r\n    } = props;\r\n\r\n    const [preloadedFiles, setPreloadedFiles] = React.useState(initialFiles);\r\n    const [hasChanged, setChanged] = React.useState(false);\r\n    const [submitting, setSubmitting] = React.useState(null);\r\n    const [getInputFiles, setInputFiles] = useRefValue([]);\r\n\r\n    const deletePreloadedFile = React.useCallback((file) => {\r\n        const newPreloadedFiles = preloadedFiles.filter(item => item !== file);\r\n        setChanged(true);\r\n        setPreloadedFiles(newPreloadedFiles);\r\n        onChange && onChange(getCallbackFiles(getInputFiles(), newPreloadedFiles));\r\n    }, [preloadedFiles, onChange, getInputFiles]);\r\n\r\n    const handleChangeStatus = React.useCallback(({meta, ...file}, status, files) => {\r\n        console.log(status, meta, _.cloneDeep(files));\r\n        setChanged(true);\r\n        setInputFiles(files);\r\n        onChange && onChange(true, getCallbackFiles(files, preloadedFiles));\r\n    }, [onChange, preloadedFiles, setInputFiles]);\r\n\r\n    const handleSubmit = React.useCallback(async (files) => {\r\n        console.log(files.map(f => f.meta));\r\n        if (onSubmit) {\r\n            const filesToSubmit = getCallbackFiles(files, preloadedFiles);\r\n            const returnValue = onSubmit(filesToSubmit);\r\n            if (returnValue instanceof Promise) {\r\n                setSubmitting(true);\r\n                try {\r\n                    await returnValue;\r\n                    setChanged(false);\r\n                    onChange && onChange(false, filesToSubmit);\r\n                }\r\n                finally {\r\n                    setSubmitting(false);\r\n                }\r\n            }\r\n        }\r\n    }, [onSubmit, preloadedFiles]);\r\n\r\n    maxFiles = preloadedFiles ? maxFiles - preloadedFiles.length : maxFiles;\r\n    const disabled = typeof isDisabled === 'function' ? isDisabled() : isDisabled;\r\n    return (\r\n        <FileInputContext.Provider\r\n            value={{\r\n                preloadedFiles,\r\n                deletePreloadedFile,\r\n                hasChanged,\r\n                disabled,\r\n                submitting\r\n            }}>\r\n            <Dropzone\r\n                inputContent={inputContent}\r\n                submitButtonContent={'Сохранить'}\r\n                {...otherProps}\r\n                getUploadParams={getUploadParams}\r\n                onChangeStatus={handleChangeStatus}\r\n                onSubmit={onSubmit && handleSubmit}\r\n                canCancel={false}\r\n                SubmitButtonComponent={SubmitButton}\r\n                LayoutComponent={Layout}\r\n                InputComponent={Input}\r\n                PreviewComponent={Preview}\r\n                maxFiles={maxFiles}\r\n                maxSizeBytes={maxSizeBytes}\r\n                accept={accept}\r\n                classNames={{preview: ''}}\r\n                disabled={isDisabled}\r\n            />\r\n        </FileInputContext.Provider>\r\n    )\r\n};\r\n\r\nexport default FileInput;\r\n\r\n\r\n","import React from 'react';\r\nimport {Prompt} from \"react-router-dom\";\r\n\r\nconst NavigationBlocker = () => {\r\n    const unloadCallback = React.useCallback((event) => {\r\n        // Cancel the event as stated by the standard.\r\n        event.preventDefault();\r\n        // Chrome requires returnValue to be set.\r\n        event.returnValue = '';\r\n    }, []);\r\n    React.useEffect(() => {\r\n        window.addEventListener('beforeunload', unloadCallback);\r\n        return () => {\r\n            window.removeEventListener('beforeunload', unloadCallback);\r\n        };\r\n    }, [unloadCallback]);\r\n    return (\r\n        <Prompt\r\n            message='У вас есть несохраненные изменения, покинуть страницу?'\r\n        />\r\n    );\r\n};\r\n\r\nexport default NavigationBlocker;\r\n","import React from \"react\";\r\nimport FileInput from \"components/ui/FileInput\";\r\nimport APIRequest from \"api\";\r\nimport NavigationBlocker from \"components/common/NavigationBlocker\";\r\nimport {useHomework} from \"store\";\r\n\r\nconst HomeworkLoader = ({homework, deadline, lessonId}) => {\r\n    const isHomeworkSubmissionClosed = React.useCallback(() => deadline && new Date() >= deadline, [deadline]);\r\n    const [hasChanges, setChanges] = React.useState(false);\r\n    const onChange = React.useCallback((files) => {\r\n        console.log('files changed', files);\r\n        setChanges(true);\r\n    }, []);\r\n    const onSubmit = React.useCallback(async (files) => {\r\n        console.log('files submitted', files);\r\n        const file = files[0] ? files[0].id_file_name : null;\r\n        //TODO: add error alert\r\n        return APIRequest({\r\n            url: `/lessons/${lessonId}/homeworks/pupil`,\r\n            method: file ? 'PUT' : 'DELETE',\r\n            data: {\r\n                file\r\n            }\r\n        }).then(() => {\r\n            setChanges(false);\r\n        });\r\n        // return Promise.resolve();\r\n    }, [homework, lessonId, setChanges]);\r\n    return (\r\n        <div className=\"submission\">\r\n            {hasChanges && <NavigationBlocker/>}\r\n            <FileInput\r\n                maxFiles={1}\r\n                accept=\"image/*,audio/*,video/*\"\r\n                initialFiles={homework.files}\r\n                onChange={onChange}\r\n                onSubmit={onSubmit}\r\n                isDisabled={isHomeworkSubmissionClosed}/>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default HomeworkLoader;\r\n","import React from \"react\";\r\nimport File from \"components/ui/File\";\r\nimport VideoPlayer from \"components/common/VideoPlayer\";\r\nimport {renderDate} from \"definitions/helpers\";\r\nimport HomeworkLoader from \"./HomeworkLoader\";\r\n\r\nconst LessonView = ({lesson: {id, name, image_link: cover, video_link: video, description, assignment}, homework}) => {\r\n    return (\r\n        <div className=\"col-12 col-lg layout__content-block lesson-page__current-lesson\">\r\n            <div className=\"block-container video-container\">\r\n                <VideoPlayer video_link={video}/>\r\n            </div>\r\n            <div className=\"block-container description-container\">\r\n                <h2>{name}</h2>\r\n                <div className=\"description-text\">{description}</div>\r\n            </div>\r\n            {assignment && (\r\n                <div className=\"block-container hw-container\">\r\n                    <h3>Домашнее задание</h3>\r\n                    <div className=\"assignment\">\r\n                        {assignment.files && (\r\n                            <div className=\"assignment__files file-container\">\r\n                                {assignment.files.map((assignment, i) => (\r\n                                    <File file={assignment} key={i}/>\r\n                                ))}\r\n                            </div>\r\n                        )}\r\n                        {assignment.description && <div className=\"description-text\">{assignment.description}</div>}\r\n                        {assignment.deadline &&\r\n                        <div className=\"assignment__deadline\">Дедлайн: {renderDate(assignment.deadline, renderDate.date)}</div>}\r\n                    </div>\r\n                    <HomeworkLoader\r\n                        homework={homework}\r\n                        deadline={assignment.deadline}\r\n                        lessonId={id}/>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default LessonView;\r\n","import React from \"react\";\r\nimport _ from \"lodash\";\r\nimport Page, {PageContent, PageLoadingPlaceholder} from \"components/Page\";\r\nimport ErrorPage from \"components/ErrorPage\";\r\nimport Lesson from \"components/common/Lesson\";\r\nimport List from \"components/common/List\";\r\nimport LessonView from \"./LessonView\";\r\nimport {useHomework, useLessons, useUserCourses} from \"store\";\r\n\r\nconst LessonPage = (props) => {\r\n    const {match: {params: {courseId: param_course, lessonId: param_lesson}}, location} = props;\r\n    const courseId = parseInt(param_course);\r\n    const lessonId = parseInt(param_lesson);\r\n\r\n    const {courses, error, retry} = useUserCourses();\r\n    // const {teachers, error: errorLoadingTeachers, retry: reloadTeachers} = useTeachers();\r\n    const {lessons, error: errorLoadingLessons, retry: reloadLessons} = useLessons(courseId);\r\n    const {homework, error: errorLoadingHomework, retry: reloadHomework} = useHomework(lessonId);\r\n    const renderLesson = (lesson) => {\r\n        const {id, locked} = lesson;\r\n        return (\r\n            <Lesson\r\n                lesson={lesson}\r\n                locked={locked}\r\n                selectable={!locked}\r\n                key={id}\r\n                link={`../${lesson.id}/`}>\r\n            </Lesson>\r\n        );\r\n    };\r\n\r\n    if (courses && lessons && homework) {\r\n        const course = _.find(courses, {id: courseId});\r\n        const selectedLesson = (course && _.find(lessons, {id: lessonId})) || null;\r\n        if (selectedLesson && !selectedLesson.locked) {\r\n            let nextVideo = lessons[selectedLesson.num];\r\n            if (!nextVideo || nextVideo.locked)\r\n                nextVideo = null;\r\n            const otherLessons = _.sortBy(lessons.filter(lesson => (\r\n                lesson.id !== selectedLesson.id && (nextVideo ? lesson.id !== nextVideo.id : true\r\n                ))), 'num');\r\n            return (\r\n                <Page title={`${selectedLesson.title}`} className=\"lesson-page\" location={location}>\r\n                    <PageContent parentSection={{name: course.name}}>\r\n                        <div className=\"layout__content-block\">\r\n                            <div className=\"container p-lg-0\">\r\n                                <div className=\"row\">\r\n                                    <LessonView lesson={selectedLesson} homework={homework}/>\r\n                                    <div className=\"col-12 col-lg-auto layout__content-block lesson-page__other-lessons\">\r\n                                        {nextVideo && <h3>Следующее занятие</h3>}\r\n                                        {nextVideo && (\r\n                                            <List renderItem={renderLesson}>{[nextVideo]}</List>\r\n                                        )}\r\n                                        {(otherLessons && otherLessons.length > 0) && (\r\n                                            <React.Fragment>\r\n                                                <h3>Другие занятия</h3>\r\n                                                <List\r\n                                                    renderItem={renderLesson}>\r\n                                                    {otherLessons}\r\n                                                </List>\r\n                                            </React.Fragment>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </PageContent>\r\n                </Page>\r\n            );\r\n        } else\r\n            return <ErrorPage errorCode={404} message=\"Урок не найден\" />;\r\n    } else {\r\n        return (\r\n            <Page\r\n                location={location}>\r\n                <PageLoadingPlaceholder/>\r\n            </Page>\r\n        );\r\n    }\r\n};\r\n\r\nexport default LessonPage;\r\n","import React from 'react';\r\nimport _ from 'lodash';\r\nimport { Switch, Route } from \"react-router-dom\";\r\nimport {MY_COURSES} from \"data/test_data\";\r\nimport {LEARNING_STATUS} from \"definitions/constants\";\r\nimport CatalogPage from \"./catalog-page\";\r\nimport CoursePage from \"./course-page\";\r\nimport LessonPage from \"./lesson-page\";\r\n\r\nexport default class MyCourses extends React.Component {\r\n    state = {\r\n        courses: _.sortBy(MY_COURSES, (course) => course.status === LEARNING_STATUS.finished ? 1 : 0)\r\n    };\r\n\r\n    render() {\r\n        const {match} = this.props;\r\n        const {courses} = this.state;\r\n        return (\r\n            <Switch>\r\n                <Route path={`${match.path}/:courseId/:lessonId`} render={(props) => (\r\n                    <LessonPage catalog={courses}\r\n                                {...props}/>\r\n                )}/>\r\n                <Route path={`${match.path}/:id`} render={(props) => (\r\n                    <CoursePage\r\n                        catalog={courses}\r\n                        path={match.path}\r\n                        {...props}/>\r\n                )}/>\r\n                <Route exact path={`${match.path}`} render={(props) => (\r\n                    <CatalogPage catalog={courses} {...props}/>\r\n                )}/>\r\n            </Switch>\r\n        )\r\n    }\r\n}\r\n","import React from 'react';\r\nimport {CSSTransition} from \"react-transition-group\";\r\nimport {BrowserRouter as Router, Redirect, Route, Switch, useHistory, useLocation} from \"react-router-dom\";\r\nimport Header from \"./Header\";\r\nimport SideBar from \"./SideBar\";\r\nimport Page from \"./Page\";\r\nimport {useRefValue} from \"hooks/common\";\r\nimport GlobalStore, {useUser} from \"store\";\r\n\r\nimport Login from \"./pages/login\";\r\nimport Account from \"./pages/account\";\r\nimport Teachers from \"./pages/teachers\";\r\nimport Shop from \"./pages/shop\";\r\nimport MyCourses from \"./pages/courses\";\r\n\r\nimport 'sass/index.scss';\r\nimport ErrorPage from \"./ErrorPage\";\r\n\r\nfunction useLocationChangeEffect(effect) {\r\n    const history = useHistory();\r\n    React.useEffect(() => {\r\n        return history.listen(effect);\r\n    }, [history, effect]);\r\n}\r\n\r\nfunction useScrollToTop() {\r\n    const [getPrevPath, setPrevPath] = useRefValue(useLocation().pathname);\r\n    const onLocationChange = React.useCallback((location, action) => {\r\n        console.log('update');\r\n        if (getPrevPath() !== location.pathname && action !== 'POP') {\r\n            window.scrollTo(0, 0);\r\n        }\r\n        setPrevPath(location.pathname);\r\n    }, [getPrevPath, setPrevPath]);\r\n    useLocationChangeEffect(onLocationChange);\r\n}\r\n\r\nfunction useForceTrailingSlash() {\r\n    const location = useLocation();\r\n    const history = useHistory();\r\n    const path = location.pathname;\r\n    if (path.slice(-1) !== '/') {\r\n        history.replace(path + '/');\r\n    }\r\n}\r\n\r\nfunction useSideBarState() {\r\n    const [isSideBarOpened, setSideBar] = React.useState(false);\r\n    const toggleSideBar = React.useCallback(() => {\r\n        setSideBar(opened => !opened);\r\n    }, []);\r\n    return [isSideBarOpened, toggleSideBar];\r\n}\r\n\r\nconst onLocationChange = (location, args) => {\r\n    console.log(`- - - location: '${location.pathname}'`, args);\r\n};\r\n\r\nconst DefaultRedirect = () => <Redirect to=\"/courses\"/>;\r\n\r\nfunction App() {\r\n    // routing effects\r\n    useForceTrailingSlash();\r\n    useScrollToTop();\r\n    useLocationChangeEffect(onLocationChange);\r\n\r\n    const [isSideBarOpened, toggleSideBar] = useSideBarState();\r\n    const {user, userInfo} = useUser();\r\n    const showSidebar = user !== null;\r\n    return (\r\n        <div className=\"app\">\r\n            <Header\r\n                onMenuButtonClick={toggleSideBar}\r\n                user={user}\r\n                sidebar={showSidebar}/>\r\n            <CSSTransition\r\n                in={isSideBarOpened}\r\n                timeout={200}\r\n                classNames={App.layoutAnimationClassNames}>\r\n                <div className=\"layout\">\r\n                    <React.Fragment>\r\n                        {showSidebar && (\r\n                            <SideBar\r\n                                accountRoles={user ? (userInfo ? userInfo.roles : undefined) : null}\r\n                                onMenuClose={toggleSideBar}/>\r\n                        )}\r\n                        <Switch>\r\n                            <Route path=\"/index.html\" component={DefaultRedirect}/>\r\n                            <Route exact path=\"/\" component={DefaultRedirect}/>\r\n                            <Route path=\"/login\" component={Login}/>\r\n                            <Route path=\"/courses\" component={MyCourses}/>\r\n                            <Route path=\"/shop\" component={Shop}/>\r\n                            <Route path=\"/teachers\" component={Teachers}/>\r\n                            <Route path=\"/account\" component={Account}/>\r\n                            {/*<Route path=\"/:section\" component={Page}/>*/}\r\n                            <Route component={ErrorPage}/>\r\n                        </Switch>\r\n                    </React.Fragment>\r\n                </div>\r\n            </CSSTransition>\r\n        </div>\r\n    );\r\n}\r\n\r\nApp.layoutAnimationClassNames = {\r\n    enter: 'sidebar-opened',\r\n    enterActive: 'sidebar-opened',\r\n    enterDone: 'sidebar-opened',\r\n    exit: 'sidebar-hiding',\r\n    exitActive: 'sidebar-hiding'\r\n};\r\n\r\nexport default () => (\r\n    <Router basename={process.env.REACT_APP_BASE_URL}>\r\n        <GlobalStore>\r\n            <App/>\r\n        </GlobalStore>\r\n    </Router>\r\n);\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import 'definitions/polyfills';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from 'components/App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","module.exports = __webpack_public_path__ + \"static/media/dummy_poster.f51c6af6.jpg\";"],"sourceRoot":""}